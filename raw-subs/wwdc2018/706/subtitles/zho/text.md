# Accessing Health Records with HealthKit

## Summary
HealthKit provides a consolidated repository for a variety of data including health records containing information such as lab results, immunizations, and medications downloaded directly from institutions. Discover new health records classes and types created to provide easy access to high-level record types without preventing access to the underlying raw data.  Learn new authorization techniques that allows your app to access health record data for analysis and presentation in a manner that respects your customer's privacy.

## Info
* Frameworks
* WWDC 2018 - Session 706 - iOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=7) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=21) [&gt;&gt; 下午好 我叫 Jason Morley](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=29) [是 Apple Health 团队的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=31) [一名软件工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=32) [这是我的同事 Peyton](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=34) [我想花些时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=36) [来向你们介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=38) [我们今年在 iOS 12 里加入的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=39) [一项激动人心的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=41) [利用 HealthKit 获得健康记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=44) [在今年的早些时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=46) [我们在 iOS 11.3 上介绍了 健康记录和健康](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=52) [用户可以与他们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=55) [医疗机构建立连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=56) [并且安全地下载他们的健康记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=58) [并且安全地下载他们的健康记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=58) [以便于快速访问和保管](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=60) [我们从多个医疗机构那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=64) [收集数据并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=67) [呈现一个允许用户搜索和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=68) [显示像实验值和参考范围这种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=70) [真的能够帮助用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=72) [去更好地了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=75) [他们健康数据的重要细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=78) [的时间轴](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=79) [截止至今 我们已经为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=85) [超过 500 家美国医院和诊所](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=86) [提供了支持 共覆盖 50 多个医疗机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=88) [并且我们还在不断地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=91) [继续增加更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=93) [当然了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=99) [如果没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=100) [Health Level Seven 组织](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=101) [的杰出劳动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=103) [和他们的快速医疗的交互操作能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=106) [或 FHIR 和智能健康 IT 项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=108) [的帮助的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=110) [这将是不可能实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=113) [对我们来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=117) [这一切都是从健康出发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=119) [这一切都是从健康出发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=119) [我们和医疗机构建立了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=122) [安全的连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=123) [并从 FHIR 直接将用户的健康记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=127) [下载到他们的 iOS 装置上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=129) [从这里我们将它安全地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=132) [储存在 HealthKit 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=134) [并跨越多个机构汇总数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=138) [从现如今的 iOS 12 开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=141) [我们提供允许你访问这个数据的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=144) [并且让你能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=146) [在你的 App 中使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=148) [首先 我来介绍一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=156) [我们新加的用来支持这个功能的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=156) [新的样本类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=158) [然后 我们便能够看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=161) [你是如何授权自己的 App 并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=162) [查询数据的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=164) [然后 我将简短介绍一下 FHIR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=168) [并且向你们展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=169) [一下它有多少种可能性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=171) [最后 我们可以花些时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=174) [来思考一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=176) [在这个敏感的领域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=178) [在这个敏感的领域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=178) [你该如何保护你的用户隐私](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=180) [好了让我们进入正题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=185) [如果你之前使用过 HealthKit 的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=188) [你可能会对 HKSampleType 和它的子类很熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=190) [它们是像分组一样的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=195) [例如 QuantityType 这种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=196) [由一个单一数值代表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=200) [的分组数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=202) [像步数和心率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=205) [然而 CategoryType 分组数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=208) [是以枚举来判断其特征的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=210) [像睡眠分析这种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=212) [我只是躺在床上 还是睡着了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=214) [我的月经流量如何等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=217) [并且 为了支持健康记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=220) [我们引入能够将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=223) [你在 Health 中看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=226) [像状态和药方这种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=228) [健康记录分类的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=230) [HKClinicalType](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=232) [在每个样本类型中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=237) [不同的数据类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=238) [不同的数据类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=238) [由一个类型识别码来进行区分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=240) [HKClinicalType 识别码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=243) [通过相应的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=246) [健康记录和健康的类别来识别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=248) [相应的临床类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=253) [我们会有过敏等一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=254) [可能仅仅是短期才会出现的状况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=258) [例如怀孕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=260) [或者是一些经常性的状况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=262) [比如第二类型糖尿病 免疫接种 实验结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=264) [这些可能是为了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=269) [我每年的身体检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=272) [而进行的血糖测量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=273) [药物 流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=275) [诊断过程或是手术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=280) [生命体征中像这种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=283) [血压或体重的测量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=286) [除了这些样本类型和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=290) [样本类型标识符以外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=292) [我们还引入一个叫做 HKClinicalRecord 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=294) [新的 HK 样本子类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=296) [如果你对于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=301) [在 HealthKit 中操作这些样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=302) [并不熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=304) [我们可以深入探讨这个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=306) [并且我将在最后介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=308) [一些关于它的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=310) [如果你打算使用 HKClinicalRecord 的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=312) [那么 这里有一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=314) [你需要了解的关键属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=316) [关于临床类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=318) [我们之前也探讨过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=321) [它允许你去确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=323) [一个记录的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=326) [健康记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=327) [就像免疫接种一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=329) [我们提供了一个名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=332) [它是一个我们在 Health 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=336) [用来向用户展示健康记录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=338) [一个字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=340) [我们从 FHIR 资源中把它选择出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=342) [并且你能够将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=343) [你的 App 之前的经历](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=345) [与用户所熟悉的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=347) [绑定在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=348) [你可以从这个实验结果中看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=352) [有许多可选择的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=355) [表示方法和名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=356) [包括 LOINC 编码系统里的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=358) [包括 LOINC 编码系统里的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=358) [一个编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=362) [这是一个医疗信息界的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=364) [行业标准化参考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=365) [并且它是 FHIR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=366) [进行观测所需要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=369) [从这里你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=371) [我们已经采用 LOINC 编码并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=374) [执行了一个查找去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=376) [提供一个我们将为你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=378) [呈现的一个规范名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=380) [最终 我们提供完整的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=386) [FHIR 资源的访问端口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=387) [但是从 HKClinicalRecord 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=389) [你还可以得到很多益处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=390) [所以我现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=392) [先把它放在一边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=393) [稍后我们再回来讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=395) [像所有的健康数据一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=401) [数据的来源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=403) [是非常重要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=405) [你想要知道这个健康数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=408) [是从哪里来的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=410) [并且和 HealthKit 的其他部分一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=411) [我们使用 HKSample 的超类 HKSource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=414) [来对其进行建模](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=416) [来对其进行建模](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=416) [我们将名称设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=422) [医疗机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=424) [跟我们分享的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=426) [并且我们提供了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=429) [包标识符 它是一个能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=430) [使该医疗机构实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=432) [跨多个用户和多个设备登录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=434) [稳定的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=436) [所以现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=443) [我们已经看到了这个新的样本类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=444) [让我们来看看 你如何授权 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=445) [并查找数据的吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=447) [可以看到 这里有个装有丰富的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=457) [医疗记录的庞大信息库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=459) [并且我们认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=461) [这对你来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=464) [是一个能够为你的用户提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=465) [关于他们的健康数据的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=467) [绝佳体验的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=469) [千载难逢的机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=471) [但是当然了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=472) [健康记录也含有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=476) [令人难以置信的敏感信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=478) [令人难以置信的敏感信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=478) [用户的健康记录或许会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=480) [包含着他们正在服用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=482) [药物的详细信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=485) [或者是他们每天的基本生活](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=486) [伴随着的一些状况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=487) [这可能是他们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=490) [不愿意与他们亲近的朋友或家人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=492) [所分享的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=493) [并且伴随着用户和医疗机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=496) [之间的交流 这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=498) [会随着时间的推移而发生变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=500) [他们或许会得到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=502) [关于这个状况的新的诊断](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=505) [所以 为了能够更好地帮助我们的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=507) [去理解和管理这些数据的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=508) [访问 我们引入了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=511) [一个具体针对健康记录的授权流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=513) [当你的 App 申请授权时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=518) [我们会提供一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=519) [新的针对特定临床类型的许可表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=521) [首先 我们告知用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=526) [在 App 上分享数据意味着什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=529) [并且告知用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=531) [它有多么敏感](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=534) [因为我们要使用这个新的授权流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=535) [所以无论何时 只要你申请授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=537) [你需要保证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=539) [你需要保证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=539) [你的授权申请时间足够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=541) [以确保你的用户能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=543) [充分地理解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=545) [这个新的流程的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=546) [在这之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=552) [我们允许用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=555) [从你已经提出请求的类别中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=557) [选择他们想要和你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=558) [实现共享的数据类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=560) [我们还提出了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=563) [新的目标字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=565) [和在 App 解释说明部分中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=568) [你的 App 的隐私政策](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=570) [这是一个去向用户解释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=571) [你为什么需要去访问数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=573) [你将用它来做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=575) [和你将如何保护他们的数据的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=577) [千载难逢的好机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=579) [你一定要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=583) [你的要求和你的需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=585) [是成比例的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=586) [用户真的会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=589) [很惊讶并且担心是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=590) [他们在这里所看到的数据类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=593) [并不属于你的 App 的主要功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=595) [并且最终会因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=597) [并且最终会因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=597) [用户和他们的医疗机构的互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=600) [而造成数据会随着时间发生变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=602) [我们正在引入一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=603) [新的方法来控制与你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=606) [共享新数据的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=609) [我们默认会去询问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=611) [之前每一次共享的每一个数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=613) [这意味着每当新的数据可用时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=618) [我们可能需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=619) [提交新的许可表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=622) [所以每当你需要查询数据的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=625) [你都应该去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=627) [申请相应的权限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=629) [好 那么我该怎样开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=635) [并且请求权限呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=637) [这个流程看上去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=640) [会让那些之前用过 HealthKit 的人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=642) [觉得很熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=643) [首先 我需要配置这个项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=645) [在进行授权请求后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=650) [最后查询数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=654) [为了配置你的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=656) [为了配置你的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=656) [你需要在启动 HealthKit 以后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=660) [在 Xcode 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=662) [添加一个新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=665) [健康记录功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=671) [然后你在你的 Info.plist 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=673) [添加一个新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=675) [健康记录用法说明字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=676) [再次说明 这是你的好机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=680) [去向用户解释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=682) [你为什么需要得到数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=684) [和你将利用它来做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=686) [完成上述步骤后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=690) [你可以请求权限了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=691) [我在这里定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=694) [我希望访问的类型 状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=696) [免疫接种和药物治疗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=700) [然后你就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=707) [在健康中心中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=708) [调用授权请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=710) [请确保已经处理了所有错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=712) [在这之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=714) [你便能够进行查找了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=717) [你应该知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=718) [你应该知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=718) [为了维护用户的隐私](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=720) [我们不会向你透露](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=722) [哪个分类是用户已准许访问的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=725) [或是已拒绝访问的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=727) [现在 让我们来说查询](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=734) [因为 HKClinicalRecord 是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=734) [在 HealthKit 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=737) [你可以很好地利用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=739) [所有的现有样本查询基础设施的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=741) [HKSample](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=742) [SampleQuery](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=744) [AnchoredObjectQuery 和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=745) [ObserverQuery 都将正常工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=747) [并且如果你的用户已经准许](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=749) [后台连续访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=751) [delivery 也将正常工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=753) [再次说明 你定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=758) [你希望查找的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=760) [我们在这里正在创建一个查找示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=762) [并且你可以在健康中心执行它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=765) [以上就是最基本的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=773) [授权流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=774) [但我们已经介绍过了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=775) [一些针对于健康记录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=777) [特定的额外机制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=779) [特定的额外机制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=779) [对于授权 我们有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=781) [新的 API 获取请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=786) [它允许你去确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=788) [我们是否去向用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=789) [展示许可表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=791) [这给了你一个机会去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=794) [确定你的用户是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=798) [需要去看这个许可表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=799) [并且选择性地展示一个 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=801) [以便在授权前给他们提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=803) [更多的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=806) [为了做到这一点 你可以去健康中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=811) [访问授权请求状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=813) [处理错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=815) [并且如果请求状态是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=819) [可以请求的话 你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=822) [选择在请求权限之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=824) [去展示 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=827) [现在 可能也会有一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=832) [你的 App 所需要访问的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=834) [数据类型 来保证安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=836) [又或者你如果有一个需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=838) [又或者你如果有一个需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=838) [获得全面的一系列类型的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=841) [研究型 App 来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=844) [避免有误差的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=846) [我们在 Info.plist 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=850) [有一个新的允许你去指定这些类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=853) [所必需的键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=855) [并且如果用户没有准许给这些类型授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=858) [可它们仍然在的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=860) [我们将返回一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=862) [新的所需类型错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=864) [这能够让你确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=867) [如何去表现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=868) [去选择性地去向用户解释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=871) [如果你没有这个数据的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=872) [你就不能够继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=873) [你可以通过在你的 Info.plist 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=879) [添加新的所需的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=880) [阅读权限密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=882) [来实现它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=883) [在这里我说我需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=885) [过敏 当前状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=887) [和免疫接种的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=889) [然后你在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=891) [授权请求中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=894) [处理新的错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=896) [你要确保能够明智地使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=901) [并且尽量不去限制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=902) [基于你可访问数据的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=905) [App 的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=908) [你真的想要确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=909) [无论你的用户想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=911) [分享多少数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=913) [都有尽可能多的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=914) [能够从你的 App 中受益](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=916) [所以这是一个完整的授权流量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=922) [并且这里有一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=923) [我希望去关注的点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=925) [首先 你应该确保无论何时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=928) [每一次你想要访问数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=930) [你都需要去请求权限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=932) [尤其是现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=934) [因为用户可能希望每次有新数据进入时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=937) [都查看这个许可表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=939) [因此我们可能 要在每次你需要查找的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=941) [去呈现这个许可表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=944) [你还应该确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=948) [这个请求只会访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=949) [你需要的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=951) [并且最后 你应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=952) [通过充分利用新的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=956) [来为用户提供更好的使用环境](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=958) [也为你自己](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=959) [也为你自己](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=959) [提供充足的时间来验证请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=962) [我想要把](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=968) [下面的内容交给我的同事 Peyton](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=968) [让大家来看一下 他能够用我说的这些新改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=971) [在他的 App 里做些什么 谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=972) [&gt;&gt; 谢谢你 Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=976) [我正在忙于一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=977) [为登山者们的下一次登山](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=978) [进行训练的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=980) [我已经得到一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=981) [包括我的所有用户走路 徒步旅行和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=984) [爬楼梯训练的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=986) [HealthKit 动力视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=987) [现在 经过广泛的市场调查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=988) [我已经确定了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=991) [那些去登山的登山者们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=993) [是去山上旅行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=995) [而旅行者应该知道他们的疫苗接种状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=998) [因此 通过未来发展的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1000) [传递特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1002) [登山者们应该知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1003) [他们的疫苗接种状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1005) [所以 我将帮助我的用户们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1006) [我已经开始进行一项新的实验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1009) [一个免疫仪表板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1010) [所以 请允许我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1013) [点击一下这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1014) [这是我的免疫仪表板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1015) [首先我将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1018) [首先我将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1018) [为我的用户展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1020) [他们目前的疫苗接种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1022) [并且我将用这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1024) [HKClinicalRecords 来显示名称属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1025) [我已经在我的项目中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1028) [添加了健康记录功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1029) [并且我已经创建了一个目标字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1032) [来告诉我的用户们我要如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1034) [使用他们的免疫接种记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1036) [现在是时候来展示我的仪表板了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1038) [所以现在 我正在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1041) [ImmunizationsViewController 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1042) [使用这个面板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1044) [在 HealthKit 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1045) [每次你的用户进入要用到 HealthKit 的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1048) [的部分时都要请求权限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1049) [是非常好的一个做法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1051) [所以对于这个 App 来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1054) [ViewWillAppear 是个很棒的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1056) [在这里 首先我需要说明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1058) [我对于免疫记录样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1063) [很感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1064) [接下来 调用我的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1066) [健康中心的 requestAuthorization 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1070) [在回调中 我将检查是否成功](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1073) [并且恰当地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1074) [去处理错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1076) [最终 一旦我未经授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1079) [最终 一旦我未经授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1079) [我将去调用这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1082) [我即将执行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1083) [查询免疫的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1084) [在这个免疫接种查询中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1086) [我将创建一个示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1088) [我将去遍历所有的返回样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1089) [并且我将让](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1092) [每一个样本的显示名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1093) [都通过我的数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1095) [好了让我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1097) [在这里 我已经得到了我的查询样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1102) [并且我正在使用人类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1104) [样本记录类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1105) [不需要足够确定 因为我想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1108) [所有用户的免疫接种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1110) [并且同样没有限制因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1112) [我想要得到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1115) [所有用户的免疫接种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1116) [没有排序描述符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1117) [这些样本以什么顺序返回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1120) [对我来说没有关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1121) [并且我要根据这来检查结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1123) [和看是否存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1126) [没有被合适处理的错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1128) [接下来 我要遍历一遍样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1130) [并且我将根据显示名称让](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1132) [这些样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1135) [通过我的数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1137) [有了我的数据源里的这些名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1140) [便是时候去主队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1142) [调用这个我之前写的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1143) [重加载的 UI 方法了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1146) [最后 我要在健康中心中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1149) [执行我的这个样本查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1152) [以上就是整个过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1155) [现在让我们来建立并运行它吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1156) [所以 这是我的训练日志](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1161) [我将要点击我的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1162) [免疫仪表板选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1163) [我看到一个新的健康记录授权表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1165) [它向我的用户解释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1166) [我的 App 可能会如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1168) [使用用户的健康记录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1171) [我要点击继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1174) [然后在这里 我的用户可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1177) [准许或拒绝](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1179) [他们觉得合适的类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1181) [这是我早些时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1182) [在我的 Info.plist 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1184) [伴随着一个我的 App 隐私政策的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1185) [所定义的目标字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1187) [现在用户必须明确地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1189) [切换每一个单一类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1192) [没有一个可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1193) [一次性打开所有类别的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1195) [所以 出于这次演示的目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1197) [我打算启用免疫接种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1199) [我打算启用免疫接种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1199) [并且去分享现在的记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1200) [至于未来的记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1203) [我将把它设成默认为在分享前进行询问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1205) [然后我点击完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1206) [然后 就像这样 我拥有了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1209) [我所有用户的免疫接种清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1212) [所以 这只是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1213) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1215) [所以这只是使用显示名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1221) [但是还有很多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1222) [包含在拥有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1223) [临床记录的 FHIR 资源当中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1224) [所以 为了让你了解更多关于 FHIR 的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1227) [我将把接下来的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1229) [交还给 Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1230) [&gt;&gt; 谢谢你 Peyton](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1231) [好了 Peyton 刚才给我们展示了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1232) [在我们的 App 中 我们如何去申请权限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1235) [如何查找数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1238) [以及如何在 HKClinicalRecord 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1241) [利用新的显示名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1243) [以用户们所熟悉的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1245) [去显示信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1247) [所以 现在让我们来看看 FHIR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1253) [以及你能够用这种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1256) [丰富的数据格式来做些什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1257) [丰富的数据格式来做些什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1257) [用户在一生中会与多个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1262) [医疗保健机构进行交流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1264) [并且它们经常运用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1266) [不同的电子健康记录系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1268) [而这些系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1270) [并不总是以同样的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1273) [来表示数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1275) [这便使得交互操作性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1277) [变得非常困难](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1279) [所以为了解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1281) [医疗团体为了一个叫做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1285) [Argonaut 的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1286) [而聚集了起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1287) [这个项目利用 FHIR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1290) [一个灵活的表示健康记录的 JSON 表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1293) [并且 [ 音质不清晰 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1296) [如智能授权指南中所定义的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1298) [允许连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1300) [与医疗机构保持持续性连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1303) [并且允许数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1305) [在一个共同格式下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1307) [跨越多个相关的机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1309) [被下载下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1311) [FHIR 本身模拟了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1314) [从过敏不耐症到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1318) [从过敏不耐症到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1318) [视觉处方的庞大的健康数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1321) [并且它将这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1324) [组成不同的数据类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1328) [我们把这些数据类型叫做资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1330) [每个资源都有一个资源类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1333) [并且每个健康数据也](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1334) [都有一个资源类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1336) [如今 我们正在选择八个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1341) [最常见的资源类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1344) [并且这些都是在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1346) [Argonaut 项目中定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1347) [我们将它们分成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1349) [我们之前看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1351) [七种不同的临床类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1353) [你会发现我们将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1355) [得到的观测数据分成实验结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1356) [和基于分类的生命特征](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1359) [并且我们将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1361) [多种药物资源类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1365) [归入药物类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1367) [因此 FHIR 将数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1372) [表示为一个 JSON 字典](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1374) [并且有一些关键属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1376) [会在所有的 FHIR 资源当中表现出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1378) [会在所有的 FHIR 资源当中表现出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1378) [比如资源类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1381) [在这里我们看到的是一个观测数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1384) [并且它告诉我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1385) [在健康的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1388) [这是一个实验结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1389) [还是一个生命特征](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1392) [我们也有一个代表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1394) [所有资源类型的 ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1397) [这是一个属于这个资源的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1400) [独一无二的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1402) [但是你应该注意它只是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1404) [在这个医疗机构中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1406) [这个资源类型里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1407) [是独一无二的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1409) [FHIR 的最基本的一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1415) [建筑模块就是编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1416) [这允许我们对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1420) [外部编码系统中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1423) [唯一标识符或者编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1426) [能有一个参考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1428) [有大量的在 FHIR 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1429) [指定的编码系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1430) [你可以用这些来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1432) [找到更多在医学记录中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1435) [所涉及的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1437) [或是跨多个医疗机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1438) [或是跨多个医疗机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1438) [相关联的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1441) [项目信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1443) [在这里 我们实际上是在看一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1445) [类别编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1449) [它告诉我们 这是一个实验结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1452) [当然这里还有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1455) [针对于正在被测量的内容的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1458) [这是在 LOINC 编码系统中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1462) [定义的血糖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1465) [它能够使用这段代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1467) [并且在 LOINC 数据库中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1469) [查找能够替代的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1471) [和更多的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1472) [当然了这是一个观测](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1474) [所以我拥有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1478) [被观察到的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1479) [这是每分升 60 毫克](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1481) [并且你会注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1482) [即使单位都被编码过了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1484) [我对于正在发生的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1486) [有一个非常全面的了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1489) [FHIR 资源有很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1494) [额外的数据元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1496) [并且我鼓励你们去看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1499) [并且我鼓励你们去看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1499) [Argonaut 项目的文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1501) [来了解更多的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1502) [我将在最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1504) [详细介绍这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1506) [在 HealthKit 中我们建模了一个 FHIR 资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1508) [来作为 HKFHIRResource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1510) [我们提供了一些关键属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1513) [比如数据和对于完整的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1515) [原始数据的访问通道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1518) [我们表示出像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1521) [资源类型和标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1523) [这样的常见元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1526) [你可以利用可编码 Swift 或](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1527) [JSON 序列化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1532) [来访问这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1534) [在这里 你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1535) [我已经定义了我自己的可编码结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1537) [我的可编码观测](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1539) [并且我正在用它来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1542) [寻找之前我们看到的量化值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1543) [你可以认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1545) [数据结构是正确的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1549) [因为我们只通过 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1550) [分享有效的 FHIR 资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1553) [我们也引进了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1558) [更为确定的信息 来使得你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1559) [更为确定的信息 来使得你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1559) [更好地操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1560) [HKClinicalRecord](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1561) [我们有一个允许你去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1563) [按资源类型查找的推断](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1565) [在这里我在查找处方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1568) [或者是 FHIR 的医疗订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1570) [我们同样也有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1575) [允许你去通过其来源 资源类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1576) [以及标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1579) [来获得唯一标识记录的推断](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1581) [这会是非常有用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1583) [因为 FHIR 资源能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1585) [参考其他的 FHIR 资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1587) [例如 一个药物可能会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1589) [参考它要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1590) [治疗的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1592) [现在 这里有一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1597) [当你去操作 FHIR 时你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1598) [知道的额外的事项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1599) [首先 FHIR 资源可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1602) [包含他们自己的日期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1604) [举个例子 处方中可能会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1607) [包含处方的订单数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1609) [而身体状况中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1610) [可能会包含开始日期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1613) [消减日期以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1614) [首次检查时的处方日期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1616) [因此 你应该直接使用 FHIR 资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1619) [因此 你应该直接使用 FHIR 资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1619) [去为每一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1621) [资源类型来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1623) [访问这些日期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1625) [在 HKSample 的超类中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1626) [可获得的开始日期和截止日期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1628) [被设置为我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1629) [第一次在 Health 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1631) [加入那个资源的日期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1634) [当你去判断一个独一无二的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1638) [健康记录时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1640) [你应该去使用源代码 资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1641) [类型和标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1643) [这允许你在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1644) [医疗机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1646) [更新的过程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1647) [识别健康记录的整个生命周期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1649) [并且最终 你应该知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1652) [就数值精确度而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1656) [FHIR 和 JSON](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1659) [并不完全统一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1661) [FHIR 将小数点后面的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1663) [数字的个数赋予了重要性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1665) [并且当你使用可编码 Swift 或](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1667) [JSON 序列化时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1668) [它可能会丢失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1671) [如果对于你的 App 来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1673) [这些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1674) [非常重要的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1677) [非常重要的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1677) [那么可编码 Swift和 JSON 序列化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1680) [或许并不是很合适的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1682) [就此而言 我很乐意让](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1684) [Peyton 回来继续他的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1686) [来让我们看一下通过这个新的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1688) [他都能做些什么 [ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1690) [&gt;&gt; 谢谢你 Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1699) [那么回到之前我一直在从事的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1700) [免疫接种仪表板上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1701) [我正在使用 HealthKit 去获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1703) [我的用户的疫苗接种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1705) [但是现在 对于用户来讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1707) [他们很难知道 他们有什么疫苗接种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1708) [以及他们可能会需要接种什么疫苗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1710) [所以我将会通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1711) [一个疫苗接种清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1714) [来解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1716) [用户们可以看到用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1717) [通俗语言说明的 他们的疫苗简介](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1719) [要填充这个表的话 我需要知道的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1723) [这个组合疫苗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1724) [增加抵抗水痘和 MMR 的免疫力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1726) [卫生机构讲着不同的语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1731) [所以我不能仅仅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1734) [依赖于名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1735) [所以 这就是 FHIR 的互操作性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1738) [所扮演的角色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1739) [所扮演的角色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1739) [FHIR 提供了一种方式去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1741) [使用预定义代码而不是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1743) [自然语言 来说明事物](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1745) [所以 在看过 FHIR 文件以后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1749) [这便是我想到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1751) [能够用来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1753) [识别水痘疫苗的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1754) [首先 我将从 JSON 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1758) [得到免疫记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1760) [我将把它反序列化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1763) [并在 CVX 系统中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1765) [提取疫苗代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1767) [CVX 是一种在免疫接种中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1769) [常用的编码系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1771) [还有很多其他的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1772) [针对不同医学领域的编码系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1773) [最后 我将把我在免疫接种记录中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1776) [发现的 CVX 码和我所知道的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1778) [能够增强对水痘的免疫力的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1780) [疫苗清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1782) [进行比较](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1784) [如果它们互相匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1785) [我会在我的 UI 中 水痘的旁边做一个标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1787) [所以 接下来让我们来讨论一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1790) [免疫记录 JSON](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1792) [这个结构以一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1798) [资源类型免疫接种开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1799) [资源类型免疫接种开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1799) [这里有一个疫苗代码对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1802) [包含一个数组的编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1807) [也许会出现多个编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1810) [所以我需要去通过系统查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1813) [来找到 CVX](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1816) [在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1818) [第一个系统是 NDC](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1819) [所以我往下找直到看到 CVX](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1823) [就这样我不断查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1825) [然后我就会看见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1827) [我有 MMRV](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1829) [这就是这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1831) [免疫记录 JSON 的结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1834) [现在是时候来实践了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1837) [所以我们现在回到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1839) [我的免疫视图控制器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1841) [我已经提前完成了一些工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1843) [来使用这个清单的 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1844) [并且我用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1847) [showChecklist 属性实例化了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1851) [那么现在 是时候来用数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1852) [来填充我的清单了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1857) [现在我在这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1859) [现在我在这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1859) [免疫方法的查询中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1860) [当我对我的用户样本进行遍历时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1862) [我将在一个叫做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1864) [matchCodedVaccine 的新方法中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1866) [添加一个调用 并且如果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1867) [遇到的样本是 FHIR 资源的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1869) [我将会通过它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1870) [好了现在让我们来实践吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1872) [在这里 我在资源中的 matchCodedVaccine](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1877) [并且我需要去做的是对这个 FHIR 资源数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1878) [进行反序列化操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1880) [取出接种代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1882) [查找 CVX](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1884) [并且将它和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1886) [不同疾病的 CVX 代码进行比较](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1889) [在如何选择反序列化 FHIR 资源上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1892) [我有很大的自由](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1895) [所以今天 我将使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1897) [可编码 Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1899) [我需要为我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1900) [真正感兴趣的关键字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1903) [去定义一个可编码量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1904) [好了我已经操作完了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1907) [每个免疫资源有一个疫苗代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1909) [每个疫苗代码有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1911) [编码数组并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1914) [每个疫苗编码有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1917) [每个疫苗编码有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1917) [系统和一个代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1921) [有了这些 我实例化一个 JSON 解码器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1922) [并且用它来将一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1925) [FHIR 资源数据解码成一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1928) [免疫资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1930) [剩下的就是去对每个编码进行遍历](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1932) [检查一下看是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1936) [这个系统是 CVX](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1939) [然后将代码传递给此方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1944) [好把它标记在数据源中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1946) [这个方法的任务就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1948) [将代码和包含每个疾病的代码的清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1950) [相比较 然后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1953) [如果在 UI 中发现了匹配标示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1954) [说明它是我们已发现的疾病](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1958) [所以 我要用它来建立](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1961) [来运行并查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1964) [我的免疫清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1965) [所以现在 我在我的训练日志中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1967) [我要去点击免疫接种键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1970) [就像这样 通过几行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1973) [我便拥有了一个免疫清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1975) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1977) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1977) [这就是一个用 FHIR 来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1982) [解决问题的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1984) [现在我将把时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1986) [留给 Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1991) [Jason [ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=1993) [&gt;&gt; 谢谢你 Peyton](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2000) [所以 Peyton 已经向我们展示了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2000) [我们该如何运用丰富的 FHIR 数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2005) [和如何合理地利用我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2008) [所提供的编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2009) [这真的为我们的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2011) [在他们的健康记录方面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2013) [提供了非常有意义的全面的使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2014) [现在 让我们来想一想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2019) [在这个领域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2021) [你该如何保护你的用户的隐私](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2023) [正如你所看到的一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2027) [这是一个令人难以置信的敏感数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2028) [我们已经从头开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2031) [建立了隐私](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2033) [并与医疗机构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2037) [建立了直接的安全连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2039) [建立了直接的安全连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2039) [能够直接从用户的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2041) [iOS 设备上下载数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2044) [把它安全地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2046) [存储在 HealthKit 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2048) [并且围绕着这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2049) [数据的访问端口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2051) [提供了全面的管理工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2053) [你的用户们将期望你去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2056) [以同样的关心和关注程度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2058) [去对待他们的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2060) [你在这里做的每一个选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2065) [都将直接影响到每个用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2067) [这可能是一个积极的影响](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2071) [并且这就是我们选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2073) [去提供这个 API 的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2075) [但是 这个影响也可能是负面的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2076) [如果用户觉得这个数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2081) [不受他们的控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2082) [或更糟的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2085) [数据会未经他们同意被分享出去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2087) [你可以对你的用户表现出尊重](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2089) [并且通过给他们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2090) [提供关于数据的清晰的政策](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2092) [去告诉他们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2095) [你要用这个数据做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2096) [来建立一段可信的关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2099) [来建立一段可信的关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2099) [从你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2102) [你的目标字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2103) [你的隐私政策开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2105) [到你处理该数据时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2108) [的每一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2109) [都需要这种可信的关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2112) [举个例子 你应该确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2115) [你为你的用户提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2117) [你是如何管理他们的数据的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2120) [你应该发布清楚的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2123) [保留政策 并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2124) [你应该给他们提供工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2127) [去允许他们删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2128) [他们不再想要与你分享的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2130) [最终 你应该确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2132) [你请求的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2136) [和你所要用到的是成正比的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2139) [你永远都不该去要求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2142) [比你所需要的更多的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2143) [我鼓励大家去看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2149) [星期四下午 4 点的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2150) [隐私对话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2151) [通过更好的隐私建立更好的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2153) [它包含了整个生态系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2155) [所以这是个 去发现更多信息的好机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2158) [所以这是个 去发现更多信息的好机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2158) [所以 我们已经看到了我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2161) [早就介绍过的支持健康记录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2162) [新的样本类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2164) [我们明白如何在我们的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2166) [配置授权和隐私字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2170) [以请求权限和查找数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2172) [希望我所展示的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2176) [足以激起你的兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2179) [去探索和发现更多关于 FHIR 的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2180) [并且我们已经看到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2184) [为了帮助用户们保护他们的隐私](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2186) [你还能做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2188) [我们为我们的开发团队](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2196) [所创造的精彩的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2197) [和当它访问用户的健康数据时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2199) [赋予用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2201) [真正的权力 而感到惊喜](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2204) [这是一个我们基于健康](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2207) [和 HealthKit 的探究](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2209) [并且它也是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2211) [我们对于 ResearchKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2213) [和 CareKit 的延续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2216) [今天 伴随着健康记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2217) [和 HealthKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2219) [和 HealthKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2219) [我们非常激动地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2222) [跟大家一起探讨这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2224) [我们已经迫不及待地想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2226) [你们能够开发出什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2228) [你可以从我身后的 URL 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2233) [和我们拥有的一些实验室中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2235) [找到我之前说过的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2236) [在这次谈话以后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2241) [会有一个健康和健身实验室](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2242) [我们会在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2244) [与你一起体验这个新的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2245) [我们的同事 Anherika 和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2247) [Kareem 将在明天早上进行一个会谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2250) [来介绍新的运动方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2252) [并且我们明天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2256) [还有一项关于健康健身的研究](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2258) [那对你来说将是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2260) [了解别人和与我们交流的好机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2261) [所以请你们明天一定不要错过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2265) [对此 非常感谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2269) [希望大家有一个精彩的会议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2271) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/706/?time=2273)