# Introduction to Siri Shortcuts

## Summary
Siri Shortcuts are a powerful new feature in iOS 12 that allow your app to expose its functionality to Siri. This enables Siri to suggest your shortcut at relevant times based on various context. Shortcuts can also be added to Siri to run with a voice phrase on iOS, HomePod and watchOS. Learn how to expose shortcuts in your app using NSUserActivity and discover the benefits of creating custom intents with SiriKit for a richer user experience.

## Info
* Frameworks
* WWDC 2018 - Session 211 - iOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=7) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=20) [大家好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=29) [我的名字是 Ari Weinstein](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=30) [很高兴来到这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=32) [与 Willem Mattelaer 一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=34) [向大家介绍 Siri 的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=35) [两年前 我们发布了第一版 SiriKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=38) [让你的 App 能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=43) [使用 Siri 的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=44) [它当时已经具备了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=46) [如发送信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=48) [叫车 交易支付等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=50) [诸多细化功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=51) [但我们知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=53) [你想用 SiriKit 做更多的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=55) [这也是为什么今年我们会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=57) [如此兴奋地向大家介绍捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=58) [如此兴奋地向大家介绍捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=58) [捷径的核心思路](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=61) [是让你可以把自己的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=63) [最关键的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=65) [与 Siri 接通](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=66) [这样真的很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=69) [因为这让人们可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=71) [在新的场景以新的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=72) [来使用你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=74) [这是一种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=75) [吸引用户的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=77) [接通捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=79) [为用户使用你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=82) [开启了无数种可能性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=84) [让我们一起看看可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=85) [捷径的典型场景吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=87) [捷径通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=90) [展示你接下来想要做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=92) [把 “Siri 建议”带到了一个新的层次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=94) [不仅仅是打开你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=95) [更能延伸到 App 内部的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=97) [并且 Siri 会在恰当的时机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=99) [在搜索界面中提供建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=101) [Siri 还可以在 Apple Watch 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=105) [建议捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=107) [你可以在你手腕上的 Siri 表盘](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=108) [上直接使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=110) [当 Siri 认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=113) [应该使用某个捷径时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=115) [它就会在锁定屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=116) [显示建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=118) [当你轻点一个捷径时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=119) [当你轻点一个捷径时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=119) [你直接在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=121) [锁定屏幕上的定制 UI 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=122) [来使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=125) [你还可以把捷径添加到 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=127) [这样你就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=128) [通过询问 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=130) [来使用这些捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=131) [在 Siri 中 你会看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=132) [与锁定屏幕和搜索界面中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=134) [相同的定制 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=136) [App 可以在 Siri 中提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=138) [很好的语音体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=141) [App 提供自定义的响应对话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=143) [而 Siri 会将其大声读出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=146) [来告诉你一些事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=148) [比如咖啡还有多久做好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=151) [当用户给 Siri 添加捷径时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=154) [他们要先选择一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=157) [自定义的个人短语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=159) [这样用户就可以选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=161) [对 Siri 说什么来启动捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=163) [作为一个开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=165) [你应该建议使用的短语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=167) [在这种情况下 建议是“咖啡时间”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=169) [一旦对 Siri 添加了一个捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=172) [这将在你所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=173) [iOS 设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=175) [在 Apple Watch 上 甚至在 HomePod 上都适用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=178) [在 Apple Watch 上 甚至在 HomePod 上都适用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=178) [我们也有新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=182) [捷径 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=184) [通过这个新的捷径 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=186) [每个人都可以打造自己的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=188) [需要做的只是拖拽和放下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=190) [一系列的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=192) [这些步骤还包括](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=193) [你 App 所接通的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=195) [我们今天将讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=199) [如何在你的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=201) [使用捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=203) [以及如何优化你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=204) [以提供更好的建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=205) [我们会讲到一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=207) [要特别注意的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=209) [隐私考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=210) [我们还会讲到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=212) [如何为媒体播放 制作出色的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=213) [首先 我们来讨论一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=216) [如何采用新的捷径 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=218) [创建捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=221) [有 3 个步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=223) [第 1 步是 定义捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=224) [这意味着你需要决定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=226) [为哪个功能接通捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=228) [同时定义每个捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=230) [这样 Siri 就可以知道你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=232) [能做些什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=233) [第 2 步 你需要递交（Donate）自己新的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=235) [这意味着每次用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=238) [在你的 App 中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=239) [在你的 App 中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=239) [接通了捷径的功能时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=241) [你都需要告诉系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=243) [这样 Siri 才会习得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=245) [建议你的捷径的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=246) [正确时机和场景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=247) [第 3 步是处理你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=249) [这意味着 当用户想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=253) [在 Siri 中 在锁定屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=254) [或是在搜索界面使用你的捷径时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=256) [你需要准备好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=258) [让你的 App 和 App 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=259) [可以被唤醒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=262) [并将其传递至句柄](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=263) [在你定义捷径之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=265) [你需要决定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=269) [你具体想要接通的功能是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=270) [你需要考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=273) [什么是用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=275) [在使用你的 App 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=276) [会做的最重要的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=277) [因为这些事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=278) [可能就是你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=279) [接通捷径的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=280) [你接通的每一个捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=282) [都应该让用户在使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=284) [你的 App 的核心功能时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=286) [能有更快的速度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=288) [这意味着你应该采用一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=290) [用户想用你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=291) [所做的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=292) [并让他们能更快地做这些事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=294) [速度的提升应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=296) [是实质性的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=298) [是实质性的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=298) [你不能只是接通一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=300) [正常地打开你的 App 的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=301) [如果你接通的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=305) [并没有让用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=306) [在使用 App 时有很大的速度提升](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=308) [那么它就不会被推荐为经常使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=310) [其次 每一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=312) [你接通的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=315) [都应该能长期调动用户的兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=316) [这意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=318) [这应该是用户想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=319) [多次使用的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=320) [如果只是用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=321) [想要使用一次或两次的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=323) [那么为它们创建捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=324) [不是什么好主意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=327) [你还应该只接通](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=329) [可以随时使用的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=330) [因为在你的捷径准备好前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=332) [你不能指望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=335) [用户处于某些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=336) [特定状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=338) [一旦你决定要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=340) [接通什么捷径时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=343) [你就应该准备好查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=344) [捷径的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=345) [我们有两种 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=348) [来支持捷径的使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=351) [第一种是 NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=353) [NSUserActivity 是一种代表你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=356) [App 状态的轻量级方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=358) [它集成了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=359) [它集成了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=359) [其他的 Apple 功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=361) [如“聚焦”和“接力”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=362) [第二种是 Intents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=365) [Intents 是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=367) [一种展示你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=368) [能实现的功能的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=370) [Siri 内置了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=372) [一系列很好的 Intents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=374) [它们支持一系列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=378) [App 可以用来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=379) [与 Siri 协作的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=380) [今年我们将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=382) [介绍一个非常酷的特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=382) [你现在可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=383) [自定义 Intents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=385) [来与捷径协作了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=386) [因此 对于每一个你接通的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=389) [你都需要决定它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=390) [是一个 NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=392) [还是一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=393) [那么我们来谈论一下如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=395) [做出这个决定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=397) [目前 NSUserActivity 是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=400) [构建捷径很好的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=402) [如果你只是要构建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=403) [想要打开某些你 App 内的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=405) [功能的简单捷径 或者你想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=406) [为某些你已经内置在“聚焦”搜索内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=409) [或者已经在 NSUserActivity 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=411) [提供的（比如“接力”）功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=413) [接通捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=415) [建议你选择 NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=417) [但是如果想要最优的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=419) [但是如果想要最优的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=419) [捷径体验 你应该采用 Intents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=422) [以 Intents 为基础的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=423) [真的非常酷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=425) [因为它们不需要启动你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=426) [就可以内联运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=428) [它们能包含一些自定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=430) [语音回复和定制化的 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=431) [像我们刚刚看到的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=433) [它们还会包含一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=434) [颗粒参数预测](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=436) [这些 Willem 稍后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=438) [会和你们讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=439) [一旦你决定要采用哪种 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=441) [你就准备好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=443) [要开始实现了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=445) [那我们现在就开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=449) [首先 我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=449) [怎么用 NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=450) [来接通捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=451) [第 1 步是定义你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=453) [对于 NSUserActivity 来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=455) [这意味着你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=457) [在你 App 内的 Info.plist 文件中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=458) [声明一个 UserActivityType](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=461) [来将你的 Activity 类型登记到系统中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=463) [接下来 你需要递交捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=466) [对于 NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=468) [这意味着每当用户处于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=470) [你的 App 中你想提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=472) [捷径的界面时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=473) [你都应该让你一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=474) [NSUserActivity 对象可用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=476) [这里有一个关键的新内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=478) [这里有一个关键的新内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=478) [就是 isEligibleForPrediction Flag](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=482) [在任何 userActivity 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=484) [把这个 Flag 设置为 “true”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=486) [都会把它变成一个捷径 真正酷的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=487) [如果你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=489) [已经有了一个 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=490) [你可以直接将这个 Flag 设置为 “true”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=492) [这个 userActivity 就会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=494) [自动变成一个捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=496) [请注意 isEligibleForSearch Flag 需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=498) [设置为 “true”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=501) [这样 isEligibleForPrediction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=502) [才能生效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=504) [另外 你可能要考虑到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=505) [isEligibleForHandoff Flag](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=508) [它的默认情况就是 “true”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=510) [所以在默认情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=511) [你的所有 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=514) [都可以在不同设备间“接力”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=515) [当你创建自己的 userActivity 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=518) [你要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=520) [包含所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=521) [userInfo 词典中的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=522) [以便之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=524) [可以还原在这个 Activity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=525) [接着就是通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=528) [把 userActivity 与当前屏幕上的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=530) [UIViewController 或 UIResponder 连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=532) [来标记你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=534) [当前的 Activity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=535) [最后一步就是 在定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=537) [最后一步就是 在定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=537) [且递交了捷径之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=540) [处理它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=541) [每次当用户从你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=542) [使用 NSUserActivity 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=545) [它都会在你的 App 中打开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=548) [你需要通过执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=549) [App 中用来处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=551) [NSUserActivity 的委托方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=552) [即 continueUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=553) [来对其进行处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=555) [你要做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=557) [执行这个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=558) [确认这种 Activity 类型是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=559) [与你所登记的类型匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=561) [如果匹配的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=562) [你可以将 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=563) [还原成 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=565) [保存时的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=566) [以上就是为了让](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=568) [Siri 通过 NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=570) [为你的 App 建议捷径

00:09:33.386 --> 00:09:34.836 A:middle
你需要做的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=571) [现在 让我们来谈论一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=577) [如何通过 Intents 接通捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=578) [第 1 步还是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=581) [定义你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=582) [你可能需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=583) [从决定采用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=584) [哪种类型的 Intents 开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=587) [大家都知道 Siri 包含了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=590) [很多内嵌很棒的 Intents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=591) [比如信息 健身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=593) [清单等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=595) [现在我们将介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=597) [如何在 Xcode 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=599) [如何在 Xcode 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=599) [为捷径定义自定 Intents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=600) [如果你想要创建的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=603) [正好与默认情况下的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=605) [内嵌式 SiriKit Intents 一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=606) [那你应该采用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=608) [不过你也可以定义自己的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=610) [不管你是想定义自己的 Intents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=612) [还是采用现有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=615) [并对其进行定制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=616) [你都需要在 Xcode 中创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=618) [一个 Intents 定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=619) [在我的空闲时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=621) [我一直在与几个朋友](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=624) [一起研发一个新的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=625) [这是一个送汤的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=626) [名字叫《Soup Chef》](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=629) [要想订汤 使用这个 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=631) [再方便不过了 它与 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=632) [关联的潜力让我十分期待](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=634) [我们来看看怎样使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=637) [新的 Intent Editor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=638) [来为《Soup Chef》创建一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=640) [首先我将打开 Xcode 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=642) [“File（文件）”-“New File（新文件）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=643) [选择 “SiriKit Intent Definition File](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=645) [（SiriKit Intent 定义文件）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=647) [然后我们就能看到全新的 Intent Editor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=648) [首先我们需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=651) [点击左下角的加号按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=652) [接下来 我想给我的 Intent 取个名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=654) [因为我要为订汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=658) [制作一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=659) [制作一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=659) [所以我要称之为 “OrderSoup（订汤）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=661) [接着我要填写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=664) [Intent 的元数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=666) [让我们一步一步来看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=667) [第一个元数据是 “Category（类别）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=670) [定义 Category](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=672) [可以帮助 Siri 知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=675) [如何讲述你的 Intent 以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=677) [如何在 UI 上展示它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=679) [比如说 在这种情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=680) [我选择了 “Order（预定）”这个种类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=682) [如果我选择 “Order”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=683) [当我使用到这个 Intent 的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=685) [Siri 会说如 “好的 我预定了”这样的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=686) [接着它会展示一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=688) [如 “Order（预定）”的确认按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=689) [我们提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=692) [几种不同的类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=693) [你应该选择最适合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=694) [你 Intent 目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=696) [的那一个类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=697) [接着你要填写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=699) [Intent 的 “Title（标题）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=700) [和 “Description（描述）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=703) [这将会在各类场景中帮助用户发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=704) [你的 App 支持什么捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=706) [然后就是 “User confirmation required](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=708) [（需要用户确认）”复选框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=709) [这将决定我们是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=711) [在用户使用你的捷径前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=713) [询问他们是否确认使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=715) [所以 Siri 可能会说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=717) [如“你准备好使用《Soup Chef》](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=718) [如“你准备好使用《Soup Chef》](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=718) [来订汤了吗？”之类的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=720) [这对于我的 App 来说真的特别棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=721) [因为我想要确保用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=722) [并不是偶然地订汤 [ 笑声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=723) [你可以在这里看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=727) [Intent 的 “Parameter（参数）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=729) [这里将会定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=731) [传递给你的捷径的所有参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=732) [比如说 在我的例子里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=734) [我有两个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=736) [分别是被预定的汤品清单以及配送地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=737) [目前 “Parameters” 支持一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=742) [简短的类型列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=743) [这些类型包括如字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=745) [数字 人物和位置等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=747) [不过如果你想构建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=750) [能够代表你 App 中的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=751) [但是却不在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=753) [类型列表中的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=755) [那你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=756) [选择 “Custom（自定义）”类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=759) [当你已经定义好你的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=760) [你可能会想要看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=761) [“捷径类型”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=762) [这里会定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=763) [你想要建议给用户的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=766) [所有捷径的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=767) [每种类型都包含](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=769) [一种特定的 会被预测的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=771) [参数组合 每一个类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=773) [都标题和副标题的形式展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=775) [其中会填上你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=777) [参数数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=779) [参数数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=779) [如果因为你的捷径需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=781) [启动你的 App 才能运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=784) [而导致的它不能在后台运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=785) [那么你可以不选](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=786) [“Supports background](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=788) [execution（支持后台执行）” 复选框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=790) [在某些情况下 一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=792) [可能拥有很多个捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=794) [它们中有的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=795) [后台执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=797) [有的则不支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=798) [在《Soup Chef》的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=799) [这尤其重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=801) [因为当预知了菜单和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=802) [配送位置后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=804) [我们可以支持后台执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=806) [因为我们拥有了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=808) [下订单所需要的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=809) [不过如果我们增加了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=811) [只包含配送位置的捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=813) [Siri 会知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=817) [我们可能不会有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=819) [足够的信息来下订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=820) [所以我们需要启动 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=821) [来询问用户他们需要配送到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=822) [什么地址 在这种情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=824) [我们希望这种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=826) [捷径类型不要在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=827) [后台执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=829) [你应该列出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=831) [你认为有助于 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=832) [做出最佳预测的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=834) [捷径的每种变体的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=835) [捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=837) [为了最佳体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=838) [为了最佳体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=838) [你应该尽可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=840) [让所有的捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=842) [都支持后台执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=843) [支持后台执行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=845) [捷径类型让用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=846) [体验速度更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=848) [这样它们会更频繁地被建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=849) [你可以为每个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=853) [提供最多 16 种你定义的捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=855) [一旦你定义了你的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=858) [Xcode 将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=859) [自动生成一个 Intent 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=861) [和一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=864) [处理协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=865) [在我的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=867) [我们生成了 OrderSoupIntent 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=869) [还有一个 OrderSoupIntentHandling 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=871) [这个协议中有着与我刚刚](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=873) [在我的 Intent 定义文件中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=876) [所定义的条目相一致的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=877) [由于 Xcode 会自动生成代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=879) [很重要的一件事是需要考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=881) [Xcode 在生成这段代码的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=882) [Target 是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=884) [因为你不想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=885) [在最后呈现相同类当中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=887) [互相冲突的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=888) [完全一样的实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=890) [让我们一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=892) [在 Inspector 面板中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=895) [看看我的 Intent 定义文件中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=896) [“Target Membership（目标成员）”部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=898) [你的 Intent 所使用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=901) [每个 Target 都应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=902) [包含你的 Intent 定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=904) [你应该选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=905) [“Target Membership” 下面的复选框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=907) [不过你需要确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=910) [如果你拥有一个框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=911) [你不会在互相包含的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=913) [多个 Target 中生成代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=915) [如果你有一个框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=917) [你应该通过在每个 Target 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=919) [只选择 Intent 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=922) [而不选择生成的类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=923) [来将 “Target Membership” 设定为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=925) [只为该框架生成 Intent 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=926) [不过如果在你的 App 里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=929) [没有任何框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=931) [因为你还没有将你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=932) [分离成框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=933) [你应该为每一个 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=935) [检查 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=937) [这就是如何在 Xcode 中定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=939) [自定 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=941) [当你定义好了自定 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=944) [想要递交就非常容易了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=945) [你所需要做的只是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=947) [将你的 Intent 对象实例化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=948) [然后填入参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=951) [再创建并递交一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=952) [INInteraction 对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=954) [需要确保每次用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=956) [在你的 App 中执行与你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=958) [在你的 App 中执行与你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=958) [相同的任务时能做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=960) [在这种情况下 每次当](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=962) [用户预订汤时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=965) [我就会递交这个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=967) [因为这将帮助 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=969) [习得预测 Intent 的最佳时期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=970) [我们已经定义了自定 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=973) [现在要讨论的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=975) [如何处理它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=976) [和 NSUserActivity 一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=978) [你应该在你的 App 委托里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=979) [执行 continueUserActivity 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=981) [以此来处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=983) [你的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=984) [当一个 Intent 在你的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=986) [被打开时 它将以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=988) [NSUserActivity 对象的形式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=990) [进入它的 Activity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=992) [类型就是之前你生成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=994) [Intent 类的名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=996) [在我的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=996) [就是 OrderSoupIntent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=997) [不过如果你只执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1000) [continueUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1001) [你的捷径每次都会打开你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1003) [它不会在后台运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1005) [或者与 Siri 内联运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1007) [也不会支持如自定声音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1008) [回复之类的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1010) [为了拥有最佳的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1011) [你想要创建一个在后台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1012) [处理你的捷径的拓展包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1014) [要想实现这个目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1017) [首先要在 Xcode 项目中创建一个新目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1019) [首先要在 Xcode 项目中创建一个新目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1019) [然后选择 “Intents Extension](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1021) [（Intent 扩展）”模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1023) [确保你的 Intent Handler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1024) [遵循 Intent 处理协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1027) [在我的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1029) [就是 OrderSoupIntent 这个处理方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1030) [然后再执行这些方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1032) [也就是 confirm() 和 handle()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1034) [需要注意的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1036) [和传统的 SiriKit 不同的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1037) [你不需要执行 resolve() 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1039) [因为你的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1040) [不需要任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1042) [用户定制或](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1044) [用户的任何后续动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1045) [所以 你应该检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1047) [你 Intent 的属性的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1049) [所有数值以保证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1050) [它们是有效的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1052) [如果不是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1053) [在你认为你不能处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1054) [这个 Intent 的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1056) [你应该返回一个错误代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1056) [然后处理 准确地说是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1058) [执行你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1060) [在我的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1063) [这意味着为汤下订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1064) [接着你要返回一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1066) [能够指明结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1067) [如 “Success（成功）”的响应对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1069) [你应该为每一个 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1072) [在后台运行的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1074) [执行一个 Intent 拓展包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1076) [因为它们会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1078) [因为它们会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1078) [与 Siri 内部](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1080) [在锁定屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1081) [在搜索界面中 在捷径 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1083) [或者是在 Siri 表盘中自动运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1084) [而不需要启动你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1085) [最有价值的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1087) [一定是在后台运行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1088) [不过你也可以创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1089) [很多其他很好的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1091) [需要记住的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1093) [即便你执行了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1095) [Intent 拓展包 你也应该一直](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1096) [执行 continueUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1098) [因为用户可能会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1100) [通过 Siri 在你的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1101) [打开捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1103) [比如通过点击 Siri 上的卡片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1104) [来展示你 App 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1107) [自定 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1109) [还有一件我想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1111) [告诉你的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1113) [那就是 INRelevantShortcut](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1114) [INRelevantShortcut 是一种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1116) [向 Siri 表盘展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1117) [捷径的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1119) [你只需要提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1121) [包含 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1122) [或者 userActivity 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1124) [INRelevantShortcut 对象即可](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1126) [你可以随意地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1128) [在你相关的捷径中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1129) [包含相关信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1130) [这可以提示 Siri 表盘](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1132) [何时你的捷径是相关的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1134) [以及什么时候是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1136) [展示你的捷径的最佳时期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1137) [关于 INRelevantShortcut](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1139) [关于 INRelevantShortcut](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1139) [最酷的事情就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1141) [即便你没有 Watch App 它也能起作用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1142) [你可以从你的 iOS App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1144) [接通相关的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1146) [如果它们在后台运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1147) [就会直接出现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1149) [Siri 表盘上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1150) [好了 我们现在已经讲到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1152) [所有捷径的使用方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1153) [以及采用 API 的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1154) [接下来的时间交给](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1157) [我的同事 Willem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1158) [他将为你演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1160) [如何在 Xcode 中使用捷径 Willem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1161) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1165) [&gt;&gt; 谢谢 Ari](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1174) [我很兴奋能够成为演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1176) [如何使用捷径的第一个人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1178) [在我们深入 Xcode 之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1182) [先让我向大家展示一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1185) [我们一直在研发的一款 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1186) [正如 Ari 提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1187) [我们在研发一款名为《Soup Chef》的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1188) [订汤的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1190) [让我来向你们展示一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1191) [这就是《Soup Chef》](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1199) [这就是《Soup Chef》](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1199) [当我启动这个 App 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1201) [这里会展示我的订单记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1202) [因为我还没有订过任何东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1205) [所以这里还是空的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1206) [我可以通过点击加号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1208) [来发出一个新的订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1209) [这为我展示了汤品的菜单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1211) [在这里你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1212) [我能点的所有汤品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1213) [我们来点一个番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1215) [接下来 我可以选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1218) [汤的数量和加料的种类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1221) [我要点一个有红辣椒的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1222) [当我准备好下单时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1224) [我就轻点一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1226) [“Place Order（下单）”按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1228) [现在回到 “Order History（历史订单）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1230) [你就能看到我刚刚下的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1231) [那个订单了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1232) [我可以轻点订单去看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1234) [关于一个特定的订单的更多细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1236) [这一视图与 userActivity 相关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1238) [我认为将这个建议给用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1241) [是非常好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1243) [因为我们的用户喜欢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1245) [回味他们曾经点过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1246) [美味的汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1247) [[ 笑声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1249) [如果能把这些建议给她们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1250) [那将非常棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1252) [让我们去 Xcode 看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1253) [如何实现这个设想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1254) [现在我在观看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1258) [订单细节视图的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1259) [订单细节视图的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1259) [viewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1261) [我创建了一个 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1262) [同时我也设定了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1264) [requiredUserInfoKeys](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1266) [我还要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1267) [isEligibleForSearch 为真](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1268) [为了它能够被建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1271) [我还需要让](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1274) [isEligibleForPrediction 为真](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1276) [这样就行了 我们来试一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1282) [首先我需要保证我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1294) [递交了 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1295) [我现在返回视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1296) [这样就够了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1299) [现在我想确保 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1300) [已经发生了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1302) [为了确认 我们增加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1303) [两项开发者设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1305) [能让它在搜索界面和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1307) [锁定屏幕上很容易地看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1308) [最近的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1310) [为了启用这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1311) [我们来到“设置”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1314) [滑动到“开发者”这一栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1315) [在最底端有两个新的开关](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1317) [展示最近的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1319) [展示最近的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1319) [和在锁定屏幕上展示 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1320) [我们打开两个开关](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1323) [现在我们可以回到主页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1326) [下滑到搜索栏进行搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1328) [我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1329) [刚刚完成的 Donation 很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1331) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1334) [我可以轻点它 然后 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1339) [就与 userActivity 一起启动了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1340) [并且回到了我刚刚递交的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1341) [订单页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1343) [很好 这样很赞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1345) [但是我认为我们还能做得更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1349) [因为我们 App 的主要功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1351) [就是订汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1353) [如果它能够把订汤建议给用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1354) [那真是再好不过了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1355) [我希望用户可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1358) [不用启动我们的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1359) [就能达到这个效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1360) [我会使用一个 Intent 来实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1361) [现在还没有内置的订单 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1364) [但是在 iOS 12 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1367) [我可以创建一个自定 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1371) [我们来试试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1373) [首先我们要创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1375) [Intent 的定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1378) [先选择 “File(文件)”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1379) [先选择 “File(文件)”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1379) [然后进入 “New（新建）”-“File...”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1382) [选择 “SiriKit Definition File"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1385) [然后 “Next（继续）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1388) [现在我可以为它命名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1389) [我会保留 “Intents” 这个名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1390) [然后放在 “Resources（资源）”文件夹里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1392) [好了 现在我准备好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1394) [点按 “Create（创建）” 这里展示的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1395) [我们的 Intents 定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1399) [以及我们的全新 Intents 编辑器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1400) [在我添加 Intent 之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1401) [我需要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1403) [在正确的 Targets 内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1404) [包含 Intents 定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1405) [正如 Ari 所说 我们需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1406) [在使用 Intent 的所有地方添加 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1408) [所以我要把它添加在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1411) [我们的共享框架中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1412) [因为我们使用的是共享框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1414) [我不想让它为 App Target 生成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1415) [在下拉菜单中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1418) [在 App Target 旁边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1420) [我会选择 “No Generated Classes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1422) [（无生成类）” 好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1425) [我们可以添加 Intent 了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1426) [在左下角点击加号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1427) [同时选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1429) [“New Intent（新建 Intent）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1432) [将其命名为 “OrderSoup”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1433) [接下来我要选择类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1438) [接下来我要选择类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1438) [在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1441) [这是一个 “Order”Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1442) [填写标题 “Order Soup”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1443) [然后是描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1446) [“在 Soup Chef 点一碗汤”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1448) [因为这涉及到真实世界的交易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1452) [我想在提交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1453) [订单前确认一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1455) [所以我会选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1457) [要求用户确认](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1458) [接下来让我们定义参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1461) [我将定义三个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1463) [一个针对汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1465) [一个针对数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1468) [还有一个针对用户选择的加料选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1470) [首先是汤 我点击 “Parameter” 部分的加号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1472) [然后填写名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1475) [“soup（汤）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1477) [因为汤是我们 App 中的定制对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1479) [我将会选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1481) [“Custom（自定义）”类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1484) [接下来 我要添加 “quantity（数量）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1485) [我再次点击加号 填写名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1487) [这次将是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1489) [“Interger（整数）”类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1491) [接下来是 “options（选项）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1494) [选项是我们的 App 的自定对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1497) [所以我会使用 “Custom” 类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1498) [所以我会使用 “Custom” 类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1498) [因为用户可以选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1501) [多个选项 我还会选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1503) [“Array（数组）”复选框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1504) [最后 我们需要定义捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1507) [此时 我将定义一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1511) [包含了所有参数的单一的捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1513) [我会在“捷径类型” 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1518) [点击加号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1519) [然后选择我想要包含在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1522) [捷径类型中的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1523) [这样我就能选择汤数量选项了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1525) [当我准备好时 点按“添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1527) [捷径 类型”按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1529) [填写标题订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1531) [然后再插入 “quantity”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1533) [以及 “soup” 和 “options”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1535) [然后我把副标题留白](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1539) [因为在标题中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1544) [我已经包含了需要的所有信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1545) [我还会选中 “Supports background](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1546) [execution（支持后台执行）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1549) [因为我想让用户在后台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1551) [执行这个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1552) [我们已经定义了我们第一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1556) [现在让我们来试试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1559) [现在让我们来试试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1559) [首先我会为我们的 Order 对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1560) [增加两个辅助方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1563) [让它能更简单地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1565) [在它和 Intent 之间转换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1566) [我现在来到 Order 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1568) [在最底端 我会增加一个 Order 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1571) [它包含一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1576) [可以返回 Intent 的系统变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1580) [我在这里创建 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1582) [设定汤的数量和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1583) [选项 然后返回到 orderSoupIntent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1586) [扩展同样也定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1588) [一个新的源于 Intent 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1590) [初始化程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1591) [在这里 我抽取汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1592) [数量 和选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1594) [然后我用这些数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1597) [初始化订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1598) [很好 这会非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1601) [接下来 我需要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1603) [每次用户下订单的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1605) [我们都递交了 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1606) [所以我来到订汤的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1608) [数据管理器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1610) [在 placeOrder() 方法中 我会添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1613) [我们的 Donation 逻辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1614) [我声明了一个 INInteraction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1617) [它包含了订单的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1619) [它包含了订单的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1619) [然后递交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1621) [interaction 就好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1623) [最后 我们需要处理 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1627) [首先我需要在 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1629) [增加支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1631) [我们打开 AppDelegat.swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1633) [在 continueUserActivity 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1635) [我会为其增加支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1637) [我想要确认 userActivity 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1638) [activityType 是否与我想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1642) [处理的 Intent 的类名称一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1644) [如果一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1647) [我会从 userActivity 中提取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1649) [Intent 同时生成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1650) [一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1652) [最后 我会展示订单视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1653) [既然我们打开了 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1655) [我假设用户并不想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1657) [立刻下订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1658) [而是想在下订单之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1659) [做一些定制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1661) [这就是我展示订单视图的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1662) [最后 让我们增加对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1666) [Intent 扩展的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1670) [这样用户就可以在后台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1672) [运行 Intent 了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1674) [首先我需要增加一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1675) [Intent 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1676) [选择 “File”-“New”“-Target”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1678) [选择 “File”-“New”“-Target”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1678) [然后选择 “Intents Extention](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1682) [（Intents 扩展）” 我要为它起个名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1685) [SoupChefIntents 然后点按 “Finish（完成）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1686) [因为我增加了一个我可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1691) [Intent 的新 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1694) [我需要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1697) [Intent 定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1698) [被包含在 Target 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1699) [回到 Intent 定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1700) [然后将其增加到 Target 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1701) [我还是不想在 Target 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1705) [生成代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1707) [在下拉菜单中 我选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1708) [“No Generated Classes”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1709) [我还希望扩展 Target 能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1714) [接入 App 的相同数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1716) [所以我会将其增加到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1718) [相同的 App 群组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1720) [在项目设定中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1721) [我选择 Intents Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1723) [在 “Capability” 页中 我会将其添加到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1727) [相同的 App 群组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1729) [很好 现在我们就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1732) [执行与这个 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1733) [相匹配的 IntentHandler 了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1735) [首先 我要引入我们共享的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1739) [首先 我要引入我们共享的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1739) [框架 SoupKit [ 笑声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1741) [因为我们将处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1743) [OrderSoupIntent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1748) [这个 IntentHandler 需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1750) [与 OrderSoupIntentHandling 协议相一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1751) [它是作为我们 Intent 的一部分生成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1755) [这个协议有一个必要的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1761) [也就是 handle() 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1763) [让我们实现它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1765) [在 handle() 方法中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1768) [我得到了一个 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1771) [我通过那个 Intent 创造了一个订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1772) [如果成功了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1773) [我就下了订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1776) [我就会调用 completion()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1778) [其中会有 Intent 的响应码 “.success”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1779) [如果我不能从 Intent 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1781) [创造一个订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1783) [我也会调用 completion()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1785) [但是其中的 Intent 响应码会变成 “.failure”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1786) [就是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1787) [我刚刚在我的 App 里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1789) [为一个新 Intent 添加了支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1790) [让我们尝试一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1793) [首先 我需要递交 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1804) [我会下另一个订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1806) [点击加号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1808) [这次我要订一个有面包丁的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1810) [蛤蜊浓汤 我要下单了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1811) [现在 如果我重新回到主屏幕并下滑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1817) [我可以看到我递交的 Intent 很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1819) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1823) [我可以点击它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1828) [现在展示的是一个捷径视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1830) [以及 “Order（点餐）”按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1832) [如果我点击它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1833) [就会直接在后台下单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1834) [这样订单就完成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1835) [我可以回到 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1838) [看看它是否预订上了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1840) [是的 在我的 App 里有一个新订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1842) [很好 很简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1844) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1845) [除了轻点“点餐”按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1854) [我还可以点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1855) [捷径视图本身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1857) [这将会通过捷径启动 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1858) [这将会通过捷径启动 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1858) [由于我实现的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1860) [它将会展示订单视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1862) [这里我可以自定义订单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1863) [我还可以加上奶酪 谁知道呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1865) [我要下单了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1868) [很好 最后 让我们给 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1871) [加上捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1874) [我们来到设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1876) [向上滑到 “Siri 与搜索” 搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1879) [这里我可以选择我想要添加到 Siri 的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1882) [在这个例子中 我要添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1885) [预定一份带面包丁的蛤蜊浓汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1886) [当我选择录音按钮时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1890) [我可以说出我想与这个捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1891) [相关联的短语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1892) [“Soup time（喝汤时间）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1895) [这样就好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1897) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1899) [让我们回顾一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1908) [我们刚刚所做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1910) [我们首先让一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1911) [已经在我们 App 中实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1913) [NSUserActivity 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1914) [isEligibleForPrediction 为真](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1916) [这让其可以被建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1917) [同时也是一个接通你 App 内容的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1919) [同时也是一个接通你 App 内容的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1919) [简单的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1920) [接下来 我们定义一个自定 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1924) [这真的是展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1927) [你的 App 的核心功能的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1928) [最好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1929) [在这个例子中 就是点一碗汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1931) [定义好 Intent 之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1933) [我们要确保每次用户在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1936) [App 内下单时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1937) [我们都递交了 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1938) [最后 我们处理 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1940) [不仅是在支持后台运行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1943) [扩展 Target 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1945) [还有在 App 内的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1947) [这样用户就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1949) [通过捷径 启动 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1952) [现在我们看了如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1954) [采用捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1955) [接下来我们看看这些捷径 是如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1957) [被建议的以及你可以做些什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1959) [让你的用户看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1961) [可能的最佳建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1962) [每次当一个用户在你的 App 内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1965) [完成一个动作并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1968) [你的 App 递交了这个动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1970) [在这个例子中 就是和其他信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1973) [对于时间 我们认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1978) [应该记录一天中的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1979) [应该记录一天中的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1979) [或一周中的一天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1981) [至于位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1983) [我们会看看用户的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1984) [整体位置 然后确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1986) [这是否对于用户来说是一个重要的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1987) [接下来看看系统如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1989) [利用这些来做出建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1992) [在这里 我们只考虑时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1996) [周一 午饭时间 我预定了一份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=1999) [加面包丁的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2000) [晚上的时候我不喜欢面包丁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2003) [所以我预定了一份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2005) [加红辣椒的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2006) [第二天的午饭 我再次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2007) [预定了加面包丁的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2010) [我一整周都这样操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2013) [在周五午饭的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2014) [Siri 可能会尝试给我建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2017) [它会观察我过去的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2019) [尝试在里面找到规律](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2021) [如果现在是午餐时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2023) [由于我经常在中午预定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2025) [加面包丁的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2026) [Siri 可能会注意到这点并向我建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2028) [这样很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2030) [这就是我想的

00:33:54.546 --> 00:33:56.196 A:middle
这些都是很高层级的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2031) [我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2036) [它是如何工作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2037) [我们先从 NSUserActivity 开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2039) [我们先从 NSUserActivity 开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2039) [我们假设一个在《Soup Chef》中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2041) [下单界面的 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2044) [用户信息字典可能包含三个 Key](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2046) [“soup” “quantity” 和 “scrollPosition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2050) [（滚动位置）” 由于最后一个的存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2052) [在“接力”中 你可以将用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2053) [带回到他最后所浏览的那个位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2055) [我们看看这要怎么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2058) [建议给用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2060) [首先我们递交一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2062) [NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2065) [其中汤是 “tomato”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2067) [数量是 “1”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2069) [滚动位置是 “79.0”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2070) [接下来我们递交一个相似的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2072) [NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2074) [但是滚动位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2075) [却变成了 “110.0”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2076) [我们继续操作 在某一时刻](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2078) [Siri 可能会再次试着寻找一个建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2080) [它会查看过去的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2082) [然后寻找相同的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2086) [NSUserActivity 的规律](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2087) [由于滚动位置每次都不一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2089) [它可能不会找到合适的建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2092) [那我们要如何修复呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2096) [我们可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2099) [我们可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2099) [requiredUserInfoKeys](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2100) [requiredUserInfoKeys 是一种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2103) [NSUserActivity 的现有属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2105) [它代表了为了复原 App 到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2107) [userActivity 展示的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2111) [所需的最少的信息数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2112) [至于建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2114) [它会被用来指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2117) [用户信息字典中哪些关键信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2119) [会在寻找规律时用来进行对比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2121) [让我们将其应用在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2124) [刚刚的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2125) [现在我们可以注明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2127) [requiredUserInfoKeys 是汤和数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2129) [我们再次递交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2132) [汤是 “tomato”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2134) [数量是 “1”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2136) [滚动位置是 “79.0” 的 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2138) [不过这次滚动位置将被忽略](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2139) [接下来 我们递交一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2142) [相似的东西 这些滚动位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2143) [也被忽略了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2145) [我们一直重复 在某些时刻](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2147) [Siri 会再次尝试推荐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2149) [现在 Siri 会回顾](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2153) [然后试着为相似的 userActivity 寻找一个规律](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2154) [因为不再考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2156) [滚动位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2157) [她可能会想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2159) [她可能会想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2159) [“一个汤是 ‘tomato’ 数量是 ‘1’ 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2161) [NSUserActivity 可能对这个用户来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2163) [是一个不错的建议”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2165) [如你所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2168) [根据需求标明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2170) [正确的关键元素很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2171) [否则你的用户可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2173) [不能获得任何建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2174) [这就是它如何与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2177) [userActivity 协作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2178) [Intent 的工作原理与这个相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2180) [但是却更加灵活](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2183) [Intent 的主要信号是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2185) [你定义的捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2189) [每一种捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2191) [都定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2193) [对于建议来说有效的参数组合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2195) [这与 requiredUserInfoKey](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2196) [有点相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2199) [但是与其只有一个组相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2200) [我们在这里可以定义多个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2202) [让我们在《Soup Chef》App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2203) [应用一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2206) [早些时候 我通过三个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2208) [即 “soup” “quantity” 和 “options”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2209) [定义了一个 OrderSoupIntent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2211) [当时 我只定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2214) [一个包含所有这些参数的单一的捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2215) [但是 理想地说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2217) [你可以定义更多捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2219) [你可以定义更多捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2219) [因为这能为系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2220) [寻找用户行为的规律提供了更多选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2221) [现在我要定义三个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2225) [一个捷径类型结合了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2228) [“soup” 和 “quantity”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2229) [一个结合了 “soup” 和 “options”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2230) [还有一个结合了三个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2232) [让我们在另一个例子中看一看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2235) [我再次从周一开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2239) [在午餐时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2241) [点一个加面包丁的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2243) [《Soup Chef》将这个递交给系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2244) [然后系统将会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2246) [根据我刚刚定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2248) [捷径类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2249) [将把它分成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2251) [所有可能的组合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2254) [当天晚上 我点了一份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2255) [加红辣椒的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2256) [它再次被递交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2258) [也被分解成所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2260) [有可能的组合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2261) [第二天的午饭 我点了一份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2264) [加面包丁的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2265) [它被递交并分解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2266) [我整周都重复这个操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2268) [在周五的午餐时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2270) [Siri 可能会尝试对我建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2272) [它可能会看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2275) [我经常点番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2276) [不过因为是午餐时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2279) [不过因为是午餐时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2279) [它也能看到在午餐时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2284) [我通常会在番茄汤里加面包丁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2286) [这是一个更具体的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2289) [它最后会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2291) [这样建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2292) [所以我可能会被建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2294) [点一份加面包丁的番茄汤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2296) [很好 这就是如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2298) [完成建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2301) [现在让我们看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2303) [如何确保这些推荐是好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2304) [首先需要做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2307) [有一个好的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2309) [一个好的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2311) [应该是一些很大概率重复的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2314) [对于 userActivity 来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2317) [应该是一些用户经常查看的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2319) [或者对于 Intents 来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2321) [应该是一些用户会规律做出的动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2323) [你应该确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2325) [你递交的载荷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2328) [与你所有的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2330) [都是相一致的 因为这是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2331) [系统在寻找规律时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2333) [对比的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2336) [一个好的 Donation 应该不仅包括](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2338) [时间标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2339) [时间标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2339) [因为当这个 Donation 被推荐时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2341) [它可能不会再与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2343) [特定时间相关](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2344) [比如说 一个展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2346) [某个特定日期的会议的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2348) [捷径可能没那么有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2349) [因为 如果你第二天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2351) [或者之后看到这个提醒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2352) [你可能对这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2354) [特定的一天的会面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2355) [不再感兴趣了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2356) [一个有着相对时间的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2359) [却更加有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2360) [你应该确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2363) [你为每一个用户行动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2367) [进行一次递交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2369) [即便那个用户行动包括](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2371) [在你 App 内多次的行动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2373) [最后 为你的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2375) [选择正确的参数也是非常重要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2377) [所以我们来看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2379) [两种可能的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2380) [首先是枚举](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2382) [你可以在 Intent 旁边的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2383) [Intent 定义文件中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2386) [定义枚举](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2387) [并将其作为你参数的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2389) [我们建议每当](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2393) [参数的数值有界时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2395) [你都使用枚举](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2396) [比如说 如果你想为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2398) [OrderSoupIntent 添加一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2399) [OrderSoupIntent 添加一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2399) [规格参数 那么将其](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2401) [做成枚举可能会比较有意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2403) [因为可能的规格一般是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2404) [小份 中份 大份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2406) [使用枚举可以为你的用户提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2409) [更好的建议和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2411) [更清晰的标题和副标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2412) [想要学习更多关于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2415) [如何用枚举生成标题和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2417) [副标题的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2418) [我建议大家观看本地化讲座](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2420) [另一个你可以使用的类型是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2422) [“Custom（自定）”类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2425) [使用自定类型最终会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2427) [得到一个 INObject](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2428) [并生成 Intent 代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2429) [INObject 结合了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2432) [一个标识符和一个显示字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2433) [这个标识符可以用来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2436) [指代你的 App 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2438) [一个内部对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2440) [显示字符串则包含](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2442) [一个标识符和一个代表形式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2443) [这样你的用户和 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2445) [都可以知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2447) [这个参数的数值是多少](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2449) [最后 使用一个 INObjec](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2452) [也会防止参数之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2454) [可能出现的依赖性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2456) [让我来示范一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2457) [总共有两种办法来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2460) [代表拥有一个字符串的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2462) [标识符的融合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2464) [你可以为你的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2466) [增加两个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2467) [一个是给标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2469) [一个是给显示字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2470) [或者你还可以使用 INObject 来增加单个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2472) [如果用第一种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2476) [你会有一个依赖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2477) [因为显示字符串依赖于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2478) [被标识符引用的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2480) [我们不鼓励这类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2481) [依赖的产生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2484) [因为在我们之后建议 Intent 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2485) [这些依赖可能会引发问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2487) [一个好的捷径还应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2489) [拥有一个可以理解的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2494) [副标题 还有图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2495) [它应该展现当用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2498) [点击捷径时会发生什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2499) [因为这是用户在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2500) [与其互动前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2502) [看到的唯一的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2503) [当然了 你应该测试你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2504) [来保证它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2506) [看起来是正确的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2507) [而且他们会像预期的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2509) [那样工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2511) [有一些方法来做到这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2512) [正如我早些时候展示给你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2512) [我们增加了两个新的开发者设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2515) [可以让你在搜索界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2516) [和锁定屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2517) [看到你最近的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2519) [看到你最近的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2519) [而不是你常规的 Siri 推荐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2520) [打开这个你就可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2523) [当这些 Donation 被建议时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2524) [你的用户会看到的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2525) [你可以试着与其互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2526) [这样就能保证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2529) [它能按预期工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2530) [另外一个测试你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2531) [捷径的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2534) [就是将其添加到 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2535) [一个测试它们的简单方法就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2537) [通过编辑 Xcode Scheme](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2538) [在不需要重复短语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2540) [的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2541) [来自动唤醒 Siri](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2543) [在 Intent 扩展的 Scheme 编辑器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2545) [有一个 Siri Intent Query 栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2547) [你可以用它来提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2548) [唤醒 Siri 的语音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2551) [最后 你可以在捷径 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2553) [创建一个自定捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2556) [来使用你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2558) [这允许你测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2561) [当你的捷径与从捷径 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2562) [中的其他捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2564) [或者步骤捆绑在一起的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2565) [你的捷径的表现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2566) [我们已经看到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2569) [什么是好的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2572) [以及如何向用户建议这个 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2574) [我们再来看看一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2577) [关于隐私的考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2579) [关于隐私的考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2579) [以及如何确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2580) [你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2581) [不对给他们的建议感到失望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2583) [你的用户希望当他们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2588) [从你的 App 中删除一些东西时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2589) [这个删除是永久的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2590) [这一点很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2592) [这样你就可以获得你用户的信任](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2595) [他们也不会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2597) [再收到与他们想要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2598) [毫不相关的信息了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2600) [如果你的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2602) [包含一些用户可以删除的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2605) [信息 你应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2606) [在合适的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2608) [删除它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2609) [我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2612) [如何删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2613) [从 NSUserActivity 开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2615) [有两种方法来删除一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2619) [已递交的 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2621) [如果你使用“聚焦”索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2623) [你可以设定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2625) [relatedUniqueIdentifier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2626) [然后从“聚焦”删除的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2628) [就会自动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2629) [删除递交的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2630) [userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2631) [只需要在 contentAttributeSet 里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2633) [将 relatedUniqueIdentifier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2634) [设定为与可搜索的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2636) [相匹配的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2639) [相匹配的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2639) [接着 当可搜寻对象被删除时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2641) [它会自动删除 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2644) [如果你不使用“聚焦”索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2647) [你可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2650) [NSUserActivity 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2652) [持续标识符属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2654) [这是一个你可以设置的新属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2655) [这样你就可以追踪你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2657) [userActivity 并在合适的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2659) [删除它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2661) [要想使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2664) [只需要在递交 userActivity 前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2667) [设定 persistentIdentifier 属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2669) [如果你想要将其删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2671) [你可以调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2672) [deleteSavedUserActivities](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2673) [并填入你想要删除的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2675) [你还可以删除所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2677) [递交的 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2679) [比如说 当你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2681) [退出登录时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2682) [你可以调用 deleteAllSavedUserActivities](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2684) [Intents 拥有现成的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2688) [与新的 userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2690) [API 相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2691) [因为你通过 INInteraction 主导](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2694) [Intent 的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2696) [删除 Intent 也会通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2698) [INInteraction 发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2699) [INInteraction 发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2699) [一个 INInteraction 拥有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2701) [标识符和一组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2703) [你可以设置的标识符性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2704) [然后用它来删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2706) [一个或多个已经递交的 interaction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2708) [在递交 interaction 前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2710) [设定标识符或组识别符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2713) [当你想要删除时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2717) [你可以调用 delete](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2718) [并填入你想删除的标识符阵列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2720) [你还可以通过调用delete](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2723) [并填入组标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2725) [删除所有拥有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2727) [同样组标识符的已递交 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2729) [最后 就如](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2730) [NSUserActivity 一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2733) [有一种可以删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2734) [所有你递交的 Intent 的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2736) [即在 INInteraction 调用 deleteAll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2738) [请确保在合适的时机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2740) [并填入你想删除的 Donation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2742) [这会给你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2745) [最好的建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2746) [也不会让他们思考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2747) [为什么会给他们建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2748) [与他们毫无关联的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2749) [我们已经观看了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2755) [在创造和递交捷径时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2756) [应该考虑的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2757) [让我们最后简单地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2759) [让我们最后简单地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2759) [看一下怎么创造](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2762) [最好的媒体捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2764) [我们创建了一个与捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2767) [配合很好的新 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2770) [这个 Intent 被称作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2772) [INPlayMediaIntent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2773) [它可以允许你创建和递交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2775) [可以播放音频或视频内容的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2777) [处理扩展中的 Intent 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2780) [你可以选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2783) [在你的 App 后台处理它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2784) [这可以让你直接从你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2786) [开始音频播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2788) [除了在搜索界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2795) [或者锁定屏幕上被建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2796) [拥有这个 Intent 的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2798) [也应该在用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2799) [连接耳机时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2801) [在锁定屏幕上被播放控制所推荐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2802) [这样用户可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2803) [更容易地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2806) [听到你的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2807) [最后 拥有这个 Intent 的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2809) [在 HomePod 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2812) [也运行得很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2814) [只需要在你的 iPhone 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2815) [对 Siri 增加一个播放媒体的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2818) [对 Siri 增加一个播放媒体的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2818) [然后在你的 HomePod 上唤醒它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2821) [这个音频就会在你的手机上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2822) [通过 HomePod 播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2824) [我们还创建了一个新 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2828) [来让你能告诉系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2831) [它可能会感兴趣的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2834) [这对于周期性的内容来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2838) [非常棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2840) [因为你想要建议给用户的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2841) [是他们之前没有听过或看过的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2842) [这里有一些我们为了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2848) [制作好的媒体捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2850) [而增加的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2851) [现在 让我们总结一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2853) [刚刚说的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2854) [捷径可以让你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2859) [有着强有力的 全新的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2861) [它通过将你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2864) [在不同的地方连通](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2866) [从而为吸引用户提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2868) [一个新方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2869) [比如在搜索界面上 在锁定屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2871) [在 Apple Watch 上的 Siri 表盘上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2873) [以及通过 Siri 自身搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2875) [你可以在新的捷径 App 中使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2877) [你可以在新的捷径 App 中使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2877) [你可以通过使用 NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2881) [来采用捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2883) [这是一种展示 App 内容的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2884) [简单方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2886) [你还可以采用与系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2888) [有更深的融合的 Intent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2891) [从而为你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2892) [解锁一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2894) [全新的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2895) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2897) [如果想要了解更多的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2903) [我们的会议号码是 211 你可以在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2904) [developer.Apple.com 上找到我们的页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2906) [你还可以在这周内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2908) [去我们的实验室找我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2909) [感谢你的聆听](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2911) [我们迫不及待地想要看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2912) [你创建的捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2914) [祝你在接下来的会议愉快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2915) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/211/?time=2917)