# Inside SwiftShot: Creating an AR Game

## Summary
Developed by Apple, SwiftShot is an energetic and immersive multiplayer AR game built with key iOS technologies. Glimpse behind the curtain and see how SwiftShot was designed and developed using ARKit, SceneKit, and Swift. Understand the intricacies of designing great gameplay for AR, and learn practical techniques for multiplayer synchronization and physics simulation.

## Info
* Graphics and Games
* WWDC 2018 - Session 605 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=7) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=22) [&gt;&gt; Hi, I'm Alex.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=29) [I work for a group at Apple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=30) [called Tools Foundation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=31) [Normally we get to do fun stuff](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=33) [like operating systems and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=34) [compilers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=35) [But this year we got to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=36) [something a little different.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=37) [We built a game called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=38) [SwiftShot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=40) [Some of you may have seen it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=41) [earlier today and you might have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=42) [played it downstairs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=44) [But the important part is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=45) [SwiftShot is a showcase of some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=48) [of the new functionality in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=50) [ARKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=51) [ARKit 2 is now available on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=52) [hundreds of millions of devices,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=55) [providing a platform for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=57) [engaging AR experiences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=59) [engaging AR experiences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=59) [And you are able to reach the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=61) [widest possible audience with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=62) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=63) [There is no special setup, just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=64) [point the device's camera at a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=66) [surface and start playing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=68) [It's integrated into iOS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=71) [First-party and third-party](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=74) [engines like SceneKit and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=76) [SpriteKit as well as third-party](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=77) [ones like Unreal and Unity have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=79) [a full integration at this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=82) [point.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=83) [A little agenda for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=88) [First we're going to talk some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=89) [game design principles for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=91) [augmented reality, a few of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=92) [things we learned along the way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=94) [We are going to go deep into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=96) [internals of the game and in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=98) [particular, we are going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=100) [cover WorldMap sharing which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=100) [a new feature in ARKit 2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=102) [And we will also talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=103) [networking and physics and how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=105) [we made that work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=106) [First, let's, you know, take a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=108) [deep look at the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=111) [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=115) [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=115) [So, let's talk a little bit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=154) [about designing games for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=155) [augmented reality.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=157) [Above all else, gameplay comes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=160) [first.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=162) [You should ask yourself if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=162) [are designing a game, would this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=166) [game be fun and enjoyable if it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=167) [were just 1970s graphics or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=170) [plain, flat-shaded grey cubes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=172) [It is worth prototyping with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=176) [those kinds of artwork and get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=178) [those kinds of artwork and get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=178) [that gameplay down.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=180) [Because if it's fun with those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=182) [boring grey boxes, it's going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=183) [be fun when you add all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=185) [graphics and sound later.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=186) [You should spend time refining](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=188) [that and don't convince yourself](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=190) [that if I just add another 5%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=192) [better graphics, or that one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=194) [feature, that the game is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=195) [suddenly going to be fun.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=196) [Because, you know, there's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=198) [wasteland of games out there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=199) [that were never fun from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=200) [get-go.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=202) [So, try not to fool yourself.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=202) [Let's start with the gameplay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=205) [Keep games short.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=211) [You are looking for a typical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=214) [mobile experience still - easy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=215) [in, easy out.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=217) [You want to keep a variety of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=219) [content so that it is fresh,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=223) [avoid mental fatigue on the part](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=225) [of the player of repeating the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=226) [same thing over and over again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=227) [One of the things we learned is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=231) [that spectating the game turned](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=233) [out to be just as fun as playing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=234) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=235) [Sitting there on the sidelines](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=236) [and watching like it is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=237) [sporting match going side to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=238) [side, that is just a really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=239) [side, that is just a really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=239) [enjoyable experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=242) [It's something to think about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=243) [Games are a key form of social](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=247) [and personal interaction.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=249) [Augmented reality can offer a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=252) [kind of personal touch that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=254) [might have had before playing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=256) [like a traditional card game](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=258) [around the table with older](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=259) [relatives.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=260) [But now you have technology to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=262) [help along the way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=264) [It isn't enough to just take a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=267) [3D game and put it on a table in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=271) [front of you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=273) [With augmented reality, you know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=274) [how the device is positioned.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=275) [You also know a little bit about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=277) [the user's environment and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=279) [should try to take advantage of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=281) [that in the game and make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=282) [experiences that are really for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=283) [augmented reality first.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=285) [Your device can be used as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=291) [camera to look inward at an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=293) [object of focus.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=294) [In this case, this is a 3D](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=296) [puzzle game where we're looking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=299) [puzzle game where we're looking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=299) [to repair a broken vase.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=300) [We can look all around it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=302) [figure out what piece goes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=303) [where, and do our best on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=304) [repairs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=306) [In SwiftShot, we took a similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=307) [concept.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=308) [The focus is the table you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=310) [playing on and you can walk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=311) [around it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=312) [But the table isn't just a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=314) [tracking surface for augmented](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=315) [reality.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=316) [It's an integral part of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=317) [gameplay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=318) [The height of the table is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=319) [actually significant and as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=321) [result, you'll see in the game](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=323) [that there are slingshots at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=324) [different heights on tops of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=326) [stacks of blocks in order to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=327) [give you better shots or take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=330) [advantage of the player dodging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=332) [and weaving a little bit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=333) [Another possible principle is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=337) [your device is a camera you use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=339) [to look around you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=340) [In this case, we're looking for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=341) [unicorns hiding out in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=347) [wilderness and we're taking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=349) [pictures of them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=350) [It's just around you, not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=353) [inward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=355) [The device can also be a portal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=356) [The device can also be a portal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=356) [into an alternate universe.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=361) [You don't need to see what the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=362) [camera sees directly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=364) [The environment can be entirely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=366) [replaced.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=367) [Laws of physics can be bent or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=368) [completely changed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=370) [Whatever you need to do to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=372) [it fun.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=373) [In this case, we're able to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=374) [the stars, even though it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=375) [bright daylight.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=376) [Also, your device can be the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=377) [controller itself.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=382) [You're able to fuse yourself](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=385) [with the virtual world using the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=387) [device as the controller.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=389) [In this example, we're sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=390) [magnetically levitating blocks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=392) [and placing them in the sorting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=394) [cube.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=395) [That's the focus of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=396) [interaction in SwiftShot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=397) [You want to encourage slow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=399) [movement of the device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=400) [That gives the best images to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=402) [the camera without motion blur](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=404) [and it can do the best job at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=405) [tracking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=406) [And despite how thin and light](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=408) [these devices are, waving them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=410) [all around at arm's length turns](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=412) [out to be a little bit tiring.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=413) [So, you're looking for slow and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=414) [deliberate movements.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=415) [You want to encourage the player](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=417) [You want to encourage the player](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=417) [to move around the play field In](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=420) [this case, our shot of the enemy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=422) [slingshot is blocked by those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=425) [blocks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=426) [So, we have to move over to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=428) [another slingshot to clear the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=429) [obstruction.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=431) [Control feedback is important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=439) [for immersion.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=440) [In SwiftShot, we give feedback](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=442) [using both audio and haptics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=444) [There's a variety of dynamic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=447) [behavior in the stretching band](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=449) [sound and haptics on the phones](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=451) [to give you that feel that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=455) [you're doing it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=456) [We'll talk a lot more later](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=457) [about the dynamic audio.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=458) [So, next I'd like to bring up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=462) [David Paschich, who will go deep](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=464) [into the details of SwiftShot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=466) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=467) [David?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=470) [&gt;&gt; Thank you Alex, and hello,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=473) [everybody.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=475) [I just want to echo what Alex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=475) [said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=478) [The response that we've seen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=478) [The response that we've seen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=478) [from people here at the show to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=480) [SwiftShot has been really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=481) [amazing and it's been gratifying](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=482) [to see some people already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=484) [downloading it, building it and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=485) [altering it from the sample](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=487) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=488) [So, I thank you for that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=488) [We're really excited about that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=489) [I want to talk by talking first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=490) [about the technologies we used](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=493) [in building SwiftShot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=495) [The first and foremost is ARKit,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=496) [which lets us render the content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=499) [into the physical world around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=500) [the players, immersing them in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=502) [the experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=503) [We use SceneKit to manage and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=506) [draw that content, using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=508) [advanced 3D rendering and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=510) [realistic physics for fun](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=511) [gameplay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=513) [Metal lets us harness the power](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=515) [of the GPU devices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=516) [It came into play both within](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=519) [SceneKit for the shading and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=521) [rendering and also for the flag](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=523) [simulation, which I'll talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=525) [about a little later on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=526) [GameplayKit provides an entity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=528) [component architecture for our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=530) [game object.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=532) [It let us easily share behaviors](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=532) [between objects in the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=534) [Multi-peer connectivity provides](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=537) [the networking layer, including](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=539) [the networking layer, including](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=539) [discovery of nearby devices and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=541) [synchronization, and encryption](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=543) [as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=545) [AV Foundation controls both the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=547) [music for atmosphere and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=549) [sound effects for the devices,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=551) [really giving you that immersive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=553) [experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=554) [And lastly, we built the entire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=556) [application in Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=557) [Swift's type safety, performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=559) [and advanced features like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=562) [protocol extensions let us focus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=565) [more on the gameplay and worry](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=567) [less about crashes and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=568) [mismatched interfaces between](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=570) [code layers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=571) [Those are the iOS technologies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=572) [we use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=576) [I'll talk about how we use those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=577) [as we implemented several of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=579) [features of the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=580) [Establishing the shared](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=581) [coordinate space.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=583) [Networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=584) [Physics. Asset important and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=586) [management.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=588) [Flag simulation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=589) [And the dynamic audio.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=591) [We'll start by talking about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=592) [setting up a shared coordinate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=596) [space.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=597) [The key in the experience is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=598) [The key in the experience is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=598) [having the player see the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=600) [object in the same places on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=602) [both devices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=603) [To do that, we have to have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=604) [shared coordinate space,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=606) [allowing them to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=607) [locations in the world in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=609) [same way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=610) [ARKit provides a number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=614) [features you can use to set this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=615) [up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=616) [In iOS 11.3, we introduced image](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=617) [recognition, allowing your apps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=620) [to recognize images in the world](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=621) [around you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=622) [Now in iOS 12, we're adding two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=624) [additional technologies - object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=627) [detection and world map sharing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=628) [Both image detection and object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=632) [detection let you add content to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=634) [things the user sees in the real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=635) [world but they require you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=637) [have pre-recorded those objects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=638) [for later recognition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=640) [You saw that in the keynote](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=641) [during the Lego demo,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=642) [recognizing built models and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=643) [adding content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=645) [For this game, we wanted to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=646) [enable users to play anywhere](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=648) [with a table such as a café,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=650) [their kitchen and so forth.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=651) [WorldMap sharing is how we did](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=653) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=655) [You can also apply this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=655) [technique to applications](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=656) [besides games, like a fixed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=657) [installation in a retail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=659) [installation in a retail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=659) [environment or a museum.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=660) [In the game room downstairs, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=662) [use iBeacons so devices know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=664) [which table they're next to and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=666) [can load the correct WorldMap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=669) [for that area.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=670) [That really makes the experience](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=672) [magical.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=673) [One of the features of SwiftShot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=674) [you may have used if you built](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=677) [your app yourself is the ability](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=678) [to, ability for players to place](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=680) [the game board in the virtual](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=683) [world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=683) [At the tables downstairs, we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=684) [using preloaded maps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=686) [But here's an example of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=687) [building your own board and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=688) [placing it in the virtual world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=690) [This is how that works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=692) [As you saw in the video, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=696) [start by scanning the surface,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=697) [letting ARKit build up a map of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=698) [the area.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=700) [You can then serialize that map](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=701) [out as data and transfer it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=703) [another device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=705) [The target device then loads the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=707) [map into ARKit and uses it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=709) [recognize the same surface.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=711) [At that point, we now have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=713) [shared reference point in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=714) [real world, and both devices can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=715) [render the game board into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=717) [same place in that world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=718) [same place in that world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=718) [The first step in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=722) [implementation is getting the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=723) [World Map from the ARSession on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=725) [the first device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=726) [That's the call to a new API in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=728) [iOS 12 in ARSession,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=729) [getCurrentWorldMap.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=731) [It builds an ARWorldMap object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=733) [from the session's current](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=735) [understanding of the world](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=736) [around you and then returns it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=737) [in an asynchronous callback.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=739) [We then use NSKeyedArchiver to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=740) [serialize that out to a data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=743) [object.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=745) [You can then save the data or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=746) [send it over the network.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=747) [Once you have that data object,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=751) [you next have to decide how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=753) [get it from one device to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=754) [another.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=755) [For ad hoc gaming like you saw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=756) [in the videoing, SwiftShot uses](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=758) [a peer-to-peer network](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=760) [connection which we'll get into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=761) [more detail on shortly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=762) [When the second device joins the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=763) [network session, the first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=765) [device serialized the WorldMap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=767) [and sent it over the network.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=768) [This is great for casual gaming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=770) [situations, allowing users to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=772) [set up anywhere they can find a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=773) [surface to play on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=775) [For the gaming tables](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=778) [downstairs, we used a different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=779) [downstairs, we used a different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=779) [approach.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=780) [We spent some time during setup](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=781) [for the conference recording](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=783) [WorldMaps for each of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=784) [tables, ensuring that we could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=785) [localize that shared coordinate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=787) [space from multiple angles.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=789) [Each table has its own unique](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=791) [characteristics as well as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=792) [slightly different lighting and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=793) [positioning.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=795) [We then saved the files to local](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=796) [sstorage on each device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=798) [Since the devices in use are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=800) [managed by our conference team,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=801) [we're able to use mobile device](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=803) [management to make sure that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=804) [same files are present on every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=806) [device in the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=807) [To make the solution even more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=809) [seamless, you can use iBeacons](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=813) [on each table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=815) [By correlating the identifier of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=816) [the iBeacon with particular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=818) [WorldMaps, each instance of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=819) [SwiftShot application can load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=821) [the correct WorldMap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=823) [automatically.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=824) [Now, if you're building a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=825) [consumer application, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=826) [also use things like iOS's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=828) [on-demand resources or your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=830) [cloud-sharing solution to share](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=833) [WorldMaps between devices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=835) [This would allow you to for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=837) [instance select the correct](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=838) [WorldMap for a particular retail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=839) [WorldMap for a particular retail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=839) [location somewhere out in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=841) [world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=842) [There's really a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=844) [possibilities here to tailor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=845) [users' experience and really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=846) [build something great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=848) [So, those are a couple of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=849) [ways to get that WorldMap data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=852) [from one device to another.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=854) [Let's talk about how you then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=856) [load it on the second device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=857) [In this case, we use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=859) [NSKeyUnarchiveder to blow up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=860) [that WorldMap again from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=864) [data that we received.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=865) [We then build an ARWorldTracking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=867) [configuration and add the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=869) [WorldMap to that configuration](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=871) [object, setting up the way we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=873) [want.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=875) [And then lastly, we ask the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=876) [ARSession to run that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=878) [configuration, resetting any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=879) [existing anchors and tracking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=881) [ARKit on the target device then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=885) [starts scanning the world around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=887) [you, correlating those feature](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=888) [points from the original map](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=890) [with those that it sees there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=892) [Once it's able to do that,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=894) [you've got that shared](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=895) [coordinate space.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=896) [Both devices have 000 in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=897) [same place in the real world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=899) [same place in the real world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=899) [So, a quick word about privacy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=901) [with WorldMaps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=905) [In the process of recording the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=906) [WorldMap, we take into account](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=907) [features of the world around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=910) [you, physical arrangements of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=911) [objects and so forth.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=912) [While it does include geographic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=915) [information like latitude and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=916) [longitude and thus your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=918) [application doesn't need to ask](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=919) [for location permission to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=920) [ARKit, it may include personally](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=922) [identifiable information about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=925) [the user's environment.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=926) [So, we recommend that you treat](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=928) [a serialized WorldMap the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=930) [way that you would any other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=932) [user-created private data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=933) [This means that you want to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=936) [sure that you're encrypting it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=938) [both at rest and when moving](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=940) [across the network.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=941) [You may also want to let your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=943) [users know if you're planning to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=944) [save that WorldMap information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=946) [for an extended period of time,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=948) [past a single session of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=949) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=951) [In SwiftShot, we're able to take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=953) [advantage of iOS's built-in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=954) [encryption for encrypting the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=956) [data while at rest.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=959) [data while at rest.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=959) [I'll talk next about how we did](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=961) [the networking for encryption,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=963) [on the networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=965) [Now, in addition to setting up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=967) [shared coordinate space for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=970) [SwiftShot, we needed to tell the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=972) [other device where the user has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=974) [chosen to locate the board.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=975) [We use an ARAnchor to do this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=977) [When you create an ARAnchor, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=979) [provide a name as well as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=981) [position and rotation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=983) [information as a 4 x 4](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=984) [transform.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=986) [ARKit can then include the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=987) [Anchor in the ARWorldMap we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=990) [generate and serialize out, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=992) [then, so we can transfer that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=994) [board information to the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=995) [device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=996) [Now, the system ARAnchor class](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=998) [just has the name and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1000) [orientation we created.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1002) [We can look up the anchor that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1004) [we're interested in by name on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1005) [the other side.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1006) [For our application though, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1008) [need to include some additional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1009) [information for the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1010) [device, and that's the size that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1011) [the user chose for that board,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1013) [deciding whether they're playing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1016) [on a, you know, a small table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1017) [top and surface, or they want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1019) [top and surface, or they want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1019) [blow the board up to be the size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1020) [of a basketball court.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1022) [We thought about, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1024) [adding that to our network](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1027) [protocol alongside the WorldMap,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1028) [but then we came up with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1030) [better solution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1031) [We created a custom subclass of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1033) [ARAnchor that we called board](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1035) [anchor and added that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1036) [information to that class, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1038) [size of the board.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1040) [We then made sure that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1042) [implemented the NSCoding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1044) [required classes or override](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1047) [them to include that information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1048) [when the object is serialized](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1050) [out.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1052) [Now, the information is included](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1053) [directly within the WorldMap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1055) [when we transfer it over to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1056) [other device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1058) [It makes it very easy and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1059) [straightforward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1060) [One thing to keep in mind, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1062) [this bit us for a little bit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1063) [When you use Swift to make a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1065) [subclass like this, when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1067) [serialize it out, the name of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1070) [the module or the name of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1072) [application is included in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1073) [class name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1074) [This is something to be aware of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1076) [if you're planning to move](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1077) [WorldMaps between different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1078) [applications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1079) [applications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1079) [NSKeyedArchiver can help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1081) [accommodate that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1082) [So, that's WorldMap sharing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1084) [It's a new feature in iOS 12.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1086) [We're really looking forward to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1089) [seeing what everyone can build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1090) [with that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1092) [Next, let's talk about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1094) [networking we built into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1095) [game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1097) [We used iOS's multi-peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1097) [connectivity API which has been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1099) [in the system since iOS 7 in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1101) [order to do this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1102) [Multi-peer connectivity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1104) [Allows us to set up a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1106) [peer-to-peer session on a local](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1107) [network, allowing devices in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1108) [session to communicate without](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1110) [going through a dedicated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1112) [server.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1113) [Now, in our application, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1114) [designate one of the devices as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1115) [the server but that's something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1117) [that we did for our application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1119) [It's not inherent in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1120) [protocol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1121) [Encryption and authentication](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1123) [are built into multi-peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1124) [connectivity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1125) [In our case, we didn't use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1126) [authentication because we wanted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1128) [a very quick in-and-out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1129) [experience but we did use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1130) [encryption.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1132) [We found that turning on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1133) [encryption really provided no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1134) [performance penalty, so there's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1136) [either in network data size or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1138) [either in network data size or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1138) [computation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1140) [So there's really no reason not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1141) [to use it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1142) [Multi-peer connectivity also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1145) [provides APIs for advertisements](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1146) [and discovery.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1148) [We use this to broadcast](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1149) [available games and allow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1151) [players to select a game to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1152) [join.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1154) [So, here's how we get that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1154) [session set up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1156) [First, on one device, the user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1157) [decides to set themselves up as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1159) [hosts for the application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1160) [They scan the world, place the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1163) [gameboard within that world, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1164) [then the device starts a new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1167) [session, a multi-peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1169) [connectivity session, and starts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1170) [advertising it to other devices](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1171) [on the local network.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1173) [A user on the other device sees](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1175) [a list of available games.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1177) [When he selects one, his device](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1179) [sends a request to join the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1181) [existing session.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1182) [Once the first device accepts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1185) [the request, multi-peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1187) [connectivity sets up a true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1188) [peer-to-peer network.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1189) [Any device in the network can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1191) [send a message to any other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1193) [device in the network.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1194) [In SwiftShot, we designate the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1195) [device that started the session](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1198) [as the source of truth for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1199) [as the source of truth for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1199) [game state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1200) [But again, that's the decision](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1201) [we layered on top of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1203) [networking protocol; it's not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1204) [inherent in multi-peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1205) [connectivity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1206) [Once the session is set up,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1207) [multi-peer connectivity lets us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1211) [send data between peers in three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1213) [ways.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1215) [As data packets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1215) [As resources, file URLs on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1217) [local storage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1219) [And as streams.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1221) [Data objects can be sent,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1222) [broadcast to all peers in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1223) [network whereas resources and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1225) [streams are device to device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1227) [In SwiftShot, we use the data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1229) [packets primarily as a way to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1232) [share game events and also the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1233) [physics state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1235) [We'll talk about that later on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1236) [And then we used the resources](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1238) [to transfer the WorldMap.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1240) [It ended up we didn't need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1241) [streams for our application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1243) [Under the covers, multi-peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1244) [connectivity relies on UDP for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1247) [the transfer between devices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1249) [This gives a low latency for,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1251) [great for applications like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1253) [games.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1255) [Now, UDP inherently doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1256) [guarantee delivery, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1257) [multi-peer connectivity lets you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1259) [multi-peer connectivity lets you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1259) [make that decision and specify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1260) [whether a particular data packet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1262) [is to be sent reliably or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1264) [unreliably.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1266) [If you choose reliably,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1267) [multi-peer connectivity takes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1269) [care of the retries for you, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1270) [you don't have to worry about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1272) [that in your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1273) [Even when you're broadcasting to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1275) [all members of the session.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1277) [Now that we have a networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1278) [layer, we need to build our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1282) [application protocol on top of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1284) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1286) [SwiftEnums with associated types](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1286) [make this very easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1288) [Each case has a data structure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1290) [around it, ensuring type safety](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1292) [as information moves around the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1294) [system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1295) [Some of those can be further](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1297) [enums.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1299) [So, for instance, in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1299) [example, gameAction includes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1300) [things like a player grabbed a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1302) [catapult.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1303) [A projectile launched, and so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1304) [forth.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1306) [The PhysicsSyncData is a strut](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1307) [and we'll talk more about how we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1309) [encoded that later on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1310) [Again, Swift makes this very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1313) [easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1315) [For struts, if all the members](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1315) [of the struct are codable, then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1317) [all you need to do is mark that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1319) [all you need to do is mark that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1319) [struct as codable and the Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1320) [compiler takes care of the rest,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1322) [building all the infrastructure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1324) [needed for the serialization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1325) [Swift doesn't do that for enums](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1327) [and so we ended up implementing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1329) [that ourselves, implementing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1331) [init and then coding method from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1334) [the codable protocol to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1336) [that work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1339) [Serialization then is very easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1340) [Just build a property listing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1342) [coder and have it encode the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1343) [object out for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1345) [We can then send a data packet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1346) [within the multi-peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1349) [connectivity session.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1350) [Now, a reasonable question here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1352) [might be how's this going to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1353) [in size and performance?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1355) [Property-- binary property lists](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1358) [are pretty compact and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1359) [encoder's pretty fast.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1361) [But sometimes, you know, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1363) [soft implementation in many ways](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1365) [is optimized for developer time,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1367) [which is sometimes your most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1369) [precious resource on a project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1370) [Now, we ran up against some of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1372) [those limitations as we started](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1375) [to build the next feature, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1376) [we'll talk about how we overcame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1377) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1379) [So, let's talk next about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1381) [physics simulation in the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1383) [For a game like SwiftShot,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1384) [physics is really key to create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1386) [a fun interaction that comes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1388) [from the realistic interaction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1390) [between objects and the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1391) [It's a really great experience](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1392) [to take that shot and bounce it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1394) [off an object in a game and take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1396) [out the opponent's slingshot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1397) [And that really comes from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1399) [physics simulation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1400) [We use SceneKit's built-in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1403) [physics engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1405) [It's integrated with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1405) [rendering engine, updating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1406) [positions of the object and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1408) [scene automatically, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1409) [informing us of collisions using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1410) [delegation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1412) [In our implementation, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1414) [decided that the best approach](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1415) [was for one device in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1417) [session to act as a source of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1419) [truth or server.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1420) [It sends periodic updates about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1422) [the physics state to the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1424) [devices in the network using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1425) [that multi-peer connectivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1427) [broadcast method.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1429) [Now, the other devices also have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1432) [the physics simulation on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1435) [That's because we don't send](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1437) [information about every object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1438) [information about every object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1438) [in the game, only those objects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1440) [that are relevant to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1442) [gameplay such as the box,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1443) [projectile and catapult.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1444) [Things like simulating the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1446) [swinging of the rope and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1449) [sling, particles and so forth,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1450) [those are just done locally on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1453) [each device since it's not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1455) [critical to the game that they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1456) [be in the same place on every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1458) [device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1459) [Now, one of the things that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1460) [discovered was when we were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1464) [doing this was that the physics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1466) [engine responded very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1468) [differently depending on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1469) [scale of the objects.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1470) [And so the physics simulation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1472) [thinks the objects are about 10](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1473) [times the size as you would see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1475) [them in the real world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1476) [We found that gave the best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1478) [gameplay experience and the best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1479) [performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1481) [We had to tweak some of the laws](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1482) [of physics to make that look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1484) [right but, you know, when you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1485) [building a game, if it looks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1487) [right and feels right and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1488) [fun, then it is right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1489) [Now, to share that physics state](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1493) [and make sure everything looked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1495) [right, we need to share four](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1496) [pieces of information.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1497) [The position.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1499) [The position.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1499) [The velocity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1501) [The angular velocity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1504) [And the orientation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1505) [That's a lot of information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1507) [about every object in the game,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1509) [so it was vital that we minimize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1511) [the number of bits actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1512) [used.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1513) [I'll walk you through that using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1515) [position as an example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1516) [SceneKit represents position as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1518) [a vector of three floating point](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1520) [values.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1521) [This is the native format and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1522) [gives the best performance for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1524) [calculations at run time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1526) [However, there are really more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1528) [bits than necessary to specify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1531) [the object's location.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1533) [A 30-bit float has 8-bits of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1535) [exponent and 23 bits of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1537) [mantissa.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1538) [For a range of plus or minus 10](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1539) [to the 38th meters.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1541) [It's way more than we need for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1542) [this game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1544) [So, because the physics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1547) [simulation thinks our table is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1548) [28 meters long, we said you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1550) [know, 80 meters is going to give](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1552) [us plenty of buffer space around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1554) [that on either side.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1555) [When we're coding that then,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1557) [we're able to eliminate the sign](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1560) [bit by normalizing that between](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1562) [0 and 80 meters, even though our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1565) [origin is at the center of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1567) [table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1568) [Now all values are positive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1569) [We then scale that value to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1571) [in a range of 0 to 1.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1573) [That way we don't need the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1575) [exponent information that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1576) [inherent in the protocol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1577) [And then lastly, we take that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1581) [and we scale it to the number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1584) [bits available so that all 1s is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1585) [a floating point 1 and all 0s is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1589) [the floating point 0.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1591) [This gave us millimeter scale](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1594) [precision which, as we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1595) [discovered, was really enough to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1597) [achieve that smooth synchronous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1599) [appearance in the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1600) [Now, we did a similar technique](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1603) [for all the other values that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1604) [you saw.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1606) [The velocity, angular velocity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1606) [and orientation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1608) [Tailing the ranges and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1610) [number of bits for each to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1612) [really make sure that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1613) [transmit the information using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1615) [the minimal amount of data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1616) [Overall, we reduce the number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1618) [Overall, we reduce the number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1618) [bits for each object by more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1620) [than half.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1622) [Now, even though we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1624) [compressed the numbers, property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1625) [lists still have a fair amount](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1628) [of overhead for the metadata](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1629) [around it, sending each field by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1631) [name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1633) [We said there's no reason for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1634) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1636) [We all know what these objects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1636) [are.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1637) [That's not information we need.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1638) [So, to do this, we implemented a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1640) [new serialization strategy which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1644) [we call a BitStream.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1646) [BitStreams are designed to pack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1648) [the information into as few](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1649) [bytes as possible by providing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1651) [fast serialization and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1652) [deserialization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1654) [Now, our implementation is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1654) [purpose-built for communicating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1656) [binary data with low latency in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1658) [an application like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1660) [Strategies like this wouldn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1662) [work well for data that needs to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1664) [persist or data that, where you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1667) [need to keep track of the schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1668) [and watch it changing over time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1670) [But for an ephemeral application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1672) [like this, it was just the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1674) [thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1675) [To help implement this, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1677) [created two protocols, BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1679) [created two protocols, BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1679) [Encodable and BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1681) [Decodable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1683) [Combine those and you get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1684) [BitStream Codable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1685) [Then we took that and marked all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1687) [the objects that we needed to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1689) [serialize, using that protocol,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1690) [helping us to get the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1692) [implementation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1692) [That includes both our own data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1694) [objects and the object we use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1696) [from the system such as the simD](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1697) [floating point vector type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1700) [So, here's the implementation of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1704) [compressing floats.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1706) [The compressors, configured with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1708) [the minimum and maximum range,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1710) [and the number of bits we wanted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1711) [to use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1712) [It clamps the value to the range](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1714) [and then converts it to an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1717) [integer value for encoding using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1717) [the specified number of bits.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1720) [Each component for each object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1722) [in the scene is compressed in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1724) [this way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1725) [We also use an additional bit at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1726) [the front to tell if an object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1728) [has moved since the last update.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1729) [If it hasn't moved, we don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1732) [resend that information.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1733) [So, let's go back to our action](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1736) [enum, with the three different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1738) [actions to talk about how we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1739) [actions to talk about how we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1739) [apply BitStream to do this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1740) [For regular codable, if you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1743) [doing your own serialization,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1745) [you specify encoding keys for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1747) [enums for the different cases in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1749) [the enum.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1750) [For BitStream, we used integer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1752) [values for this rather than](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1753) [string values.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1755) [And then in our encoding method,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1757) [we're able to then append that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1760) [value first followed by the data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1762) [structure associated with that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1764) [case of the enum.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1766) [Now, if you look at this code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1767) [though, there's kind of a pit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1769) [fall here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1770) [We know that this one has, this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1771) [case has three different cases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1773) [And so we only need two bits to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1777) [encode it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1778) [But what happens when we add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1780) [another case, 4 bits with 4](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1782) [cases, we'll still find.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1784) [We add that fifth case and now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1785) [we need to go through and change](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1787) [that so that every time we do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1789) [this, we're using three bits](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1791) [instead of two.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1792) [Now, that's kind of tedious.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1794) [This code's a little bit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1795) [repetitive and, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1796) [there's stuff that could go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1798) [wrong there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1799) [We really, if we don't remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1799) [We really, if we don't remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1799) [this, we're just going to end up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1800) [in a bad place.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1801) [So, we took a look at this and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1803) [figured out that there was a way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1805) [that Swift can help us do this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1807) [So, we used a new feature in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1811) [Swift 4.2, which is case](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1812) [iterable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1814) [We added that protocol](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1816) [compliance to our enum type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1819) [When you do that, Swift adds a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1822) [new static member of the type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1824) [called all cases, containing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1826) [each of the cases in the enum.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1828) [That lets us automatically get a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1830) [count of the number of cases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1832) [We then added another extension,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1834) [this time on the raw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1836) [representable type which all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1837) [enums with number types like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1839) [that conform to.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1841) [Where it's case iterable and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1843) [where that number is affixed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1844) [with integer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1845) [And to this, we get to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1847) [automatically take those number](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1847) [of cases and figure out how many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1849) [bits it takes to represent all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1851) [those cases on the wire.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1853) [Lastly, we added a generic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1856) [method on the writable BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1858) [method on the writable BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1858) [type allowing us to encode that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1860) [enum.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1862) [It appends things of that type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1863) [and it uses that new static](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1864) [property to figure out the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1866) [number of bits that are needed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1867) [to use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1869) [Now, our encode method is much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1871) [simpler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1873) [We just used append enum on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1874) [proper coding key for each and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1876) [Swift takes care of the rest.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1878) [When we add more cases to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1879) [enum, the BitField expands](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1881) [automatically.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1882) [If we remove cases, it contracts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1884) [automatically.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1885) [We don't have to worry about it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1886) [So, how much faster and more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1891) [compact is BitStreamCodable?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1892) [We ran some tests using XE test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1895) [support for performance testing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1896) [using a representative message](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1898) [in which we send information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1900) [about object movement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1901) [The results were pretty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1903) [impressive - 1/10 the size,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1904) [twice as fast to code, 10 times](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1906) [as fast to decode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1908) [Now when we talk about going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1910) [from 75 microseconds down to 6](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1911) [microseconds, that seems like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1913) [small potatoes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1915) [But there's around 200 objects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1916) [in the game and we want to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1918) [this very frequently to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1919) [this very frequently to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1919) [sure the game remains smooth for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1920) [all participants.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1922) [By using this encoding format,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1923) [we were able to do those physics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1925) [updates at 60 fps, ensuring that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1926) [you get a smooth experience for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1929) [everyone in the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1930) [Now, I've talked about this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1933) [We did some things with codable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1935) [and some things with BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1936) [Codable that, you could have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1937) [problem there because we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1939) [encoding things two different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1940) [ways.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1941) [And that means now we need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1942) [have two different code paths](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1943) [through our application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1944) [Swift helps us out again and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1946) [lets us figure out how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1947) [combine them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1948) [We then added constrained](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1950) [extensions so that anything that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1952) [is codable in BitStream Codable,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1954) [we provide default](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1956) [implementation of the BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1957) [encoding.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1959) [And then we just go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1959) [use a binary [inaudible] encoder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1962) [to encode the data and stuff it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1965) [into BitStream.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1967) [And then anything, any struct](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1968) [that is codable, we just add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1971) [that by marking it BitStream](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1972) [Codable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1973) [Now, this implementation then is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1974) [not as fast and compact as if we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1976) [went forward and made everything](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1978) [BitStream Codable directly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1979) [BitStream Codable directly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1979) [But we discovered we didn't need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1981) [to do that for every object in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1982) [the game, only the most frequent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1984) [messages.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1985) [This let us really move quickly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1986) [and keep better rna on the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1988) [So, that's how we did the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1991) [physics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1993) [Next I want to talk about how we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1994) [dealt with the assets on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1995) [game levels and this is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1996) [question that a lot of people](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1997) [asked us downstairs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=1998) [You know, the assets include the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2000) [3D modules, the textures, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2003) [animations and so forth.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2004) [So, we have some text angle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2006) [artists here in Apple and they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2007) [used some commercial tools to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2008) [build the visuals for the games.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2010) [The blocks, the catapults and so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2011) [forth.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2012) [They then exported those assets](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2014) [in the common DAE file format.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2016) [We're looking forward to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2018) [commercial tools supporting USDZ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2019) [but for this game they weren't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2021) [quite there yet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2022) [We then built a command line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2023) [tool in Swift that converts the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2025) [object from DAE into SceneKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2027) [files using the SceneKit API.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2029) [Because SceneKit provides the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2033) [same APIs on both iOS and macOS,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2034) [we're able to run this tool as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2037) [part of our build process on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2038) [part of our build process on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2038) [macOS and include the SceneKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2040) [files directly in our iOS build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2042) [in the application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2044) [We structured the data so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2046) [each individual type of block is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2048) [its own file and then for each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2050) [levels, we combine those blocks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2052) [together.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2054) [This let us iterate on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2055) [appearance and physics behavior](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2057) [of each individual block and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2058) [then pull them all together for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2060) [those levels and iterate on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2061) [gameplay design.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2063) [Try out some of the different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2064) [levels that you'll see if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2065) [look in the source code to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2066) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2067) [To optimize, further optimize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2070) [for different distances,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2072) [SceneKit supports varying the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2073) [assets used based on the level](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2075) [of detail required.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2077) [Nearby objects use more polygons](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2079) [and more detailed textures while](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2080) [far away objects use fewer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2082) [polygons and less detailed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2083) [textures.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2085) [This really optimizes the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2086) [rendering of the scene.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2087) [However, we still want the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2091) [gameplay to stay consistent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2092) [And so we specified the physics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2094) [body separately.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2095) [SceneKit provides a number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2097) [built-in physics body types such](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2098) [built-in physics body types such](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2098) [as cube, sphere, cylinder.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2100) [And if you use those, you really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2103) [get the best performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2104) [If you don't specify one,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2106) [SceneKit will build a convex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2108) [hull automatically for you and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2109) [that works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2111) [But it is a lower, can be a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2112) [lower performance implementation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2114) [by adding these objects where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2117) [they were available and where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2119) [they made sense, we really sped](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2120) [up the performance of the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2121) [So, here's some examples of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2125) [physics finished product.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2126) [First one is one of the blocks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2129) [from the game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2130) [In this case, a cylinder with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2130) [textures for a great wood grain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2132) [look.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2133) [Next is the slingshot with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2135) [sling head idle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2136) [We add the [inaudible] colors at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2137) [RunTime using shaders and built](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2139) [some custom animation for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2140) [sling's motion during gameplay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2142) [Lastly, we included some extra](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2144) [assets that didn't get included](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2146) [in the gameplay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2147) [Even though we had to sacrifice](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2148) [them, we want you to have them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2150) [and use them in your own sample](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2151) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2153) [So, one of the other fun things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2155) [we included is this flag](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2157) [animation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2158) [It really improves the immersion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2159) [It really improves the immersion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2159) [in the game environment.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2160) [We wanted a realistic wind](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2162) [effect on this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2164) [Now, we could've used a cloth](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2165) [simulation out of the physics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2166) [engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2167) [But instead, we decided to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2169) [the GPU and do it with Metal.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2171) [We started with a SceneKit asset](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2174) [built by our technical artist.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2176) [To get the Apple logo on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2178) [flag, we applied a texture at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2179) [RunTime.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2181) [Then we built a Swift class](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2183) [around the Metal device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2185) [Swift code builds a metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2186) [command queue and inserts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2188) [information from the state of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2189) [the game, such as the direction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2191) [the wind is blowing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2192) [That command queue is running a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2194) [custom Metal compute shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2195) [That comes from a legacy code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2197) [built in C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2199) [But because Metal is based on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2200) [modern C++, it was a very easy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2201) [conversion to make.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2203) [We then also run another compute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2205) [shader to compute normal for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2207) [surface, so we can get a great,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2209) [smooth flag look without a huge](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2210) [number of polygons in the scene.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2213) [And it really makes the flag](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2215) [look amazing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2216) [Each frame, the shader updates](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2218) [Each frame, the shader updates](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2218) [the geometry of the match to its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2220) [new position.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2222) [By taking advantage of the GPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2223) [in this way, we get a great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2224) [effect without it impacting the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2226) [main CPU.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2228) [So, lastly I'd like to talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2232) [about the audio implementation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2233) [in SwiftShot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2235) [Audio can make any game even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2236) [more immersive and engaging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2238) [We knew we wanted to provide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2240) [realistic sound effects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2242) [positioned properly in the world](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2243) [for that really immersive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2245) [experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2246) [And giving the user great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2246) [feedback on how they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2248) [interacting with that world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2248) [We also wanted to make sure it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2250) [was fast and pay attention to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2251) [how much adding the audio would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2253) [add to the size of our app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2255) [So, we came up with what we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2257) [think is a great solution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2258) [We created a few representative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2260) [sound samples using some toys we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2262) [borrowed from children of people](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2264) [on the team.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2265) [We then recorded those and used](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2267) [those to combine them into an AU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2269) [preset file and use those to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2271) [build a custom Midi instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2273) [in AV Foundation using AV Audio](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2275) [Unit Midi Instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2277) [That made it easy to quickly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2279) [That made it easy to quickly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2279) [play the right sound at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2280) [right time in response to user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2281) [inputs and collisions in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2283) [game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2284) [We didn't just play the sounds](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2285) [as is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2288) [To give good feedback to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2289) [user, we pull back on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2290) [slingshot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2291) [We vary the sound in a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2292) [ways.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2293) [We change the pitch based on how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2294) [far back they've pulled the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2296) [slingshot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2297) [And we vary the volume based on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2299) [the speed as you pull back.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2303) [And we do that at RunTime by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2304) [selecting the right Midi note](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2306) [and then using some additional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2307) [Midi commands to alter that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2309) [sound before we play it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2310) [So, let's take a listen and this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2312) [is, we'll play it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2313) [[ Sound effects ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2318) [Now, we also wanted to make sure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2333) [that when you're using the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2335) [slingshot, we also give users](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2336) [some audio feedback as to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2339) [some audio feedback as to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2339) [whether or not they're within](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2341) [range of the slingshot and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2342) [whether or not they've grabbed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2343) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2344) [And those are the little beeps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2344) [you heard at the start.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2345) [Because those are UI feedback](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2347) [for the users, those sounds only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2348) [come out of the device that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2351) [user is using to interact with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2352) [the slingshot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2353) [However, we also want everybody](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2354) [else in the game to know what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2356) [going on with the slingshot,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2358) [whether someone else is pulling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2359) [something or something like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2360) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2361) [But we want one of those to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2362) [quieter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2362) [So, we use positional audio so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2363) [that if my opponent across the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2365) [table is pulling their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2367) [slingshot, I still hear that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2367) [sound from my device but it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2369) [quieter and positioned correctly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2370) [in the world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2372) [For colliding blocks, we took a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2374) [similar approach but slightly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2377) [different.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2378) [We really wanted a cacophonous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2379) [effect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2381) [And the blocks are generally not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2381) [near any one player so again,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2385) [using the positional support](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2387) [from SceneKit really made this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2388) [sound great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2390) [Each device makes sounds](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2392) [separately without worrying](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2393) [about synchronizing across](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2395) [devices because we want it to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2396) [cacophonous, blocks smashing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2398) [about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2399) [Again, we use a custom Midi](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2400) [instrument to take a small](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2402) [number of sounds and vary them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2403) [In this case, varying the attack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2405) [rate based on the strength of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2406) [the collision impulse coming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2408) [from the SceneKit physics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2409) [engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2410) [These sounds again are localized](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2413) [in 3D coordinates based on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2415) [device's position in the scene.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2416) [So, collisions in the far end of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2417) [the table are quieter than those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2419) [at your end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2420) [Let's take a listen to this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2421) [[ Sound effects ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2425) [One more shot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2438) [There we go.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2439) [Right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2442) [So we wanted to share one more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2443) [little trick that we discovered](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2447) [as we were working on this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2448) [In the process of setting up the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2450) [sounds, we discovered that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2451) [needed to have a script run at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2453) [RunTime to do some file name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2454) [path conversions on the property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2456) [list for the DAU preset.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2457) [We found that we're able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2459) [We found that we're able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2459) [build that tool using Swift but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2461) [set it up as a command line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2463) [tool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2464) [Do you notice at the top of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2465) [this, the traditional Unix](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2466) [shebang-style statement at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2467) [top of the script.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2469) [That tells your shell to fire up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2470) [Swift to run this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2473) [By doing this, we can then treat](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2475) [Swift as a scripting language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2477) [You can develop one of these by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2479) [using a Swift playground to work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2481) [with your code interactively and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2483) [make sure that you've gotten it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2484) [right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2485) [Once it's ready, just save it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2486) [out to a file, add the shebang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2488) [line to the top and make the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2490) [file executable in the file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2491) [system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2493) [Now you've got a command line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2495) [tool that you can use either,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2496) [you know, outside the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2498) [application or in Xcode using a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2499) [RunScript phase.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2501) [It's very easy and it really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2503) [gives you access to all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2505) [system frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2507) [In this case, we're able to edit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2508) [the P list directly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2509) [It's a really great technique](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2511) [and we hope that you'll be able](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2512) [to take advantage of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2513) [So, today I hope you've seen how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2517) [AR provides really new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2519) [AR provides really new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2519) [opportunities for engaging games](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2520) [and other experiences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2521) [We encourage you to design with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2523) [AR in mind from the start.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2524) [And remember that for games, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2526) [play is the thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2527) [You can't sprinkle fun on top at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2528) [the end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2530) [We really hope that you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2533) [download the SwiftShot available](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2534) [as sample code and use it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2535) [guide you as you build your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2537) [apps and we're planning to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2538) [update that with each subsequent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2540) [seed of iOS 12 as we go to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2541) [release.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2543) [And finally, if you haven't had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2544) [a chance yet, we hope you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2547) [play SwiftShot with us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2548) [downstairs in the game room.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2549) [For more information, there's an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2552) [ARKit lab immediately after this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2554) [session and the get together](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2555) [this evening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2556) [I'm also happy to announce that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2557) [for those of you here at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2559) [conference, we're going to have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2560) [a SwiftShot tournament this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2561) [Friday from noon to 2, so we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2562) [hope you'll join us for that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2564) [Thank you very much.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2566) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/605/?time=2568)