WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:43:57.704 --> 00:44:01.141 align:middle line:-1
这是我写的一个类 我们稍后再看它

00:44:01.441 --> 00:44:04.244 align:middle line:-2
但我们先看看能否从崩溃日志中
了解更多信息

00:44:05.279 --> 00:44:07.481 align:middle line:-1
我们看一下这个线程的整个堆栈

00:44:07.548 --> 00:44:09.816 align:middle line:-1
我可以通过点击这个按钮来做到这点

00:44:09.883 --> 00:44:11.652 align:middle line:-1
它也会显示所有其他线程

00:44:12.920 --> 00:44:15.589 align:middle line:-1
如果我们注意最顶层的帧

00:44:15.923 --> 00:44:17.724 align:middle line:-1
我们会看到真正发生的事情

00:44:17.791 --> 00:44:20.327 align:middle line:-2
是free函数
正在调用abort函数

00:44:20.694 --> 00:44:23.597 align:middle line:-1
这表示堆损坏 它是一种内存错误

00:44:25.265 --> 00:44:27.467 align:middle line:-1
如果我们查看其它线程的堆栈跟踪

00:44:27.534 --> 00:44:28.836 align:middle line:-1
比如这里的第5个线程

00:44:29.603 --> 00:44:33.240 align:middle line:-2
我们会看到它还在LazyImageView中
执行了一些代码

00:44:35.075 --> 00:44:37.778 align:middle line:-1
我们来看看这组崩溃中的另一次崩溃

00:44:39.179 --> 00:44:42.249 align:middle line:-2
我们会发现所有这些崩溃日志
都有一个共同的主题

00:44:42.316 --> 00:44:46.587 align:middle line:-2
当free函数调用abort时
一个线程报告堆损坏

00:44:47.254 --> 00:44:52.593 align:middle line:-2
而另一个线程正在处理
一段非常相关的代码

00:44:52.659 --> 00:44:55.462 align:middle line:-2
实际上是在同一个类中
即LazyImageView中

00:44:55.929 --> 00:44:57.898 align:middle line:-1
这很可能不是巧合

00:44:58.098 --> 00:45:00.767 align:middle line:-1
我非常怀疑这是一个多线程问题

