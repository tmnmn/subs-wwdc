WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:41:58.886 --> 00:42:01.488 align:middle line:-1
因为它们只是偶尔会导致崩溃

00:42:01.555 --> 00:42:05.559 align:middle line:-2
因此你的代码似乎在99%的情况下
都能正常工作

00:42:05.926 --> 00:42:08.996 align:middle line:-2
并且这些漏洞在很长一段时间内
都不会被发现

00:42:11.231 --> 00:42:14.034 align:middle line:-1
通常多线程错误会导致内存损坏

00:42:14.101 --> 00:42:17.838 align:middle line:-2
并且你在崩溃日志中看到的内容
看起来也就像内存损坏一样

00:42:17.905 --> 00:42:20.841 align:middle line:-1
我们已经看到了上一节中的例子

00:42:21.241 --> 00:42:23.443 align:middle line:-1
当你处理malloc内部的崩溃时

00:42:23.510 --> 00:42:26.246 align:middle line:-1
或在释放或保留计数操作时

00:42:26.580 --> 00:42:29.183 align:middle line:-1
这些都是内存损坏的典型症状

00:42:30.350 --> 00:42:33.754 align:middle line:-1
多线程错误也有一些特有的症状

00:42:33.854 --> 00:42:36.957 align:middle line:-1
崩溃的线程通常包含 抱歉

00:42:37.024 --> 00:42:39.359 align:middle line:-1
崩溃日志通常包含

00:42:39.493 --> 00:42:41.962 align:middle line:-1
多个正在执行彼此相关的代码的线程

00:42:42.262 --> 00:42:44.531 align:middle line:-1
所以如果某个特定的类或方法

00:42:44.765 --> 00:42:47.201 align:middle line:-1
出现在多个线程的崩溃日志中

00:42:47.601 --> 00:42:50.470 align:middle line:-1
这表示可能存在多线程错误

00:42:51.438 --> 00:42:55.042 align:middle line:-1
多线程问题导致的内存损坏

00:42:55.108 --> 00:42:56.443 align:middle line:-1
通常非常随机

00:42:56.543 --> 00:43:00.981 align:middle line:-2
因此你可能会发现崩溃发生在
稍微不同的代码行上

