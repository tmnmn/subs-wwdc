WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:17:59.746 --> 00:18:01.548 align:middle line:-1
你给他们一些适当的错误信息

00:18:01.615 --> 00:18:04.284 align:middle line:-1
告诉他们其订阅服务无法续订

00:18:04.685 --> 00:18:07.454 align:middle line:-2
你可以引导该用户
在App Store中

00:18:07.521 --> 00:18:08.555 align:middle line:-1
更新他们的账单信息

00:18:09.423 --> 00:18:11.258 align:middle line:-1
现在当用户更新他们的账单信息时

00:18:11.325 --> 00:18:13.727 align:middle line:-2
也许他们只需更新过期日期
或其它什么内容

00:18:14.261 --> 00:18:15.262 align:middle line:-1
这时发生了两件事

00:18:15.896 --> 00:18:18.432 align:middle line:-1
首先 App Store

00:18:18.632 --> 00:18:21.368 align:middle line:-2
会立即向用户的信用卡收费
并进行一次成功的交易

00:18:21.768 --> 00:18:23.403 align:middle line:-1
当App Store这样做了

00:18:23.570 --> 00:18:25.839 align:middle line:-2
它所做的第二步是
直接向你的服务器

00:18:25.906 --> 00:18:29.843 align:middle line:-2
发出一个关于该续订交易的
HTTP POST请求

00:18:30.043 --> 00:18:34.715 align:middle line:-1
该POST请求的载荷中

00:18:34.781 --> 00:18:36.617 align:middle line:-1
包括刚发生的交易的新信息

00:18:36.984 --> 00:18:38.952 align:middle line:-2
你可以使用载荷中的
original_transaction_id字段

00:18:39.019 --> 00:18:42.489 align:middle line:-1
来确定这个通知是针对哪个用户的

00:18:43.290 --> 00:18:45.292 align:middle line:-1
一旦你找出该用户

00:18:45.359 --> 00:18:47.528 align:middle line:-2
你可以使用最新的
expires_date

00:18:47.728 --> 00:18:50.998 align:middle line:-2
来为此用户进行更新
以便他们获得

00:18:51.064 --> 00:18:52.766 align:middle line:-1
下一个订阅期的访问权限

00:18:53.166 --> 00:18:55.002 align:middle line:-1
接着这位可能还在盯着你的网页

00:18:55.068 --> 00:18:57.538 align:middle line:-1
试图访问其中内容的用户

00:18:58.505 --> 00:19:00.574 align:middle line:-1
将能够立即被解锁

