# What’s New in Safari and WebKit

## Summary
Safari and WebKit are continually evolving with new features, APIs, and cutting edge web standards. Learn about this year's biggest feature highlights, designed to help you create richer experiences with better performance and security — whether you are developing content for a browser or developing an app with embedded web content.

## Info
* Frameworks
* WWDC 2018 - Session 234 - iOS, macOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=7) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=21) [&gt;&gt; 各位 下午好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=25) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=29) [我希望你们到目前为止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=31) [仍在享受着 WWDC](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=32) [我知道 过去的这个星期是令人激动的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=33) [一个星期 各种公告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=34) [新功能 软件更新 开发者工具 接踵而来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=36) [我的名字是 Shloka Kini](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=39) [我在开发者出版物部门任职](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=41) [也就是说 借一句 Cardi B. 的歌词](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=43) [“我现在不仅编程” “还要写文件”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=46) [[ 笑声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=49) [尤其是撰写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=52) [能够帮助你们编出精彩 App 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=53) [说明文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=55) [今天 我有幸向大家介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=57) [一些 Safari 和 WebKit 的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=58) [一些 Safari 和 WebKit 的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=58) [所以 如果你在设计网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=61) [并且想应用最新的网络科技](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=63) [最新版本的 Safari](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=66) [那这场演讲正适合你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=68) [如果你是一名使用网页视图的 App 开发人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=69) [或者是扩展程序的开发人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=72) [这场演讲也会对你有所帮助](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=74) [还有 哪怕你并不在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=76) [我刚才提到的任何一个领域内任职](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=77) [你依然应该坐下来听听](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=78) [因为 Safari 的最新版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=80) [拥有一些非常棒的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=81) [能够提升你的浏览体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=83) [现在 已经出现了很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=85) [很多新的改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=88) [尤其是我们举办了 What's New 演讲之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=89) [不过今天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=91) [我将着重介绍其中的一部分改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=92) [它们真的能帮你写出安全的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=94) [具有良好性能的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=96) [融入最新的科技 以得到最丰富的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=98) [而且 它们中的很多都是免费的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=100) [那么 让我们从安全开始讲起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=102) [还有一些公告声明 WKWebView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=104) [我知道你们在想什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=109) [WKWebView 自从 2014 年起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=110) [就出现了 严格来讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=113) [它不是新事物](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=117) [然而 它还是值得再次被提起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=118) [然而 它还是值得再次被提起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=118) [因为现在我们正式地反对 UIWebView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=120) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=124) [所以 如果你正在编写一个新的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=129) [或者一个新的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=130) [你想要展示一些 web 内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=132) [但它们很难以原生视图展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=133) [请使用 WKWebView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=136) [另外 即便你以前使用过 UIWebView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=138) [转换也并不困难](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=141) [如果你是在 macOS 和 iOS 两个平台同时进行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=143) [开发工作 它绝对可以在开发 App 方面帮你节省时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=145) [因为 WKWebView 在两个平台都适用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=147) [而 UIWebView 是针对 iOS 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=152) [WebView 则是针对 macOS 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=154) [所以 你可以共享很多的程序代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=155) [在这两个版本之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=157) [另外 WKWebView 也能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=159) [在一个完全单独的过程中运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=161) [独立于你 App 的其他部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=163) [所以 和 UIWebView 不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=164) [即使你的 web 进程受到损害](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=166) [它也不会影响你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=169) [如果你的网页视图有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=170) [复杂的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=172) [也不会使你的 App 意外中止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=174) [而且 即使 WKWebView 崩溃了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=176) [它也只局限于网页视图的框架内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=179) [它也只局限于网页视图的框架内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=179) [而非整个 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=181) [WKWebView 能够提供安全方面的优势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=183) [同时保证你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=185) [性能卓越 值得信赖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=187) [所以 不管转换到 WKWebView 是复杂还是简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=189) [你从中得到的种种好处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=190) [都令人觉得 这种改变是值得的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=192) [接下来的一个声明包含扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=195) [不过拓展 Safari](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=198) [我的意思是 它在过去这些年来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=200) [已经改进了很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=204) [那么 我们一开始就先快速](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=206) [回顾一下 Safari 扩展的历史](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=207) [在 2010 年 在我们建立起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=212) [App 可扩展性的平台概念之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=214) [当时只有最初版本 Safari 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=215) [那些是 Safari EXTZ 文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=220) [你可以在 Safari Extensions Builder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=222) [中建立这些文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=223) [它们可以通过 Safari Extensions Gallery 库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=225) [被分配出去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=226) [或者 在一些不常见的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=227) [直接被开发人员分配出去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=229) [这些最初版本的扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=231) [都具有不可思议的强大威力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=233) [因为它们能获取你所有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=235) [浏览数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=236) [你也会因此变得更“受欢迎”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=239) [你也会因此变得更“受欢迎”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=239) [尤其易受诈骗和恶意软件的侵扰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=240) [我们需要去建立一个安全防火墙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=242) [那就是为什么我们没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=243) [在最初版本的 Safari 扩展那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=244) [停止工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=246) [那么 我们故事发展的下一个里程碑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=247) [出现在 2014 年](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=249) [那时 我们为 macOS 和 iOS 两个平台都](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=252) [建立了 App 可扩展性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=253) [不过 App 扩展是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=255) [扩展 App 的一种方式 而不是 Safari 的扩展方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=258) [但重要的是 这个举动极大地改变了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=262) [我们对于扩展的理解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=264) [在苹果的各个平台上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=265) [在这里 你可以明确地扩展系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=267) [与此同时 用户可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=269) [与其他 App 进行互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=270) [而且和 App 一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=272) [它们可以建立在 Xcode 开发环境下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=273) [由于这个更好的扩展模型的出现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=275) [我们想要将这些概念中的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=277) [在返回到最初版本 Safari 扩展中进行应用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=279) [而在当时 最受欢迎的一些是广告拦截器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=281) [于是 我们在 2015 年引入了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=286) [内容拦截器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=288) [内容拦截器是一种在 Xcode 开发环境下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=291) [的 App 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=292) [它在 macOS 和 iOS 系统下都能够使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=294) [它们所拥有的特殊结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=297) [令其可以快速运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=298) [因此 任何内容拦截器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=299) [因此 任何内容拦截器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=299) [在拦截方面都比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=301) [任何最初版本 Safari 扩展都要快速](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=303) [它们不会降低](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=305) [浏览速度的能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=306) [而且保护隐私 因为这些扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=308) [永远看不到你的用户在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=309) [浏览什么网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=311) [在这一点上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=313) [App 扩展模型提供了如此多的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=314) [性能优势 于是我们想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=316) [或许我们能把这些概念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=318) [带回到最初版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=319) [Safari 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=320) [那样我们就能在两方面都得到最佳结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=322) [一个能够扩展 Safari 功能性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=324) [的扩展功能 同样它也能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=326) [扩展你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=328) [令它能和 Safari 对话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=330) [基于此在 2016 年 为 macOS 系统开发的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=331) [新版 Safari App 扩展问世了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=334) [这种扩展 Safari App 的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=337) [能够在 Xcode 的环境下进行编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=339) [同时 不同于以往的 App 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=340) [这次你可以通过 App store 获得 App 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=342) [也就是说 这些扩展可以是免费的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=343) [也可以是收费的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=346) [无论是使用哪种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=346) [你都不需要自己买单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=348) [因此 与 2010 年的最初版本扩展相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=350) [内容拦截器与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=352) [Safari App 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=354) [具有非常大的优势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=355) [所以 你最应该做的事情就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=357) [如果你还在使用最初版本的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=358) [如果你还在使用最初版本的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=358) [Safari 扩展 赶紧切换到 Safari App 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=360) [同样 如果你还在使用广告拦截器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=363) [请切换到内容拦截器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=365) [现在 我们已经将这些工作全部完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=367) [我们还能用最初版本的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=368) [Safari 扩展做什么呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=371) [难道去诈骗吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=373) [从 Safari 12 开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=374) [我们已经正式停止了对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=377) [Safari Extensions Gallery 之外的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=379) [旧版扩展的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=381) [旧版的扩展仍然可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=384) [在 Safari 12 中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=386) [只要它们还在 Gallery 库里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=388) [唯一的例外是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=391) [那些使用被弃用的 Can Load API 的扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=392) [我们将其默认为关闭状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=394) [我们将继续接受](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=397) [对 Gallery 库的申请](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=398) [直到 2018 年年底为止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=400) [不过 我们将在接下来的一年时间里提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=402) [更多的更新同时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=404) [将最终完成向 Safari App 扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=406) [的彻底转型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=408) [因此 现在你最该要做的事情就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=410) [赶紧学会如何在这两种模型下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=412) [开发扩展 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=413) [那么 怎么学习呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=414) [请查看教学文档 在此感谢开发人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=416) [出版物部门](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=419) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=420) [到现在为止 我们已经宣布完了两条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=427) [针对使用 WebViews 的本体开发人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=429) [以及扩展开发人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=431) [的最重要的公告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=432) [这些功能的其余部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=434) [主要是关于如何进行 web 开发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=435) [下面 让我们从子资源的完整性开始说起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=438) [现在 作为一名开发人员 你可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=441) [通过 HTTPS 连接 向用户输送你的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=443) [并且 由此产生的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=446) [可能还包含由第三方服务器发布的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=448) [部分内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=451) [比如一个内容输送网络](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=453) [这两个连接可能都是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=455) [安全可靠的 可能都使用 HTTPS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=456) [这也就意味着你保有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=459) [机密性 身份验证信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=461) [以及传输数据的完整性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=463) [但是 万一第三方服务器本身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=465) [受损害了怎么办 这也不是没有可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=468) [在这种情况下  HTTPS 连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=472) [仅能够确保连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=474) [但它不能确保服务器没有受损](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=476) [它可以修改脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=479) [它可以修改脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=479) [同时变换你提供给用户的样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=481) [在第三方服务器受到损害的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=483) [子资源的完整性将保证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=486) [你不会给你的用户 提供受到损坏的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=488) [那么 这是如何完成的呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=490) [通过哈希算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=492) [首先 你需要添加一个完整性属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=494) [到一个脚本或者链接元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=495) [在你的标记语言中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=497) [这个属性的数值是一个 hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=498) [你使用安全的哈希算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=500) [去创建这个 hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=501) [当一个用户抓取了文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=503) [那么另一个 hash 也就计算了出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=505) [比较这两个 hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=507) [如果它们不相同 则你的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=508) [将不能被执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=510) [这一过程确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=511) [脚本在受损的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=513) [将不会被执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=515) [除非它们和你预期的相匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=516) [不然你的脚本将不会被执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=518) [当然 为了保证你不会丢失掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=522) [功能性 你还可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=523) [提供一个回退处理用于重新加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=525) [服务器里面的资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=527) [在第三方服务器脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=529) [不能执行的前提下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=530) [现在 阻止受损的资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=532) [不让它们去执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=535) [就能确保用户的安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=537) [而且 智能跟踪预防法可以保证浏览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=539) [而且 智能跟踪预防法可以保证浏览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=539) [体验的隐私性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=541) [好的 我知道你们可能听说过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=543) [智能跟踪预防法这个词](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=544) [在 Keynote 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=545) [这是 Safari 的一个功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=546) [它可以降低交叉网站的跟踪度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=548) [通过限制带有跟踪能力的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=550) [cookies 和网站关于域的数据的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=552) [另外 在之前的版本中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=554) [cookies 是通过两个规则来保留的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=555) [第一个规则是 cookies 可以在用户与第一方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=558) [产生互动的 24 小时内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=559) [被第三方所使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=562) [第二个原则是 在 Safari 使用的 30 天内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=565) [包括最初的 24 小时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=568) [那些 cookies 将被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=570) [单独存储](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=571) [然后才被删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=573) [不过 现在我们正在加强对它的控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=574) [我们正在移除对于一般 cookie 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=578) [24 小时接触窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=580) [针对带有跨站点追踪能力的域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=582) [不过 默认的情况是 所有的 cookies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=585) [都被单独存储](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=587) [作为开发人员 我清楚经过可靠验证的嵌入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=589) [是非常重要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=591) [对于你们的工作流以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=594) [与 web 内容的互动来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=595) [那么 你怎么才能准许](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=597) [经过可靠验证的嵌入呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=599) [那就是 使用 Storage Access API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=601) [使用了 Storage Access API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=604) [每当出现一个带有跨站点追踪的域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=608) [它希望在第三方背景下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=610) [获得 cookie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=611) [那么你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=613) [提出存储访问的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=614) [如果用户以前没有授权同意访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=617) [就会出现提示框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=619) [询问用户是否允许](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=620) [在这个站点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=622) [去访问 cookie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=625) [通过让用户给出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=627) [明确的是否允许访问 cookie 的意见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=629) [我们赋予了用户去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=631) [管控自己的 cookies 以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=633) [哪些网站可以进行追踪的权力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=635) [令他们的浏览体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=636) [更加具有私密性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=638) [如果他们愿意的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=641) [接下来 我们来谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=642) [使用自动填充强密码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=645) [进行身份验证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=647) [我相信你们已经在 State of the Union](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=648) [以及几天前的演讲中看过这个了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=650) [自动填充强密码是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=651) [能够保证用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=653) [选择并存储强密码的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=655) [当他们在设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=658) [新账户的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=659) [新账户的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=659) [并且 这个功能其实对每个人都好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=660) [我是说 我喜欢把自己想象成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=662) [一个愿意选择使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=663) [强密码的人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=665) [但是一段时间过后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=666) [我会逐渐发现我的密码 并没有想象中那么强](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=668) [而且我可能已经在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=671) [好几处地方用过它了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=672) [对于大多数开发者来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=674) [你不要费力就可以享用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=675) [这个功能 因为启发式算法会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=676) [判断你是在注册账户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=678) [还是在登录页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=680) [不过 为了保证这个管用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=681) [无论登录流程是怎样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=683) [需要把 AutoComplete 属性添加到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=686) [适当的那些输入栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=688) [现在 我们默认选择的强密码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=690) [是长度为 20 个字符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=692) [包括大写字母](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=694) [和小写的字母](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=696) [数字和连字符号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=698) [虽然这项功能被设计成能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=700) [和大多数服务兼容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=701) [我们也承认](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=702) [有些时候你的密码需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=704) [符合某些特定的要求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=705) [才能与后台系统兼容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=707) [正因为这个原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=710) [你可以添加一个 passwordRules 属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=711) [到你的文本元素中去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=713) [来详细说明那些要求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=715) [另外 在开发者站点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=717) [有一个密码验证工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=718) [帮你去测试自动填充强密码的兼容性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=719) [帮你去测试自动填充强密码的兼容性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=719) [并开发出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=722) [你自己的密码规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=724) [另一项在 State of the Union 中提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=728) [功能是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=729) [Security Code AutoFill](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=731) [这是另一项大多数人都将能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=733) [免费获取的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=734) [这项功能我会加以好好利用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=735) [因为我发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=737) [不停转换是件很麻烦的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=738) [在我的 App 和 网站之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=740) [还有信息 还要为代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=742) [寻找那些数字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=744) [将它输入进去并尝试记住它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=745) [那么 让 Safari 计算出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=747) [我该在什么时候输入安全代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=749) [然后在快速输入栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=750) [进行提示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=752) [这样会让过程更加便捷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=753) [而且 就像从前一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=756) [你能免费得到这项功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=758) [因为它使用的是启发式算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=760) [不过为了确保这些算法能够正确运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=761) [并且你能在快速输入栏里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=763) [获得提示 将输入区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=764) [的 AutoComplete 属性标记为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=767) [one-time code value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=771) [想了解更多的话 希望你们能在线查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=772) [Automatic Strong Passwords 以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=775) [Security Code AutoFill 的板块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=776) [好 这就说完了安全问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=779) [好 这就说完了安全问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=779) [刚刚我们谈了更换到 WKWebView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=782) [然后聊了 Safari App 扩展的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=784) [内容拦截器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=785) [还有自资源完整性能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=787) [自动防故障 确保你不会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=789) [向用户提供受损的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=790) [还有智能追踪预防法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=792) [它通过 Storage Access API 改善用户的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=794) [隐私](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=796) [然后 用自动填充强密码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=797) [还有 security code AutoFill](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=799) [你可以向用户提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=800) [安全便捷的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=802) [咻 感谢你们还留在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=805) [好的 那就让我们继续吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=810) [来谈谈有关性能的各种功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=812) [先从字体集合说起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=814) [对了 如果你错过了这场演讲的开场](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=816) [我的名字是 Shloka Kini](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=819) [这不是一个盎格鲁-撒克逊式的名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=821) [然后 这里是我的名和姓氏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=826) [是以印度语中的梵文天城体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=828) [来书写的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=829) [用多种字体 不同的粗细](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=831) [和样式 但都是同一组文字内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=833) [今年起 我们开始支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=836) [WOFF 2 和 TrueType](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=838) [WOFF 2 和 TrueType](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=838) [字体集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=840) [将相关字体捆绑在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=841) [在单个集合文件内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=843) [可以消除字符映射](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=845) [的重复表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=847) [举例来说 我们的一种内置字体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=848) [PingFang 在使用集合后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=850) [文件大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=853) [减少了 84％](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=855) [字体集合能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=856) [大大地减少](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=857) [你的字体文件的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=859) [因为不同字体对于同样的字母集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=861) [共享了同一个表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=863) [下一项要介绍的功能是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=864) [字体展示 对于大多数开发者来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=867) [无需做出改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=869) [本质上来说 如果你有使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=871) [自定义字体的 web 内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=872) [不管出于什么原因 你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=875) [看不到它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=876) [默认情况下 我们会为文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=878) [留出最多三秒的空白占位符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=880) [在显示字体之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=882) [以保持屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=884) [所有内容的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=886) [但是 如果这个默认的选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=888) [不适合你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=891) [并且你对于那三秒内会发生什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=892) [想拥有更多的控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=894) [你可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=895) [字体显示描述器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=897) [设定不同的数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=899) [设定不同的数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=899) [你可以指定另一种字体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=901) [作为备选 或者检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=902) [浏览器是否在缓存中有那种字体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=904) [现在 你可以使用一个很酷的技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=909) [来改善动画图像的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=911) [那就是 使用视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=912) [我超爱我 Mac 笔记本背景中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=915) [彩色粉尘爆炸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=918) [它真的很好看 但它是静态的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=920) [我想要这个图案能“嘭” 爆炸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=925) [我是说 我希望让它动起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=928) [我想要一个 GIF 动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=930) [但是 动画 GIF 需要更长的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=931) [才能加载 而且耗费更多的电池电量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=933) [与展示同样内容的视频文件相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=936) [更能更差一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=937) [现在在 Safari 中 MP4 视频文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=942) [在图像元素中也能得到支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=944) [充分利用了苹果内置的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=946) [硬件视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=948) [解码支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=949) [我的内容加载速度更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=950) [耗电量更少 性能也更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=952) [但我同样可以在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=953) [CSS 背景图片的属性下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=956) [使用 MP4](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=958) [如果你采用了这种技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=960) [只用最简单的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=961) [你就可以得到一个新版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=964) [只是它无法与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=965) [旧版浏览器兼容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=967) [旧版的浏览器不支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=968) [MP4 和图像元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=970) [幸运的是 使用现有技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=971) [你可以指定一个备用图像用来替代显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=973) [在 MP4 无法运行的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=976) [各位请注意了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=979) [现在我们要转向下一个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=982) [事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=986) [这又是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=987) [拥有很好的默认设置的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=989) [在特殊情况下还可以 有自定义的设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=991) [任何用户在尝试使用触摸屏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=994) [浏览网页时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=996) [他们需要滚动屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=997) [对于每一次滚动触摸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=999) [触摸的事件监听器都会被触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1001) [这就会中断滚动触摸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1003) [并造成它有一点跳动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1005) [来看看这两个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1008) [看 左边的一个与右边相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1010) [被中断干扰得要更严重](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1012) [我的意思是 它几乎没有移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1016) [那么 右边是哪里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1018) [那么 右边是哪里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1018) [做对了呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1021) [因为它使用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1022) [被动事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1023) [默认情况下 我们会在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1024) [文档 窗口和主体元素上设置启动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1026) [被动事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1028) [这样一来 任何的触摸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1030) [都会指示浏览器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1031) [去继续滚动屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1033) [避免因为等待事件监听器完成任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1035) [而被中断](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1037) [如果你想要把事件监听器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1039) [其他元素也设置为被动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1041) [你可以把那些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1042) [事件监听器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1044) [被动属性 设置为 “true ”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1045) [简单来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1048) [在不阻碍默认事件进行处理的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1050) [这个标志告诉浏览器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1052) [不要去等待事件监听器完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1054) [并且让用户可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1056) [流畅地滚动屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1058) [接下来 我们转向具有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1060) [异步图像解码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1064) [异步调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1066) [通常来说 图像都是被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1067) [同步解码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1069) [所以 主线程遭到了阻塞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1070) [所有的图像都被解码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1072) [然后显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1074) [阻塞了主线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1076) [用户的交互也受到阻止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1077) [不过 如果使用异步解码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1079) [不过 如果使用异步解码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1079) [这些操作就能并行发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1081) [并且是在一个单独的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1082) [线程上 这意味着交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1084) [不会被阻止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1085) [今年新增的异步图像解码功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1088) [在默认的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1089) [会在首页加载时发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1092) [它可以覆盖大多数 web 内容的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1095) [当然 我们知道 你们中的一些人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1097) [可能会遇到特殊情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1100) [比如说 在你的网页上有一张](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1101) [多块组合平铺的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1104) [它在初始页面加载后进行加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1106) [而且 如果它有很多图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1107) [部分图块可能会延迟显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1108) [或者 可能你在 App 中放入了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1113) [轮播的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1115) [并希望它们有淡入淡出的轮播效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1117) [但当你想要加速播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1118) [这组幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1120) [如果图像是同步解码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1121) [它们可能无法及时显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1123) [而且它们会突兀地切换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1125) [但在右侧的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1130) [异步解码让你的淡入淡出效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1133) [更加平滑流畅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1134) [那么 如果你想要采用这些特殊的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1135) [动态图像的范例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1138) [你有两种选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1139) [你有两种选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1139) [一 你可以在标记中添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1141) [异步解码的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1143) [到你的图像元素中去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1145) [或者 你可以使用 JavaScript](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1146) [API 的 HTMLImageElements.decode 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1149) [它会返回一个提示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1151) [让你知道图像在何时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1154) [可以被添加到 dom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1155) [而不会导致下一帧的解码延迟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1157) [下面 继续说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1161) [异步调用对于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1164) [Beacon API 的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1166) [我们知道 作为开发人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1168) [你想要在 unload 事件中发送数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1169) [可能是想要追踪外发链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1171) [通常情况下 unload 事件的异步请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1174) [会被忽略掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1175) [于是你不得不使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1177) [同步请求 结果就导致下一个页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1178) [加载失败](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1180) [不过 我们现在支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1182) [Beacon API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1184) [所以只要 Safari 还在运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1185) [你就可以将数据发送到服务器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1187) [然后把它抛在脑后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1188) [因为你知道数据一定会被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1190) [发送出去的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1192) [好了 你们已经听我讲的够多了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1193) [我相信你们都想亲眼看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1197) [这些与安全和性能相关的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1199) [这些与安全和性能相关的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1199) [实际操作起来什么样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1200) [那么 有请我的同事 Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1201) [上台来为大家演示这些功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1203) [Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1205) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1206) [&gt;&gt; 大家好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1211) [我叫 Jason Sandmeyer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1212) [我是 Apple.com 的一名开发人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1213) [不工作的时候 我喜欢艺术和手工创作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1216) [比如建造鸟舍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1218) [然后我最近开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1220) [写这个博客 想要分享](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1222) [我的一些作品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1223) [并给其他人以启发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1225) [我花费了大量的时间去挑选](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1225) [合适的字体和舒服的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1227) [我为此感到骄傲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1230) [不过 我不仅仅是为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1231) [自己的设计感到骄傲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1233) [我也为自己能够向用户提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1234) [良好 安全 高性能的浏览体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1236) [而感到自豪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1238) [因此 我真的对于 WebKit 和 Safari](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1240) [这些能够提升性能和安全的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1241) [感到非常兴奋](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1242) [我真的希望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1244) [在我自己的站点上 充分利用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1246) [我很乐意向你们演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1248) [它们使用起来是多么容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1249) [这里 我已经将我的网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1252) [加载到我的 MacBook Pro 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1253) [然后 喔](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1256) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1258) [&gt;&gt; 嘿 Jason 你刚刚做了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1258) [&gt;&gt; 嘿 Jason 你刚刚做了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1258) [&gt;&gt; 没错 这可不是我刚才自夸的那个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1261) [漂亮的博客](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1263) [对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1265) [让我们来看看 这是正确的 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1267) [我想我知道这里发生了什么问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1270) [当我刚开始设立这个网站时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1272) [我的朋友们曾提醒我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1275) [生活类博客的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1279) [行业竞争相当激烈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1280) [很明显 有人在蓄意破坏我的网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1284) [有人偷偷替换掉了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1287) [我内容分发网络的样式表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1289) [不过很幸运](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1292) [我还留有备份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1293) [我们可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1294) [子资源完整性的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1296) [为网站提升安全性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1297) [确保这种情况不再发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1299) [所以 我先从添加新的完整性属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1306) [到我的链接标记开始操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1309) [值得注意的是 这个改动对脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1312) [也有影响 不过我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1313) [晚些时候再做改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1315) [我们稍后再进行添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1317) [那么 这个属性的数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1319) [那么 这个属性的数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1319) [是哈希算法的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1323) [我们用这个算法能够得到文件的校验和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1326) [我希望自己和用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1327) [可以看到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1329) [我已经准备了一个 hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1332) [叫 SHA256](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1334) [接下来 一个连字符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1336) [然后是 base64 编码用于表示这个 hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1340) [现在 进行保存 然后回到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1344) [我们的页面 重新加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1346) [现在我们能看到网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1349) [没有样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1350) [因为已下载文件的 hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1351) [和 HTML 里的 hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1352) [不匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1354) [因此 Safari 已经阻止它去加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1356) [现在 让我们连接到我的 CDN](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1361) [这是我桌面上的备份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1363) [让我们把备份拖入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1367) [CDN 当中 以替换受损的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1370) [现在 我们重新加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1374) [这就看起来好多了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1377) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1378) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1378) [谢谢 所以在使用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1382) [子资源完整性的功能后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1385) [我更加确信网站访问者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1386) [能获取我预想中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1388) [样式和脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1389) [下面 让我们稍稍换个方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1392) [来谈谈我们在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1393) [改进性能方面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1395) [能做些什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1396) [另外 如果能知道我网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1396) [哪些链接被用户频繁点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1399) [哪些很少被点击 这是很有用的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1400) [这能帮助我在设计时 做出更明智的决策](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1402) [所以我用这个 click handler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1409) [它能够向我控制的服务器报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1410) [哪些链接被用户点击过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1412) [服务器会收集点击量的数据 供我有空时查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1413) [还有 请注意在我点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1420) [这个木工页面的链接时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1423) [会发生轻微的延迟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1424) [点击后会进入我网站里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1425) [其他与木工相关的页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1426) [我现在就点击这个链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1430) [花了大约半秒到一秒钟时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1432) [之所以会这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1435) [是因为我在 click handler 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1439) [是因为我在 click handler 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1439) [做出了同步请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1440) [这会阻止 Safari 导航到下一页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1442) [进行同步请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1446) [可确保浏览器在导航到下一页时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1448) [不会取消这一请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1449) [但是 这是在等待](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1453) [我的服务器响应可能需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1454) [一段时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1456) [问题是 我其实不关心什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1456) [服务器响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1458) [我只想确定这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1459) [传送到了服务器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1460) [因此 Beacon API 其实是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1462) [一个完美的替代品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1464) [现在我要开始通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1466) [检查 Beacon API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1470) [在浏览器中是否可用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1472) [方法是在 navigator 对象上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1473) [查找 sendBeacon 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1475) [如果它不可用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1477) [我就继续我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1478) [刚才在做的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1479) [然后 我们可以使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1481) [把数据和我想要访问的 endpoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1486) [一同传入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1489) [让我们进行保存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1493) [然后返回去 重新加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1495) [新的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1497) [现在 当我点击这个链接时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1499) [现在 当我点击这个链接时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1499) [可以看到反应几乎是立刻的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1500) [我现在要点击这个链接了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1502) [好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1504) [所以 与 XML/http 请求相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1506) [这个使用的代码更少](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1508) [但它同样的可靠](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1510) [而现在 我的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1512) [在我的网站里 就能更快速地畅游了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1513) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1515) [谢谢大家 接下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1518) [我想看看一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1522) [这个问题在 iPad 上更加明显](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1524) [我把建造鸟舍的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1533) [每一步都做成了幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1534) [并加入了淡入淡出的轮播效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1536) [点击向右的箭头](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1539) [就能前进到下一张幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1541) [不过 你可能已经注意到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1544) [切换时 在图片的位置会出现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1545) [短暂的空白](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1548) [让我来再翻几张幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1550) [让我们来看看这个轮播的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1556) [看看发生了什么 我觉得这个切换效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1558) [看看发生了什么 我觉得这个切换效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1558) [可以更流畅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1560) [这里是轮播的类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1566) [我想要仔细看看这个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1568) [在这里叫 setCurrentSlide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1570) [这个方法会在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1571) [你点击箭头](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1573) [转换到下一张幻灯片时被调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1574) [由于每张幻灯片在加载页面时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1578) [不会立即显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1580) [只有当用户点击箭头时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1581) [我的轮播才会加载下一张幻灯片的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1584) [我们遇到的问题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1591) [页面切换是瞬间完成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1593) [而不是等图像加载完再发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1597) [而且 在图像加载之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1599) [它仍需要被解码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1601) [然后才能在屏幕上显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1602) [所以 我想做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1605) [等待图像加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1607) [并且被加码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1609) [我相信这样图像就能顺畅显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1611) [而且我可以使用新的解码方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1613) [在 HTML 图像元素上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1614) [来改进显示效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1618) [来改进显示效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1618) [这里 是我的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1622) [是图像元素的标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1624) [decode() 方法会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1629) [异步地解码这个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1630) [然后返回一个 Promise](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1632) [如果图像成功被加载并解码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1634) [就会调用响应函数 resolve](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1636) [所以 我就把我的 transition 函数传入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1639) [作为这个 Promise 的回调函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1641) [现在 让我们切换回 iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1644) [我们来刷新页面以获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1653) [新的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1655) [现在 当我前进到下一页的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1657) [过程会更加顺畅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1658) [没有闪烁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1660) [这真的很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1661) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1663) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1666) [现在 让我们切换回 Mac](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1671) [最后 在我的页面底部](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1675) [放置了一个动画的 GIF 图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1676) [一只小鸟在装饰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1678) [一只小鸟在装饰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1678) [它的新鸟舍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1680) [这张图片 这个视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1681) [非常的大 好吧 它是一个 GIF](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1685) [它大概有超过 7 兆字节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1689) [说实话 图片质量也不怎么好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1692) [不过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1695) [我恰好有这张图片的原始视频 H264 编码的 MP4](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1695) [现在 我可以直接在页面上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1699) [使用这个视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1700) [让我们回到 HTML](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1702) [找到那个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1704) [它在这儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1706) [我可以直接改变扩展名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1708) [改为指向 MP4 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1710) [重新加载 看 现在我使用的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1713) [真实的视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1717) [画面质量清晰得多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1718) [而且只占大约 1 兆字节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1719) [而且它还比刚才的动画 GIF](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1721) [要长一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1723) [而且 正如 Shloka 刚才提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1725) [这点也可以使用在 source 属性上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1729) [为不支持这个功能的浏览器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1730) [提供一个备用的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1732) [刚刚这些只是 Safari 和 WebKit 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1740) [众多有关安全和性能的新功能中的四个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1742) [希望你们能在自己的网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1745) [把它们充分利用起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1747) [我想你的用户会为此感谢你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1748) [现在 欢迎 Shloka 回到台上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1750) [向大家介绍更多 令人兴奋的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1753) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1754) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1755) [&gt;&gt; 谢谢 Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1765) [对了 我真没想到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1766) [博客圈中竞争那么残酷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1770) [你保护好自己](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1773) [还有 非常感谢刚才](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1777) [精彩的演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1778) [再总结一下与性能相关的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1779) [使用字体集合 可以减少字体文件的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1781) [font-display 属性可以让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1784) [更好把控使用自定义字体时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1786) [会遇到的各种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1787) [在图像元素中使用视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1790) [比使用 GIF 更能提升性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1791) [被动事件监听器能够改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1794) [滚屏的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1795) [使用带有 Beacon API 还有图像解码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1797) [异步调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1799) [异步调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1799) [可以防止主线程卡壳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1801) [演讲的最后 我们来谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1804) [更加丰富的用户体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1807) [我们有一些很酷的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1808) [能够真正提升用户的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1810) [从拖放开始讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1813) [首先来介绍一些有关拖放的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1815) [总体上的改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1817) [由于 API 的更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1819) [现在你可以把整个文件目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1821) [进行拖放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1823) [以将其上传至服务器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1825) [不再需要压缩或者打包处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1826) [而且我们支持读取和写入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1829) [能够丰富 HTML 的 MIME 类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1831) [纯文本 以及 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1833) [到系统粘贴板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1836) [而且 特别是对 iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1838) [我们已经对数据传输 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1840) [进行了一些新的更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1841) [现在你可以使用 getData 和 setData 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1843) [来自定义拖放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1845) [举例来说 如果我想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1848) [把生活用品拖入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1850) [我的网上购物车](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1853) [我可以对拖放行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1854) [进行自定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1856) [比如 拖动一个图片元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1857) [会将这个元素的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1859) [会将这个元素的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1859) [和它的价格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1861) [放到我的购物车中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1863) [现在 你可以指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1864) [拖放行为会导致什么结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1865) [这会让你实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1867) [更丰富的用户交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1868) [接下来 我们来转向本场演讲的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1871) [API 部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1874) [从支付请求 API 和 Apple Pay 讲起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1876) [那么 我们来谈谈 Apple Pay](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1879) [Apple Pay 不仅仅是一种支付方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1881) [它是对电子支付的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1882) [完全重新思考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1884) [通过 Apple Pay 商户不会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1886) [直接接触到顾客的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1888) [信用卡信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1889) [这使支付更加安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1891) [我们知道你们当中许多人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1893) [一直要求提供一种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1894) [能够使用标准 API 来支持 Apple Pay](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1896) [现在 我很高兴告诉大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1899) [我们听到了你们的需求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1900) [通过协作努力 Apple Pay 现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1902) [已经开始与 W3C 支付请求 API 展开合作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1904) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1910) [不过 虽然你可以选择使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1914) [这个 API 但请记住](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1916) [为确保你和你的顾客](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1918) [为确保你和你的顾客](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1918) [在 Apple Pay 的利益不受损](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1920) [你需要做一点改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1922) [例如 要向你的界面添加一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1923) [Apple Pay 按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1925) [而不是在现有的结账流程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1927) [把 Apple Pay 当作选项之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1928) [添加进去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1930) [而且 现在支付请求 API 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1931) [还包含一些功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1933) [比如](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1935) [粒错误处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1939) [处理品牌合作联名信用卡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1940) [和拼音姓名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1942) [这些功能只在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1943) [Apple Pay JS 里有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1945) [所以 如果你需要那些特定的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1945) [Apple Pay 功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1948) [开始使用 Apple Pay JS 吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1950) [我们支持的另一个 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1953) [是 Service Worker API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1955) [如果你的用户的网络连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1959) [不是很理想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1962) [比如他们的连接时断时续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1963) [或者他们就彻底断网了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1965) [对于这种情况你想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1968) [从容优雅地进行处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1969) [那么 Service Worker 可以派上用场](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1971) [每个 Service Worker 都登记在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1972) [唯一的源下面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1974) [它可以缓存离线交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1976) [并拦截](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1978) [并拦截](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1978) [与这个源相关的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1980) [所做的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1982) [现在 你网域中的每个网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1983) [都可以共享同一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1985) [Service Worker 实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1986) [所以 你可以同时打开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1988) [多个选项卡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1989) [并且所有的请求都将被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1991) [相同的脚本拦截](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1993) [这样一来 你可以保留一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1996) [持久的资源库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=1997) [Service Workers 可以令你的网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2000) [无论它是一个 web App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2002) [还是说你在使用 SF Safari viewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2005) [面对网络连接的各种不确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2007) [网页都能够快速复原](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2009) [最后要介绍的 API 是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2011) [对于 iPad 的全屏 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2015) [现在你可以自定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2018) [iPad 的全屏控制设定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2019) [对于 Safari 中的任一元素都可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2021) [点击那些元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2024) [将带来彻底的全屏体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2025) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2031) [对于视频来说 我们会自动检测内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2036) [同时还会出现一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2038) [取消按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2039) [取消按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2039) [在短暂的延迟后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2040) [如果内容还在继续播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2042) [按钮会自动消失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2044) [如果你提供的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2047) [会被这个取消按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2048) [所拦截或阻碍到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2050) [可以使用 CSS Environment Variable 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2052) [fullscreen-inset-top](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2054) [来避免这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2056) [你也可以让你的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2058) [和按钮同时隐藏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2060) [只要使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2061) [环境变量中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2063) [fullscreen-auto-hide-delay 就行了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2065) [最后 还有几项非常酷的标注要介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2066) [从 AR 开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2071) [可能在这次会议上你已经听说过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2074) [太多关于 AR 的东西了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2075) [但是现在 你可以把 AR 模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2077) [通过图像缩略图的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2079) [加入到你的 UI 当中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2080) [这样一来 你的网站就能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2081) [利用起这个全新的 AR Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2082) [而且代码还相当短](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2085) [你从一个锚标签开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2087) [将 del 属性设置为 AR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2089) [并将 HREF 链接设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2091) [你的 USDZ 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2093) [然后为 AR 模型创建文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2095) [你先添加一个子视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2096) [可以是一个图像 也可以是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2098) [包含模型图片的照片元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2099) [包含模型图片的照片元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2099) [出来的图像效果是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2101) [像这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2103) [在图像的右上角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2104) [一个小的图标出现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2106) [意味着一个 AR 模型可通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2109) [点击图像来获得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2111) [这是一个能为你的网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2112) [增添内容深度的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2114) [绝妙方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2116) [如果想了解更多关于 Quick Look 的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2118) [可以查阅在线板块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2120) [Integrating Apps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2121) [and Content with AR Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2124) [接下来 最后一块内容是 watchOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2127) [现在 你可以浏览网站的载体已经有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2130) [MacBook 和 iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2132) [甚至是拥有更小屏幕的 iPhone](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2136) [屏幕小到可以装进口袋里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2138) [但是 我们现在还打算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2141) [再缩小一度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2142) [我们把你的网站带到了 watchOS 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2146) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2149) [对于这个新功能 我个人是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2154) [非常兴奋的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2155) [我妈整天给我发送各种菜谱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2157) [我妈整天给我发送各种菜谱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2157) [我不会做饭 然后我又只能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2160) [在短信和电邮中看菜谱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2162) [以后当我收到菜谱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2164) [我可以直接在手腕上读取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2166) [一边做饭一边看菜谱很方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2168) [现在 如果你使用响应式设计](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2170) [那就太好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2171) [我们把所有的工作都替你做了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2172) [这样你的网站在 watchOS 上面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2174) [会看起来非常棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2175) [不过如果你想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2176) [进一步地优化 Apple Watch 的网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2177) [这里有一个视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2179) [叫做 Designing Web Content for watchOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2181) [在 WWDC App 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2182) [抱歉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2184) [是 Designing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2186) [现在 我打赌 Jason 的鸟舍博客](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2189) [在使用了这些能够丰富用户体验的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2192) [新功能后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2195) [肯定能上升到一个新水平](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2196) [所以 我打算把 Jason 请回台上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2197) [为大家演示这些功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2199) [如何使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2200) [Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2201) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2202) [&gt;&gt; 再次感谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2206) [我一直在想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2208) [如何能让我的读者能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2209) [更加愉快地开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2210) [他们的鸟舍建造工程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2211) [让我们换回到 iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2213) [这里 我有一个清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2221) [列出了我的读者需要购买的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2223) [材料都有哪些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2224) [而且我想 如果我能够给他们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2226) [提供一种添加购物车的途径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2227) [购买他们可能会需要的物品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2230) [那该多方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2233) [而且他们甚至可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2234) [直接从我的网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2235) [进行采购](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2236) [而且 我猜想我也许能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2238) [通过这个办法赚点私房钱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2240) [这里 我能够从左侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2243) [拖放物品到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2246) [这个购物清单中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2248) [而且这个功能在我的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2263) [iPad 上也一样好用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2265) [那么让我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2266) [想要达到这个效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2268) [需要哪些代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2269) [真的不需要一大堆代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2277) [就能实现这个效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2277) [对于每一个物品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2279) [对于每一个物品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2279) [我添加了 dragStart 事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2282) [它用来存放元素的文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2284) [通过使用 Data Transfer API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2287) [而在“放”的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2290) [也就是购物清单区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2292) [我有一个 drop 事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2295) [它可以从 Data Transfer API 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2297) [提取之前存储的文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2300) [并将其附加到购物清单元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2302) [注意 你还需要添加一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2309) [dragOver 事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2310) [到你想要“放下”元素的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2312) [以防止默认的事件的发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2316) [并明确指示对于那个元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2319) [drop 是允许的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2321) [所以 只需要很少的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2323) [我就能够创建这个有趣的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2325) [购物 UI 它能在 Mac 上很好地运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2327) [现在在 iPad 上也能使用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2329) [现在 既然我已经把物品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2331) [放在了购物清单里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2334) [我需要找到一个方法 让我的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2336) [能够真正实现购买](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2337) [让我们来看看如何能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2339) [让我们来看看如何能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2339) [利用支付请求 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2342) [来为用户提供一个很棒的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2343) [Apple Pay 体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2345) [我已经为我的网站添加了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2348) [必要的 HTML 和 CSS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2350) [以显示一个 Apple Pay 按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2352) [但我把它默认设置成隐藏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2354) [只有在用户的设备确定有能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2356) [使用 Apple Pay 的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2357) [你才应该显示 Apple Pay 按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2360) [让我们来写下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2364) [检查设备的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2367) [使用 ApplePaySession.canMakePayments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2368) [方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2370) [如果 Apple Pay 可使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2370) [我们就显示按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2373) [让我们向按钮添加一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2378) [事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2382) [现在 在这个函数里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2383) [我们将创造一个新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2384) [paymentRequest 实例去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2385) [启动这个交易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2387) [如果 paymentRequest 不能使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2394) [我们应该考虑使用 Apple Pay JS 来替代它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2395) [这里是 Payment Request API 的构造器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2402) [它可以接受三个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2405) [我们从添加 paymentMethod 数据对象开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2407) [这包含了 Apple Pay 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2416) [paymentMethod 识别符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2418) [以及 Apple Pay 特有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2420) [一些选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2422) [在这之后 是付款相关的各种细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2426) [这里是我们指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2430) [有关交易细节的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2431) [例如我的网站名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2433) [交易总额和每个订单项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2435) [我决定让事情简单化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2437) [所以我把清单上的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2440) [每一项物品的定价都设为 5 美元](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2441) [最后 options 参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2448) [指明了我需要从我的用户那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2450) [收集哪些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2452) [来完成交易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2454) [让我们切换回 iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2455) [并且加入一些物品到我的清单里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2458) [并且加入一些物品到我的清单里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2458) [那么 现在我们已经把所有的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2471) [输入进来了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2472) [我们需要去调用另一个方法来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2473) [展示这个表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2476) [这就是对于 paymentRequest 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2477) [show 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2480) [并且这个方法会返回一个 promise](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2482) [当用户授权这笔交易的执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2483) [做出支付回应时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2484) [就会调用响应函数 resolve](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2486) [用户可以用 Face ID 或 Touch ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2488) [等方式授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2489) [这里是你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2490) [处理交易的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2492) [然后 最后一步 你可以调用 complete](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2493) [获得一个交易成功或失败的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2497) [这由交易的状态来决定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2499) [好的 现在我们在 iPad 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2502) [实践一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2505) [这样就行了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2510) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2511) [然后 你还需要执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2516) [一些其他的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2518) [例如 从 Apple Pay 服务器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2519) [例如 从 Apple Pay 服务器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2519) [获取付款会话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2521) [想了解关于这点的更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2522) [请查看 Apple 开发者网站的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2524) [有关这个演讲的网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2526) [上面会有关于这些资源的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2528) [现在 最后我意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2531) [我还没有让我的读者们看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2534) [他们在建造的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2535) [整体是什么样子的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2538) [所以我想在页面的顶端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2540) [添加一个成品的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2541) [展示图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2543) [不过 为什么要满足于一张静态图片呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2545) [如果你能在自己周遭环境里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2547) [真的看到这个鸟舍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2548) [感觉一下它的尺寸大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2549) [那不是很棒吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2551) [那么 通过 iOS 12 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2553) [新 AR Quick Look 功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2554) [我们只需要几行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2556) [就能实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2556) [我们来进入我的 HTML](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2562) [来插入代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2565) [我现在所要做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2567) [添加一个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2569) [并且链接到一个 USDZ 文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2570) [它就是我的鸟舍模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2572) [把 rel 属性设为 AR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2573) [切换回 iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2577) [切换回 iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2577) [这就是我们最终成品的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2583) [它看起来很不错 不过用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2584) [还可以点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2586) [AR Quick Look 的小图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2588) [就在角落这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2589) [我们可以查看这个模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2591) [上下左右地挪动它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2595) [还能把它放置在真实环境里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2598) [直观地感受一下我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2600) [要建造的是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2602) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2603) [所以 其实实现起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2610) [真的很简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2614) [请查阅相关的板块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2615) [如果你有机会的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2616) [现在我想请 Shloka 回到台上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2617) [来做最后的总结](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2618) [谢谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2619) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2620) [&gt;&gt; 非常感谢 Jason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2627) [而且这个 AR 模型看起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2629) [非常非常的酷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2631) [而且 我认为它真的让我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2632) [想要建造一座鸟舍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2635) [不过我可没有做出任何承诺](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2638) [不过我可没有做出任何承诺](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2638) [综上所述 你可以添加自定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2642) [拖放功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2643) [还可以自定义 iPad 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2644) [全屏控制设定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2647) [你可以采用 Payment Request API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2648) [以支持 Apple Pay 的使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2650) [采用 Service Worker API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2652) [以改善离线的用户体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2653) [或者 你还可以为内容添加 AR 模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2655) [以增加其深度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2657) [而且现在你的网站也可以在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2659) [苹果手表上浏览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2660) [我在演讲中提到了几个板块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2662) [供你们参考这几个单独的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2665) [不过如果你们在这场演讲结束后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2667) [立刻就有问题要问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2668) [请顺便来访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2670) [Safari WebKit and Password AutoFill](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2672) [实验室](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2674) [并且可以查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2675) [这个板块的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2676) [还有文档资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2678) [以及其他相关的板块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2680) [现在 关于 Web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2682) [真的有太多太多的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2685) [我希望这个简要的概述能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2687) [让你们感受到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2688) [苹果公司是如何不断地改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2691) [对 Safari 和 WebKit 的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2693) [以便于 web 开发者 本地开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2696) [还有扩展开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2698) [还有扩展开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2698) [能够一直为他们的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2700) [提供尽可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2701) [好的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2704) [感谢各位在场参与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2706) [我们的板块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2707) [希望你们喜欢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2710) [并且 祝大家接下来在 WWDC 的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2712) [过得愉快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2713) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/234/?time=2714)