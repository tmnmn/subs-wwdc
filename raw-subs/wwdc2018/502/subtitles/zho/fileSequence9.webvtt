WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:08:59.316 --> 00:09:02.156 A:middle
计算每个

00:09:02.156 --> 00:09:02.456 A:middle
event.durationWatched

00:09:02.456 --> 00:09:04.466 A:middle
就是这样 我们计算了

00:09:04.466 --> 00:09:05.406 A:middle
一个会话的总播放时长

00:09:05.936 --> 00:09:07.416 A:middle
现在你可能会想

00:09:07.416 --> 00:09:08.576 A:middle
这个事件是什么

00:09:08.576 --> 00:09:09.946 A:middle
访问日志中的事件

00:09:09.946 --> 00:09:10.456 A:middle
是什么意思呢

00:09:10.726 --> 00:09:12.206 A:middle
那么 让我们看看

00:09:12.206 --> 00:09:14.486 A:middle
AVPlayerItemAccessLog 是如何工作的

00:09:15.306 --> 00:09:16.976 A:middle
AVPlayerItemAccessLog 提供了

00:09:16.976 --> 00:09:18.876 A:middle
你的会话的历史记录

00:09:19.476 --> 00:09:21.196 A:middle
它最初是 null

00:09:21.196 --> 00:09:23.476 A:middle
但是当播放开始时

00:09:23.476 --> 00:09:25.476 A:middle
你将收到一个

00:09:25.476 --> 00:09:27.086 A:middle
AVPlayerItemNewAccessLogEntry 通知

00:09:27.086 --> 00:09:29.396 A:middle
到那时你将拥有一个访问日志

00:09:29.916 --> 00:09:30.946 A:middle
你将看到

00:09:30.946 --> 00:09:33.136 A:middle
访问日志中的事件

00:09:33.856 --> 00:09:36.426 A:middle
包含关于不同方面的信息

00:09:36.426 --> 00:09:38.436 A:middle
例如 当前变体 URL 当前比特率

00:09:38.436 --> 00:09:41.326 A:middle
播放时长

00:09:41.326 --> 00:09:45.636 A:middle
卡顿次数等等这些值

00:09:45.636 --> 00:09:49.326 A:middle
初始化为负值或 null

00:09:49.906 --> 00:09:52.316 A:middle
当播放开始时

00:09:52.316 --> 00:09:53.706 A:middle
它们会依据实际的测量数据

00:09:53.706 --> 00:09:56.406 A:middle
和正在播放的实际变量 URL 进行更新

00:09:56.406 --> 00:09:59.016 A:middle
两种情况下

00:09:59.016 --> 00:10:00.576 A:middle
我们会向访问日志中添加新事件

