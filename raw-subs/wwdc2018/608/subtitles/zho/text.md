# Metal Shader Debugging and Profiling

## Summary
Metal provides powerful tools for analyzing shader behavior and optimizing performance. Dive into troubleshooting vertex-stage problems with new geometry viewing capabilities in Xcode. Use the shader debugger to step through vertex, fragment, and compute shader execution line-by-line. Get details about analyzing GPU workload, and check out shader profiler enhancements for A11 Bionic.

## Info
* Graphics and Games
* WWDC 2018 - Session 608 - iOS, macOS, tvOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=7) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=21) [&gt;&gt; 大家好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=26) [欢迎你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=27) [今天我非常激动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=29) [来到这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=30) [让我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=31) [着色器是图形的重要部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=34) [它们能帮助你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=35) [开发好看的游戏和 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=37) [考虑到大规模并行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=41) [执行环境](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=42) [使用着色器非常不容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=45) [在开发过程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=47) [很多事可能会出错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=48) [即便你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=49) [纠正了错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=51) [它们还必须运行得很快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=53) [我叫 Alp 今天我将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=55) [向你们展示强大的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=57) [和工作流来帮助你们对 Metal 着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=59) [和工作流来帮助你们对 Metal 着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=59) [进行调试和性能分析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=62) [让我们首先来谈一下 Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=64) [Metal 不仅是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=68) [帧和语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=70) [我们有 Metal kits](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=72) [和 Metal Performance shaders](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=75) [并且我们有强大的工具使你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=77) [开发过程高效 简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=79) [完全融入工具的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=82) [Metal 系统跟踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=84) [可以让你看到 CPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=86) [和 GPU 是如何并行工作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=89) [以及 App 的程序运行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=91) [这是第一款能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=94) [对 App 进行性能分析并看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=96) [你的瓶颈所在的强大工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=97) [但我今天的主题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=98) [Metal 帧调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=102) [它能让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=106) [通过游戏的一帧或计算机上传](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=108) [来捕捉 Metal 的工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=111) [单步调试过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=113) [检查状态和资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=116) [它提供强大的性能分析特征](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=120) [让你看到 GPU 计数器和管线数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=123) [它完全集成入 Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=127) [为你提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=129) [对 Metal 工作量进行调试和性能分析的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=133) [今年 我们为 Metal 帧调试器增加了一些内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=136) [有了依存查看器 现在你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=143) [编码器之间是如何共同工作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=146) [以及它们如何通过资源利用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=148) [互相连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=151) [这是一款强大的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=153) [引导你的工作量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=155) [让你明白](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=156) [如何共同工作来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=157) [制作那一帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=160) [明天上午十点 我们有 Metal 游戏性能优化讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=162) [其中一部分将谈到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=165) [依存查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=168) [但是今天我将围绕几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=170) [着色器调试器和增强版阴影性能分析器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=173) [我将展示在日常阴影元素中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=178) [我将展示在日常阴影元素中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=178) [对你们有帮助的工作量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=180) [那么让我们从](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=184) [几何查看器开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=186) [顶点阶段 是图形管线中的第一阶段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=191) [如果这一步出问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=196) [它会弄乱你的整个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=198) [所以需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=200) [在调试着色器前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=202) [排除一些顶点问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=205) [在顶点阶段中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=207) [需要检查一些东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=211) [主要是顶点输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=213) [指数和顶点输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=215) [去年的 Xcode 9](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=219) [我们介绍了输入属性视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=221) [所有数据都结合在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=223) [其中的桌面视图格式上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=225) [但是想要真正不与 3D 关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=228) [来调试这样的视觉数据还是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=230) [很困难的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=234) [所以这就是为什么今年](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=236) [我们结合了所有这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=238) [我们结合了所有这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=238) [并且创造了一个你们可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=241) [看见并检查它的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=242) [现在我想向你们介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=245) [几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=246) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=252) [&gt;&gt; 几何查看器是一个新工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=256) [可以以 3D 形式看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=257) [转换后顶点数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=259) [这样你实际上就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=261) [知道顶点输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=262) [同时它为你提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=265) [数据输入指数和输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=267) [这样你可以实际上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=270) [把它关联回 3D](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=271) [你能在每次绘图调用使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=273) [就像附件和绑定资源一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=275) [因此你就有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=277) [一个地方来查看所有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=279) [顶点问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=281) [现在让我们来看看三个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=284) [常见的顶点问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=287) [让我们看看如何用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=289) [几何查看器解决它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=290) [那么这是第一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=292) [我将要绘图调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=296) [画一棵树 正如你所看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=298) [画一棵树 正如你所看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=298) [三角形的一些顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=300) [到了屏幕外面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=303) [导致这个三角形歪了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=305) [只要用几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=307) [你可以点击看上去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=309) [有问题的三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=310) [并且只要用下面的查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=312) [你能看到这些顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=314) [所有的输入和输出数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=317) [而在第二种情况中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=324) [我调用相同的绘图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=327) [但这次这棵树](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=329) [完全没有了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=331) [只要用几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=333) [和自由运动的相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=334) [你能看到这棵树](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=338) [完全被画在 Frustum 外面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=340) [所以这就能解释为什么它不在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=343) [屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=345) [那么用几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=346) [检测这样的情况就](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=348) [非常简单 并且对于最后一种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=350) [有时甚至不可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=354) [在 3D 中形成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=356) [可见的三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=358) [这些情况都难以调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=359) [这些情况都难以调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=359) [你可能有退化的三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=361) [因为你让](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=364) [许多顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=365) [进入了相同位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=367) [或者在顶点输出位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=369) [可能有无穷大和 NaN](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=371) [这对 GPU 来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=372) [是未定义行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=374) [好在对于几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=376) [能探测这些情况 并给你提供一个问题按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=379) [只要点击按钮 你就可以看到问题清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=382) [在这种情况下 它找到了几个退化的三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=391) [点击其中一个三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=396) [你能直接看到数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=398) [只要看看这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=400) [我就看出我的两个顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=402) [正在到达原点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=404) [所以它是一个退化的三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=406) [那么正如你在这所有示例中看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=410) [几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=412) [是一个能够快速检查所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=415) [几何相关问题的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=417) [强大工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=419) [强大工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=419) [如果问题出在输入上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=421) [那么你必须回过头去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=423) [检查你的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=424) [但如果问题出在输出上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=425) [那么你必须调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=427) [顶点着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=429) [这就将引入下一个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=431) [调试着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=435) [使用新的着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=438) [着色器很难调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=440) [它们有复杂的数学代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=442) [和大量的矢量运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=444) [并且它们高度平行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=446) [你正在写的着色器代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=448) [每隔每帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=450) [就会执行百万次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=452) [这是 Unity 《死者之书》样片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=453) [中的一个场景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=457) [这周早些时候我们在 Keynote](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=459) [和国情咨文中见过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=461) [在这个场景的每一帧中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=463) [一千万个顶点位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=466) [在所有不同通道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=468) [呈现出六千万个三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=471) [每一帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=474) [所以当你的着色器出现了问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=475) [你将很难发现 问题出在哪儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=477) [你将很难发现 问题出在哪儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=477) [哪个着色器有问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=480) [哪部分着色器编码有问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=482) [所以为了帮你调试着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=485) [现在我非常高兴地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=487) [向你们介绍全新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=490) [着色器调试器 [掌声]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=492) [着色器调试器是一个能调试所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=500) [Metal 着色器的新工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=503) [为你在成千上万个线程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=505) [提供丰富可视化效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=507) [并且它能展示来自 GPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=509) [而不是模拟器的实时数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=513) [它提供了你自由的设置方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=516) [这样你能轻松地跟随](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=519) [自己的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=520) [根本无需断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=522) [它完全集成到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=525) [Metal 帧调试器 这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=527) [你拥有了调试着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=529) [所需的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=531) [现在我将把舞台交给](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=533) [我的同事 Xavier 由他为你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=535) [操作展示着色器性能分析器 Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=538) [操作展示着色器性能分析器 Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=538) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=542) [&gt;&gt; 谢谢 Alp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=545) [大家下午好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=547) [今天的演示 我想制造](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=549) [一个看起来很酷的水模拟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=550) [但是正如你们所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=551) [出现了一些几何问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=554) [我是 Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=557) [非常高兴能向你展示如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=558) [使用全新的着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=560) [和几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=561) [来确定和解决几何问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=563) [那么我们将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=565) [从我们的朋友捕捉开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=567) [你们可以轻松](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=568) [通过点击调试栏中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=571) [向上切割按钮来做到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=572) [现在我们已经捕捉到了帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=574) [可以开始调试我们的问题了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=578) [由于碰到了几何问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=580) [我们将用到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=584) [全新的几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=585) [几何查看器能让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=589) [导航和检查 绘图调用的几何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=591) [水面应该是平滑的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=596) [但是我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=598) [但是我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=598) [有一个陡峭的悬崖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=600) [让我们挑一个 看起来有问题的三角形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=602) [比如这一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=604) [现在让我们选中底部](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=606) [这个破损的顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=608) [你可以在这里使用这个表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=611) [轻松地做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=613) [那么现在我们找到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=614) [破损的顶点 让我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=617) [找到输入位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=620) [可以看到所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=621) [输入位置对于这个三角形的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=624) [所有顶点来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=626) [都很相似 事实上 白色的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=627) [坐标完全一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=630) [所以这看起来是正确的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=632) [也被检测到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=634) [鉴于输入正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=635) [但我们可以看到这儿 在 3D 视图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=639) [输出是错误的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=640) [那么问题一定就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=643) [顶点着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=644) [那么让我们用全新的着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=645) [来调试和解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=646) [只要点击调试按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=648) [就在右下方的角落里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=652) [这样一来 我们现在在着色器调试器中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=654) [非常简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=660) [你在着色器调试器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=665) [注意到的第一件事是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=666) [除了源代码之外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=668) [你还能看到所有行中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=671) [被修改过的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=672) [如果想要关于变量的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=674) [更多细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=676) [你只要打开细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=678) [点击这个细节视图按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=679) [就在这儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=681) [细节视图将会用源代码语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=684) [向你展示变量的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=687) [所有值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=689) [不仅如此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=690) [还包括你正在调试的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=693) [三角形的所有顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=695) [变量的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=696) [在调试导航窗口中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=697) [你能看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=702) [历史记录 他可以显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=703) [着色器从头到尾](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=706) [做过什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=707) [正如你所见 我们可以非常简单地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=711) [使用方向键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=713) [单步调试代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=714) [你们可能已经注意到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=717) [当我用导航仪导航时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=719) [当我用导航仪导航时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=719) [它在源代码中的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=722) [被高亮了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=723) [这个操作是双向的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=724) [你可以选中一行你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=727) [源代码 它在调试导航仪中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=728) [的位置将被选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=730) [在任何时候 你只要打开变量视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=732) [这儿在底部](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=735) [就能看到所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=737) [范围内存在的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=738) [那么我们已经更加了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=740) [着色器调试器了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=744) [让我们来调试我们的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=746) [水是由产生的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=750) [位移矢量计算的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=752) [其稍后会添加到我们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=754) [最终位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=756) [让我们通过打开这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=757) [细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=758) [来进一步了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=759) [这个位移矢量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=762) [在这个细节视图里我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=766) [正在调试的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=768) [顶点的正确坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=771) [是一个很大的负数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=772) [与其他正确顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=774) [中的正数相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=775) [那么接下来的问题就是我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=778) [那么接下来的问题就是我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=778) [如何计算这个位移矢量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=780) [所以 让我们用调试导航仪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=782) [运行函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=785) [看看到底正在发生什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=787) [看这里 甚至不用读代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=797) [我们已经可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=798) [发现有地方出错了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=799) [有一个变量的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=802) [不是数字 并且这](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=804) [很可能破坏进一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=805) [的数学运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=807) [让我们来检查一下这一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=808) [为什么会发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=810) [如果我们在这个调试器中检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=811) [会发现我们正在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=812) [对这个负数进行操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=814) [这就是导致 NaN 的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=817) [所以我们已经找到了原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=820) [我们可以很快解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=822) [通过对调这两行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=823) [这样 我们就不会对负数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=825) [进行操作了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=828) [现在 我们已经调整了着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=830) [让我们试一下这些改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=835) [点击这儿 重载变化按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=836) [在调试栏中 重载着色器将使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=838) [在调试栏中 重载着色器将使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=838) [新着色器运行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=845) [这样你就能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=846) [立刻检验结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=848) [现在我们可以看到 水平面光滑了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=851) [但是让我们实际检验一遍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=857) [只要点击 调试栏中的继续按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=859) [然后我们能看到 [ 掌声响起 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=867) [我们的水模拟完全正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=869) [在这个演示中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=874) [我们已经看到如何拿一帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=876) [如何用全新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=877) [几何查看器寻找损坏的顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=879) [如何用全新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=881) [着色器调试器调试和修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=883) [顶点着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=885) [谢谢 我将把舞台交还给 Alp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=886) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=888) [&gt;&gt; 很酷 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=897) [谢谢 Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=898) [谢谢 Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=898) [现在你已经看过着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=901) [的作用 让我们进一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=902) [看看如何使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=904) [这个工具解决调试需求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=906) [首先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=909) [我们来谈谈如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=911) [进入着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=913) [这儿我已经捕捉了一帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=916) [并且在进行最后一次调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=918) [然后你将选中绘图调用或](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=920) [发送调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=923) [调试栏上的调试着色器按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=925) [将被启用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=927) [你能轻松进入着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=930) [点击按钮将会出现一个视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=932) [你可以选择你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=934) [感兴趣的线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=935) [选择线程意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=937) [不同的事情 这取决于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=939) [你正在调试的着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=941) [的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=942) [对于片元着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=943) [你将用像素检视器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=946) [选中你想要调试的像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=947) [对于顶点着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=950) [你将用我们刚刚看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=953) [几何查看器来选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=954) [你想要调试的顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=956) [对于计算能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=958) [对于计算能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=958) [你将用控制键来选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=961) [你感兴趣的线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=963) [然后只要点击调试按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=965) [就大功告成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=967) [你在着色器调试器中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=969) [当你在里面时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=971) [你可以很轻松地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=972) [检查任何你感兴趣的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=974) [你只需找到 变量所在的那一行源代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=977) [那就是你需要做的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=979) [你不需要任何断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=982) [你不需要单步执行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=984) [那一行中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=986) [修改的变量的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=988) [将在工具栏中显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=990) [正如大家在演示中看到的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=992) [我们高亮了 NaN](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=994) [和无穷大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=995) [因此很容易找到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=998) [一般性错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1000) [你可以用工具栏中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1002) [按钮来启用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1003) [细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1005) [并得到变量的完整详细细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1007) [这非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1009) [特别是如果你想视察](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1013) [复杂的结构并且想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1014) [潜入不同的组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1016) [或者你可以将鼠标停在任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1019) [或者你可以将鼠标停在任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1019) [源代码里的变量上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1022) [你立刻就能看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1023) [变量在当时的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1025) [如果你正在从纹理中采样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1028) [就像我们这个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1031) [并且想快速检测](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1033) [该纹理是否正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1035) [那么这将尤其有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1037) [就像在 CPU 调试器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1040) [你能够看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1043) [变量视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1044) [向你显示范围内所有变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1046) [因此检视变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1050) [是调试着色器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1052) [核心部分 但是那仅是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1053) [故事的一半](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1055) [你还想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1057) [你的代码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1058) [执行顺序是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1060) [着色器调试器也使之](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1061) [变得相当简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1062) [当你进入着色器调试器后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1064) [在调试导航仪中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1066) [你会看到着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1068) [为你选中的线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1070) [执行的所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1072) [源代码行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1073) [你可以选中想要的任意一行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1075) [并直接导航到该行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1078) [这也提供了独特的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1080) [执行经验让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1083) [能够仅用光标键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1084) [遍历代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1086) [函数在导航器中是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1089) [成组的 因此你只需](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1090) [扩展并运行它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1092) [这也使反向调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1097) [成为了可能 这是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1098) [调节着色器的一种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1101) [非常有用的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1102) [只要找到有错误值的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1103) [然后反向运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1105) [看看哪里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1107) [出了错以及出错的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1109) [你还可以使用过滤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1113) [过滤是集中的好办法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1115) [你可以过滤任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1117) [着色器代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1121) [你感兴趣的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1122) [过滤器将与函数调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1124) [变量 资源 相匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1126) [你的着色器代码可能会跨越](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1130) [许多不同文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1133) [但如果你使用过滤器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1135) [它只会执行与着色器相匹配的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1138) [因此这是一个集中的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1139) [因此这是一个集中的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1139) [到目前为止我们所看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1146) [都针对调试单一线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1148) [但如果是其他线程呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1149) [着色器调试器也让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1154) [能够基于你选中的初始线程来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1156) [访问其他线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1158) [这意味着对于顶点着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1161) [你将获得选中顶点的基元](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1164) [对于片元着色器 你将获得直接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1168) [角度区域以及选定的像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1170) [对于计算能力 你将获得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1173) [选中的计算线程的所有线程组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1175) [这样你能够获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1178) [与线程组内存有关的所有变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1180) [现在我们来看看获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1183) [其他线程将如何帮助你调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1186) [片元着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1188) [那么当你的代码执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1190) [上百万不同的像素时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1195) [在单个像素中查看单个变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1197) [在单个像素中查看单个变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1197) [可能无法帮助你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1200) [解决所有情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1202) [我举个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1203) [我正在计算梯度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1205) [而且我看不见单一梯度值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1208) [但是我不知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1209) [这个梯度值对我的像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1211) [到底好不好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1213) [只要点击一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1215) [打开细节视图 我就能在茫茫像素中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1218) [看到我的像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1221) [的梯度值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1223) [现在我知道这个梯度不对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1225) [因为我能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1227) [清楚地看到它不平滑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1229) [正如你看到的 细节视图能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1232) [帮助你了解着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1234) [并为它分辨好或不好的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1236) [你能快速进入任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1240) [其他像素 立即查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1244) [那个像素的变量值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1247) [你还可以用这个视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1249) [切换线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1254) [切换线程非常适合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1257) [比较 这样你就能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1258) [比较 这样你就能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1258) [清楚地看到好的和不好的像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1260) [你能在它们之间快速跳转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1263) [并且查看后台像素的活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1264) [一旦切换线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1268) [我们就更新了执行历史和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1270) [变量视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1272) [这样你能充分调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1274) [新选中的线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1275) [这会变得更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1279) [细节视图还能让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1281) [了解散度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1283) [无论何时你开启细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1286) [右手侧的蒙版](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1289) [就会始终显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1291) [其他线程执行的相同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1294) [代码情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1296) [在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1298) [是有条件的 只要看看蒙版](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1300) [我就知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1303) [在这里面大约执行了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1305) [一半线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1308) [如果是有条件的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1309) [以对角线形状执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1311) [现在为了展示如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1313) [用细节视图解决片元着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1317) [中的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1319) [中的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1319) [我将邀请 Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1320) [重回舞台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1322) [Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1323) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1325) [&gt;&gt; 谢谢 Alp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1329) [在第一个演示中解决了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1330) [几何问题后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1331) [我加入了高亮作为过程和效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1333) [但是结果却并不尽如人意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1336) [因此采取帧捕捉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1338) [来调试这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1339) [在这儿的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1345) [我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1347) [高亮实际上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1350) [是在底部产生暗色区域的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1351) [所以让我们用着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1354) [来调试和解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1356) [通过不按 我打开了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1358) [像素检视器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1360) [这能让你选中你想要调试的像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1362) [因此 这儿我们将选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1365) [一个像素 比如说这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1367) [然后启动着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1369) [你需要点击这里的调试按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1372) [在底部右侧的角落里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1374) [现在我们就在调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1378) [帧和着色器了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1379) [帧和着色器了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1379) [可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1385) [高亮从三种不同的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1387) [步骤中生成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1389) [让我们用细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1390) [来迅速了解正在发生什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1392) [我们首先从比较近的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1394) [第一个开始看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1396) [可以看到这儿 我们正在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1397) [从原始色彩中取样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1401) [这看上去没问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1403) [接着往下看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1405) [这儿我们正在一个方向中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1409) [累加高亮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1410) [让我们打开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1411) [细节视图来看看结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1413) [从细节视图中可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1415) [在底部 已经有了暗色区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1419) [就在这儿 那么问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1422) [一定出在我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1425) [累加高亮的过程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1426) [你可以看到 细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1428) [是一款了解你着色器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1431) [强大工具 甚至不需要看代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1432) [让我们用调试导航仪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1436) [看看第一个像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1438) [看看第一个像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1438) [到底发生了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1440) [看这儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1441) [这个函数主要是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1446) [迭代几次的循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1448) [从 brightnessMap 中累加样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1449) [循环仅在着色器调试器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1453) [被高亮了 这意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1454) [你可以用着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1456) [导用迭代](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1458) [然后和源代码一起获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1460) [在每次迭代中的变量值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1464) [如果我们关注这儿 会看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1467) [当我导向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1471) [不同迭代时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1472) [值会变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1474) [但是真正强大的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1477) [将这与细节视图结合起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1479) [那么这儿 我们将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1482) [打开细节视图来看看最终的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1484) [色彩 这也是我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1485) [累加高亮的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1487) [现在让我们用调试导航仪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1491) [进行迭代](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1493) [正如我们看到的 当我迭代时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1495) [我们开始为最后的色彩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1498) [累加高亮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1499) [累加高亮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1499) [但是当我继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1501) [向循环末尾迭代时 我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1503) [实际上可以看到 出现了一个图案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1505) [那么让我们来看看为什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1507) [会发生这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1509) [正如在调试器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1514) [我们实际上可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1516) [权重是负的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1518) [这就是为什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1519) [在最终呈现时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1521) [色彩是分散的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1523) [而不是积累在一起的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1525) [现在我们已经找到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1526) [问题所在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1528) [让我迅速解决它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1530) [现在让我们检验结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1534) [只要签入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1536) [重载变化按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1538) [在调试栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1539) [我们可以看到 现在已经没有其他载体了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1542) [但是 让我们在实际操作中看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1546) [只要点击继续按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1548) [好了 现在我们的高亮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1554) [看上去不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1556) [这只是使用着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1558) [这只是使用着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1558) [和它强大的细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1560) [来调试 [ 音质不清晰 ] 着色器的一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1561) [谢谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1565) [把舞台交还给 Alp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1566) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1568) [&gt;&gt; 谢谢 Xavier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1572) [现在我们已经看到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1574) [着色器调试器的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1576) [我们来总结一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1577) [到目前为止谈了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1579) [着色器调试器是专门](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1582) [针对调试 Metal 着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1585) [设计的 考虑到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1586) [GPU 的高并行本质](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1588) [大家也都看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1590) [它对修补非数字和无穷大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1593) [的高亮的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1596) [非常有用 很容易发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1597) [一般性错误 并且能让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1600) [更好地了解着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1603) [有了细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1605) [你甚至不需要读代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1607) [了解你的着色器正在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1609) [同时它还为着色器开发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1611) [提供了绝佳的环境](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1613) [只要进入着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1616) [并开始编辑 读取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1618) [并开始编辑 读取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1618) [即可快速迭代你的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1621) [着色器调试器支持搭载 iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1623) [macOS 和 tvOS 的最新硬件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1627) [接下来该欣赏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1632) [Xcode 10 了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1634) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1637) [&gt;&gt; 现在我们已经看到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1642) [如何使用几何查看器和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1643) [着色器调试器来调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1644) [着色器问题 现在让我们将目光转向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1646) [如何让着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1648) [运行得更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1650) [因此优化 GPU 的使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1656) [很重要 因为你想让 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1659) [运行得更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1662) [消耗更少的电量 并且有更好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1664) [用户体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1666) [但在开始优化前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1667) [必须知道优化内容是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1670) [如果你有 GPU 限制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1674) [典型的 Metal 工作量有许多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1676) [不同通道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1677) [知道专注哪条通道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1679) [知道专注哪条通道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1679) [是非常重要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1681) [好消息是我们有强大的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1683) [内置在 Metal 帧调试器中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1685) [性能分析工具 来帮助你解决问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1687) [GPU 计数器可以给你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1691) [带来极佳的表现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1693) [可以看到 时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1696) [编码或绘图调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1697) [并且提供不同的计数器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1699) [显示瓶颈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1701) [从这儿 一旦你知道了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1705) [扩展型通道 你就能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1706) [继续得到管线数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1708) [你会为你的着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1711) [进行很好的编译 为你提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1713) [指令类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1716) [使用着色器性能分析器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1719) [能让你看到绘图调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1722) [和每个管线状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1724) [的定时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1728) [那么今天我将重点谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1728) [着色器性能分析器 并且我将展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1731) [能帮助你们优化着色器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1733) [工作流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1735) [一旦你在 Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1737) [一旦你在 Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1737) [帧调试器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1742) [即将被性能导航器读取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1744) [你将看到根据执行时间分类的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1746) [所有管线状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1748) [这是一个能够看到我们正在优化的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1751) [所有扩展型管线的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1753) [这儿用这些管线状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1758) [你还能看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1759) [绘图调用 这样就能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1761) [直接导向其中一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1763) [看看它正在画什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1764) [如果你是 iOS 或 tvOS 系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1766) [只要前往着色器源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1770) [就能看到每行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1772) [执行成本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1772) [它非常好地展示了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1774) [在着色器中 你在哪儿花费的时间最多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1776) [按行计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1780) [一旦你进入到着色器源代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1781) [就可以开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1784) [编辑你的代码并重载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1786) [看看计时器是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1788) [有任何时间差异](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1790) [或者你可以仅仅进入着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1792) [调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1794) [如果你想优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1796) [一个算法或者刚刚](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1797) [通过一个控制流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1798) [通过一个控制流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1798) [并且当我知道你究竟能不能优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1800) [那么这是一个极好的工作流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1802) [因此着色器性能分析器能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1806) [极大地帮助你优化着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1808) [但现在我们将它在 A11 做得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1810) [更优秀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1813) [现在所有的二进制芯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1818) [A11 被完全设计为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1819) [GPU 现在我们有硬件支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1821) [让你能够更深入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1823) [了解你的着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1824) [正在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1827) [现在有了 A11 你就能通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1828) [图表 看到每行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1830) [被执行的成本分析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1832) [那么着色器包含不同的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1835) [执行单元 如果你重度使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1837) [它们中的一个 很可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1839) [会因此碰上瓶颈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1841) [算术逻辑单元和内存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1843) [分析能让你看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1846) [在不同执行单元](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1848) [花费的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1850) [为了确保精确指令在 A11 中更高效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1853) [我们做了很多工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1856) [使用健康 溢出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1858) [使用健康 溢出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1858) [很可能极大增加你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1860) [GPU 预算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1862) [你能看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1863) [另外一个类型是同步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1867) [这个类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1868) [很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1870) [因为你希望着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1872) [核心忙于运转 而不是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1873) [等待同步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1876) [在你的着色器代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1878) [如果正在从纹理 缓冲区中读取数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1880) [或者正在用原子或栅栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1881) [你可能需要暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1884) [等待同步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1887) [我们还能让你看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1889) [内联函数的成本 从着色器中调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1892) [这样你能直接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1896) [导向成本最高的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1899) [函数 并且开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1900) [优化它 [ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1906) [&gt;&gt; 欢迎来到 Apple 设计的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1908) [A11 仿生芯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1911) [我们能提供比以往更好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1913) [性能分析数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1914) [今年我们将介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1916) [即使在内联函数中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1918) [即使在内联函数中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1918) [也引入了每行定时信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1920) [和指令类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1922) [我是 Max 我将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1923) [帮助你获得最优的着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1925) [性能 [ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1929) [所以我再次捕捉了同样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1933) [水模拟 但这次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1935) [是在我的 iPhone 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1938) [让我们来通过性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1940) [看看帧的变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1943) [现在我们看到按时间排序的帧使用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1945) [一列管线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1948) [我们可以很容易看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1950) [噪声管线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1952) [正在消耗大量时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1954) [发现了这一点 我们看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1957) [几乎所有时间都被用在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1959) [片元着色器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1961) [但是今年我们更进一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1962) [我们能看到在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1965) [着色器调用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1968) [里面的每个函数花费的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1971) [只要点击这儿前往](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1973) [源代码文件 就能直接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1976) [跳转到正确的那一行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1978) [这就是我们检查的第一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1979) [这就是我们检查的第一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1979) [那么现在在右手侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1984) [看到的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1987) [我们在这个函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1988) [内部花的时间百分比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1990) [进一步就能看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1991) [我们在每一行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1994) [花费的时间比例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1996) [注意 着色器性能分析器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1999) [适用与优化后的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2000) [因此编程器可以对指令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2003) [重新排序 并且某些行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2004) [可能没有定时信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2006) [接下来就到定时信息了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2009) [我们有指令类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2012) [让我们来看一看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2014) [大家能看到算术逻辑单元 在做数学运算时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2017) [花费了时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2019) [我们正在从内存 纹理中读取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2021) [但是引起我关注的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2023) [在同步中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2025) [花费的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2026) [尤其是在这儿等待内存的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2028) [这意味着我们的 GPU 不能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2031) [很快地读取数据 并且不能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2033) [通过在其他线程中 执行算术逻辑单元工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2035) [来隐藏这个延迟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2037) [那么让我们来弄清楚原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2040) [只要根据性能数字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2042) [我们来到了这一行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2046) [在这儿 我们花了超过一半的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2048) [在着色器内时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2051) [再次看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2054) [指令类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2055) [我们能看到同步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2057) [花费了很长时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2058) [但是为什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2061) [这儿我们使用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2066) [靠偏移量从色彩纹理中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2068) [读取的色彩值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2070) [这个偏移量是从这里的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2074) [噪声纹理中读取的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2076) [那么我们读取了一个相依纹理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2077) [直到获得纹理读取后的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2079) [数据 GPU 才能处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2082) [那么我们对此可以做些什么呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2085) [好吧 不从噪声纹理中读取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2087) [我们反而可以在 GPU 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2090) [直接计算噪声值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2092) [我来演示一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2095) [现在更新我的着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2099) [现在更新我的着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2099) [着色器现在被送到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2102) [我们编写的设备中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2103) [然后整帧将重新运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2106) [并重新进行性能分析 因为只要改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2109) [一个着色器或一个线程就有可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2111) [影响你整个 GPU 时序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2112) [一旦完成 我们来看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2116) [我们看到 现在在着色器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2120) [只花了 3 毫秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2122) [而原先需要 20 多毫秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2124) [但我们再看看指令类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2126) [这儿能看到我们几乎](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2130) [完全消除了同步时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2135) [并且保持 GPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2137) [高速运转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2139) [总而言之](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2142) [当你在着色器中发现了瓶颈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2144) [每行定时信息会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2145) [明确告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2147) [问题所在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2149) [指令类型帮助你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2151) [发现原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2153) [这就是我要介绍的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2155) [将舞台交还给我的同事 Alp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2156) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2158) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2158) [&gt;&gt; 谢谢 Max](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2164) [结束之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2166) [我想谈谈最后一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2168) [让你更轻松地使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2170) [这些新的强大工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2172) [希望你们已经离线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2175) [编写完了着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2178) [这样就不用为在线编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2180) [而花费运行时间了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2181) [如果你们正在离线编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2183) [着色器 现在我们有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2185) [全新的编译程序选项可以将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2187) [着色器源码保存到建立的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2189) [Metal 源中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2191) [这样无论何地 你们都能通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2193) [这些工具 处理着色器源码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2194) [如果你们正在用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2197) [Xcode Project 编写着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2198) [你们能直接转到 Build Settings](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2201) [并且启用这一选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2202) [或者你们正在用命令行编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2204) [那么就可以直接让 Metal 编译器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2206) [运行 MO 选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2209) [但请记住只有在调试生成时 才启用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2212) [这样你就不会误把着色器源码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2216) [和你的 App 一起推送出去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2218) [和你的 App 一起推送出去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2218) [好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2220) [让我们来总结一下今天的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2223) [我们首先说了几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2227) [它能让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2229) [查看所有与顶点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2231) [相关的问题 并且调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2233) [画面问题 请记住](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2236) [首先要检查几何查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2238) [确保在调试着色器前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2239) [你的几何图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2241) [没有问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2243) [然后我们提到了着色器调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2245) [这是一款能调试所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2247) [Metal 着色器的强大工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2250) [可以很好地修补漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2252) [让你了解和开发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2254) [着色器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2256) [通过着色器性能分析工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2258) [你甚至可以更进一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2261) [看到 GPU 正在用 A11 仿生芯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2263) [做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2265) [如果想要了解更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2269) [请查看链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2271) [明天上午十点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2273) [我们将谈谈 Metal 游戏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2275) [性能优化方面 届时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2277) [我们将谈论在游戏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2279) [我们将谈论在游戏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2279) [发现的常见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2280) [性能问题和可供大家使用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2282) [检测和修补问题的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2284) [谢谢大家 [ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2286)