# Metal Shader Debugging and Profiling

## Summary
Metal provides powerful tools for analyzing shader behavior and optimizing performance. Dive into troubleshooting vertex-stage problems with new geometry viewing capabilities in Xcode. Use the shader debugger to step through vertex, fragment, and compute shader execution line-by-line. Get details about analyzing GPU workload, and check out shader profiler enhancements for A11 Bionic.

## Info
* Graphics and Games
* WWDC 2018 - Session 608 - iOS, macOS, tvOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=7) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=21) [&gt;&gt; Hello, everybody.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=26) [Welcome.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=27) [I'm really excited to be here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=29) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=30) [So let's get started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=31) [Shaders are important part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=34) [graphics, and they help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=35) [create great-looking games and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=37) [apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=41) [Given the massively parallel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=41) [execution environment, working](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=42) [with shaders is not easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=45) [There are a number of things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=47) [that can go wrong during](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=48) [development, and even when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=49) [get it right, they have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=51) [perform really fast.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=53) [My name is Alp and today I am](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=55) [going to show you great tools](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=57) [and workflows to help you debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=59) [and workflows to help you debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=59) [and profile Metal shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=62) [Let's talk about Metal first.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=64) [Metal is not just about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=68) [framework and the language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=70) [We have Metal kits, Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=72) [Performance shaders, and we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=75) [great tools to make your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=77) [development process efficient](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=79) [and easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=80) [With Metal system trace, fully](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=82) [integrated into instruments, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=84) [get visibility into how your CPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=86) [and GPU work in parallel and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=89) [runtime performance of your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=91) [It's a great first tool to start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=94) [profiling your apps, and seeing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=96) [your bottlenecks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=97) [But today, my focus is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=98) [be on Metal frame debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=102) [Metal frame debugger lets you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=106) [capture Metal work with a frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=108) [of a game, or computer upload,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=111) [and step through your course.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=113) [Inspect state and resources.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=116) [And it provides great profiling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=120) [features, giving you access to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=123) [GPU counters and pipeline](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=125) [statistics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=126) [It is fully integrated into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=127) [Xcode, providing you one place](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=129) [to debug and profile your Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=133) [workloads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=135) [And this year, we have some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=136) [great additions to Metal frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=139) [debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=141) [With the dependency viewer, now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=143) [you get visibility into how your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=145) [encoders are working together](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=146) [and connected through the use of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=148) [resources.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=151) [It's a great tool to navigate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=153) [your workload and just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=155) [understand how your [inaudible]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=156) [are working together to create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=157) [that frame.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=160) [Tomorrow at 10:00 a.m., we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=162) [Metal Game Performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=164) [Optimization talk, and part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=165) [it, we will be covering the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=167) [dependency viewer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=168) [But today I will be focusing on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=170) [geometry viewer, shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=173) [debugger, and enhanced shaded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=175) [profiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=177) [And I will be showing you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=178) [And I will be showing you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=178) [workloads that will help you in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=180) [your day-to-day shaded elements.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=182) [So, let's start with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=184) [geometry viewer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=186) [Vertex Stage is the first stage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=191) [of the graphics pipeline.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=194) [And when you get it wrong, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=196) [can mess up your entire scene.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=198) [So it is important to rule out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=200) [some of the vertex issues before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=202) [moving on to debugging your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=205) [shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=206) [In Vertex Stage, there are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=207) [several things to check.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=211) [Mainly, your vertex inputs, your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=213) [indices, and your vertex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=215) [outputs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=217) [Last year, with Xcode 9, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=219) [introduced input attribute view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=221) [where we can see all this data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=223) [combined in a table view format.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=225) [But it is still hard to debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=228) [such visual data without really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=230) [correlating back to 3D.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=234) [So that's why this year we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=236) [combined all this data and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=238) [combined all this data and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=238) [created one place you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=241) [visualize and inspect it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=242) [Now, I would like to introduce](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=245) [you to geometry viewer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=246) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=252) [&gt;&gt; Geometry viewer is a new tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=256) [that visualizes the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=257) [post-transform vertex data in 3D](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=259) [so that you can actually see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=261) [what your vertex output is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=262) [Alongside, it provides you your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=265) [data input indices and output,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=267) [so that you can actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=270) [correlate that back to 3D.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=271) [It is available per-draw call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=273) [just like your attachments and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=275) [bond resources, so you'll have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=277) [one place to investigate all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=279) [your vertex issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=281) [Now, let's take a look at three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=284) [common vertex problems, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=287) [let's see how you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=289) [geometry viewer to tackle them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=290) [So this is the first problem,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=292) [and I am going to draw call,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=296) [drawing the tree, and as you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=298) [drawing the tree, and as you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=298) [see, some of the vertices of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=300) [triangle is off screen, causing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=303) [this triangle to get skewed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=305) [Just using the geometry viewer,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=307) [you can click on the visibly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=309) [wrong triangle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=310) [And just using the viewer below,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=312) [you can see all the data that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=314) [these vertices are taking in and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=317) [outputting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=320) [And in our second case, I'm on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=324) [the same draw [inaudible] but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=327) [this time, the tree is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=329) [completely missing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=331) [Just using the geometry viewer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=333) [and the free fly camera, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=334) [see that the tree is drawn](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=338) [completely outside of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=340) [Frustum.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=341) [So it makes sense that it is not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=343) [rendered on screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=345) [So it is really easy to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=346) [geometry viewer to detect cases](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=348) [like this, and on to our last](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=350) [case, sometimes it's not even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=354) [possible to form triangles to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=356) [visualize in 3D.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=358) [And these are tricky to debug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=359) [And these are tricky to debug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=359) [You might have degenerated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=361) [triangles, where you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=364) [multiple of your vertices going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=365) [into the same location.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=367) [Or you might have infinites and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=369) [[inaudible] in your vertex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=371) [output position, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=372) [undefined behavior for GPU.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=374) [Thankfully, geometry viewer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=376) [detects these cases and provides](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=379) [an issue button for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=381) [With a single click to that, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=382) [can get a list of issues it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=388) [finds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=390) [In this case, it found several](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=391) [degenerate triangles.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=394) [Clicking one, you can directly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=396) [see the data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=398) [And just looking at this data, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=400) [can clearly tell that two of my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=402) [vertices are going to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=404) [origin, so it's a degenerate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=406) [triangle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=408) [And so as you've seen in all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=410) [these examples, geometry viewer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=412) [is a powerful tool to quickly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=415) [investigate all your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=417) [geometry-related issues, and if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=419) [geometry-related issues, and if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=419) [the problem is in your inputs,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=421) [then you have to go back and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=423) [check your model.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=424) [But if the problem is in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=425) [output, then you have to debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=427) [vertex shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=429) [Which brings us to our next](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=431) [topic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=433) [Debugging shaders, using the new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=435) [Shader Debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=438) [Shaders are hard to debug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=440) [They have math-heavy code, with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=442) [lots of vector operations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=444) [And they are highly parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=446) [The shader code you are writing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=448) [gets executed millions of times,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=450) [every single frame.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=452) [Here is the scene from Unity's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=453) [Book of the Dead demo, that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=457) [we've seen in the keynote and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=459) [State of the Union earlier this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=461) [week.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=462) [In a single frame of this scene](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=463) [makes 10 million vertexing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=466) [locations, and rendering into 60](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=468) [million triangles, every single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=471) [frame, in all the different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=473) [passes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=474) [So when you have a problem with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=475) [your shaders, it's not going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=477) [be easy to find where the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=479) [be easy to find where the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=479) [problem is, which shader it is,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=480) [and what part of the shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=482) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=484) [So to help you debugging your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=485) [shaders, now I'm really excited](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=487) [to introduce to you the new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=490) [Shader Debugger [applause].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=492) [Shader Debugger is a new tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=500) [for debugging all Metal shaders,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=503) [providing you rich visualization](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=505) [across thousands of threads at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=507) [once, and it shows you the real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=509) [data from GPU, not from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=513) [emulator.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=515) [It provides you flexible way of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=516) [setting, so that you can follow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=519) [your execution easily, without](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=520) [needing to have breakpoints at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=522) [all.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=524) [And it is fully integrated into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=525) [Metal frame debugger, so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=527) [you have everything you need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=529) [debug your shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=531) [Now, I would like to bring my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=533) [colleague, Xavier, to the stage,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=535) [to show you Shader Profiler in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=538) [action.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=540) [Xavier?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=541) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=542) [&gt;&gt; Thank you, Alp, and good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=545) [afternoon everyone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=547) [For today's demo, I wanted to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=549) [create a cool-looking water](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=550) [simulation, but as you can see,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=551) [there are some geometry](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=554) [problems.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=555) [My name is Xavier, and I am](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=557) [really excited to show you how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=558) [to use the new Shader Debugger](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=560) [and geometry view ware to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=561) [identify and fix geometry](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=563) [issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=564) [So we are going to start by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=565) [taking our friend capture.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=567) [You can easily do this by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=568) [clicking on the UP cutter button](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=571) [here in the debug bar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=572) [Now that we have captured our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=574) [frame, we can start debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=578) [our issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=579) [Since we are having geometry](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=580) [problems, we are going to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=584) [the new Geometry Viewer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=585) [The Geometry Viewer allows you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=589) [to navigate and inspect the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=591) [geometry of your draw call.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=593) [The water surface should be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=596) [smooth, but as we can see, there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=598) [smooth, but as we can see, there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=598) [is a steep cliff.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=600) [So let's pick one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=602) [triangles that looks wrong.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=603) [For example, this one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=604) [And now, let's select the broken](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=606) [vertex that is the one here at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=608) [the bottom.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=610) [You can easily do this, by using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=611) [this table here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=613) [So now that we have found our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=614) [broken vertex, let's take the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=617) [input positions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=620) [As we can see here, all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=621) [input positions are very similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=624) [for all of the vertices of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=626) [triangle, and in fact, the white](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=627) [coordinate is exactly the same.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=630) [So this looks correct, and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=632) [was inspected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=634) [Seeing the input is correct, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=635) [as we can see here, in the 3D](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=639) [view, the output is wrong, then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=640) [the problem has been our vertex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=643) [shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=644) [So let's use the new Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=645) [Debugger to debug and fix this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=646) [issue, just by clicking on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=648) [Debug button that you can find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=651) [here in the bottom right corner.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=652) [And just like that, we are now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=654) [in the Shader Debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=658) [It is that easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=660) [The first thing that you will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=665) [notice in the Shader Debugger is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=666) [that alongside your source code,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=668) [you have access to all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=671) [variables that were modified on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=672) [its line, and if you want more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=674) [details about your variables,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=676) [you can just open the detail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=678) [views by clicking in this detail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=679) [view button here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=681) [The detail view will show you in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=684) [language of source code the full](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=687) [value of the variable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=689) [And not just that, but also the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=690) [value of the variable across all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=693) [the vertices of the triangle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=695) [that you are debugging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=696) [Here in the Debug Navigator, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=697) [have access to the [inaudible]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=702) [history, which shows you what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=703) [your shader did from the very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=706) [beginning to the very end, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=707) [as you can see, it's really easy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=711) [to step through your code by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=713) [just using the arrow keys.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=714) [As you may have noticed, as I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=717) [navigate through the navigator,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=719) [navigate through the navigator,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=719) [its position in the source code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=722) [is highlighted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=723) [And this works in both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=724) [directions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=726) [You can select one line in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=727) [source code and its position in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=728) [the Debug Navigator will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=730) [selected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=731) [And at any point, you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=732) [access to all the variables that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=735) [are alive in a scope by just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=737) [taking the variables view, here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=738) [at the bottom.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=740) [So now that we are more familiar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=740) [with the Shader Debugger, let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=744) [debug our issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=746) [The water is calculated by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=750) [generating a displacement vector](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=752) [that is later added to our final](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=754) [position.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=756) [So let's get more information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=757) [about this displacement vector](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=758) [just by opening this detail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=759) [view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=762) [As we can see here in the detail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=766) [view, the right coordinate for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=768) [the vertex that we are debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=771) [is a big, negative number,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=772) [compared to its more positive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=774) [one in the other vertices that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=775) [were correct.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=777) [Then the issue must be in how we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=778) [Then the issue must be in how we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=778) [are calculating this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=780) [displacement vector.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=781) [So let's use the debug navigator](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=782) [to go through the function and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=785) [investigate what is happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=787) [And here, without even having to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=797) [read the code, we can already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=798) [tell that there is something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=799) [going wrong.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=801) [One of our variables has a value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=802) [that is not a number, and this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=804) [is likely corrupt in further](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=805) [math.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=807) [So let's check why this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=808) [happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=810) [If we check here in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=811) [debugger, it turns out that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=812) [are doing this operation on this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=814) [negative number, and this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=817) [what is causing the [inaudible].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=818) [So now that we have found the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=820) [cause of our issue, let me](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=822) [quickly fix this just by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=823) [swapping those two lines, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=825) [that we don't do operation on a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=827) [negative number.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=828) [And now that we have done our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=830) [changes to the shader, let's try](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=834) [out those changes just by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=835) [clicking in the reload changes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=836) [button, here in the debug bar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=838) [button, here in the debug bar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=838) [Reloading the shaders will run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=843) [your full [inaudible] using the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=845) [new shaders, so that you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=846) [check the results right away.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=848) [And as we can see here now our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=851) [water surface is smooth.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=854) [But let's check it in action,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=857) [just by clicking on the continue](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=859) [button here in the debug bar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=860) [And, as we can see [applause](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=867) [begins] now our water simulation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=869) [is correct.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=871) [In this ex-- in this demo, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=874) [have seen how to take a frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=876) [cocktail, how to use the new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=877) [geometry viewer to find broken](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=879) [vertices, and how to use the new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=881) [Shader Debugger to debug and fix](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=883) [your vertex shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=885) [Thank you, and back to Alp.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=886) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=888) [&gt;&gt; Pretty cool, huh?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=897) [Thank you, Xavier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=898) [Thank you, Xavier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=898) [Now that you have seen Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=901) [Debugger in action, let's take a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=902) [closer look at how you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=904) [this tool for your debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=906) [needs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=908) [First things first, though.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=909) [Let's talk about how you can get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=911) [into the Shader Debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=913) [Here I already captured a frame,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=916) [and am on the last roll call,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=918) [and then you will have draw or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=920) [dispatch call selected, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=923) [debug shader button on the debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=925) [bar will be enabled for your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=927) [easy access to the Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=930) [Debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=931) [Clicking that will show a view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=932) [for you to select the thread](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=934) [you're interested in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=935) [And selecting threads means](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=937) [different things depending on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=939) [the type of shader you are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=941) [debugging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=942) [For fragment shader, you will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=943) [using the pixel inspector to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=946) [select the pixel you want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=947) [debug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=949) [For vertex shader, you will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=950) [using the geometry viewer we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=953) [have just seen to select the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=954) [vertex you want to focus on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=956) [And for compute, you will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=958) [And for compute, you will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=958) [using the controls to select the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=961) [thread you are interested in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=963) [And then, just click the debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=965) [button, and that's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=967) [You are in the Shader Debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=969) [And whilst you're in the Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=971) [Debugger, it is so easy to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=972) [inspect any variable you are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=974) [interested in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=976) [You just need to go to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=977) [source line you have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=978) [variable, and that is all you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=979) [have to do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=981) [You don't need any break points,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=982) [you don't need to step through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=984) [your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=985) [The values of the modified](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=986) [variables in the line are going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=988) [to be available on the side bar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=990) [And as you have seen in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=992) [demo, we highlight [inaudible]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=994) [and infinite values in there, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=995) [that it's really easy to spot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=998) [common mistakes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1000) [You can just use the button on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1002) [the side bar to enable the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1003) [detail views, and get full](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1005) [details about your variables.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1007) [This is pretty handy, especially](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1009) [if you want to inspect the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1013) [complex [inaudible] and want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1014) [dive into different components.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1016) [Or you can just hover on any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1019) [Or you can just hover on any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1019) [variable you have in your source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1022) [code, and you will instantly see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1023) [the value of the variable at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1025) [that point.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1027) [And this is partially useful if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1028) [you are sampling from a texture,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1031) [like in this example, and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1033) [want to quickly check whether](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1035) [this is the right texture.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1037) [And just like in CPU debuggers,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1040) [you have access to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1043) [variables view, showing you all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1044) [your variables in scope.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1046) [So inspecting variables is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1050) [core part of debugging your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1052) [shaders, but that is only half](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1053) [of the story.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1055) [You also want to know what is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1057) [the order of your code getting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1058) [executed?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1060) [And Shader Debugger makes this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1061) [really easy as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1062) [When you get into Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1064) [Debugger, in the Debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1066) [Navigator, you will see all your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1068) [source line execute by your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1070) [shader for your selected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1072) [threads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1073) [And you can select any line you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1075) [want and directly navigate to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1078) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1079) [This also provides a unique](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1080) [stepping experience where you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1083) [can just use your cursor keys to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1084) [step through your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1086) [Functions are groups in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1089) [navigator, so that you can just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1090) [expand them and step into them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1092) [This also enables backward](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1097) [debugging, which is a really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1098) [powerful way of debugging your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1101) [shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1102) [Just find the variable that has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1103) [the wrong value, and just work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1105) [your way backward to see where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1107) [it got wrong, and why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1109) [Also you can use the filtering.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1113) [Filtering is a great way to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1115) [focus, and you can filter for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1117) [anything you are interested in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1121) [your shader code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1122) [Filter will be matching with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1124) [function calls, variables,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1126) [resources.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1129) [And your shader code might span](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1130) [across many different files, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1133) [if you use filter, it will only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1135) [match with what your shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1138) [executed, so it's a really great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1139) [executed, so it's a really great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1139) [way to focus.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1141) [So far, what we have seen is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1146) [great for debugging a single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1148) [thread, but what about other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1149) [threads?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1152) [Shader Debugger also gives you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1154) [access to other threads based on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1156) [the initial thread you selected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1158) [What this means is, for vertex,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1161) [you'll get the primitive of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1164) [selected vertex.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1165) [For fragment, you'll get direct](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1168) [angle area, and on your selected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1170) [pixel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1171) [For compute, you'll be getting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1173) [the full thread group of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1175) [selected compute thread, so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1176) [you have access to all variables](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1178) [interacting with the thread](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1180) [group memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1182) [Now, let's look at how accessing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1183) [other threads can help you debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1186) [fragment shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1188) [So while your code executes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1190) [millions of different pixels,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1195) [seeing a single variable for a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1197) [seeing a single variable for a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1197) [single pixel may not help you in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1200) [all the cases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1202) [Here, I have an example, I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1203) [calculating a gradient, and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1205) [can't see the single gradient](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1208) [value.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1209) [But I can't really tell whether](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1209) [this gradient value is good for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1211) [my pixels, or bad for my pixels.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1213) [With a single click, to bring up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1215) [the detail views, I can see this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1218) [gradient value across thousands](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1221) [of other pixels around my pixel,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1223) [and now I can tell this gradient](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1225) [is not correct because I can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1227) [clearly see it's not smooth.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1229) [As you've seen, detail views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1232) [help you understand your shader,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1234) [and identify good and bad values](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1236) [for your shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1239) [You can quickly hover into any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1240) [other pixel to instantly see the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1244) [value of that variable for that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1247) [pixel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1248) [And you can also use this view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1249) [to switch threads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1254) [Switching threads is great for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1257) [comparing cases where you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1258) [comparing cases where you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1258) [clearly see good and bad pixels.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1260) [You can quickly switch between](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1263) [them and see what the back pixel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1264) [is doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1266) [Once we switch threads, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1268) [update the execution history and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1270) [the variable views, so that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1272) [can fully debug your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1274) [newly-selected threads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1275) [This gets even better.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1279) [Detail views also help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1281) [understand your divergence.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1283) [So whenever you enable detail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1286) [view, the mask on the right-hand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1289) [side will always show you what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1291) [other threads executed the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1294) [line of code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1296) [In this example, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1298) [conditional, and just looking at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1300) [the mask, I can clearly tell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1303) [that roughly half of my threads](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1305) [executed inside this-- if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1308) [conditional, in a diagonal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1309) [shape.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1311) [So now, to show you how you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1313) [use detail views to fix problems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1317) [in fragment shaders, I would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1319) [in fragment shaders, I would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1319) [like to invite Xavier back to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1320) [the stage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1322) [Xavier?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1323) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1325) [&gt;&gt; Thank you, Alp.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1329) [After fixing our geometric](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1330) [problems in the first demo, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1331) [added highlights as a process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1333) [and effect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1335) [But the results were not as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1336) [suspected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1337) [So I took a frame capture to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1338) [debug the issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1339) [It was here in the [inaudible]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1345) [view, we can see that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1347) [highlights are actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1350) [generating dark areas in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1351) [bottom parts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1353) [So let's use the Shader Debugger](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1354) [to debug and fix this issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1356) [By not pressing, I'm bringing up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1358) [the pixel inspector, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1360) [allows you to select the pixel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1362) [that you want to debug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1364) [So here, we are going to select](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1365) [one of the pixels, for example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1367) [this one, and to start the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1369) [Shader Debugger, you have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1371) [click the debug button here on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1372) [the bottom right corner.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1374) [And now, we are debugging the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1378) [frame and shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1379) [frame and shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1379) [As we can see here, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1385) [highlights are generated in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1387) [three different steps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1389) [So let's use the detailed views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1390) [to quickly understand what is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1392) [happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1393) [Let's start at the beginning on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1394) [this close first one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1396) [As we can see here, we are just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1397) [sampling from our original](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1401) [color, and this looks correct.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1403) [So let's see what is next.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1405) [Here, we are accumulating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1409) [highlights in one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1410) [directions, so let's take the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1411) [results by opening the detailed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1413) [view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1415) [And as we can see here in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1415) [detailed view, there is already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1419) [dark area in the bottom part,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1421) [right here, so then the problem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1422) [must be in how we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1425) [accumulating those highlights.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1426) [As you can see, detailed views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1428) [are a powerful tool to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1431) [understand your shader without](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1432) [even having to read the code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1433) [So let's use the Debug Navigator](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1436) [to go to that first one and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1438) [to go to that first one and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1438) [investigate what is happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1440) [As we can see here, this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1441) [function is mainly a loop that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1446) [iterates a few times,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1448) [accumulating samples from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1449) [[inaudible] map.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1453) [Loops are highlighted just in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1453) [the Shader Debugger, which means](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1454) [that you can navigate through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1456) [your iterations using the Debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1458) [Navigator, and you will get,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1460) [alongside with your source code,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1462) [the value of the variables at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1464) [each one of the iterations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1465) [If we focus here, we can see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1467) [that as I navigate through the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1471) [different iterations, the values](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1472) [change.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1474) [But what is really powerful is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1477) [combining this with detailed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1479) [views.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1480) [So here, we are going to bring](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1482) [up the detailed view for final](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1484) [color, that this is where we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1485) [accumulating our highlights.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1487) [And now let's iterate using the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1491) [Debug Navigator.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1493) [As we can see, as I iterate, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1495) [are starting to accumulate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1498) [highlights in our final color.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1499) [highlights in our final color.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1499) [But as I continue iterating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1501) [toward the end of the loop, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1503) [are actually seeing this, there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1505) [is a pattern.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1506) [So let's investigate why this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1507) [happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1509) [As we see here in the Debugger,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1514) [we can actually see that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1516) [weight is negative.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1518) [And this is what is causing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1519) [color to be distracted rather](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1521) [than accumulated in our final](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1523) [color.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1525) [So now that we have found the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1526) [cause of our issue, let me](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1528) [quickly fix this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1530) [And now, let's check the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1534) [results, just by checking in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1536) [reload changes button, here in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1538) [the debug bar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1539) [And as we can see here, now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1542) [there is no more other carriers,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1545) [but let's see it in action, just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1546) [by clicking on the Continue](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1548) [button.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1549) [And indeed, now our highlight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1554) [looks correct.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1556) [This is just an example of how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1558) [This is just an example of how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1558) [you can use the Shader Debugger](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1560) [and its powerful detailed views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1561) [to debug [inaudible] Shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1564) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1565) [And back to Alp.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1566) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1568) [&gt;&gt; Thank you, Xavier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1572) [Now that you have seen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1574) [everything about Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1576) [Debugger, let's recap what we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1577) [talked about so far.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1579) [Shader Debugger is specifically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1582) [designed for debugging Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1585) [shaders, taking into account of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1586) [the highly parallel nature of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1588) [GPUs, and as you've seen, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1590) [great for fixing bugs with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1593) [highlights to nans and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1596) [infinites, it is so easy to spot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1597) [common mistakes, and also it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1600) [great for understanding your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1603) [shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1604) [With the detailed views, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1605) [don't even need to read the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1607) [to understand what your shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1609) [is doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1610) [And also it provides excellent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1611) [environment to develop your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1613) [shaders in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1615) [Just get into Shader Debugger](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1616) [and start editing, and read out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1618) [and start editing, and read out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1618) [to quickly iterate all your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1621) [results.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1622) [Shader Debugger supports iOS,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1623) [Mac, OS and tvOS with the recent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1627) [hardware.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1630) [And it is yours to enjoy with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1632) [Xcode 10.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1634) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1637) [&gt;&gt; And now that we've seen how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1642) [you can use geometric viewer and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1643) [the Shader Debugger to debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1644) [your shader problems, now let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1646) [focus on how we can make your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1648) [shaders run faster.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1650) [So optimizing your use of GPU is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1656) [important, because you want your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1659) [apps to run fast, and consume](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1662) [less battery for a great user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1664) [experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1666) [But before starting to optimize,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1667) [it is important to know what to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1670) [optimize.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1673) [If you are GPU bound, typical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1674) [Metal workload has many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1676) [different passes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1677) [And knowing which pass to focus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1679) [And knowing which pass to focus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1679) [on is quite important.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1681) [The good news is we have great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1683) [profiling tools built into Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1685) [frame debugger to help you with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1687) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1691) [GPU counters gives you high](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1691) [level performance [inaudible] of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1693) [your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1694) [That you can see, time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1696) [[inaudible] or draw call, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1697) [also providing you different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1699) [counters showing bottlenecks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1701) [And from here, once you know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1705) [your expansive pass, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1706) [just move to pipeline](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1708) [statistics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1709) [And here you get great compile](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1711) [for your shaders, giving you the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1713) [type of instructions you have.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1716) [And using the Shader Profiler,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1719) [you get visibility into timings](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1722) [for draw call or per-pipeline](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1724) [states.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1728) [So today, I'll be focusing on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1728) [Shader Profiler, and I will show](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1731) [you work flows that will help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1733) [you optimize your shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1735) [So once you are in the Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1737) [So once you are in the Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1737) [frame debugger, going to read by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1742) [performance navigator, you will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1744) [see all your pipeline states](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1746) [sorted by the time it takes to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1748) [execute them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1749) [This is a great place to see all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1751) [your expansive pipelines that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1753) [are optimizing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1755) [And here, you also have access](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1758) [to your draw-calls, using these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1759) [pipeline states, so that you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1761) [directly navigate to one and see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1763) [what it is drawing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1764) [And if you're in iOS or tvOS,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1766) [just going to the Shader Source,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1770) [you'll get the per line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1772) [execution cost.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1772) [This is a great place to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1774) [where you are spending the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1776) [time in your shaders, per line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1778) [basis.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1780) [And once you are in your shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1781) [source, you can just start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1784) [editing your code, and reload to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1786) [see if it makes any difference](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1788) [in timing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1790) [Or you can just get into Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1792) [Debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1794) [This is a great workflow if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1796) [are trying to optimize an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1797) [algorithm or when I just get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1798) [algorithm or when I just get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1798) [through this control flow, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1800) [when I understand whether you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1802) [can.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1805) [So Shader Profiler helps you a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1806) [lot trying to optimize your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1808) [shaders, but we made this even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1810) [better for A11.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1813) [Now, A11 [inaudible] being the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1818) [completely [inaudible] design](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1819) [GPU, now we have hardware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1821) [support to give you even more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1823) [insight in what your shaders are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1824) [doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1827) [Now with A11, you get this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1828) [chart, per line, showing you the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1830) [cost breakdown of the executed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1832) [line.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1834) [So Shader consists different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1835) [execution units, and if you are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1837) [using one of them heavily, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1839) [might be bottlenecked by that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1841) [So seeing ALU and memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1843) [breakdown gives you visibility](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1846) [into like time spent in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1848) [different execution units.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1850) [We did a lot of work for how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1853) [precision instructions to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1855) [much more efficient in A11.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1856) [So using health, overflows,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1858) [So using health, overflows,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1858) [might bring significant things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1860) [on your GP budget.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1862) [And another category now you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1863) [have visibility into is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1867) [synchronization, which is an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1868) [important category to look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1870) [because you want your Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1872) [core to be busy doing work, not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1873) [waiting for synchronization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1876) [And in your shader code, if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1878) [are reading from texture,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1880) [buffers, or using atomics or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1881) [barriers, you might have stalls](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1884) [waiting for synchronization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1887) [And also now we provide you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1889) [ability to see cost of in-line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1892) [functions, you are calling from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1894) [your shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1895) [This way you can directly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1896) [navigate to your most expensive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1899) [function, and start optimizing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1900) [that [applause].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1906) [&gt;&gt; Welcome to the Apple designed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1908) [A11 bionic chip.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1911) [We can provide better profiling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1913) [data than ever.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1914) [This year, we are introducing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1916) [per line timing information and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1918) [per line timing information and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1918) [instruction categories, even in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1920) [inline functions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1922) [My name is Max, and I am going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1923) [to help you max out your Shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1925) [performance [applause].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1929) [So I've captured the same water](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1933) [simulation again, but this time,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1935) [on my iPhone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1938) [Let's begin by change to view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1940) [frame by performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1943) [We now see a list of pipelines](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1945) [being used in our frame, ordered](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1948) [by time, and we can easily see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1950) [that the noise pipeline is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1952) [taking a significant amount of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1954) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1955) [Disclosing this, we can see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1957) [we spent nearly all the time in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1959) [our fragment Shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1961) [But this year, we can go deeper.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1962) [We can see the time we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1965) [spending each inside of each of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1968) [the functions that this shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1971) [is calling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1972) [Just clicking here goes to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1973) [source code file, and directly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1976) [jumps to the right line.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1978) [And that is the start of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1979) [And that is the start of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1979) [investigation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1980) [So what we see here right now on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1984) [the right-hand side is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1987) [percentage of time we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1988) [spending inside of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1990) [function, and further down the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1991) [percentage of time we spend in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1994) [each file-- each line.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1996) [Be aware the Shader Profiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=1999) [works on optimized code, so the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2000) [compiler can reorder the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2003) [instructions and there may be no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2004) [timing information for some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2006) [lines.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2008) [Next to the timing information,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2009) [we have the instruction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2012) [categories.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2013) [Let's take a look.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2014) [We can see that we spend time in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2017) [ALU doing math operations, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2019) [are reading from memory, from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2021) [textures, but what raises my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2023) [concern is the time we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2025) [spending in synchronization,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2026) [specifically, waiting on memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2028) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2030) [That means our GPU could not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2031) [read data fast enough, and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2033) [could not hide this latency by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2035) [doing ALU work in other threads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2037) [So let's figure out why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2040) [Just following the performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2042) [numbers, we will arrive at this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2046) [line, where we spent over 50% of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2048) [our entire shader time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2051) [Taking a look into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2054) [instruction categories again, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2055) [can see that we spend a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2057) [significant amount in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2058) [synchronization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2060) [But why?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2061) [We are using a color value here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2066) [that we have read from a color](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2068) [texture here using an offset.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2070) [This offset was read from a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2074) [noise texture here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2076) [So we have a dependent texture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2077) [read.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2079) [The GPU could not process until](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2079) [data from the texture read](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2082) [became available.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2083) [So what can we do about this?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2085) [Well, instead of reading from a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2087) [noise texture, we could just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2090) [simply calculate a noise value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2092) [in our GPU.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2094) [Let me do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2095) [Now, let me update my Shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2099) [Now, let me update my Shader.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2099) [The Shader is now sent to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2102) [device as we compiled, and then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2103) [the entire frame is rerun and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2106) [reprofiled, because changing a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2109) [single Shader or pipeline might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2111) [influence your entire GPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2112) [timing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2114) [Once that is done, let's take a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2116) [look.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2118) [We can see that we now spend](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2120) [just three milliseconds in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2122) [shader from down over to 20.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2124) [But let's also take a look into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2126) [the instruction categories.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2128) [Here we can see that we nearly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2130) [eliminated the entire time in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2135) [synchronization, and we keep our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2137) [GPU busy doing work for us.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2139) [So, as a summary, when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2142) [detect the bottleneck in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2144) [shader, the per line timing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2145) [information tells you exactly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2147) [where your problem is, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2149) [instruction categories help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2151) [to understand why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2153) [That's it for me.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2155) [Back to my colleague, Alp.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2156) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2158) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2158) [&gt;&gt; Thank you, Max.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2164) [And before closing, I would like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2166) [to talk about one last thing to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2168) [make it easier for you to work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2170) [with these new great tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2172) [Hopefully all of you are already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2175) [compiling your Shaders offline,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2178) [so that you are not paying the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2180) [runtime cost of online](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2181) [completion.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2182) [And if you are compiling your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2183) [shaders offline, now we have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2185) [new compiler option to save](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2187) [Shader sources into the built](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2189) [Metal [inaudible] so that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2191) [have access to your shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2193) [sources from anywhere using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2194) [these tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2195) [If you are compiling your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2197) [shaders using Xcode Project, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2198) [can just go to Build Settings,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2201) [and Enable this option.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2202) [Or if you are compiling using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2204) [command line, you can just pass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2206) [dash MO option to the Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2209) [compilers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2210) [But please remember to only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2212) [enable this in debug builds so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2213) [that you don't mistakenly ship](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2216) [your shader sources alongside](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2218) [your shader sources alongside](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2218) [your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2220) [All right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2220) [Let's recap what we talked about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2223) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2227) [We started with geometric](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2227) [viewer, providing you one place](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2229) [to investigate all your vertex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2231) [related issues, and debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2233) [visual problems, please remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2236) [to check with geometric viewer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2238) [first, and make sure that your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2239) [geometry is right before moving](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2241) [on to debugging your shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2243) [And then we have seen shader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2245) [debuggers, powerful tools to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2247) [debug all your Metal shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2250) [Great for fixing bugs,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2252) [understanding your shaders, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2254) [just developing your shaders.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2256) [And within [inaudible] profiler,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2258) [now you get even more visibility](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2261) [into what your GPU is doing with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2263) [the power of A11 bionic chip.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2265) [For more information, please](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2269) [check the link.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2271) [Tomorrow at 10:00 a.m., we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2273) [a great talk on Metal game](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2275) [performance optimization, where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2277) [we will be talking about common](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2279) [we will be talking about common](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2279) [performance problems that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2280) [found in games and tools](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2282) [available for you to detect and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2284) [fix them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2286) [Thank you [applause].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/608/?time=2286)