# Creating Custom Instruments

## Summary
Understand how custom instruments are useful and when they should be used. Get an in-depth view of the architecture of custom instruments and how to create them. Understand the attributes of a good instrument. Dive into advanced modeling and how to use the CLIPS language.

## Info
* Developer Tools
* WWDC 2018 - Session 410 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=6) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=18) [&gt;&gt; Alright, good morning.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=26) [My name is Chad Woolf.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=27) [I am a performance tools](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=28) [engineer here at Apple and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=30) [today's session 410.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=31) [We're going to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=32) [creating custom instruments in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=33) [Instruments 10.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=35) [Today's session looks like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=37) [We're going to talk a little bit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=38) [about why you might want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=39) [create custom instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=41) [We're going to go over the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=42) [architecture of Instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=43) [And we have a lot of content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=45) [today, so we have three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=46) [sections: Getting Started,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=47) [Intermediate, and Advanced.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=48) [And then on the way out, we'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=50) [talk about some best practices,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=51) [some of the things we've learned](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=52) [along the way, writing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=54) [instruments on our own.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=55) [So the first one, why would you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=57) [want to create custom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=58) [instruments?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=59) [instruments?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=59) [Instruments already ships with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=60) [lot of really powerful tools,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=62) [for example here we have System](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=63) [Trace where you can see how your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=65) [application is interacting with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=66) [the scheduler and the virtual](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=68) [memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=69) [We have a new game performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=70) [template this year that combines](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=72) [System Trace and Metal System](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=73) [Trace to help you spot glitches](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=74) [and missed frames in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=77) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=79) [And if you're on the network](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=80) [portion of your application, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=83) [also have the Network](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=84) [Connections Instrument, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=86) [can show you TCP/IP traffic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=87) [coming in and out of your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=88) [And then, of course, a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=90) [you are familiar with the Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=92) [Profiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=93) [Time Profiler is a great way to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=94) [see where your application is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=95) [spending its time, whether that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=97) [be the networking layer or the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=98) [game engine or some other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=100) [portion.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=101) [Now the common thing here is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=102) [that these are all very useful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=105) [if you know the code that you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=108) [profiling, right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=110) [So if you know those IP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=111) [addresses, you know what those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=112) [mean, and you know what the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=113) [different functions mean and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=114) [call stack of the Time Profiler,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=116) [it makes it a lot easier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=118) [But what if someone is profiling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=119) [But what if someone is profiling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=119) [your application and they're not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=121) [familiar with their code, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=122) [What if they just want to see is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=124) [the application spending a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=125) [of time in the networking layer,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=127) [and, if so, what is it doing?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=128) [Well, a good use for a custom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=130) [instrument would be to try to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=132) [tell the story of what your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=134) [layer or what your application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=136) [is doing in a way that someone](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=138) [who doesn't understand the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=139) [can understand and appreciate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=141) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=142) [Now in the advanced section,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=144) [we're going to show you how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=145) [take advantage of the Expert](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=147) [System Technology that built](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=148) [inside of Instruments so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=150) [you can create an instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=151) [that's actually able to look for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=153) [bad patterns and spot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=155) [anti-patterns in your code even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=156) [if you're not there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=158) [Alright, so let's take a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=160) [the architecture that makes this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=161) [possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=162) [And to do that, we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=163) [have to start here, back at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=165) [beginning.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=167) [So in the beginning, Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=169) [works about the same as it does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=171) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=172) [There's still a library.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=172) [You still drag instruments out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=174) [and drop them into your trace](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=175) [document and then you press](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=176) [Record and it's like running a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=178) [bunch of performance tools at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=179) [bunch of performance tools at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=179) [once.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=180) [Now the major difference between](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=181) [then and now is that back then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=182) [the infrastructure of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=184) [Instruments didn't really do a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=185) [lot to help us write instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=186) [quickly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=188) [And at the time, that was okay](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=189) [because we had already inherited](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=191) [quite a few assets and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=192) [performance tools that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=194) [already had.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=195) [They all had their own recording](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=196) [technology and their own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=197) [analysis logic and all we had to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=198) [do was build a custom storage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=200) [mechanism to get the data in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=202) [trace and a custom UI to help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=203) [integrate it with the rest of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=205) [the app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=207) [Now over time, the maintenance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=207) [costs of Instruments and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=209) [maintaining this model shot up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=211) [And the reason for that was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=213) [every time we wanted to add a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=214) [new feature we had to modify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=216) [seven custom UIs and seven](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=217) [custom storage mechanisms and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=219) [that's not the model we wanted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=222) [you guys to inherent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=223) [We didn't want you to inherit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=224) [this kind of maintenance costs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=225) [So before we even talked about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=227) [doing a custom Instruments'](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=228) [feature, we needed to solve that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=229) [first and I think we did.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=231) [So in the new version of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=233) [Instruments, instead of having](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=234) [custom UIs and custom storage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=236) [mechanisms, we have two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=237) [standardized components and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=238) [standardized components and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=238) [that's the Standard UI and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=240) [Analysis Core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=242) [Now the Standard UI is what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=243) [implements the entire user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=245) [interface of a modern Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=246) [and it's tightly coupled with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=248) [the Analysis Core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=249) [The Analysis Core you can think](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=251) [of as a bit of a combination](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=252) [between a database and an expert](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=253) [system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=256) [And the two these are optimized](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=257) [to work on time series data,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=258) [which makes them a great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=259) [foundation for building](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=260) [instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=261) [Now when you build an instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=262) [with the modern architecture,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=264) [really what you're doing is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=265) [essentially creating a custom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=267) [configuration of both the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=269) [Standard UI and the Analysis](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=270) [Core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=272) [Now if you look at some of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=274) [screenshots of the powerful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=275) [instruments that I showed in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=276) [beginning, we have the System](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=278) [Trace and we have the Game](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=280) [Performance template and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=282) [Network Connections template and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=284) [Time Profiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=287) [All of the instruments in all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=288) [those documents were built](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=290) [completely out of the Standard](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=291) [UI and the Analysis Core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=293) [So you can do the exact same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=295) [things that they can do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=296) [And in Xcode 10 and in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=298) [And in Xcode 10 and in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=298) [Instruments 10, we're giving you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=300) [the exact same tools to build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=301) [your instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=302) [So the only difference between](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=303) [an instrument that ships with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=306) [Xcode and one that you build is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=307) [just simply who built it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=310) [Now your instruments will show](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=312) [up here in our library and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=313) [can see like Activity Monitor at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=316) [the top.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=317) [Just like that, you can drag and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=319) [drop your instrument into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=320) [trace document and take a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=321) [recording.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=322) [And what happens here is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=324) [Instruments fills in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=325) [Analysis Core with data and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=326) [Standard UI reacts to create the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=327) [graphs and the table views.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=329) [Now Instrument has two ways of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=331) [showing data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=333) [It's got the graph view at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=334) [top here, which we call a track](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=335) [view, and an instrument can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=336) [define more than one graph, if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=338) [it would like to.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=340) [And the way that you choose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=342) [between the graphs that will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=343) [define your instrument is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=344) [there's a small control here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=345) [attached to the Instrument icon](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=347) [and we can change this from say](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=348) [CPU to Networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=349) [Now each graph is allowed to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=353) [define a certain number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=355) [lanes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=357) [So here we've defined three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=357) [lanes, graphing three different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=358) [lanes, graphing three different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=358) [types of CPU utilization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=360) [And each one of these lanes is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=362) [bound to a different table in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=364) [the Analysis Core or it can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=365) [bound to the same table but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=367) [you're looking at a different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=368) [column in the table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=369) [Now the other portion of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=372) [instrument is the lower portion,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=374) [which is equally as important.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=376) [It's called the Detail View.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=377) [And that's where you can see the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=378) [event-by-event lists and also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=380) [any sort of aggregations and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=382) [summaries of your data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=384) [Now just like the lanes, oh, I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=386) [sorry, just like the graphs, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=389) [can define a number of details](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=391) [for your instrument and you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=392) [select which detail is active by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=394) [clicking this portion of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=395) [jump bar and then selecting the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=396) [title of detail that you define.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=397) [Now just like the lanes in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=400) [graph, all of the details are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=402) [bound to again a table in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=404) [Analysis Core and that's where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=406) [they receive the data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=408) [The recording happens.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=409) [The tables fill in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=410) [And UI reacts and there's no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=411) [special code needed on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=412) [behalf.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=414) [Now from the perspective of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=416) [Standard UI, everything in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=418) [Standard UI, everything in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=418) [Analysis Core appears to be a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=420) [table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=421) [So let's talk a little bit about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=422) [tables and what they are.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=423) [Tables are collections of rows](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=425) [and they have a structure that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=426) [defined by a table schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=427) [Right, so it's very similar to a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=429) [database application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=430) [The schema defines the columns](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=432) [and the names of the columns and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=434) [also the types.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=435) [Now the Analysis Core uses a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=436) [very rich typing system called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=438) [an engineering type and that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=439) [both tells us how to store the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=441) [data and also how to visualize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=442) [it and analyze it in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=444) [Standard UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=445) [Now in addition to or while the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=447) [schema describes the structure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=449) [of a table, you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=451) [attributes which are key/value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=453) [pairs to describe the content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=454) [So that kind of helps us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=456) [describe what goes into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=457) [table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=458) [You can think of schemas as like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=459) [a class in Objective-C or Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=462) [whereas the rows are like the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=464) [instances.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=465) [And so it's important that your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=466) [schema names are singular, just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=468) [like we have class names in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=470) [Objective-C that are singular,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=471) [like NSString instead of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=473) [strings.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=475) [So this will be more important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=476) [when we get to the advanced](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=478) [section but I wanted to call it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=478) [out now so we can know what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=479) [out now so we can know what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=479) [we're looking at.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=481) [Okay, an example of the schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=483) [here is tick.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=484) [This is one of schemas that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=486) [comes inside of Instruments and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=487) [it's used to hold a table of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=488) [synthetic clock ticks that we'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=490) [use later for statistical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=491) [computations in our modelers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=493) [Now it is very simple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=495) [It has one column that's defined](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=497) [and that's time and it's using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=498) [the engineering type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=499) [sample-time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=500) [And it also defines an optional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=502) [attribute that can be attached](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=504) [to that table instance called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=505) [frequency.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=506) [So if you create a table with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=507) [frequency equals 10 attribute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=510) [here for our tick schema, then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=512) [the provider of that data knows](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=514) [that it needs to fill that table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=516) [with ten timestamps per second,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=518) [right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=520) [So that's a way to communicate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=520) [what you want filled into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=521) [table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=522) [Now with that, I think we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=524) [enough information to help us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=526) [get started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=527) [So we're going to show you how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=528) [to create your own Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=530) [package project in Xcode and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=532) [we're going to show you how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=534) [create your very first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=534) [instrument that graphs these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=535) [ticks and shows these ticks in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=537) [the detail view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=539) [And to do that, I would like to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=540) [call up my colleague Kacper to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=541) [give you guys a demonstration.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=544) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=545) [&gt;&gt; Thank you, everyone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=548) [Now I will show you how to start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=550) [with creating and running your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=552) [first custom instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=553) [You're going to be using tick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=556) [schema presented by Chad to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=557) [craft instruments during ticks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=559) [with constant frequency.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=561) [You will learn how to describe](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=563) [your package, iterate on it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=565) [using Xcode, and tested in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=567) [Instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=569) [Let's get started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=571) [You create your new Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=573) [packets project just like you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=574) [used to in Xcode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=576) [You go to a New Xcode Project,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=578) [select macOS platform, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=580) [Instruments Package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=582) [You need to fill out your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=585) [product name, which will become](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=586) [default name for your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=587) [Instruments Package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=588) [Let's call it ticks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=590) [Hit Next and Create.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=591) [Xcode has created project with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=599) [Xcode has created project with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=599) [package target and one file,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=601) [package definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=604) [Let's look in to it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=606) [Packages are described in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=610) [XML-based syntax.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=611) [At the beginning, each package](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=613) [contains identifier, title, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=615) [owner.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=618) [These fields will be visible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=619) [when someone attempts to install](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=621) [your package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=622) [Usually, you would start by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=624) [defining your own schema and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=626) [optionally modeler but because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=629) [here we are going to be using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=631) [predefined tick schema, let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=632) [remove these guides.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=634) [To import tick schema from base](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=638) [package, all you need to do is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=641) [to specify import schema element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=643) [and first name of the schema,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=645) [tick.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=648) [Now it's ready to be used by our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=653) [Instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=655) [To make defining more complex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=658) [To make defining more complex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=658) [elements easier for you, we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=660) [deployed a number of snippets in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=662) [Xcode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=664) [To use them, just start writing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=665) [your element name, like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=667) [instrument, and hit Return.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=669) [You need to fill out your unique](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=671) [identifier for Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=674) [and a few properties that later](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=680) [appear in Instruments Library.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=682) [It will be Instrument drawing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=689) [ticks every 10 milliseconds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=691) [Now it's time to create a table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=699) [that will be instantiated when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=701) [this instrument is dropped from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=702) [library to a trace document.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=704) [Table identifier has to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=707) [unique within this instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=709) [definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=710) [Let's call it tick table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=712) [In schema-ref, we need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=716) [reference schema that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=717) [previously imported, tick.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=718) [previously imported, tick.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=718) [Now we need to define what will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=724) [appear in [inaudible] view and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=725) [detail view for our instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=728) [I will use graph element.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=730) [We need to fill out title for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=732) [our graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=735) [I will call it ticks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=736) [And title for our lane.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=739) [I need to reference table by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=741) [identifier that was previously](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=745) [created here, so I will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=748) [reference tick table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=750) [And now we will specify plotting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=754) [for our graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=756) [I will use plot element.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=758) [And in its most basic form, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=760) [requires you only to pass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=762) [mnemonic of the column that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=764) [contains value to be graphed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=765) [We will be graphing time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=766) [:11](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=768) [I would like all of my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=772) [timestamps to be visible in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=773) [table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=776) [To do this, I will use list](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=777) [element.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=779) [We pass title for a list that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=782) [will appear in the [inaudible]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=784) [of Instrument, table ref, just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=786) [like for lane element before,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=791) [and columns that we would like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=792) [to see.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=795) [Now our package is ready to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=800) [built, and run in Instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=802) [To do this, you will use Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=805) [scheme run action.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=807) [Let's do it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=809) [You can see that build error](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=813) [appears.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=814) [You have full ID support when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=815) [building instruments packages.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=817) [Here, error appears in line and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=819) [says that column timestamp could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=821) [not be found in schema tick.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=823) [Oh, that's right, because it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=825) [not timestamp.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=826) [It's supposed to be time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=827) [I will fix it and run it again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=828) [You can see it running because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=833) [this new copy of Instruments to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=838) [appear.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=839) [You can recognize the special](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=839) [You can recognize the special](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=839) [copy by having different icon.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=842) [It loads your package temporally](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=844) [only for this run session.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=846) [It allows you to iterate on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=848) [package more easily.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=850) [To be sure that your package is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=852) [already loaded, we can check it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=855) [out in New Package Management](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=857) [UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=859) [You can find it in Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=860) [Preferences and Packages](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=862) [[inaudible].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=864) [You can see our newly created](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=865) [package here along debug batch,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=869) [which means that it's loaded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=871) [only temporarily.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=873) [You see also all of the system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=875) [packages here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=877) [You can use and link against](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=878) [them using subtitle, visible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=880) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=881) [Our ticks package contains ticks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=882) [instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=886) [So let's test it now using blank](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=887) [template.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=892) [I will switch my target to my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=893) [MacBook](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=895) [and we'll search for my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=900) [instrument in Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=901) [Library.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=902) [I will fill the ticks and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=903) [appears here with all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=908) [properties being filled out from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=910) [the package definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=912) [Let's drag and drop it into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=913) [trace](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=915) [and record for just a second.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=919) [You can see the bottom pane was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=925) [propagated with data generated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=928) [every 10 milliseconds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=930) [Detail and graph are coordinated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=933) [with each other.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=935) [When I click on rows, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=936) [see inspection head moving here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=937) [I can also zoom into a graph](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=940) [using Option and Click and Drag.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=943) [Here you can see the ticks are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=948) [indeed being drawn.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=950) [That's how you create your first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=953) [Instruments Package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=955) [Now back to Chad who will tell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=957) [you more about Standard UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=959) [you more about Standard UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=959) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=961) [&gt;&gt; Alright.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=964) [Thank you, Kacper.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=965) [Okay, so we've seen how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=966) [create a very basic instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=967) [We see how to get started with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=969) [creating your first project in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=971) [Xcode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=972) [Now let's talk about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=973) [different kind of graphs that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=975) [have and the different kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=976) [details we have and how we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=977) [potentially do this with real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=978) [data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=980) [Starting with graph lanes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=981) [So you saw how Kacper was able](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=984) [to define a graph and a lane](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=987) [using what we call the plot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=988) [element.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=990) [Now the plot element is a way to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=991) [tell the Standard UI that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=994) [should be taking the entire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=996) [contents of the table and trying](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=998) [to plot it in that particular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=999) [lane.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1001) [Now the way that the plot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1002) [element determines how to graph](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1004) [this, what the graphing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1006) [treatment should be, is by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1007) [looking at both the schema and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1009) [the column that was targeted to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1011) [take the value from.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1012) [If the schema is an interval](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1014) [schema, meaning that it has a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1015) [time and a duration, or if it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1016) [a point schema, which means it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1018) [just as a timestamp, they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1019) [just as a timestamp, they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1019) [treated differently.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1021) [And if the column being targeted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1022) [has a magnitude, meaning that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1024) [can draw a bar graph out of it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1026) [it will draw a bar graph like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1028) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1030) [An alternative here is our Life](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1031) [Cycle lane where it's still an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1033) [interval schema but we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1035) [targeting a column that's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1036) [state and the state does not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1038) [inherently have a magnitude.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1040) [So it doesn't make sense to draw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1042) [a bar graph there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1043) [So the Standard UI will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1044) [automatically pick a state style](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1045) [treatment which involves drawing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1047) [these intervals with a label in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1048) [a rounded rectangle style so you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1051) [can tell it apart from just a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1053) [flat bar graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1054) [Now it's really important that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1056) [the Standard UI be able to pick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1057) [these treatments for you because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1058) [that's what keeps Instruments UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1059) [consistent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1061) [So if you define a state graph](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1062) [and we define a state graph, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1063) [Standard UI will enforce that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1065) [they look the same way, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1066) [makes it a lot easier for user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1068) [of Instruments to move from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1069) [instrument to instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1071) [Now if you want to create graphs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1074) [or the number of lanes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1077) [dynamically, based on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1078) [contents of the data, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1079) [contents of the data, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1079) [define what's called a plot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1080) [template.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1081) [Now a plot template is defined](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1082) [very similarly to a plot except](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1084) [there's an extra element in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1086) [there that allows you to choose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1087) [a column in the table and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1088) [will create a separate row for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1090) [each unique value in that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1092) [column.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1093) [Now if you're looking for just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1096) [spikes or periods of activity,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1097) [we have what's called a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1098) [histogram and what you can do is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1099) [break the timeline over certain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1101) [size buckets, let's say 100](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1102) [milliseconds, and then use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1104) [functions like count or sum or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1105) [min or max to sort of drive up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1107) [the magnitude of those buckets](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1109) [as the different points or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1111) [intervals are intersecting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1112) [So it's a great way to look for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1113) [spikes in activity such as here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1116) [in the System Trace where we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1118) [looking for spikes of activity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1119) [in context switches or virtual](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1120) [memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1121) [Now let's talk about details.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1122) [Details are on the lower half of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1125) [the UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1126) [And you've already seen the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1128) [first one, which is the List.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1129) [That's very simple mapping](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1130) [between the Table and Analysis](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1132) [Core and a table view in the UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1133) [We also have aggregations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1136) [We also have aggregations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1136) [And aggregations are nice when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1140) [you want to try to subtract out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1141) [the time component and you want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1143) [to look at your data in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1144) [aggregate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1145) [You want to apply some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1145) [statistics to everything that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1146) [in that table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1147) [And so when we define an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1149) [aggregation, what we're doing is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1150) [the columns this time are now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1152) [functions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1153) [So you can use functions like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1154) [sum, average, count, and several](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1156) [other statistical functions to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1159) [help you create the aggregation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1160) [view that you want to create.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1164) [Now the nice part about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1168) [aggregations is that you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1169) [define a hierarchy as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1170) [So here we've defined a process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1172) [thread in virtual memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1173) [operation hierarchy, so we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1175) [see these totals broken down by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1177) [the process and then by each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1178) [thread that's in that process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1180) [and then by each type of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1182) [operation that's in that thread,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1183) [in that process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1185) [So aggregation is a really nice,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1186) [powerful way to look at a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1187) [data in summary.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1189) [Now another type of aggregation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1191) [is called Call Tree.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1193) [Now the Call Tree is useful when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1195) [you have a column that is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1196) [backtrace and you got another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1197) [column that's a weight.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1199) [column that's a weight.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1199) [You can create weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1200) [backtrace or a weighted Call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1201) [Tree view using the Call Tree](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1202) [like you see in Time Profiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1204) [Now another style is called a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1207) [narrative.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1209) [And the narrative is used when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1210) [you want to convey information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1212) [that's just best left to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1214) [technical language, such as the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1215) [output of an expert system and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1217) [that works hand-in-hand with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1218) [narrative engineering type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1219) [Now the last type of detail here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1223) [is called a time slice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1225) [The time slice looks very much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1227) [like a list except the contents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1228) [are filtered to include only the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1230) [intervals that intersect with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1231) [that blue line you see on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1233) [graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1234) [That's called the inspection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1235) [head.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1236) [So as you move the inspection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1236) [head over the graph, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1237) [contents of the list will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1239) [filtered to match what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1240) [intersects with that inspection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1242) [head.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1244) [Now all of these UIs are bound](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1246) [to tables in the Analysis Core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1249) [And when you hit Record, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1251) [data comes in through the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1253) [Instruments app and fills in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1254) [data in the Analysis Core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1255) [So let's talk a little bit more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1257) [about how that process works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1259) [about how that process works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1259) [The first step before you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1262) [press Record is the Analysis](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1264) [Core will be taking the tables](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1266) [that are created within it and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1268) [it'll be mapping it and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1269) [allocating storage for it in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1271) [core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1272) [Now if a table has the exact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1273) [same schema and the exact same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1275) [attributes, then by definition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1276) [it's the exact same data, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1277) [it's going to map to the exact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1279) [same store.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1281) [Now for each store, the second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1283) [step is to try to find a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1284) [provider for the data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1286) [Now sometimes we can record that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1287) [directly from the target through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1289) [the data stream and sometimes we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1290) [have to synthesize the data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1292) [using a modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1293) [Now modelers can require their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1295) [own inputs and those inputs can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1296) [be the outputs of other modelers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1298) [or they can be recorded directly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1300) [from the data stream and that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1301) [how we synthesize the rest of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1302) [the data that we don't know how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1304) [to directly record.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1305) [Now once we've got data sources](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1307) [for all of the stores in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1309) [Analysis Core, that's what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1311) [called the binding solution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1313) [And so the third step is to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1315) [optimize the binding solution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1316) [And here you see Instruments is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1317) [visualizing its own binding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1318) [solution for what we call the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1319) [solution for what we call the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1319) [thread narrative.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1321) [Now the next part about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1323) [binding solution is that it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1324) [trace-wide and so as you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1326) [dragging and dropping](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1329) [instruments into the trace,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1329) [Instruments is computing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1331) [best possible recording solution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1333) [to try to minimize the recording](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1336) [impact on the target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1337) [Now when you create your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1340) [tables or when you create table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1341) [instances, you have to give them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1343) [a schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1344) [And Instruments already has over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1345) [100 schemas defined.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1346) [And all of these schemas are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1349) [available to you and are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1350) [contained in the packages that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1351) [you saw in the Package](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1353) [Management UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1353) [You can just simply import the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1355) [schema into your own package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1356) [Now if that schema is contained](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1359) [in a package that's not the base](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1361) [package, you have to also link](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1362) [that package as a build setting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1364) [in Xcode for Linked Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1365) [Packages that you can set so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1367) [that we can find that extra](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1369) [package that you're referring to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1370) [at build time and do some type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1371) [checking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1372) [Now because all of these schemas](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1374) [are defined in other packages](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1376) [when you hit Record, all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1377) [tables with those schemas will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1379) [tables with those schemas will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1379) [fill in because they either have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1380) [modelers defined or we know how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1382) [to record it from the data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1384) [stream.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1384) [So these make excellent building](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1385) [blocks for your own instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1386) [but even better they make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1388) [excellent inputs for writing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1389) [your own modelers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1390) [Now you write a modeler or you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1392) [define a modeler in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1394) [Instruments Package with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1395) [modeler element and you can also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1396) [create a custom output schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1399) [for that modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1402) [You can use the point-schema for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1404) [just a single point in time or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1405) [you can use the interval schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1407) [if you have a point and a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1408) [duration.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1409) [Now the modeler is able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1410) [define what inputs it needs and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1413) [this is what tells the binding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1415) [solution how to fill out the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1416) [rest of that data flow graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1417) [And so your modeler will snap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1419) [right into the binding solution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1421) [Now modelers are actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1423) [miniature expert systems and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1425) [they are written in the Clips](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1427) [language, which means that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1428) [they're very powerful but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1430) [they're also pretty advanced.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1432) [So we're going to save the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1433) [details on how to create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1434) [modelers for the advanced](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1435) [section; however, it is really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1437) [section; however, it is really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1437) [important that you be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1440) [define your own schemas and we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1441) [have a new os signpost API this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1442) [year, which is a great way to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1444) [get data into Instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1446) [So we've created a little bit of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1448) [a shortcut.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1450) [Inside your package, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1452) [define what's called an os](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1453) [signpost interval schema and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1454) [what that does is both define](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1456) [schema and also give us enough](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1457) [instructions to be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1460) [generate a modeler on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1462) [behalf.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1463) [Now inside there, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1464) [capture the data that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1465) [recorded in the metadata of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1466) [os signpost calls and you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1468) [use that captured metadata and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1471) [expressions to define how we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1473) [should fill out the columns of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1475) [your schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1478) [So we'll look at a really simple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1479) [example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1481) [Let's say we're going to do JSON](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1483) [decoding and we have a signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1484) [that we mark the beginning of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1487) [that decoding activity and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1488) [end of that decoding activity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1490) [And in the beginning, we'll also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1492) [capture some metadata to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1494) [indicate the size of the JSON](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1495) [object that we're about to try](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1497) [to parse.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1499) [Now in your Instruments Package](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1500) [definition, you can create an os](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1501) [signpost interval schema and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1503) [define the name of your schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1506) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1508) [You select which signpost you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1509) [would like to have recorded,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1511) [including the signpost name, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1512) [then here you can use a syntax](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1515) [to capture the different pieces](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1516) [of metadata from your start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1518) [metadata message.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1520) [And here, we're going to take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1521) [that captured value and we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1523) [going to use that as the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1524) [expression to teach us how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1525) [fill in the column for data size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1527) [that we just defined in line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1528) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1530) [Now in Session 405, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1532) [Measuring Performance Using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1535) [Logging, I demonstrated the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1537) [Trailblazer application and also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1539) [showed you an instrument that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1543) [you guys could write based on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1544) [the signpost inside that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1546) [And now that we know a lot more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1547) [about how to write custom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1549) [instruments, I'd like to invite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1550) [Kacper back on stage to give you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1552) [a demonstration and walk-through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1554) [of how we created that package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1556) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1558) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1558) [:15](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1563) [&gt;&gt; Thank you, Chad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1564) [So Trailblazer app is an iOS app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1569) [that displays lists of popular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1572) [hiking trails near you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1574) [As an UI component, UI table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1576) [View.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1579) [Each cell loads image for a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1581) [trail asynchronously.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1582) [To prevent glitches and as an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1585) [optimization when cell is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1586) [reused, we cancel the download.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1588) [To visualize my flow of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1591) [downloads, I wrap every download](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1593) [in os signpost call.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1595) [Let's take a look at it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1596) [When my [inaudible] cell is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1601) [displayed, start Image download](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1602) [method is called.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1604) [We create downloader signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1606) [ID, which takes os log handle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1608) [and downloader object.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1611) [We then grab address of UI table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1613) [View cell and call os signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1615) [begin with os log which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1619) [begin with os log which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1619) [coming from signpost.networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1623) [Let's take a look at it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1624) [This log takes our app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1627) [identifier as subsystem and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1628) [networking as category.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1631) [We pass background image name,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1635) [previously created signpost ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1637) [and message format, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1639) [includes image name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1640) [Here, we wrap it in public](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1643) [specifier because it's a string](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1645) [and caller, which is address of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1648) [a cell.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1650) [Our download could complete in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1651) [two ways, successfully.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1653) [Let's take a look at it now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1656) [When it completes like that,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1659) [delegate method it's called.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1660) [We create signpost ID just like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1663) [before and call OS signpost end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1665) [This time we pass status and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1669) [size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1672) [Value for status is completed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1673) [And size is set to the image](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1678) [And size is set to the image](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1678) [size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1681) [Next let's take a look at our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1682) [prepare for use overwrite.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1684) [When there's running downloader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1686) [in progress, we cancel it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1689) [We create signpost ID and call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1692) [our signpost end with the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1694) [format string but now value is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1696) [canceled and size is zero](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1698) [because download didn't succeed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1700) [Let's take a look at our os](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1702) [signpost interval schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1705) [definition and how we captured](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1706) [those signpost end package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1708) [We define our signpost interval](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1712) [schema with unique identifier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1714) [and title.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1716) [Then we define our subsystem and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1717) [category, which corresponds to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1720) [the one that we passed when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1721) [creating os log handle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1723) [We create name element, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1726) [corresponds to the one that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1729) [passed in os signpost call and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1730) [start pattern and end pattern.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1734) [These both correspond to the one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1736) [that we passed in os signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1738) [that we passed in os signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1738) [begin and end calls.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1740) [Message element is the same as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1744) [the format string you passed but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1745) [instead of format arguments, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1747) [pass variables here to capture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1750) [the values that you passed when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1752) [calling os signpost.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1754) [Let's take a look at how we fill](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1756) [out those values in our columns.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1758) [Here, you can see status column.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1763) [It's type of string because it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1767) [either completed or canceled,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1768) [and we fill it out with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1771) [value of status variable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1772) [Because expression element could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1776) [take arbitrary Clips expression,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1778) [we could also do more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1781) [sophisticated things in it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1782) [Here, we could compute event](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1784) [impact by looking at size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1787) [If it's greater than 3 and 1/2](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1789) [megabytes, we say that impact is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1791) [high, else impact of operation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1793) [is low.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1796) [That's our definition for os](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1798) [That's our definition for os](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1798) [signpost interval schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1800) [Now let's take a look at table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1801) [creation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1803) [For schema ref, we pass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1805) [identifier of our os signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1808) [interval schema and create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1810) [unique identifier for this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1812) [specific table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1813) [Then, we can reference it in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1815) [UI definitions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1817) [For graph, we create a single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1820) [lane.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1822) [It takes our table and this time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1823) [it graphs by using the plot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1826) [template.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1827) [Plot template is dynamic way of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1828) [creating graphs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1830) [It looks at the table, at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1832) [column that was passed in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1835) [instance by element and for each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1837) [unique value of this column, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1840) [creates plot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1842) [Label format element allows us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1844) [to create format title for this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1846) [plot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1849) [Here it's img column and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1850) [value from image name column.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1852) [We pass image name as a value of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1854) [our plot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1857) [Each of our planes will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1858) [Each of our planes will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1858) [colored with column of impact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1860) [and label on our plane will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1863) [taken from image size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1866) [Next, we have a list.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1869) [You already saw this one in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1872) [ticks example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1874) [Here, we pass all of the columns](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1876) [that you would like to see.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1878) [Next, aggregation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1881) [This aggregation will track all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1883) [of the completed downloads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1885) [Because our table contains both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1887) [completed and canceled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1889) [downloads, we need to apply](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1891) [slice element to filter some of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1892) [the data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1894) [In slice element we specify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1896) [column that slice will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1897) [applied on and predicate value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1899) [that has to be matched.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1902) [Here, we want to take only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1903) [completed rows from this table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1905) [We define hierarchy, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1908) [only one level hierarchy with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1910) [image name and columns that will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1912) [be visible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1915) [For each image name, we will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1916) [specify count and image size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1918) [specify count and image size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1918) [So we will be summing sizes of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1922) [an image.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1924) [Next, we have image, time slice,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1925) [sorry.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1930) [We specify all of the columns](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1930) [that will be visible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1932) [And to use our instrument more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1936) [easily, we can specify our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1938) [custom template.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1942) [Now let's try and build, and run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1944) [our package.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1946) [You can see the template appears](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1954) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1956) [I can choose it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1956) [and target my iPhone and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1961) [Trailblazer app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1963) [I will record for just a while.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1968) [You can see that track view was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1980) [propagated with data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1983) [Each plot was created for each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1986) [image name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1988) [You can see that label format](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1991) [matches the one that we passed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1992) [in package definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1994) [And if download is higher rather](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1996) [than 3 and 1/2 megabytes, our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1999) [plane is colored in red.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2001) [Size appears on the plane.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2003) [Next, we can take a look at all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2005) [of the details.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2008) [Firstly, we have list downloads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2012) [This is just a list of all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2016) [downloads that happened.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2018) [We can choose our aggregation,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2019) [which divides all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2022) [downloads by image name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2026) [You can see that it on top we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2028) [downloaded 12 images.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2029) [And image for location seven was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2032) [downloaded two times.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2035) [Next, we can take a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2039) [Next, we can take a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2039) [active requests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2040) [Here, you can see that when I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2043) [grabbing my inspection head,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2045) [data in detail view changes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2049) [We can track multiple active](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2053) [requests and see what was the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2055) [duration at the time of current](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2057) [inspection head.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2059) [If you would like to take a look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2061) [at your data from different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2063) [perspective, you would like to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2065) [take a look at your stores and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2066) [modelers, we give you this by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2068) [using the Instrument inspector.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2071) [This is a way to debug your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2073) [custom instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2074) [Here, you can see that I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2076) [selected Stores step and I see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2078) [store for os signpost being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2081) [created.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2083) [It looks at networking category](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2084) [and com apple trailblazer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2087) [subsystem and we gather 24 rows](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2088) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2091) [Then, we can see our created](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2093) [table image download, which has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2095) [12 rows.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2097) [In bottom area, you see whole](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2102) [content of this table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2104) [Next, we can jump to modelers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2107) [and we can see that we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2109) [auto-generated os log modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2110) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2112) [It took 24 rows and outputted 12](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2113) [rows.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2116) [On the right, you can see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2118) [binding solution here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2119) [So our generated os log modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2121) [took data from os signpost table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2124) [and put it into image download](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2126) [table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2127) [Then it was consumed by our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2129) [instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2131) [So that's how you capture your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2132) [os signpost invocations, create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2135) [UI, and look at your data using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2138) [Instrument inspector.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2140) [Now let's go back to Chad who](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2142) [will tell you more about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2143) [advanced modeling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2144) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2146) [&gt;&gt; Alright.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2154) [Thank you, Kacper.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2155) [Okay, so now we've seen how you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2157) [can combine os signpost data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2159) [can combine os signpost data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2159) [with custom instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2161) [And we think that you'll be able](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2163) [to take this, I think you'll be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2164) [able to take these two, this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2167) [combination pretty far.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2168) [Now, we can talk about some of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2170) [the advanced topics,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2173) [specifically how you create and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2175) [define modelers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2176) [Now a modeler conceptually is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2179) [very simple machine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2180) [It takes a series of inputs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2181) [It does some reasoning over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2183) [those inputs and produces](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2184) [outputs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2185) [The inputs of the modelers are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2187) [always perfectly time ordered](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2188) [and so if you request several](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2190) [different input tables, those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2192) [tables are first time ordered](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2193) [and then merged into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2194) [time-ordered queue, which feeds](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2196) [the working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2198) [So as we pull these events off](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2199) [one by one, they're entered into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2201) [what's called the working memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2202) [of the modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2203) [And as the modeler sees the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2205) [evolution of this working](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2207) [memory, it can draw inference.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2209) [And when it sees a pattern that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2211) [it wants to produce an output](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2212) [for, it simply writes it to its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2214) [outbound output tables.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2216) [Let's walk over like a really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2218) [Let's walk over like a really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2218) [kind of playful example of how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2220) [you might use a modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2221) [So let's say you define a schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2223) [called playing with matches,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2226) [right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2227) [This is an os signpost interval](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2228) [schema and it's for an os](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2230) [signpost that you've defined](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2232) [where you're going to do some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2234) [sort of dangerous operation in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2235) [your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2236) [And we define another schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2237) [called app on fire, right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2240) [It's also a signpost schema but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2242) [these signposts mean that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2244) [application has entered into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2245) [bad state and we really want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2247) [know why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2248) [So you create an output schema,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2250) [which is a point schema, that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2251) [going to hold the object that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2253) [was playing with matches and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2254) [time at which the fire started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2255) [We are going to call that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2257) [started a fire schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2258) [Now the modeler's world looks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2259) [like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2263) [So we have all of our inputs set](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2264) [up in time order ready to go and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2266) [this dashed line on the left is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2268) [what's called the modeler's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2271) [clock.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2272) [Now when we grab the first input](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2274) [and we enter that into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2275) [working memory, the modeler's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2277) [clock moves to the start of that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2278) [interval and then we grab the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2279) [interval and then we grab the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2279) [next input, the modeler's clock](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2283) [again moves to the beginning of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2284) [that interval and we enter that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2286) [into the working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2287) [Now the modeler sees both of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2288) [these in the working memory and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2290) [it can see that if playing with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2292) [matches started before the app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2294) [is on fire, it doesn't really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2296) [make much difference, if it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2297) [the other way around, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2299) [already on fire, then we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2299) [draw a logical conclusion here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2302) [called the cause of fire and we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2305) [can enter that into the working](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2307) [memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2309) [Now as we grab this third input,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2311) [you'll notice that the modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2313) [clock has moved and it no longer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2314) [intersects with our first two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2316) [inputs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2318) [And so those are removed from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2319) [the working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2321) [Now if the cause of fire had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2322) [what's called logical support,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2324) [it would also be removed from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2326) [memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2330) [Now to recap, the clock is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2330) [always set to the current input](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2332) [timestamp.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2334) [And for an input to remain in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2335) [the working memory, it must](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2337) [intersect with the current clock](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2338) [intersect with the current clock](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2338) [in the modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2341) [This is what helps us establish](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2342) [coincidence.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2344) [It allows us to prune out the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2344) [old data and it also allows us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2346) [to see if there are inputs that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2348) [are possibly correlated in time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2350) [Now the way that a modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2353) [reasons about its working memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2355) [is defined by you through what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2357) [called a production system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2359) [Production systems work on facts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2361) [in the working memory and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2363) [they're defined by rules that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2365) [have a left-hand side, a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2366) [production operator, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2368) [right-hand side.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2369) [The left-hand side is a pattern](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2371) [in working memory that has to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2373) [occur to activate the rule and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2375) [the right-hand side are the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2377) [actions that will happen when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2378) [that rule fires.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2380) [Now the actions could include](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2382) [adding a row to an output table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2383) [or include asserting a new fact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2385) [into the working memory as the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2388) [modeling process progresses.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2390) [So facts come from two sources.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2394) [One, they're from the table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2396) [inputs that you saw, so will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2398) [automatically assert these as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2399) [automatically assert these as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2399) [facts using the rules that I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2401) [showed you with the modeling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2403) [clock, and they can also be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2404) [produced by assertions from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2406) [right-hand side of a production.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2407) [Now if you're going to create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2411) [your own facts, Clips allows you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2412) [to find what's called a fact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2414) [template, which allows you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2415) [provide structure to your fact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2416) [and do some basic type checking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2417) [So let's take a look at some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2418) [rules in Clips.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2421) [Our first rule that we're going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2423) [to look at is called found](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2424) [cause.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2425) [And what that says is if there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2427) [is an object who's playing with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2430) [matches at t1, and the app is on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2431) [fire at t2, and t1 happened](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2435) [before t2, then on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2439) [right-hand side of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2441) [production, we can assert a new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2442) [fact called cause of fire with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2443) [the object that started the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2446) [fire.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2447) [Now that will be entered into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2448) [the working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2449) [Now we come down to our second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2451) [rule, which is called record a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2453) [cause, if we have an app on fire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2454) [at some start time and we know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2458) [at some start time and we know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2458) [the cause of the fire and we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2460) [have a table that's bound to our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2461) [append side, that's the output](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2463) [side of the modeler, and that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2465) [table happens to be the schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2468) [that we define called started a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2471) [fire, then we can create a row](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2472) [in that table and then set the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2476) [time and who started the fire to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2478) [the values that we captured up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2479) [here in the pattern.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2481) [Now with that, we basically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2483) [created our very first expert](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2485) [system to look for bad patterns](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2487) [in our application with these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2489) [two rules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2490) [Now you may have noticed that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2492) [the rules were prepended by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2494) [either modeler or recorder.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2496) [Those are what are called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2498) [modules in Clips and they allow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2499) [you to both group rules but also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2501) [control the execution order of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2503) [the rules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2505) [So for example, if you kept all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2506) [of your output, all of the rules](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2508) [that produced output the output](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2510) [tables in the recorder module,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2512) [then you can be sure that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2515) [won't write an output while](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2517) [you're in the middle of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2519) [you're in the middle of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2519) [reasoning process in modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2520) [because all the rules in modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2522) [have to execute before any of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2523) [the rules in recorder can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2525) [actually execute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2526) [Now I mentioned the term before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2528) [logical support.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2530) [What logical support is usually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2532) [tied to what are called peer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2534) [inference rules and those are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2537) [rules that you say, well, if A](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2538) [and B, then C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2540) [Right. So by adding logical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2542) [support to your production, what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2543) [you're saying is if A and B are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2545) [no longer present in working](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2549) [memory, then C should](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2550) [automatically be retracted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2552) [So what we're saying is C is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2553) [logically supported by the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2555) [existence of A and B.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2557) [Now this is important because it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2558) [limits working memory bloat](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2560) [which helps with resource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2561) [consumption but it's also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2563) [important to remove facts from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2564) [working memory that are no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2566) [longer valid.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2567) [And if A and B are no longer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2568) [valid, then you should really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2569) [remove C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2570) [So to add logical support to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2572) [your production, your rule here,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2574) [you just wrap the pattern with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2577) [the keyword logical and then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2579) [the keyword logical and then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2579) [anything you assert on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2581) [right-hand side of the rule will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2582) [be automatically retracted when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2583) [these move forward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2585) [And you'll notice these two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2587) [rules, I'm sorry, these two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2588) [facts here are the names that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2591) [come from our schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2592) [So those are inputs and so when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2594) [the modeler's clock move](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2596) [forward, those will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2597) [automatically be retracted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2598) [Okay, so now we know the basics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2602) [of how to create a modeler in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2603) [our package and we've seen some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2605) [of the Clips language and rules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2607) [So let's take a look and see if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2610) [we can add an expert system to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2612) [our networking instrument to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2614) [find bad patterns and potential](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2617) [misuses in our networking layer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2619) [And to do that, I'd like to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2621) [invite Kacper up for one last](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2623) [demo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2624) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2625) [&gt;&gt; So now with the existing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2635) [logging, I will try to write](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2636) [modeler to detect some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2638) [anti-patterns in our app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2639) [anti-patterns in our app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2639) [networking behavior.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2640) [I was playing with my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2642) [Trailblazer app and it seemed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2643) [that if I'm scrolling pretty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2645) [fast, there are some glitches](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2647) [visible here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2648) [So image is replaced multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2649) [times, so I suspect that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2651) [cancel doesn't really work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2654) [I would like to write modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2657) [that detects that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2658) [So let's take a look in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2661) [package definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2663) [We will start by writing modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2665) [element.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2667) [Modeler has identifier, title,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2668) [and purpose.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2671) [These fields will be extracted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2673) [to your documentation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2675) [We specify production system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2677) [path which contains all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2679) [logic for our modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2681) [Then, we define output of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2685) [modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2686) [It will be downloader narrative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2688) [schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2689) [Required input for our modeler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2690) [will be os signpost table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2693) [This table contains begin and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2696) [end events.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2698) [Now let's take a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2700) [definition for downloader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2702) [narrative schema.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2703) [This is point schema that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2710) [defines two columns, timestamp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2713) [which tracks the time of logging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2715) [that diagnostic message and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2717) [description that has information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2720) [about what's gone wrong.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2722) [Then, we can create this table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2726) [in our instrument definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2728) [We pass downloader narrative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2730) [schema ref and unique](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2733) [identifier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2735) [Then, we could use it in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2737) [narrative element definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2740) [Here, we define narrative.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2744) [We pass table ref for the table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2746) [we previously created, define](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2749) [time column, and narrative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2751) [column.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2755) [Now we are ready to define logic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2755) [for our modeler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2757) [To do this, I will create file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2760) [that I previously referenced in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2761) [modeler definition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2763) [To create Clips file, you go to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2765) [File, New, select macOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2767) [platform, Other section, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2774) [Clips file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2775) [I will fill out the name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2779) [and create.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2783) [So algorithm for detecting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2787) [whether one cell is doing more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2790) [than one request at a time will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2791) [be as follows.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2793) [We'll be tracking every request](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2795) [as a fact in working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2797) [Firstly, we need to create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2799) [template for this fact.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2801) [So every fact will be storing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2804) [time, caller address, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2807) [cell address, signpost id that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2809) [we captured, and the image name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2813) [that we are requesting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2816) [We will call this fact started](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2817) [download.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2819) [Then, you'll write modeler rule](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2821) [that creates this fact in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2823) [working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2825) [This rule looks at os signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2828) [table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2831) [We specify subsystem, name, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2832) [event type begin and we capture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2835) [all of the information that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2838) [want to have.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2839) [So we capture image name, caller](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2841) [address, time, and signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2842) [identifier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2845) [Then, we assert new fact to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2845) [working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2848) [To clean it up after download](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2854) [finishes, we need to retract](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2856) [this fact from working memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2859) [Here, we are looking at the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2864) [table but we are looking at only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2866) [event of type end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2868) [We capture identifier of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2872) [signpost.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2874) [And here, we are using the fact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2875) [that signpost begin and end has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2877) [that signpost begin and end has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2877) [to have the same identifier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2880) [We are looking in working memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2882) [for a fact that has a signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2884) [identifier that we captured and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2887) [retract this fact.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2889) [Then, we can write our recorder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2894) [rule that will generate all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2896) [the narrative data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2898) [This recorder rule looks at all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2904) [of the started download facts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2907) [and captures them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2908) [We captured time, caller](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2910) [address, and image name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2912) [If that's true and there is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2914) [another started download which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2917) [has the same caller address, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2919) [can notice that variables](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2920) [referenced here are the same and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2922) [happened before the first fact.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2925) [We notice that there is some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2929) [anti-pattern and there is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2931) [overlap in our request.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2932) [We can then check whether we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2934) [have access to downloader](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2936) [narrative schema, create new row](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2937) [narrative schema, create new row](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2937) [in it, set time column to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2941) [time of the first fact, and set](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2945) [your narrative description.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2948) [You'll output some information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2951) [about the problem so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2953) [someone could debug it later.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2955) [Now I can run Instrument against](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2959) [our app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2961) [Let's run it again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2962) [Choose Trailblazer Networking in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2972) [template again, and record.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2973) [I will try to perform some fast](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2978) [scrolling here and take a look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2981) [at my narrative table.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2984) [You can see that narrative table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2989) [contains lots of diagnostic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2991) [messages being outputted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2993) [So we can see that there are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2996) [some problems and we can later](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2997) [investigate it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2999) [You can see that narrative is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3000) [interactive detail.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3003) [You could for example check all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3004) [of the arguments being passed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3006) [and you can filter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3007) [So we can add this caller](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3009) [address as a detail filter and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3011) [have this detail filter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3013) [Now, let's back to Chad who will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3017) [tell you more about some best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3019) [practices when developing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3021) [instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3022) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3024) [&gt;&gt; Alright.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3030) [Thank you, Kacper.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3030) [So we've seen how we can create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3032) [some basic expert systems in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3034) [Instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3036) [Alright, so let's talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3037) [some best practices that we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3039) [learned along the way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3042) [And the first one is to write](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3043) [more than one instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3046) [Now I don't mean get practice](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3048) [writing instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3049) [What I mean is that if you own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3050) [an instrument already and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3052) [want to add some features to it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3052) [sometimes it's really tempting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3054) [to just add them, add extra](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3055) [graphs or details to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3056) [instrument, but you should](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3057) [really be thinking, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3059) [really be thinking, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3059) [can this be its own instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3060) [And the reason for that is if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3062) [you create finer-grained](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3063) [instruments, you give the users](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3065) [of Instruments a lot more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3067) [choices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3068) [They can drag just the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3069) [instruments that they want out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3070) [of the library and that will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3071) [minimize the recording impact on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3073) [the target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3074) [If you focus on one instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3075) [with lots of features, it's kind](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3077) [of like an all-or-nothing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3078) [proposal there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3079) [Now, if you want to create a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3080) [combination of instruments that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3084) [are going to be targeted at a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3086) [certain problem, you want to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3087) [all these instruments used](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3089) [together at the same time,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3090) [rather, then what you can do is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3091) [create your own custom template](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3093) [like we did for the networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3095) [And so what you do to get that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3096) [started on that is create a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3097) [document, drag the instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3099) [in the way that you want to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3100) [them, configure them, go to File](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3102) [and then say, "save as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3104) [template."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3104) [And then you can use that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3105) [template inside your package](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3106) [using the element that Kacper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3108) [had added to our Networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3110) [Template.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3112) [So writing with more than one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3113) [instrument is a lot better way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3114) [to use tool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3115) [The second one is immediate mode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3118) [is hard.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3119) [is hard.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3119) [Immediate mode refers to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3121) [recording mode of Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3123) [where we're visualizing the data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3124) [as it's coming in, in near](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3127) [real-time, and the reason it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3128) [hard, well there's really two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3130) [reasons it's hard.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3132) [The first one is it requires](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3132) [some additional support that as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3134) [much as we wanted to cover](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3136) [today, we just couldn't.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3137) [We just didn't have the time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3138) [And so we're going to be working](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3139) [on the documentation for that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3140) [But the second reason, and this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3142) [is the more important reason, is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3144) [that, well it's interval data,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3146) [right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3149) [So intervals can't be entered](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3149) [into the tables in the Analysis](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3151) [Core until they're closed,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3152) [meaning that we've seen both the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3154) [begin and the end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3155) [And so when you're looking at a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3156) [recording live, you have a bunch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3157) [of what are called open](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3159) [intervals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3160) [Now if your modelers require](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3160) [these as inputs, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3162) [totally feasible, then what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3163) [you'll notice is that if there's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3165) [an open interval upstream, well](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3166) [all of the modeler clocks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3168) [downstream have to stop until](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3170) [that interval is closed because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3172) [remember, the modeler's vision](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3173) [is all in time order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3175) [So it can't move that clock](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3177) [forward until all those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3178) [forward until all those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3178) [intervals upstream have closed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3180) [So if you have some intervals](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3182) [that have a long run, what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3183) [you'll notice is that the output](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3184) [of your modeler appears to stop.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3186) [And when the user hits the stop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3188) [recording button, well then all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3191) [open intervals close and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3193) [everything processes as normal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3194) [and the data fills in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3195) [But that's not a great user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3197) [experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3198) [So if you hit that, you have one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3199) [of two options.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3201) [The first one is to opt your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3202) [instruments out of immediate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3204) [mode support and you can do that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3206) [by adding a limitation element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3207) [to your instrument and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3208) [second is to move off the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3211) [interval data as input to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3214) [modeler, just like we did in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3215) [demonstration here for our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3218) [expert system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3219) [We were actually using the os](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3219) [signpost point events rather](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3221) [than using the intervals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3222) [So I know we make it look easy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3225) [but immediate mode is a little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3227) [tricky to implement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3229) [And then third, one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3230) [things that's really important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3233) [if you're creating instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3235) [that are going to be targeting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3236) [high volumes of input data is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3237) [that the last five-second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3239) [that the last five-second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3239) [recording mode is by far the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3240) [most efficient.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3243) [Now the way you switch that is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3244) [in the recording options of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3245) [trace document, you'll see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3247) [you have a choice between](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3248) [immediate, deferred, and this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3249) [last end seconds mode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3251) [That is going to be a lot more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3253) [efficient because what it allows](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3254) [the recording technology to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3256) [is use buffering to improve](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3258) [performance so that it's not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3259) [trying to feed the data to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3260) [Instruments in real time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3261) [Now this can have a profound](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3263) [effect and it can have a huge](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3264) [effect on signpost data where it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3266) [can be up to ten times faster](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3268) [inside five-second mode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3270) [Now of course the trade-off is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3272) [that you're only seeing the last](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3273) [five seconds of data but for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3274) [instruments that produce high](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3277) [volumes of data, that's usually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3279) [a good thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3280) [So this is the common mode for a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3281) [System Trace and a Metal System](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3283) [Trace and Game Performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3285) [template.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3286) [And if you're targeting one of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3287) [those kinds of applications, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3288) [would also opt your instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3290) [out of supporting immediate mode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3291) [just so that your user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3293) [experience is not terrible or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3294) [Instruments gets way behind on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3296) [trying to get the data or you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3298) [run into that problem with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3299) [run into that problem with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3299) [intervals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3300) [That is the end of the session.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3302) [So we did a lot of work here to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3304) [create the Instruments feature](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3308) [and we're really, really excited](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3309) [that we were able to get it out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3310) [to you guys this year.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3311) [And so we can't wait to see what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3312) [you guys are able to accomplish](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3314) [with it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3315) [So if you'd like to see us and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3316) [talk to us about custom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3317) [instruments, we have a lab in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3318) [lab eight today at 3:00 and also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3321) [Session 405 goes over in detail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3323) [how to use os signpost API which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3325) [is a great way to get data into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3327) [Instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3328) [So enjoy the rest of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3329) [conference.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3330) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3331)