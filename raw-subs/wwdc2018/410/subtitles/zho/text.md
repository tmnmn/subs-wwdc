# Creating Custom Instruments

## Summary
Understand how custom instruments are useful and when they should be used. Get an in-depth view of the architecture of custom instruments and how to create them. Understand the attributes of a good instrument. Dive into advanced modeling and how to use the CLIPS language.

## Info
* Developer Tools
* WWDC 2018 - Session 410 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=6) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=18) [&gt;&gt; 上午好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=26) [我是 Chad Woolf](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=27) [我是一名 Apple 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=28) [性能工具工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=30) [欢迎各位参加今天的 410 号讨论会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=31) [我们将讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=32) [如何在 Instruments 10 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=33) [创建自定义 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=35) [今天的讨论会是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=37) [我们将讨论一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=38) [为什么要创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=39) [自定义 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=41) [我们将回顾一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=42) [Instruments 的结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=43) [我们今天有很多内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=45) [所以讨论将会分为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=46) [三个部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=47) [入门 中级和进阶部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=48) [在那之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=50) [我们会讨论一些最佳实践](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=51) [以及一些在我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=52) [编写我们自己的 Instrument 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=54) [所学到的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=55) [首先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=57) [为什么要创建自定义 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=58) [为什么要创建自定义 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=58) [Instruments 已经集成了很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=60) [非常强大的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=62) [例如这里我们有系统跟踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=63) [你可以看到 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=65) [如何与调度器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=66) [和虚拟内存交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=68) [今年我们有一个新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=70) [游戏性能模板 它结合了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=72) [系统跟踪和 Metal 系统跟踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=73) [来帮助你发现 App 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=74) [故障和丢失的帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=77) [在 App 的网络部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=80) [我们也有网络连接 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=84) [它可以显示进出 App 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=87) [TCP/IP 流量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=88) [当然还有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=90) [很多人都熟悉的时间分析器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=92) [时间分析器可以帮助你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=94) [查看 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=95) [在何处花费时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=97) [无论是网络层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=98) [游戏引擎还是其他部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=100) [普遍来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=102) [如果你了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=105) [你正在编辑的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=108) [这些都是非常有用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=110) [如果你知道这些 IP 地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=111) [是什么意思](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=112) [知道不同的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=113) [是什么意思](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=114) [以及时间分析器的调用堆栈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=116) [它会让事情变得更简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=118) [然而 如果有人打算分析你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=119) [然而 如果有人打算分析你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=119) [但他们不熟悉其中的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=121) [那该怎么办呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=122) [要是他们只是想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=124) [App 是否在网络层上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=125) [花费了大量的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=127) [如果是 它在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=128) [自定义 Instrument 的一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=130) [很好的用途就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=132) [尝试以一种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=134) [使原本无法理解代码的人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=136) [能够理解和欣赏代码的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=138) [讲述你的某一层或 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=139) [正在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=141) [在进阶部分中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=144) [我们将向你展示如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=145) [利用在 Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=147) [内部构建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=148) [专家系统技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=150) [以便你可以创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=151) [即使你不亲力亲为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=153) [也能够查找错误模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=155) [并在代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=156) [发现反面模式的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=158) [好的 让我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=160) [使上述功能成为可能的架构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=161) [要做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=163) [我们必须从这里开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=165) [回到原始版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=167) [起初的 Instruments 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=169) [工作原理和今天的差不多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=171) [同样有一个库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=172) [你仍然可以拖出 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=174) [并将它们放入跟踪文档中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=175) [然后按下记录按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=176) [多个性能工具就可以同时运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=178) [多个性能工具就可以同时运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=178) [那时和现在的 Instruments 之间的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=181) [主要区别是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=182) [当时的 Instruments 基础结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=184) [并无法帮助我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=185) [快速编写 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=186) [在当时这样还好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=189) [因为我们已经](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=191) [继承了一些我们已有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=192) [素材和性能工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=194) [它们都有自己的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=196) [记录技术和分析逻辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=197) [我们所要做的就是建立一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=198) [自定义的存储机制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=200) [来获取跟踪中的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=202) [以及一个自定义的 UI 来帮助它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=203) [与 App 的其他部分集成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=205) [随着时间的推移](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=207) [Instruments 的维护成本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=209) [和模型的维护成本都上升了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=211) [原因就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=213) [每次我们想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=214) [添加新特性时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=216) [我们必须修改 7 个自定义 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=217) [和 7 个自定义存储机制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=219) [但这不是我们想让你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=222) [学习的处理方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=223) [我们不想让你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=224) [承担这种维护成本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=225) [所以在我们讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=227) [定制 Instrument 的特性之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=228) [我们首先需要解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=229) [我认为我们做到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=231) [在新版本的 Instruments 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=233) [我们没有自定义 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=234) [和自定义存储机制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=236) [而是有两个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=237) [标准化的组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=238) [标准化的组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=238) [它们是 “Standard UI（标准 UI）”和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=240) [“Analysis Core（分析核心）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=242) [标准 UI 实现了新版 Instruments 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=243) [整个用户界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=246) [它与分析核心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=248) [紧密相连](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=249) [而分析核心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=251) [你可以将其视为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=252) [数据库和专家系统的结合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=253) [这两种都针对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=257) [时间序列数据进行了优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=258) [使得它们成为构建 Instrument 的重要基础](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=259) [当你使用新型架构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=262) [构建一个 Instrument 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=264) [实际上你所做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=265) [创建标准 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=267) [和分析核心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=269) [的自定义配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=270) [如果你看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=274) [我一开始展示的那些强大的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=275) [的屏幕快照](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=276) [我们有系统跟踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=278) [游戏性能模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=280) [网络连接模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=282) [以及时间分析器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=284) [所有这些文档中的所有 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=288) [都是完全基于标准 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=291) [和分析核心生成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=293) [所以你也同样可以做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=295) [它们能做的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=296) [在 Xcode 10 和 Instruments 10 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=298) [在 Xcode 10 和 Instruments 10 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=298) [我们提供了相同的工具 来构建你的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=301) [Xcode 集成的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=303) [和你生成的 Instrument 之间的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=306) [唯一区别就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=307) [谁生成了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=310) [你的 Instrument 会显示在我们的库中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=312) [你可以看到顶部的活动监视器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=316) [就像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=319) [你可以将你的 Instrument 拖放到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=320) [跟踪文档中并进行记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=321) [接下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=324) [Instruments 将用数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=325) [填充分析核心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=326) [标准 UI 将创建图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=327) [和表格视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=329) [Instruments 有两种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=331) [显示数据的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=333) [在顶部有一个图形化的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=334) [我们称之为轨道视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=335) [一个 Instrument 可以根据需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=336) [定义多个轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=338) [如果你想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=342) [在定义 Instrument 的图之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=343) [进行选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=344) [在 Instrument 图标上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=345) [有一个小控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=347) [你可以把它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=348) [从 “CPU” 改为 “Network（网络）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=349) [每个图都被允许](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=353) [定义一定数量的轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=355) [这里我们定义了 3 个轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=357) [并绘制了 3 种不同类型的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=358) [并绘制了 3 种不同类型的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=358) [CPU 利用情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=360) [这里的每一个轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=362) [都被绑定到分析核心中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=364) [不同的表上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=365) [或者它可以被绑定到同一个表上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=367) [但是你看到的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=368) [这个表中的另一列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=369) [这个 Instrument 的另一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=372) [就在下方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=374) [它同样也很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=376) [它叫做细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=377) [在这里你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=378) [事件列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=380) [以及数据的任何类型的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=382) [聚合和总结](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=384) [就像这些轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=386) [抱歉 就像这些图一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=389) [你可以为你的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=391) [定义一些细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=392) [你也可以通过点按跳转栏的这个部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=394) [然后选择你定义的细节标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=396) [来选择哪个细节是活跃的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=397) [就像图形视图中的轨道一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=400) [所有的细节都被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=402) [绑定到分析核心的一个表上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=404) [这就是它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=406) [接收数据的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=408) [记录开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=409) [表格被填入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=410) [UI 就会做出反应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=411) [不需要你执行任何特殊代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=412) [从标准 UI 的角度来看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=416) [分析核心中的所有内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=418) [分析核心中的所有内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=418) [似乎都是一个表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=420) [我们来谈谈表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=422) [表格是行的集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=425) [它们有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=426) [由表格 Schema 定义的结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=427) [所以它和数据库 App 非常相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=429) [这个 Schema 定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=432) [列 列的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=434) [以及列的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=435) [分析核心使用了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=436) [非常丰富的类型系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=438) [叫做工程类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=439) [它告诉我们如何存储数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=441) [以及如何在标准 UI 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=442) [可视化和分析数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=444) [除此之外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=447) [当 Schema 描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=449) [表的结构时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=451) [你还可以使用 Key/value 这对属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=453) [来描述内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=454) [这能帮助我们描述表中的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=456) [你可以将 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=459) [视为 Objective-C 或 Swift 中的一个类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=462) [而行则类似于实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=464) [就像 Objective-C 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=466) [类名是单数的一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=468) [你的 Schema 的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=470) [也必须是单数的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=471) [比如 NSString](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=473) [而不是 NSStrings](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=475) [当我们讲到进阶部分的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=476) [这一点会更为重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=478) [但是我现在想把它强调一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=478) [到时我们就能知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=479) [到时我们就能知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=479) [我们在讨论什么了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=481) [Schema 的一个例子是 Tick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=483) [它是 Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=486) [内部的一种 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=487) [用于创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=488) [合成时钟节拍表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=490) [稍后我们将在建模器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=491) [使用它进行统计计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=493) [Tick Schema 很简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=495) [它只有一个列要被定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=497) [那就是 time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=498) [time 使用的工程类型是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=499) [sample-time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=500) [Tick Schema 还定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=502) [一个可以附加到表格实例中的可选属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=504) [它叫做 frequency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=506) [如果你为 Tick Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=507) [创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=510) [频率为 10 的表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=512) [那么数据的提供者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=514) [就会知道它需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=516) [每秒填充 10 个时间戳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=518) [这样你就可以表达](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=520) [你想要填入表的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=521) [现在 我认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=524) [我们有足够的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=526) [来开始入门部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=527) [我们将展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=528) [如何在 Xcode 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=530) [创建你自己的 Instruments 包项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=532) [还将向你展示 如何创建你的第一个 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=534) [来绘制这些 Tick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=535) [并在细节视图中 显示这些 Tick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=537) [为此我想请](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=540) [我的同事 Kacper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=541) [给大家做一个展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=544) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=545) [&gt;&gt; 谢谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=548) [现在我将向你们展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=550) [如何开始创建和运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=552) [你们的第一个自定义 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=553) [你们将会使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=556) [由 Chad 之前展示的 Tick Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=557) [并在频率恒定的节拍中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=559) [制作一个 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=561) [你们将会学到如何描述你们的包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=563) [如何使用 Xcode 对其进行迭代](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=565) [以及如何在 Instruments 中进行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=567) [让我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=571) [和在 Xcode 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=573) [以前的操作一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=574) [创建新的 Instruments 包项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=576) [你需要点击 “New Xcode Project”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=578) [选择 “macOS” 作为平台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=580) [并点击 “Instruments Package”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=582) [你需要填写文件名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=585) [这将成为这个 Instrument 包的默认名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=586) [我们就命名为 “Ticks” 吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=590) [点击 “Next（下一步）”和“Create（创建）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=591) [Xcode 已经创建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=599) [Xcode 已经创建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=599) [带有包 Target 的项目和一个文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=601) [里面有对包的定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=604) [让我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=606) [包是基于 XML 语法描述的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=610) [首先 每个包最前面有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=613) [标识符 标题和所有者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=615) [当有人试图安装你的包时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=619) [这些栏将是可见的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=621) [通常 你可以从](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=624) [定义自己的 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=626) [和可选的建模器开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=629) [但是因为这里我们将使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=631) [预定义的 Tick Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=632) [我们将删除这些指示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=634) [要从基础包中导入 Tick Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=638) [你只需指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=641) [import-schema 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=643) [和 Schema 的名称 “tick”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=645) [现在它可以被我们的 Instrument 使用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=653) [为了让你们更容易地定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=658) [为了让你们更容易地定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=658) [更复杂的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=660) [我们在 Xcode 中配置了一些代码片段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=662) [要使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=665) [只需写入元素名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=667) [比如 “instrument” 然后按回车](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=669) [你需要填写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=671) [你的 Instrument 的唯一标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=674) [以及稍后出现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=680) [Instrument 库中的一些属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=682) [这里是 “Instrument drawing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=689) [ticks every 10ms”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=691) [现在是创建表格的时候了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=699) [当这个 Instrument 从库中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=701) [被拖到跟踪文档时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=702) [这个表格将被实例化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=704) [在这个 Instrument 的定义中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=707) [表格标识符必须是唯一的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=709) [我们叫它 “tick-table”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=712) [在 <schema-ref> 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=716) [我们需要引用以前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=717) [导入的 Schema“tick”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=718) [导入的 Schema“tick”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=718) [现在我们需要定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=724) [在轨道视图和细节视图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=725) [会出现的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=728) [我将使用 graph 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=730) [我们需要为我们的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=732) [填写 title](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=735) [我会命名为 “Ticks”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=736) [轨道的标题也一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=739) [我需要按照前面创建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=741) [标识符来引用表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=745) [因此我将引用 “tick-table”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=750) [现在我们要为我们的图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=754) [指定绘制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=756) [我会使用 plot 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=758) [在最基本的形式中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=760) [它只需要你传递](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=762) [包含要绘制的值的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=764) [列的助记符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=765) [我们将绘制 “time”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=766) [我希望所有的时间戳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=772) [都能在表格中显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=773) [为此 我将使用 list 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=777) [我们需要为一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=782) [将会出现在 Instrument 中的列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=784) [填写 title 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=786) [“table-ref” 就像之前的 lane 元素一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=791) [以及我们想要看到的 column](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=792) [现在我们的包已经准备好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=800) [在 Instruments 中构建并运行了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=802) [为此 你需要使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=805) [“Xcode Scheme Run” 操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=807) [我们就这样做吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=809) [你可以看到出现了构建错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=814) [在生成 Instruments 包时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=815) [你拥有完整的 IDE 支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=817) [这里 出现了一行错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=819) [告诉我们在 Tick Schema 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=821) [找不到 “timestamp” 这一列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=823) [没错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=825) [因为它不是 “timestamp”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=826) [而应该是 “time”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=827) [我将修复这个问题并再次运行它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=828) [你可以看到它在运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=833) [因为这个新的 Instrument 副本出现了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=838) [你可以通过不同的图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=839) [你可以通过不同的图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=839) [识别特殊的副本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=842) [它仅为这个运行会话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=844) [加载你的包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=846) [它允许你更容易地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=848) [对包进行迭代](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=850) [为了确保你的包已经加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=852) [我们可以在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=855) [新建包管理的 UI 中检查它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=857) [你可以在 “Instruments”-](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=860) [“Preferences（偏好设置）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=862) [-“Packages（包）”标签页中找到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=864) [你可以在这里看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=865) [我们新创建的包以及调试的下标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=869) [这意味着它已经被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=871) [临时加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=873) [你也可以在这里看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=875) [所有的系统包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=877) [你可以通过使用副标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=878) [使用并链接它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=880) [在这里 我们的 Ticks 包里包含了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=881) [Ticks Instrument 现在让我们用空白模板测试它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=886) [我将把 Target 切换到我的 MacBook](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=893) [然后在 Instruments 库中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=900) [搜索我的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=901) [我将填入 “Ticks”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=903) [然后它将显示在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=908) [包含从包定义中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=910) [填充的所有属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=912) [让我们将它拖放到跟踪中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=913) [并记录一秒钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=919) [你可以看到底部的面板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=925) [是以每 10 毫秒生成的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=928) [进行传递的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=930) [细节和图形是相互协调的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=933) [当我点击行时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=936) [你可以看到检查线在这里移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=937) [我还可以通过 Option 点按并拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=940) [来而放大一个图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=943) [在这里 你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=948) [Ticks 确实被画出来了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=950) [这样你就可以创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=953) [第一个 Instrument 包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=955) [现在让我们请回 Chad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=957) [他会告诉你更多 关于标准 UI 的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=959) [他会告诉你更多 关于标准 UI 的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=959) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=961) [&gt;&gt; 好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=964) [谢谢 Kacper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=965) [我们已经知道了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=966) [如何创建一个非常基本的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=967) [也了解了如何开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=969) [在 Xcode 中创建你的第一个项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=971) [现在让我们来谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=973) [我们拥有的不同类型的图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=975) [不同类型的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=977) [以及如何利用真实数据进行操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=978) [让我们从图形轨道开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=981) [你已经看到了 Kacper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=984) [是如何使用我们称之为 plot 的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=987) [来定义一个图形和轨道的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=988) [plot 元素可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=991) [指示标准 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=994) [获取表的全部内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=996) [并尝试在特定的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=998) [轨道中绘制它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=999) [plot 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1002) [通过查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1004) [Schema 和获取值的目标列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1006) [来决定如何绘制这个内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1009) [以及如何处理图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1012) [如果是一个区间 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1014) [这意味着它有一个时间点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1015) [和一个持续时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1016) [如果是一个点 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1018) [这意味着它只是一个时间戳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1019) [这意味着它只是一个时间戳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1019) [我们需要用不同的方式处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1021) [如果目标列有一个长度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1022) [这意味着可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1024) [通过它画一个条形图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1026) [就像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1028) [另一种选择是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1031) [生命周期轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1033) [它仍然是一个区间 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1035) [但是我们针对的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1036) [一个状态列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1038) [而状态本身并没有长度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1040) [所以在这里画条形图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1042) [是没有意义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1043) [标准 UI 会自动选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1044) [状态风格的处理方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1045) [包括用圆角矩形样式的标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1047) [绘制这些区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1048) [这样你就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1051) [把它与平面条形图区分开来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1053) [标准 UI 能够为你选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1056) [这些处理的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1057) [是非常重要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1058) [因为这可以保持 Instruments UI 的一致性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1059) [如果你定义一个状态图的同时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1062) [我们也定义一个状态图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1063) [标准 UI 就会强制它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1065) [看起来一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1066) [这样 Instruments 用户就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1068) [更容易在 Instrument 之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1069) [进行切换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1071) [如果你想 基于数据的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1074) [动态地创建图形或轨道数目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1078) [动态地创建图形或轨道数目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1078) [你可以定义所谓的 “Plot Template”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1081) [Plot 模板的定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1082) [与 Plot 非常类似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1084) [除了其中有一个额外的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1086) [允许你选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1087) [表中的一列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1088) [它将为该列中的每个唯一值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1090) [创建单独的行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1092) [如果你正在寻找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1096) [活动的峰值或周期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1097) [我们有所谓的直方图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1098) [你所要做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1099) [在不同的点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1101) [或区间相交时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1102) [打破超过某个特定大小的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1104) [存储器中的时间轴](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1105) [假设 100 毫秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1107) [然后使用像 count() sum()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1109) [min() 或 max() 这样的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1111) [来提升这些存储器的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1112) [这是一种寻找活动峰值的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1113) [例如 在系统跟踪中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1116) [我们在环境切换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1118) [或虚拟内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1119) [寻找活动峰值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1120) [现在我们来谈谈细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1122) [细节在这个 UI 的下半部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1125) [你们已经看过了第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1128) [也就是列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1129) [它是表格 分析核心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1130) [以及 UI 中表视图之间的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1132) [非常简单的映射](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1133) [还有 “Aggregation（聚合）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1136) [还有 “Aggregation（聚合）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1136) [当你想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1140) [去除时间分量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1141) [概览你的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1143) [而且想要在表格中应用一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1144) [统计数据的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1146) [聚合是很适合的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1147) [当我们定义一个聚合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1149) [我们需要注意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1150) [列现在是函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1152) [你可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1154) [sum() average() count()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1156) [以及其他的一些统计函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1159) [来帮助你创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1160) [你想要创建的聚合视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1164) [聚合的好处在于 你也可以定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1168) [一个层级结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1170) [这里我们在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1172) [虚拟内存操作结构中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1173) [定义了一个进程线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1175) [我们可以看到它被分解为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1177) [进程 然后是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1178) [进程中的每个线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1180) [然后是这个线程中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1182) [这个进程中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1183) [每个类型的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1185) [所以聚合是一种很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1186) [很强大的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1187) [来总结很多数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1189) [另一种类型的聚合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1191) [称为 “Call Tree（调用树）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1193) [当你有一个列是回溯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1195) [而且另一个列是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1196) [权重的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1197) [调用树就会很有用处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1199) [调用树就会很有用处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1199) [你可以使用调用树](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1200) [创建加权回溯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1201) [或加权调用的树视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1202) [就像在时间分析器中看到的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1204) [另一种样式叫做 “Narrative（叙事）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1207) [当你想要传达](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1210) [只有技术语言的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1212) [比如专家系统的输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1215) [以及和叙事工程类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1217) [紧密相连的信息时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1218) [叙事是常用的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1219) [最后一种细节类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1223) [叫做 “Time Slice（时间片）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1225) [时间片看起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1227) [很像一个列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1228) [但是其中的内容被过滤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1230) [只包含与图形中蓝色线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1231) [相交的区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1233) [这条蓝色线叫做检查线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1235) [当你把检查线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1236) [移到图形上时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1237) [列表的内容将被过滤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1239) [从而与检查线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1240) [相交的部分匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1242) [所有这些 UI 都与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1246) [分析核心中的表格绑定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1249) [当你开始记录时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1251) [数据进入 Instruments App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1253) [并填入分析核心中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1255) [让我们详细谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1257) [这个过程是如何进行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1259) [这个过程是如何进行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1259) [在开始记录之前的第一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1262) [分析核心将提取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1266) [在其中创建的表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1268) [它将映射表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1269) [并在核心中为表分配存储](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1271) [如果一个表有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1273) [相同的 Schema 和相同的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1275) [那么根据定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1276) [它就是相同的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1277) [所以它会被映射到相同的存储中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1279) [对于每个存储](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1283) [第二步就是尝试为数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1284) [找到一个提供者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1286) [有时 我们可以从](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1287) [从 Target 中通过数据流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1289) [直接记录数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1290) [有时 我们则必须使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1292) [建模器来合成数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1293) [建模器可以请求自己的输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1295) [这些输入可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1296) [是其他建模器的输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1298) [或者直接从数据流中记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1300) [我们就是这样合成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1302) [我们本来不知道如何直接记录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1304) [其余数据的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1305) [现在我们已经得到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1307) [分析核心中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1309) [所有存储的数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1311) [也就是所谓的绑定方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1313) [第三步是优化绑定方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1315) [在这里 你可以看到 Instruments 将自己的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1317) [绑定方案可视化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1319) [绑定方案可视化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1319) [我们称之为线程叙事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1321) [关于绑定方案的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1323) [下一部分是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1324) [它是 “Trace-wide（广跟踪）”的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1326) [当你将 Instrument 拖放到跟踪中时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1329) [Instruments 将计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1331) [尽可能最好的记录方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1333) [以尽量减少](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1336) [对 Target 的记录影响](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1337) [当你创建自己的表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1340) [或表实例时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1341) [你必须给它们一个 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1343) [Instruments 已经定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1345) [超过 100 种 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1346) [所有这些 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1349) [都可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1350) [并存在于在包管理的 UI 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1351) [所看到的包里面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1353) [你只需将 Schema 导入到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1355) [自己的包中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1356) [如果该 Schema 包含在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1359) [一个不是基础包的包中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1361) [你需要在 Xcode 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1362) [构建设置里面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1364) [将包设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1365) [“Linked Instruments Packages”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1367) [这样我们就可以在生成时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1369) [找到你涉及的额外的包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1370) [并做一些类型检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1371) [因为所有这些 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1374) [都是在其他包中定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1376) [当你开始记录时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1377) [所有具有这些 Schema 的表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1379) [所有具有这些 Schema 的表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1379) [都会被填充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1380) [因为要么它们定义了建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1382) [要么我们知道如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1384) [从数据流中记录它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1384) [这些都是你的 Instrument 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1385) [出色的构件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1386) [但它们更是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1388) [编写建模器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1389) [优秀输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1390) [现在你已经可以编写一个建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1392) [或者在你的 Instrument 包中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1394) [用 modeler 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1395) [定义一个建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1396) [你还可以为该建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1399) [创建一个自定义输出 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1402) [你可以只对一个时间点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1404) [使用 point-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1405) [或者如果你有一个时间点和一个区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1407) [你可以使用 interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1408) [建模器可以定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1410) [它需要的输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1413) [这就告诉了绑定方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1415) [如何填充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1416) [数据流图的其余部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1417) [这样你的建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1419) [将融合到绑定方案中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1421) [建模器实际上是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1423) [微型专家系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1425) [它们是用 CLIPS 语言编写的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1427) [这意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1428) [它们非常强大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1430) [同时非常先进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1432) [关于如何创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1433) [建模器的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1434) [我们将留在进阶部分讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1435) [然而 能够定义自己的 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1437) [然而 能够定义自己的 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1437) [是非常重要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1441) [我们今年有了一个新的 os_signpost API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1442) [它是把数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1444) [导入 Instruments 的绝佳方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1446) [我们为它创造了一条捷径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1448) [在你的包中 你可以定义所谓的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1452) [os-signpost-interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1454) [它既可以定义 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1456) [也可以为我们提供足够的指令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1457) [以便能够代替你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1460) [生成一个建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1462) [在那里你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1464) [捕获在 os_signpost 调用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1465) [元数据中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1466) [记录的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1468) [你可以使用捕获的元数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1471) [和表达式来定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1473) [如何填充你的 Schema 的列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1475) [我们来看一个非常简单的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1479) [假设我们要做 JSON 解码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1483) [我们有一个 os_signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1484) [标记了解码 Activity 的开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1487) [和解码 Activity 的结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1490) [在开始时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1492) [我们还需捕获一些元数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1494) [以指示我们将要解析的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1495) [JSON 对象的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1497) [在你的 Instrument 包定义中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1500) [你可以创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1501) [os-signpost-interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1503) [并在这里定义你的 Schema 名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1506) [你可以选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1509) [要记录的 signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1511) [包括 signpost 名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1512) [然后在这里可以使用语法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1515) [从起始元数据消息中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1516) [捕获不同的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1518) [元数据片段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1520) [这里 我们将使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1521) [这个捕获的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1523) [我们将用它作为表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1524) [来教我们如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1525) [填充我们刚才定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1527) [数据大小的列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1528) [在 405 号讨论会中 即](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1532) [“Measuring Performance Using Logging”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1535) [我演示了《Trailblazer》App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1537) [还展示了一个 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1543) [你们可以根据这个 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1544) [里面的 signpost 来进行编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1546) [现在我们对如何编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1547) [自定义 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1549) [有了更多的了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1550) [我想邀请 Kacper 回到台上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1552) [来给大家演示一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1554) [我们是如何创建这个包的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1556) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1558) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1558) [&gt;&gt; 谢谢你 Chad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1563) [《Trailblazer》 App 是一款 iOS App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1569) [它可以显示你附近](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1572) [流行的徒步旅行路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1574) [作为 UI 组件 它使用了 UITabelView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1576) [每个单元异步加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1581) [路线的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1582) [为了防止出现故障且作为优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1585) [当单元被重复使用时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1586) [我们取消了下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1588) [为了可视化我的下载流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1591) [我将每个下载都置入到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1593) [os_signpost 调用中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1595) [让我们看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1596) [当我的保存的单元显示时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1601) [调用 startImageDownload() 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1602) [我们创建了 downloader 和 signpost ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1606) [它包含了 os 日志句柄](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1608) [和 downloader 对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1611) [然后我们获取 UI 表格视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1613) [单元的地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1615) [并调用 os_signpost(.begin)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1619) [并调用 os_signpost(.begin)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1619) [它自于 signpostlog.networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1623) [让我们看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1624) [这个日志以 App 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1627) [标识符为子系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1628) [networking 为类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1631) [我们传入 “Background Image” 这个名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1635) [之前创建的 “signpostID”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1637) [以及信息格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1639) [其中包含 “Image name”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1640) [在这里 我们将它放置在全局说明符中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1643) [因为它是一个字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1645) [还有 “Caller” 它是一个单元的地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1648) [我们的下载可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1651) [通过两种方法完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1653) [我们现在来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1656) [当下载以这样的方式完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1659) [就会调用委托方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1660) [我们像之前一样创建 signpostID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1663) [并调用 os_signpost(.end)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1665) [这次我们传入 “Status” 和 “Size”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1669) [“Status” 值是 “Completed”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1673) [“Size” 设置为图像大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1678) [“Size” 设置为图像大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1678) [接下来让我们看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1682) [我们为重写所做的准备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1684) [当 downloader 正在运行时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1686) [我们会取消它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1689) [我们创建了 signpostID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1692) [并使用相同的格式字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1694) [调用我们的 os_signpost(.end)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1696) [但是这里 值是 “Canceled” 并且 “Size”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1698) [为 “0” 因为下载没有成功](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1700) [让我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1702) [我们的 os-signpost-interval-schema 定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1705) [以及我们如何在包中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1706) [捕获这些 signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1708) [我们定义了具有唯一 id 和 title 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1712) [os-signpost-interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1714) [然后我们定义 subsystem 和 category](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1717) [它与我们在创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1720) [日志句柄时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1721) [传递的 category 相对应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1723) [我们创建 name 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1726) [它与我们在 os_signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1729) [调用 start-pattern 和 end-pattern 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1730) [传递的 name 相对应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1734) [这两个都对应于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1736) [我们在 os_signpost 中传入的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1738) [我们在 os_signpost 中传入的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1738) [开始和结束调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1740) [message 元素与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1744) [传递的格式字符串相同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1745) [但是在调用 os_signpost 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1747) [为了捕获传入的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1750) [你传递的将是这里的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1752) [而不是格式化参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1754) [让我们看看如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1756) [在列中填入这些值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1758) [在这里 你可以看到 status 列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1763) [它是字符串类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1767) [因为它只可能是 “Completed” 或者 “Canceled”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1768) [所以我们用状态变量的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1771) [来填充它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1772) [因为 expression 元素可以采用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1776) [任意的 CLIPS 表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1778) [所以我们可以在其中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1781) [做更复杂的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1782) [在这里我们可以通过查看图像大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1784) [来计算事件影响](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1787) [如果它大于 3.5MB](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1789) [我们可以判定影响很大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1791) [否则操作的影响很小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1793) [这就是我们对 os-signpost-interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1798) [这就是我们对 os-signpost-interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1798) [所做的定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1800) [现在让我们来看看表格的创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1801) [对于 schema-ref](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1805) [我们传入 os-signpost-interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1808) [的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1810) [并为这个特定表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1812) [创建唯一标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1813) [然后 我们可以在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1815) [UI 定义中引用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1817) [对于 graph 我们创建一个单轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1820) [它利用我们的表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1823) [这次它通过使用 Plot 模板来绘制图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1826) [Plot 模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1828) [是创建图形的动态方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1830) [它查看在实例中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1832) [按元素传递的列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1837) [并为该列的每个唯一值创建 Plot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1840) [label-format 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1844) [允许我们为这个 Plot 创建格式标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1846) [这里是 img 列和 image-name 列中的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1850) [我们传入 image-name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1854) [作为我们的 Plot 的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1857) [我们的每个轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1858) [我们的每个轨道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1858) [都会以 impact 列上色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1860) [我们轨道上的标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1863) [会从 image-size 中提取出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1866) [接下来 我们看看 list](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1869) [你已经在 Ticks 的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1872) [见过它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1874) [这里 我们将传入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1876) [你希望看到的所有列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1878) [接下来是 aggregation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1881) [这个 aggregation 将跟踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1883) [所有已完成的下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1885) [因为我们的表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1887) [包含已完成和已取消的下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1889) [所以我们需要应用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1891) [slice 元素来过滤一些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1892) [在 slice 元素中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1896) [我们可以指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1897) [应用于 slice 的列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1899) [以及需要匹配的谓词值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1902) [在这里 我们只想从这个表中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1903) [取出 “Completed” 的行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1905) [我们定义了 hierarchy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1908) [它是只有一个层级的结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1910) [具有 image-name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1912) [和可见的列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1915) [对于每个 image-name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1916) [我们将指定 count 和 image-size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1918) [我们将指定 count 和 image-size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1918) [所以我们要将图像的大小求和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1922) [接下来我们有 time-slice](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1925) [抱歉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1930) [我们指定所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1930) [将会可见的列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1932) [为了更容易地使用我们的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1936) [我们可以指定我们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1938) [自定义模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1942) [我们现在尝试构建和运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1944) [我们的包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1946) [你可以看到这里的模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1954) [我可以选中它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1956) [Target 是我的 iPhone](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1961) [和《Trailblazer》App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1963) [我需要记录一会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1968) [可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1980) [跟踪视图是以数据传递的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1983) [每一个图像名称都创建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1986) [一个绘图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1988) [你可以看到标签格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1991) [与我们在包定义中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1992) [传入的格式相匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1994) [如果下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1996) [高于 3.5 MB](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=1999) [那么我们的轨道将是红色的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2001) [具体的大小可以在轨道上查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2003) [接下来我们看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2005) [所有的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2008) [首先 我们看一下下载列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2012) [这是刚才发生的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2016) [所有下载的列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2018) [我们可以选择聚合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2019) [按照图像名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2022) [划分所有下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2026) [你可以在上面看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2028) [我们下载了 12 张图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2029) [“location7” 的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2032) [被下载了两次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2035) [接下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2039) [接下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2039) [我们可以查看活动请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2040) [你可以在这里看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2043) [当我拖动我的检查线时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2045) [细节视图中的数据发生了变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2049) [我们可以跟踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2053) [多个活动请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2055) [并查看截至当前检查线为止的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2057) [持续时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2059) [如果你想从不同的角度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2061) [查看你的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2063) [并想查看你的存储和建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2065) [我们通过 Instrument 检查器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2068) [为你提供了这个功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2071) [它是调试自定义 Instrument 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2073) [一种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2074) [在这里你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2076) [我选择了存储步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2078) [并看到创建 os-signpost 的存储](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2081) [它属于网络类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2084) [和 com.apple.trailblazer 子系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2087) [我们在这里收集了 24 行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2088) [然后我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2093) [创建的表格 image-download](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2095) [它有 12 行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2097) [在底部的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2102) [你可以看到该表的整个内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2104) [接下来 我们跳转到建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2107) [我们可以看到这里有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2109) [GENERATED-OS-LOG 建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2110) [它使用了 24 行 输出了 12 行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2113) [在右边 你可以看到绑定方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2118) [所以我们的 GENERATED-OS-LOG 建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2121) [从 os-signpost 表格中获取数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2124) [并将其放入图像下载表格中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2126) [然后被我们的 Instrument 使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2129) [我们就是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2132) [捕获 os-signpost 调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2135) [创建 UI 并使用 Instrument 检查器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2138) [查看数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2140) [现在让我们请回 Chad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2142) [他会告诉你们更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2143) [关于进阶建模的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2144) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2146) [&gt;&gt; 好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2154) [谢谢 Kacper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2155) [现在我们已经了解了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2157) [如何将 os-signpost 数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2159) [如何将 os-signpost 数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2159) [与自定义 Instrument 结合起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2161) [我们认为你们 能把这个结合做得很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2163) [现在 我们可以讨论一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2170) [进阶的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2173) [特别是如何创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2175) [和定义建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2176) [建模器在概念上是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2179) [非常简单的机器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2180) [它需要一系列的输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2181) [它对这些输入做出推理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2183) [然后进行输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2184) [建模器的输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2187) [是完全按照时间排序的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2188) [因此如果你请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2190) [几个不同的输入表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2192) [这些表将首先按时间排序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2193) [然后合并到一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2194) [按时间排序的队列中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2196) [该队列将提供工作内存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2198) [当我们把这些事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2199) [一个接一个地取出时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2201) [它们被输入到所谓的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2202) [建模器的工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2203) [当建模器看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2205) [这个工作内存的增长时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2207) [它就可以得出推论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2209) [当建模器看到需要为其](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2211) [进行输出的模板时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2212) [它只需将其](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2214) [写入对外输出表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2216) [让我们以一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2218) [让我们以一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2218) [非常有趣的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2220) [来介绍如何使用建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2221) [假设你定义了一个 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2223) [叫做 playing-with-matches](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2226) [它是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2228) [os-signpost-interval-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2230) [可以使已经定义的 os_signpost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2232) [在你的代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2234) [做一些危险的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2235) [我们又定义了另一个 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2237) [叫做 app-on-fire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2240) [它也是一个 signpost Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2242) [但是这些 signpost 意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2244) [App 进入了一个糟糕的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2245) [我们真的很想知道原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2247) [还要创建一个输出 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2250) [它是一个 point-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2251) [它会保存 playing-with-matches 的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2253) [以及对象“起火”的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2255) [我们打算将它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2257) [命名为 started-a-fire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2258) [建模器看起来是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2259) [所有的输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2264) [都按时间顺序设置好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2266) [左边的虚线就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2268) [所谓的建模器时钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2271) [当我们获取第一个输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2274) [将其置入到工作内存中时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2275) [建模器时钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2277) [将移动到区间的起始处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2278) [然后我们获取下一个输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2279) [然后我们获取下一个输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2279) [建模器时钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2283) [再次移动到区间的起始处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2284) [我们将其置入到工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2286) [建模器观察](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2288) [工作内存的这两个区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2290) [建模器可以观察](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2292) [playing-with-matches 是否在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2294) [app-on-fire 之前开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2296) [这其实没有多大区别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2297) [如果反过来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2299) [app-on-fire 也已经开始了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2299) [我们就可以得出一个合乎逻辑的结论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2302) [叫做 cause-of-fire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2305) [并将它置入工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2307) [当我们获取第三个输入时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2311) [你会注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2313) [建模器时钟已经移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2314) [它不再与前两个输入相交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2316) [所以它们将被从工作内存中移除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2319) [如果 cause-of-fire 有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2322) [所谓的逻辑支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2324) [它也会被从内存中移除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2326) [回顾一下 时钟总是被设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2330) [当前输入的时间戳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2332) [对于留在工作内存中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2335) [输入而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2337) [它必须与建模器中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2338) [它必须与建模器中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2338) [当前时钟相交](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2341) [这可以帮助我们建立重合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2342) [它能让我们删除旧数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2344) [也能让我们了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2346) [是否存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2348) [可能与时间相关的输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2350) [建模器对其](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2353) [工作内存的解释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2355) [是通过所谓的 “Production System”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2357) [来定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2359) [生产系统处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2361) [工作内存中的 “Facts（事实）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2363) [它们由具有左手边 (LHS)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2365) [一个生产操作符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2366) [和右手边 (RHS) 的规则定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2368) [LHS 是工作内存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2371) [中的一种模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2373) [它能够激活规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2375) [而 RHS 则是规则触发时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2377) [发生的动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2378) [这些操作可以包括](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2382) [向输出表中添加一行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2383) [或者在建模过程进行时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2385) [将一个新的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2388) [添加到工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2390) [事实有两个来源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2394) [首先 它们可以来自](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2396) [你看到过的表格输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2398) [通过使用我在建模时钟中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2399) [通过使用我在建模时钟中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2399) [展示的规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2401) [表输入将被判定为事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2403) [事实也可以通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2404) [来自生产的 RHS 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2406) [判定生成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2407) [如果你要创建你自己的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2411) [CLIPS 允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2412) [找到所谓的“事实模板”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2414) [你可以为你的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2415) [提供结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2416) [并做一些基本的类型检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2417) [让我们来看看 CLIPS 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2418) [一些规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2421) [我们要讲的第一个规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2423) [叫做 found-cause](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2424) [它指的是 如果有一个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2427) [它的 playing-with-matches](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2430) [在 t1 时开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2431) [app-on-fire 在 t2 时开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2435) [且 t1 比 t2 提前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2439) [那么在这个生产的 RHS 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2441) [我们可以判定一个新的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2442) [叫做 cause-of-fire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2443) [以及导致“起火”的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2446) [它将进入到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2448) [工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2449) [我们接下来讨论第二个规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2451) [也就是 record-cause](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2453) [如果我们有一个 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2454) [在某个开始时间“起火”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2458) [在某个开始时间“起火”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2458) [并且我们知道“起火”的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2460) [我们有一个绑定到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2461) [side append 的表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2463) [它是建模器的输出端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2465) [而且这个表是我们定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2468) [叫做 started-a-fire 的 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2471) [我们可以创建一个表格的行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2472) [然后设置时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2476) [以及导致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2478) [模板中所得的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2479) [“起火”的 Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2481) [通过这两个规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2483) [我们基本上创建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2485) [第一个专家系统来查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2487) [App 中的不良模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2489) [现在你可能已经注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2492) [规则是由 MODELER::](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2494) [或 RECORDER:: 预先编写的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2496) [这些都是 CLIPS 中的模块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2498) [它们允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2499) [同时把规则分组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2501) [并控制规则的执行顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2503) [举个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2506) [如果你保持了所有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2508) [为 RECORDER:: 模块中的输出表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2510) [生产输出的规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2512) [你就可以确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2515) [你不会在建模器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2517) [推理过程中进行输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2519) [推理过程中进行输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2519) [因为在 MODELER:: 中的所有规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2522) [必须在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2523) [RECORDER:: 中的规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2525) [执行之前执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2526) [我之前提到过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2528) [逻辑支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2530) [逻辑支持通常与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2532) [所谓的对等推理规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2534) [联系在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2537) [这些规则就是 比如说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2538) [如果 A 和 B 那么 C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2540) [向生产中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2542) [添加逻辑支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2543) [意思就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2545) [如果 A 和 B 不再](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2549) [处于工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2550) [那么 C 应该被自动收回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2552) [所以我们说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2553) [C 受 A 和 B 的存在的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2555) [逻辑支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2557) [这很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2558) [因为它限制了工作内存膨胀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2560) [这有助于资源消耗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2561) [但从工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2563) [删除不再有效的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2564) [同样也很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2566) [如果 A 和 B 不再有效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2568) [那么你应该移除 C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2569) [为了向你的生产](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2572) [添加逻辑支持 这里是相关的规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2574) [你只需将关键字 logical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2577) [填入模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2579) [填入模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2579) [那么在向前移动的过程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2581) [规则中的 RHS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2582) [所判定的任何内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2583) [都将被自动收回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2585) [你们应该注意到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2587) [来自我们的 Schema 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2588) [这两个规则 抱歉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2591) [这两个事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2592) [它们都是输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2594) [所以当建模器时钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2596) [向前移动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2597) [这些将自动被收回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2598) [好的 现在我们已经了解了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2602) [如何在包中创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2603) [建模器的基本内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2605) [并且看到了一些 CLIPS 语言和规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2607) [让我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2610) [是否可以在我们的网络 Instrument 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2612) [添加一个专家系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2614) [以查找我们的网络层中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2617) [不良模式和潜在的误用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2619) [为此 让我们邀请 Kacper 上台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2621) [做最后一个演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2623) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2625) [&gt;&gt; 有了现有的日志记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2635) [我将尝试编写建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2636) [来检测 App 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2638) [网络行为中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2639) [网络行为中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2639) [一些反面模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2640) [我在运行我的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2642) [《Trailblazer》 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2643) [如果我滚动得很快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2645) [这里就会出现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2647) [一些小故障](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2648) [图像被多次替换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2649) [所以我怀疑我们的取消](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2651) [并没有真正起作用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2654) [我想编写建模器来检测它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2657) [让我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2661) [我们的包定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2663) [我们将从编写 modeler 元素开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2665) [modeler 有 id title](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2668) [和 purpose 几个栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2671) [这些栏将被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2673) [提取到文档中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2675) [我们为 modeler 指定了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2677) [包含所有逻辑的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2679) [production system 的 path](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2681) [然后 我们定义了 modeler 的 output](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2685) [它将是一个 downloader-narrative Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2688) [我们的建模器的 required-input](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2690) [将是 os-signpost 表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2693) [这个表包含开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2696) [和结束事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2698) [现在让我们看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2700) [downloader-narrative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2702) [Schema 的定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2703) [它是一个 point-schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2710) [定义了两个列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2713) [timestamp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2715) [跟踪记录诊断消息的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2717) [description 含有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2720) [运行错误的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2722) [然后 我们可以在 Instrument 定义中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2726) [创建这个表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2728) [我们传入 downloader-narrative 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2730) [schema-ref 和唯一的 id](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2733) [然后我们可以在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2737) [narrative 元素定义中使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2740) [在这里我们定义 narrative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2744) [我们为之前创建的表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2746) [传入 table-ref](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2749) [定义 time-column](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2751) [和 narrative-column](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2755) [我们已经准备好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2755) [为我们的建模器定义逻辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2757) [为此 我将创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2760) [之前在 modeler 定义中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2761) [引用的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2763) [为了创建 CLIPS 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2765) [前往 “File（文件）”-“New（新建）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2767) [选择 “macOS” 作为平台 “Other（其他）”部分的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2774) [“CLIPS File（CLIPS 文件）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2775) [我把名称填好并创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2779) [下面展示的将是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2787) [检测一个单元](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2790) [是否同时执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2791) [多个请求的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2793) [我们将在工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2795) [追踪每一个作为事实的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2797) [首先 我们需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2799) [为这个事实创建模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2801) [每个事实都会有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2804) [存储 time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2807) [caller-address 也就是单元地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2809) [我们捕获到的 signpost-id](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2813) [以及我们请求的 image-name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2816) [我们将这个事实叫做 started-download](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2817) [然后编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2821) [在工作内存中 创建此事件的建模器规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2823) [这个规则查看 os-signpost 表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2828) [我们指定 subsystem name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2832) [并把 “Begin” 作为 even-type 的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2835) [并捕获我们想要的所有信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2838) [我们需要捕获 ?image-name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2841) [?caller-address time 以及 ?identifier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2842) [然后 我们向工作内存判定新的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2845) [要在下载完成后清理它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2854) [我们需要从工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2856) [收回这一事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2859) [这里我们查看的是同一个表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2864) [但是我们只查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2866) [event-type “End”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2868) [我们捕获 signpost 的 identifier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2872) [在这里我们使用的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2875) [signpost “Begin” 和 “End”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2877) [signpost “Begin” 和 “End”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2877) [必须有相同的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2880) [我们在工作内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2882) [寻找一个具有我们捕获到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2884) [signpost identifier 的事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2887) [并收回这个事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2889) [然后我们可以编写 RECORDER:: 规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2894) [来生成所有的叙事数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2896) [这个 RECORDER:: 规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2904) [查看所有 started-download 事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2907) [并捕获它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2908) [我们捕获 time caller-address](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2910) [以及 image-name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2912) [如果这里是 true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2914) [有另一个具有相同 caller-address 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2917) [started-download 事实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2919) [你就可以注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2920) [这里引用的变量是相同的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2922) [并且在第一个事实之前发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2925) [我们注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2929) [存在一些反向模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2931) [而且在请求中存在重叠](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2932) [我们可以检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2934) [是否可以访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2936) [downloader-narrative Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2937) [downloader-narrative Schema](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2937) [在其中创建新的行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2941) [将列的时间设置为第一个事实的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2945) [并设置列的描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2948) [你需要输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2951) [关于这个问题的一些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2953) [以便之后有人可以调试它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2955) [现在我可以在 App 上运行 Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2959) [让我们再次运行它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2962) [再次选择《Trailblazer》网络模板并记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2972) [我将尝试执行一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2978) [快速滚动并查看我的叙事表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2981) [你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2989) [叙事表包含大量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2991) [正在输出的诊断消息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2993) [我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2996) [存在一些问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2997) [之后再研究它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=2999) [你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3000) [叙事表是可互动的细节视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3003) [例如 你可以检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3004) [所有传入的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3006) [并进行筛选](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3007) [我们可以添加这个调用者地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3009) [成为一个细节过滤器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3011) [并拥有这个细节过滤器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3013) [现在 让我们请回 Chad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3017) [他将告诉你更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3019) [关于开发 Instruments 的最佳实践经验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3021) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3024) [&gt;&gt; 好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3030) [谢谢 Kacper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3030) [我们已经看到如何在 Instruments 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3032) [创建一些基本的专家系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3034) [好的 我们来谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3037) [在这个过程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3039) [我们学到的一些最佳实践经验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3042) [第一个是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3043) [编写多个 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3046) [我的意思并不是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3048) [练习编写 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3049) [而是 如果你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3050) [已经拥有了一个 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3052) [并且想给它添加一些特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3052) [有时候 给你的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3054) [添加额外的图形或细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3055) [真的很容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3056) [但是你应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3057) [真正地思考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3059) [真正地思考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3059) [这样的话 它还可以成为自身的 Instrument 吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3060) [这样想的原因是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3062) [如果你创建更细粒度的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3063) [你会给这个 Instrument 的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3065) [更多的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3067) [他们可以从库中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3069) [拖出他们想要的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3070) [这将最小化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3071) [对目标的记录影响](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3073) [如果你把注意力集中在一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3075) [有很多功能的 Instrument 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3077) [那对用户来说 将是一个全盘接受](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3078) [与被迫放弃之间的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3079) [如果你想创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3080) [针对某个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3084) [的一组 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3086) [你一定想要看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3087) [所有这些 Instrument 同时被使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3089) [那么你所能做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3091) [像我们创建网络模板那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3093) [创建自己的自定义模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3095) [所以你要做的应该是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3096) [创建一个文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3097) [以你想要的方式拖拽 Instrument 配置它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3099) [进入文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3102) [然后保存为模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3104) [然后你就可以在你的包中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3105) [使用那个模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3106) [同时使用 Kacper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3108) [在我们的网络模板中添加的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3110) [使用多种 Instrument 编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3113) [是使用工具更好的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3114) [第二 即时模式很难](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3118) [第二 即时模式很难](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3118) [即时模式指的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3121) [Instruments 的记录模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3123) [它可以在接近实时的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3124) [将数据可视化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3127) [有两个原因导致它很难](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3128) [第一个原因是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3132) [它需要一些额外的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3134) [尽管今天我们很想向你们介绍这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3136) [但是很遗憾没有办法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3137) [时间有限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3138) [所以我们将会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3139) [为此编写文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3140) [第二个原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3142) [也是更重要的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3144) [就是区间数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3146) [区间不能被输入到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3149) [分析核心的表中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3151) [除非它们被关闭](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3152) [这意味着这时我们已经](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3154) [看到了开始和结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3155) [所以当你查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3156) [现场记录的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3157) [你会发现一堆所谓的“开区间”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3159) [如果你的建模器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3160) [需要它们作为输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3162) [这是完全可行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3163) [而且你会注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3165) [如果上游有一个开区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3166) [那么下游的所有建模器时钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3168) [都必须停止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3170) [直到那个区间关闭](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3172) [因为建模器的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3173) [都是按时间排序的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3175) [除非所有的区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3177) [都被关闭](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3178) [都被关闭](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3178) [否则无法把时钟向前移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3180) [所以如果你有一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3182) [占用时间很长的区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3183) [你会注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3184) [建模器的输出似乎停止了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3186) [当用户点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3188) [停止记录按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3191) [所有的开启的区间都被关闭时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3193) [所有的进程才将正常](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3194) [数据也才会涌入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3195) [但这种用户体验并不好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3197) [如果停止录制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3199) [你将有两种选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3201) [第一个是将 Instruments 退出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3202) [即时模式支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3204) [为此你可以给你的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3206) [添加一个限制元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3207) [第二个是不再将区间数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3208) [作为建模器的输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3211) [就像我们在演示中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3214) [为我们的专家系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3215) [所做的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3218) [我们实际上使用的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3219) [os-signpost-point 事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3221) [而不是 os-signpost-interval](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3222) [我知道我们让它看起来简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3225) [但是即时模式实现起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3227) [确实有点棘手](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3229) [第三 非常重要的一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3230) [如果你要创建的 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3235) [针对的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3236) [大量的输入数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3237) [那么最后 5 秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3239) [那么最后 5 秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3239) [记录模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3240) [是最有效的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3243) [你可以在跟踪文档的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3244) [记录选项中进行切换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3245) [之后你将看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3247) [你可以在即时 延迟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3248) [和最后 n 秒模式之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3249) [进行选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3251) [更加有效的原因是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3253) [它允许记录技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3254) [使用缓冲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3256) [来提高性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3258) [这样它就不会一直尝试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3259) [实时向 Instruments 提供数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3260) [这将产生深远的影响](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3263) [它会对 signpost 数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3264) [产生巨大的影响](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3266) [在最后 5 秒模式下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3268) [速度可以提升 10 倍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3270) [当然 为此的权衡是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3272) [你只能看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3273) [最后 5 秒的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3274) [但是对于产生大量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3277) [数据的 Instrument 来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3279) [这通常是件好事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3280) [这使得它成为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3281) [系统跟踪和 Metal 系统跟踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3283) [以及游戏性能模板的通用模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3285) [如果你的目标是这类 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3287) [我也会建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3290) [你的 Instrument 不要支持即时模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3291) [这样你的用户体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3293) [就不会很糟糕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3294) [Instruments 在获取数据时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3296) [也不会出现延后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3298) [你在区间中也不会遇到类似的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3299) [你在区间中也不会遇到类似的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3299) [我们的讨论会差不多结束了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3302) [我们今天谈论很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3304) [关于创建 Instrument 特性的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3308) [我们真的非常兴奋](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3309) [因为我们能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3310) [在今年向你们展示这一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3311) [我们迫不及待地想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3312) [你们能通过 Instruments 创造什么样的成果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3314) [如果你想和我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3316) [谈谈自定义 Instrument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3317) [我们将在今天下午 3 点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3318) [8 号实验室等待各位](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3321) [另外 405 号讨论会详细介绍了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3323) [如何使用 os_signpost API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3325) [你可以通过它将数据输入 Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3327) [请享受接下来的讨论会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3329) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/410/?time=3331)