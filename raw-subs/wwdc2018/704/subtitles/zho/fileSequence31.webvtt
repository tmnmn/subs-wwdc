WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:31:00.827 --> 00:31:04.164 align:middle line:-2
它有一些购买信息
证书和签名

00:31:04.631 --> 00:31:07.568 align:middle line:-2
我们有个API可以让你
将其从文件系统中取出

00:31:08.602 --> 00:31:10.137 align:middle line:-1
我说过这是一个单一的文件

00:31:12.105 --> 00:31:14.541 align:middle line:-1
我们使用开源标准

00:31:15.075 --> 00:31:19.379 align:middle line:-2
PKCS加密容器
以及ASN.1

00:31:19.580 --> 00:31:21.415 align:middle line:-1
来存储收据中的元数据

00:31:21.481 --> 00:31:26.253 align:middle line:-2
这些都是文档完整并且
非常公开的开放文件格式

00:31:27.788 --> 00:31:31.758 align:middle line:-2
而且有很多可以用来
验证和阅读收据的方法

00:31:32.326 --> 00:31:37.698 align:middle line:-2
例如OpenSSL asn1c等
还有更多 你甚至能建立自己的标准

00:31:38.532 --> 00:31:41.168 align:middle line:-2
不管你打算使用哪种API
你应该如何阅读收据呢？

00:31:41.235 --> 00:31:46.406 align:middle line:-2
在你调用Bundle.appStoreReceiptURL时
它会将一个URL返回到你的app中

00:31:46.473 --> 00:31:49.409 align:middle line:-2
但它只是到达文件系统中
文件的路径

00:31:50.210 --> 00:31:52.179 align:middle line:-1
你需要阅读该内容

00:31:52.379 --> 00:31:54.314 align:middle line:-1
把那一小块数据写入内存

00:31:54.548 --> 00:31:57.985 align:middle line:-2
如果你在做服务器到服务器验证的话
将其发送到你的服务器

00:31:58.185 --> 00:32:00.621 align:middle line:-2
或者你也可以直接
在设备上对其进行处理

