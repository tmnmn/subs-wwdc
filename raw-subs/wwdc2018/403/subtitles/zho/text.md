# What's New in Testing

## Summary
Hear about exciting improvements to code coverage, including how you can build your own automation on top of Xcode's coverage reports. Learn how to dramatically speed up the execution of your tests by leveraging distributed parallel testing, new in Xcode 10.

## Info
* Developer Tools
* WWDC 2018 - Session 403 - iOS, macOS, tvOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/

## Text
 [（测试新特性 演讲403）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=16) [上午好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=25) [欢迎参加演讲403
“测试新特性”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=32) [我是Honza Dvorsky](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=36) [我将和我的同事
Ethan Vaughan一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=38) [首先我们将会讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=43) [Xcode 9.3中的
代码覆盖改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=45) [然后讨论测试选择和和排序
这是Xcode 10中的新特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=49) [最后 Ethan将会上台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=54) [谈谈如何并行运行测试以加速测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=57) [谈谈如何并行运行测试以加速测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=57) [我们首先来看代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=62) [在Xcode 9.3中
我们完全重写了代码覆盖功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=66) [性能和准确性有了很大改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=70) [我们能够添加新功能
这样就能够细粒度地控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=74) [测试目标 以帮助改进代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=79) [我们创建了一个新的
命令行工具xccov](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=83) [最后同样重要的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=88) [我们在源代码编辑器中
提供代码覆盖功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=89) [让我们来详细了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=94) [首先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=96) [让你们感受一下
代码覆盖改进有多大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=97) [我们在一大型内部Apple项目上
进行了衡量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=101) [为了解速度提升幅度
我们测量Xcode需花费多长时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=106) [在源代码编辑器中加载和显示
代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=109) [在Xcode 9中
大约需要6.5秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=114) [在Xcode 9.3中
用时少于0.5秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=119) [在Xcode 9.3中
用时少于0.5秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=119) [速度提高95%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=123) [但是我们希望覆盖文件变得更小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=132) [因为Xcode能够写出很多内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=135) [如果你经常运行测试
应该这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=138) [我很高兴告诉大家
改进是非常巨大的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=141) [Xcode 9的覆盖文件大小
超过200兆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=146) [文件很大 但是请注意
这是针对拥有数千个源文件的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=149) [大型项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=153) [Xcode 9.3写出的文件大小
少于原来的十分之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=157) [我相信你们会喜欢这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=167) [如果你们维护一个连续集成机器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=168) [或者磁盘空间不足
优点将会十分明显](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=171) [但是最大的优点不仅在于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=174) [覆盖文件变得更小
读写变得更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=176) [它们比以前更准确了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=179) [它们比以前更准确了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=179) [头文件就是这样的例子之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=183) [Xcode 9不能正确收集
和显示头文件中的代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=186) [对于使用C++的代码库来说
这是一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=190) [因为在C++语言中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=193) [有相当一部分可执行代码
位于头文件中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=195) [如果这个问题影响到你
那么你将会很高兴听到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=199) [Xcode现在能够正确地
收集和显示实现及头文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=202) [的代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=205) [现在 让我们来看代码覆盖功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=209) [第一个功能是目标选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=213) [这是一个新选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=216) [不仅控制启用或禁用代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=217) [并且控制何时启用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=221) [可以控制包含哪些目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=223) [如果你的项目使用第三方代码
而且你不希望测试它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=228) [或者你在一家公司工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=232) [其他团队提供已经测试的框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=234) [这项功能就很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=236) [这项功能就很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=236) [在方案测试计划中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=242) [能自定义包含的目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=246) [这意味代码覆盖可以包含所有目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=248) [也可以手动挑选其中一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=253) [为了改进工作流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=257) [我们创建了一个名为xccov的
新命令行工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=259) [可以很容易地自动
集成到脚本中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=264) [它产生人工可识读
和机器可分析的输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=267) [在更高层面
它提供覆盖数据的详细视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=272) [我已经多次提到代码覆盖数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=277) [让我们来看底层原理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=280) [启用代码覆盖后
在运行测试时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=283) [Xcode生成两个文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=286) [首先是覆盖报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=289) [或xccovreport文件扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=292) [包含每个目标、源文件
和功能的覆盖率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=296) [包含每个目标、源文件
和功能的覆盖率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=296) [第二个是覆盖存档文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=303) [在报告中包含每个文件的
原始执行次数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=305) [这些覆盖文件位于
项目的衍生数据目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=313) [此外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=317) [如果将结果包路径标识符
传递到Xcode生成项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=318) [这些文件也会被放入结果捆绑包之中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=323) [让我们来看一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=328) [我们看Hello World
app的覆盖数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=330) [可以看到每个目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=336) [甚至每个方法的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=339) [总体覆盖情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=343) [当然](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=345) [通过传递正确的旗帜标识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=347) [可以在JSON中
获得相同的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=350) [这样就可以与其他工具集成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=356) [可以看到 xccov非常灵活](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=360) [因此我鼓励你们阅读它的文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=362) [现在 我们来讨论使用方法…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=366) [可在命令行上查看代码覆盖
这是最方便的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=369) [在源代码旁边查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=374) [可以控制是否显示代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=378) [只需选择编辑器
显示或隐藏代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=381) [启用之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=388) [将在源代码编辑器中
看到代码覆盖刷新视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=389) [整行高亮显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=393) [当鼠标悬停在右侧的
执行次数上时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=394) [能够最方便地查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=398) [你的哪些代码已经测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=401) [哪些仍然需要进一步测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=404) [现在 让我来实际演示
这些改进特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=407) [这里有一个项目
名称为Dev Cast](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=421) [这是一个简单的消息app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=424) [这是去年开发的iOS版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=425) [今年 我想要开发一个Mac版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=428) [我想要在iOS和Mac版本
之间共享业务逻辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=432) [因此将它全部放入
名为DevCastkit的框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=435) [今天 我的目标是探索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=439) [甚至改进这个框架的代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=441) [现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=445) [我不会收集代码覆盖
我只需要开启它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=446) [选择方案
选择“编辑方案”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=450) [进入测试操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=455) [进入选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=457) [在这里 我启用代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=460) [现在我进入产品测试
运行我的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=467) [现在 创建我的框架
我的测试包和我的Mac app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=471) [然后运行我的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=476) [现在 测试完成
让我们来看结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=479) [现在 测试完成
让我们来看结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=479) [我们转到报告导航器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=482) [查看最新的报告覆盖报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=484) [我可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=488) [两个目标 Mac app和框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=491) [现在 Mac app仅用作
运行测试的容器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=495) [我并不担心低代码覆盖率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=500) [事实上 我并不想
在这个报告里看到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=503) [因此我可以再次编辑方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=508) [在测试操作中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=513) [并不收集所有目标的覆盖率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=516) [我更改为只覆盖一些目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=519) [这为我提供一个硬性覆盖列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=522) [仅添加我感兴趣的目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=525) [也就是框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=528) [再次运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=533) [查看经过更新的覆盖率报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=539) [查看经过更新的覆盖率报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=539) [现在你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=543) [覆盖率报告中只有框架的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=543) [这正是我想要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=546) [现在 我专注于这个目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=548) [看 覆盖率现在是84%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=551) [这还不错
但是我还可以做得更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=554) [为了理解需要更多地
注意哪些文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=557) [我将会显示目标的覆盖率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=561) [看到第一个文件的覆盖率仅有66%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=563) [我点击这里的箭头
转到这个文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=568) [在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=573) [我将查看我的本地服务器类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=575) [在右侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=578) [我可以看到每个代码块的执行次数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=579) [因此我可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=582) [测试所覆盖的类可执行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=583) [这很不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=587) [不幸的是 我的一个常用功能
即 获取最新消息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=589) [完全没有被我的测试调用
因此我不知道这个功能是否正常工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=592) [为了解决这个问题
我会转到相应的测试文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=597) [为了解决这个问题
我会转到相应的测试文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=597) [我添加一个新测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=603) [此测试将一些消息
放入本地服务器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=607) [然后 我获得最近的消息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=611) [正如我所预期的
验证返回的消息是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=613) [在添加新测试之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=617) [我再次运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=619) [很好 测试完成
我再次转到覆盖率报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=625) [现在 查看我的框架
可以看到覆盖率为100%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=630) [这正是我想要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=635) [来看我如何使用
目标选择功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=638) [来专注于一些目标的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=641) [然后 我使用覆盖率文件
准确地了解将专注于哪个文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=644) [最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=648) [我在源代码编辑器中
使用代码覆盖集成功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=649) [来了解我的哪些代码部分
仍然需要覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=652) [这就是Xcode中的
代码覆盖改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=656) [讲完代码覆盖之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=666) [让我们来看Xcode 10中的
一些新特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=669) [首先 来看我们如何更好地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=673) [选择和排序我们的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=675) [为什么这很重要？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=679) [你的套件中的所有测试
并非都是为了一个目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=680) [每次运行测试时
你可能需要快速运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=686) [所有1000个测试单元](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=690) [但是在夜间 可能只需要
运行10个长时运行用户界面测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=692) [现在 可以通过禁用
方案中的特定测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=696) [来实现这个目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=698) [方案编码禁用测试列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=702) [这样XE测试就知道
需要跳过哪些测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=706) [这会伴随着一个有趣的副作用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=709) [无论你何时编写一个新测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=712) [它都会被自动添加到
包含相应测试的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=714) [所有方案之中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=716) [但是 如果你不想要这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=719) [但是 如果你不想要这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=719) [你必须检查所有方案
手动禁用测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=720) [因此在Xcode 10中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=725) [我们引入新的方案模式
并不编码运行测试列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=726) [如果将方案切换到此模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=732) [只有手动挑选的测试
才会在方案中运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=734) [可以在方案编辑器测试操作中
控制此模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=741) [在测试目标列表中
有一个新的弹出选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=745) [你可以声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=748) [方案是否应该自动包括新测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=749) [这样 一些方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=753) [可以继续运行
你编写的任何新测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=754) [其他方案仅运行
手动挑选的测试列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=757) [我们讨论了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=763) [如何更好地控制
哪些测试 何时运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=764) [但是测试顺序也很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=768) [默认情况下 Xcode中的
测试按名称排序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=773) [这意味着 除非更名测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=777) [否则它们始终
以相同的顺序运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=779) [否则它们始终
以相同的顺序运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=779) [这种决定方法是一把双刃剑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=782) [这样很容易遗漏漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=785) [因为一个测试显式地
依赖于在它之前运行的另一个测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=787) [让我们来看这一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=793) [假设你有测试A、B和C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=796) [它们按照此顺序运行
而且始终获得通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=799) [但是详细地观察测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=802) [你会发现测试A
创建一个数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=805) [然后 测试B会运行
将数据写入数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=809) [然后测试C运行
删除数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=813) [这些测试获得通过
是因为它们按照特定顺序运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=820) [--如果打乱它们的顺序
例如 重新命名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=824) [然后再次运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=829) [测试B可能会将数据
写入一个不存在的数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=831) [你的测试将会失败](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=834) [为了防止这样的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=837) [为了防止这样的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=837) [必须始终正确设置测试
取消它们自己的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=840) [不仅会让它变得更可靠](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=846) [而且让你的测试独立于
所有其它测试运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=850) [在开发和调试期间
这十分有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=853) [为了帮助你确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=858) [测试之间不存在
不必要的依赖关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=859) [在Xcode 10中 我们引入
新的测试随机化模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=863) [如果启用此模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=868) [在每次运行之前
将会为测试设置随机顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=869) [如果在此模式下
测试获得通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=874) [就能够更加确信
它们确实可靠 而且是独立的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=877) [可以在方案编辑器中
启用随机模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=882) [与前面讲过的其他特性一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=885) [这些就是Xcode 10中
新的测试选择和排序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=890) [现在 我很高兴地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=895) [为你们介绍Xcode中的
新并行测试功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=899) [为你们介绍Xcode中的
新并行测试功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=899) [欢迎Ethan Vaughan
Ethan](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=902) [谢谢Honza](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=912) [你们的许多开发周期
可能是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=915) [编写代码、调试
然后运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=919) [然后提交 将更改存入存储库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=924) [在存入之前运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=927) [可以进行回归分析
然后生成版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=930) [但是 这个流程有一个瓶颈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=935) [即测试运行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=938) [你们可能有一些测试套件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=942) [运行时间长达30分钟甚至数小时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=943) [如果需要花费过多的时间
等待测试运行结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=947) [将会形成严重的工作流程瓶颈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=952) [我们希望尽量提高测试运行速度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=955) [缩短这个重要的开发环节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=959) [缩短这个重要的开发环节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=959) [因此去年我们在Xcode 9中
引入一项新特性 帮助更快运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=963) [此特性名为并行目标位置测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=969) [能够同时在多个目标位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=972) [运行你的所有测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=974) [你需要使用命令行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=978) [将多个目标位置说明符
传递给xcodebuild](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=979) [以前若你运行测试 比如
在iPhone X和iPad上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=985) [xcodebuild将会
在iPhone X上运行所有测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=991) [然后在iPad上运行所有测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=994) [设备不能同时运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=997) [但是在Xcode 9中
我们更改了这个模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1002) [默认情况下
可以在多个设备上同时运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1004) [这可以极大缩短执行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1009) [这很不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1012) [但是这个方法有一些限制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1014) [首先 只有在多个目标位置
进行测试时 才会有优势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1018) [首先 只有在多个目标位置
进行测试时 才会有优势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1018) [举例来说 如果运行
Mac app的单元测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1023) [就没有帮助作用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1027) [只能在xcodebuild中
使用此功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1029) [因此 这主要在连续集成环境中有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1032) [比如Xcode Server
或Jenkins](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1036) [我很高兴告诉你们
有一种更快的新测试运行方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1041) [名为“并行分布式测试”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1044) [利用并行分布式测试功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1048) [可以在一个目标位置
并行执行多个测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1050) [以前 在单一目标位置
进行测试是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1054) [依次连续执行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1058) [分布式测试允许同时运行多个测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1064) [因此 现在测试是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1067) [此外 Xcode和
xcodebuild都支持此功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1071) [无论在哪里运行测试
都会获得最佳的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1074) [为了理解Xcode
并行运行测试的原理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1080) [我们首先来看测试是如何执行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1083) [在运行时发生了什么？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1087) [我们先来看单元测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1090) [单元测试被编译成一个测试包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1092) [在运行时层面 Xcode启动
一个app实例 作为测试运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1097) [运行器加载测试包
执行所有测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1104) [单元测试就是这样执行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1109) [那么用户界面测试呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1112) [对于用户界面测试 原理基本相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1114) [测试被编译成为一个捆绑包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1116) [但是捆绑包由Xcode
创建的自定义app加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1119) [你的app不再运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1123) [相反 测试自动控制你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1126) [通过启动app
与不同的用户界面部分进行交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1129) [如果想要详细了解此流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1135) [请你们观看2016年的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1137) [请你们观看2016年的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1137) [此演讲进行了更详细的讲解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1140) [现在 我们已经了解
我们的测试是如何执行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1144) [最后让我们看看
Xcode如何并行运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1147) [如前所述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1151) [Xcode启动一个测试运行器
以执行我们的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1152) [但是不同于启动一个运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1157) [Xcode将启动多个运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1159) [每个运行器
执行一个测试子集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1162) [事实上 Xcode动态
分配测试给运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1166) [在机器上实现最高的利用效率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1170) [让我们来了解详细过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1175) [Xcode分配测试到运行器时
将按类进行分配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1178) [每个运行器接收
一个测试类以执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1183) [它将执行这个类
然后执行另一个类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1186) [在测试完成时
所有类执行之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1191) [你可能会想
为什么Xcode按类分配测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1196) [你可能会想
为什么Xcode按类分配测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1196) [而不是将单个测试方法
分配给运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1200) [这有多方面的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1204) [首先 类内部的测试之间
可能存在隐藏的依赖关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1207) [Honza前面已经讲过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1211) [如果Xcode接收类内部的测试
并将它们分配给不同的运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1213) [可能难以诊断测试问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1218) [其次 每个测试类
层级设置和分解方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1223) [可能会执行大量的计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1228) [通过将类内部的有限数量
的测试分配给一个运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1231) [XE测试仅需一次调用这些方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1234) [可以显著节省时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1238) [现在 我想谈谈在模拟器上
并行进行测试的一些要点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1242) [在模拟器上并行运行测试时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1248) [Xcode开始接收
你选择的模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1251) [创建多个独特的模拟器副本或克隆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1254) [这些克隆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1258) [这些克隆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1258) [与原始模拟器相同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1261) [如有必要 Xcode将自动创建
和删除这些克隆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1264) [在多次克隆模拟器之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1270) [Xcode在每个克隆上
启动测试运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1272) [然后 运行器开始执行测试类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1276) [正如我们前面所说的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1279) [由于在模拟器的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1282) [多个克隆上执行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1284) [这会存在一些问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1286) [首先 在测试期间
不会使用原始模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1290) [相反 它作为一个模板模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1295) [可以使用你想要的设置
和内容配置它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1299) [在创建克隆时
这些内容被复制到克隆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1302) [接下来 你的app将会有多个副本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1307) [每个副本都有自己的数据容器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1311) [这意味着 如果一个测试类
修改磁盘上的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1315) [这些文件修改
对于另一个测试类来说也是可见的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1320) [因为它可以访问
完全分离的数据容器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1324) [在实践中
类在不同的克隆上执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1328) [这对于你的测试来说
可能是可见的 必须知道这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1332) [那么 你可以在哪里
并行运行测试呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1338) [可以在macOS上并行
运行单元测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1341) [也可在iOS 和tvOS模拟器上
并行运行单元和用户界面测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1344) [对此 我想要为你们在实战中
演示并行分布式测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1350) [这是
Solar System app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1368) [在以前的演讲中
你们可能见过这个app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1370) [作为这个app的开发者之一
我想要运行所有的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1374) [然后提交并将我的更改推送入存储库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1377) [然后提交并将我的更改推送入存储库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1377) [但是 随着我添加更多的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1381) [将需要更多的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1383) [这成为工作流程中的瓶颈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1385) [让我们来看并行测试
如何解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1388) [我切换到Xcode项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1391) [我已经运行我的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1394) [我想看它们用了多少时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1396) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1401) [让我们返回到测试报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1402) [在这里 可以看到
在每个方法旁边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1405) [显示执行每个方法所用的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1407) [接下来 对于每个测试类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1411) [我们显示测试通过和失败百分比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1413) [以及测试类的执行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1416) [最后 在右上角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1420) [可以看到所有测试的运行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1422) [在这里 可以看到测试用时14秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1426) [现在 我想启用并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1429) [我可以进入方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1431) [选择方案 然后编辑方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1434) [接下来 我点击测试操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1437) [点击测试目标旁边的选项按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1440) [最后 选中“并行执行”复选框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1444) [就可以启用并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1448) [现在 选择“产品测试”
运行我们的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1451) [你们应该查看文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1459) [Xcode启动
Mac app多个副本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1461) [并行运行单元测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1464) [很好 看来已经完成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1467) [现在 我们返回到报告
选择最近的报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1469) [以前 测试所用时间为14秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1476) [现在仅用时5秒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1479) [启用并行测试后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1481) [测试执行时间节省了超过50%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1483) [Solar System app
不仅有Mac版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1493) [而且有iOS版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1497) [我的任务之一是
编写一个用户界面测试套件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1500) [以使用我的iOS app的
各种屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1503) [我现已为iOS方案启动并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1507) [现在我切换到此模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1511) [然后我选择“产品测试”
运行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1516) [现在 我们切换到模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1522) [在这里 可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1526) [Xcode创建我所选定模拟器
的多个克隆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1527) [这些克隆使用原始模拟器的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1532) [因此容易进行区分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1536) [在每个模拟器上
Xcode启动一个测试运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1539) [每个运行器执行套件中的不同测试类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1543) [执行我的测试时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1560) [我将切换回Xcode显示测试日志](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1562) [可以找到测试报告的相关测试日志](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1566) [在日志中可以清楚地看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1571) [你的类如何被分配给不同的运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1573) [在日志中 可以看到
每个运行器的条目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1578) [在每个给定运行器下方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1581) [可以看到当前正在执行的测试类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1583) [当测试完全结束后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1588) [在这里可以看到类是如何分配的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1590) [让你了解整个并行执行流程的概况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1593) [让我们回到幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1597) [让我们简要回顾在演示中学到的知识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1608) [首先 我们看到
如何在方案编辑器中启用并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1612) [接下来 我们介绍如何
查看测试报告中的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1617) [接下来 我们介绍如何
查看测试报告中的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1617) [以及在测试日志中查看类的分配方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1620) [然后我们看到Xcode启动
Mac app的多个实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1625) [以并行运行单元测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1629) [最后 我们看到模拟器的多个克隆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1633) [它们并行运行用户界面测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1636) [如前所述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1640) [xcodebuild也很好地
支持并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1642) [我们添加了一些新命令行选项
允许你控制测试行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1646) [现在 我想指出两点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1650) [首先 我们设有
并行测试工作线程计数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1654) [允许你控制工作线程的数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1657) [或并行测试期间
应该启动的运行器数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1659) [通常情况下 Xcode将会
根据机器资源和工作负荷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1664) [确定最优的运行器数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1668) [这意味着 机器内核数量越多
运行器数量就越多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1672) [但是 如果你发现默认的
运行器数量不符合你的需求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1678) [但是 如果你发现默认的
运行器数量不符合你的需求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1678) [可以使用命令行选项进行重写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1681) [接下来 我们启用并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1685) [允许你重写方案中的设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1688) [以显式启用或禁用并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1690) [在大多数情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1696) [只需要启用
就可以获得并行测试的好处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1698) [这里有一些提示和技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1702) [帮助你充分利用此功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1704) [首先 应考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1708) [将长时运行测试类拆分为两个类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1709) [因为测试类并行执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1714) [测试时间不会超过
最长时间运行类所用的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1717) [并行运行测试时
可能发现这样的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1721) [一个类占用全部执行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1725) [如果拆分这个类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1730) [Xcode可以在不同的运行器之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1733) [更均衡地分配测试执行工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1737) [从而缩短执行总用时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1738) [从而缩短执行总用时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1738) [你并不需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1742) [拆分所有的类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1743) [这没有必根本
但是如果你发现这样的瓶颈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1746) [可以尝试这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1749) [接下来 将性能测试
放入它们自己的捆绑包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1753) [并禁用并行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1757) [这似乎不够直观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1760) [但是性能测试对系统活动十分敏感](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1762) [如果并行地进行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1766) [可能无法达到性能指标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1769) [最后应该理解并行测试并不安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1773) [大多数测试都可以并行完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1778) [但是如果多个测试访问共享系统资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1781) [比如文件或数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1784) [需要引入显式同步机制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1786) [以允许它们同时运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1789) [说到测试提示和技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1792) [如果想要详细了解如何测试你的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1794) [我建议你们参加星期五的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1797) [由我的同事Stuart
和Brian主讲 希望不要错过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1799) [由我的同事Stuart
和Brian主讲 希望不要错过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1799) [最后总结](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1805) [今天我讨论了代码覆盖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1806) [性能和准确性改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1809) [接下来 我们讨论了新的
测试选择和排序功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1813) [让你能够准确控制运行哪些测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1817) [并且控制测试运行顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1820) [最后 我们介绍了并行分布式测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1823) [此功能让你能够把测试类
分配给不同的运行器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1826) [以并行执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1830) [要了解详细信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1833) [建议从developer.apple.com
下载我们的幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1834) [也可以在今天下午前往
实验室与我们见面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1838) [祝大家度过一个愉快的WWDC](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1841)