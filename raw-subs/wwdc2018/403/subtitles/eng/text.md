# What's New in Testing

## Summary
Hear about exciting improvements to code coverage, including how you can build your own automation on top of Xcode's coverage reports. Learn how to dramatically speed up the execution of your tests by leveraging distributed parallel testing, new in Xcode 10.

## Info
* Developer Tools
* WWDC 2018 - Session 403 - iOS, macOS, tvOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=7) [&gt;&gt; Good morning.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=25) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=26) [&gt;&gt; Welcome to Session 403,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=32) [What's New in Testing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=34) [My name is Honza Dvorsky and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=36) [will share the stage today with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=38) [my colleague, Ethan Vaughan.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=39) [Today, we'll start by talking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=43) [about the code's coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=45) [improvements we made in Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=46) [9.3.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=47) [Then we'll look at the test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=49) [selection and ordering features](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=50) [new in Xcode 10.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=52) [And finally, Ethan will come up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=54) [on stage to tell you about how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=56) [you can speed up your tests by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=58) [you can speed up your tests by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=58) [running them in parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=60) [Let's kick off with code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=61) [coverage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=64) [We completely reworked code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=65) [coverage in Xcode 9.3 and this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=68) [resulted in many performance and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=70) [accuracy improvements and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=72) [allowed us to add a new feature](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=75) [so that you have the granular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=77) [control over which targets](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=78) [contribute to code coverage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=80) [We created a new command line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=82) [tool called xccov and last but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=85) [not least, we gave code coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=88) [in the source editor a visual](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=90) [refresh.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=92) [Let's look at all of these in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=93) [detail.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=95) [First, to give you a sense of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=96) [how much better code coverage is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=98) [now, we measured it on a large](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=100) [internal project at Apple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=102) [To understand the speed, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=106) [measured how long it took Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=107) [to load and show code coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=109) [in the source editor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=111) [In Xcode 9, it took about six](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=112) [and a half seconds to do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=116) [In Xcode 9.3, however, we got it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=119) [In Xcode 9.3, however, we got it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=119) [down to less than a half a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=121) [second, which is more than 95%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=122) [faster.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=124) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=126) [But we also wanted to make the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=132) [coverage file smaller, as Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=133) [can potentially write out many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=136) [of them, if you run your test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=137) [often, as you should, so I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=139) [happy to say that here, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=141) [improvements are just as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=142) [dramatic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=144) [Xcode 9's coverage files were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=145) [over 200 megabytes in size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=147) [And this is a lot but remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=150) [that we're talking about a large](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=151) [project with thousands of source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=153) [files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=155) [But files written by Xcode 9.3](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=156) [were less than a tenth of that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=160) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=162) [I'm sure you appreciate this if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=167) [you maintain a continuous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=168) [integration machine or if you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=169) [just running low on disk space.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=171) [But the best part is that not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=174) [only are the coverage files](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=175) [smaller and faster to read and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=177) [write, they're also more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=179) [write, they're also more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=179) [accurate than ever before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=180) [One example of this is header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=182) [files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=185) [Xcode 9 didn't correctly collect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=186) [and show coverage in header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=188) [files and this was a problem for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=189) [a code basis that used C++ as in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=191) [that language, you can have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=194) [good portion of your executable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=195) [code in headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=197) [So, if you're one of the people](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=199) [affected, you'll be happy to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=200) [hear that Xcode now correctly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=202) [gathers and presents code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=204) [coverage for both implementation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=205) [and header files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=207) [Now let's talk about code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=209) [coverage features.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=210) [The first one is target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=213) [selection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=214) [This is a new option to control](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=216) [not only whether code coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=218) [is enabled or disabled but when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=219) [it's enabled, you actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=222) [control which targets are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=224) [included.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=226) [This can be important if your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=228) [project builds third-party](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=229) [dependencies that you're not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=230) [expected to cover by your tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=232) [or if you work at a company](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=234) [where another team supplies you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=236) [with a framework that they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=237) [already tested.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=239) [You can customize the included](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=240) [targets in this scheme's test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=243) [action under options.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=245) [This means that it can continue](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=248) [to include all targets in code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=250) [coverage or only hand pick some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=252) [of them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=254) [Now in the name of more powerful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=257) [workflows, we created a new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=259) [command-line tool called xccov.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=260) [It can be integrated into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=262) [automation scripts easily, as it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=265) [produces both human readable and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=267) [machine parseable outputs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=269) [And at the high level, it gives](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=272) [you detailed view of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=273) [coverage data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=276) [So, I've mentioned the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=277) [coverage data a couple of times,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=278) [let's look at how it looks under](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=280) [the hood.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=281) [When tests are run with code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=283) [coverage enabled, Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=285) [generates two files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=287) [First is the coverage report, or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=289) [the xccovreport file extension,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=292) [and that contains the line --](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=294) [line coverage percentages for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=296) [each target, source file, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=298) [each target, source file, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=298) [function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=300) [The second one is the coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=301) [archive and that contains the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=304) [raw execution counts for each of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=306) [the files in the report.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=308) [And these coverage files live in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=313) [your project's derived data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=314) [directory and additionally, if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=316) [you pass the result bundle path](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=318) [flag to Xcode build, these files](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=321) [will be placed into the result](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=323) [bundle as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=325) [Let's look at an example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=328) [Here, we use xccov to view the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=330) [coverage data of our Hello World](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=331) [app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=335) [We can see the overall coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=336) [for each target but also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=337) [detailed coverage for each file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=340) [and even for each method.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=342) [And of course, by passing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=345) [right flag identification, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=348) [can get the same exact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=351) [information in JSON.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=352) [This can make it much easier to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=354) [integrate with other tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=357) [So, as you can see, xccov is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=360) [very flexible, so I would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=361) [encourage you to explore its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=362) [documentation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=364) [Now we talked about use --](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=364) [viewing code coverage on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=369) [command line but the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=371) [convenient way is still going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=373) [be to see it right next to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=374) [source code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=376) [You control whether code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=377) [coverage is shown by selecting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=379) [editor, show, or hide code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=382) [coverage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=384) [When you do enable it, you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=388) [see the refreshed look of code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=389) [coverage in the source editor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=391) [The whole line highlights when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=393) [you hover over the execution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=394) [count on the right-hand side.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=396) [And this is just the best way to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=398) [keep an eye on which of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=400) [code is already covered by tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=402) [and which still needs more work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=404) [Now let me show you all of these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=407) [improvements in action.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=409) [So, here I have a project called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=420) [Dev Cast.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=423) [It's a simple messaging app and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=424) [I created the iOS version for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=425) [this talk last year.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=427) [So, this year, I wanted to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=428) [create a Mac version.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=430) [But I wanted to share the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=432) [business logic between the iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=433) [and Mac versions, so I put it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=434) [all into a framework called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=436) [DevCastkit and today, my goal is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=437) [to explore and maybe improve the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=440) [code coverage of this framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=442) [So, right now, I'm not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=445) [collecting code coverage, so I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=447) [just need to turn it on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=448) [I'll do that by selecting the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=450) [scheme, selecting edit scheme,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=452) [go into the test action, go into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=455) [options.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=458) [And down here, I will just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=459) [enable code coverage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=462) [Now I will run my test by going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=467) [to product test.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=469) [Right now, my framework, my test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=471) [bundle and my Mac app are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=473) [getting built, and my tests are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=475) [being run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=477) [Now the test finished so let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=478) [Now the test finished so let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=478) [look at the results.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=481) [We'll go to the report navigator](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=482) [and to the latest coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=484) [reports.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=486) [Here, I can see that I have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=488) [-- both targets, the Mac app and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=491) [also the framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=494) [Now the Mac app only serves as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=495) [container for running tests, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=498) [I'm not really concerned about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=500) [its low code coverage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=502) [In fact, I would actually not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=503) [want to see it in this report at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=505) [all.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=506) [So, I can do that by editing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=507) [scheme again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=510) [And in the test action, here --](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=511) [instead of gathering coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=517) [for all targets, I'll change to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=518) [just some targets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=520) [This gives me a hard cover list](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=522) [and I will add just the target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=524) [that I'm interested in, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=527) [the framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=528) [Now I will rerun my tests and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=533) [look at the updated coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=539) [look at the updated coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=539) [reports.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=541) [So, now you can see that I only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=543) [have the framework in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=544) [coverage report.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=545) [This is what I wanted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=546) [So, now I can just focus on this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=548) [one target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=549) [So, looking at the coverage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=551) [percentage, is at 84%, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=552) [not bad, but I know I can do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=555) [better.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=556) [So, to understand which of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=557) [files need more attention, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=558) [will disclose the target and see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=561) [that the first file is only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=564) [covered at about 66%.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=565) [So, I'll jump to the file by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=568) [clicking on the arrow here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=570) [And here, I'll look at my local](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=571) [server class.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=576) [On the right-hand side, I can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=578) [see the execution counts for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=579) [each region of the code so I can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=581) [see that all of the executable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=583) [parts of my class are covered by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=584) [tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=587) [This is good.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=587) [Unfortunately, my convenience](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=589) [function, get recent messages,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=590) [hasn't been called for my tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=592) [at all, so I don't know if it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=594) [working properly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=595) [To fix that, I'll go to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=597) [corresponding test file and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=599) [corresponding test file and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=599) [will add a new test.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=603) [This test just puts a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=607) [messages into a local server and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=609) [then I call, get recent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=611) [messages, on it to verify that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=612) [it returns what I'm expecting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=614) [So, with the new test added, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=617) [will rerun my tests one more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=619) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=621) [So, great, the test finished.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=625) [I'll go to the coverage report](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=627) [again and now when I focus on my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=629) [framework, I can see that it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=632) [covered at 100%.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=633) [This is exactly what I wanted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=635) [So, we saw how I used the target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=638) [selection feature to only focus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=640) [on some of the targets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=642) [Then I used the coverage report](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=644) [to know exactly which file to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=645) [focus on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=647) [And finally, I used the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=648) [coverage integration in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=650) [source editor to know exactly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=651) [which part of my code still](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=653) [needs covering.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=654) [So, this is the improved code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=655) [coverage in Xcode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=657) [So, moving on from code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=666) [coverage, let's talk about some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=668) [new features in Xcode 10.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=670) [First, we'll see how we can now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=673) [better select and order our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=674) [tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=679) [Now why is this important?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=679) [Well, not all the tests in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=680) [suite serve the same purpose.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=683) [You might want to run all 1000](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=686) [of your quick running unit tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=688) [before every single commit but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=690) [only run your 10 long-running UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=692) [tests at night.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=694) [And you can achieve this today](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=696) [by disabling specific tests in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=698) [your scheme.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=700) [The scheme encodes the list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=702) [disabled tests so that XE test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=704) [knows which tests to skip.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=707) [And this has an interesting side](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=709) [effect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=711) [Whenever you write a new test,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=712) [it's automatically added to all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=714) [the schemes that contain the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=715) [corresponding test targets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=717) [But if that's not what you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=719) [But if that's not what you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=719) [wanted, you have to go through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=720) [all those schemes and disable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=721) [the test there manually.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=722) [So, in Xcode 10, we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=725) [introducing a new mode for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=727) [schemes to instead, encode the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=728) [tests to run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=729) [If you switch your scheme to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=732) [that mode, only the test that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=733) [you hand pick will run in that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=735) [scheme.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=740) [You control this mode in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=741) [scheme editors test action,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=742) [where in the list of test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=744) [targets, there's a new options](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=746) [pop-up, where you can declare](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=747) [whether the scheme should](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=749) [automatically include new tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=750) [or not.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=751) [This way, some of your schemes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=753) [can continue to run any new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=754) [tests you write, while other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=756) [schemes will only run a list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=758) [hand-picked tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=760) [So, we've discussed how we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=763) [better control which of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=765) [tests run and when, but the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=767) [order of our tests can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=768) [significant too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=770) [By default, tests in Xcode are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=772) [sorted by their name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=775) [This means that unless you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=777) [rename your tests, they will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=778) [rename your tests, they will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=778) [always run in the same order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=780) [But determinism can be a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=782) [double-edged sword.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=784) [It can make it easy to miss](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=785) [bugs, where one of your tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=786) [implicitly depends on another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=788) [one running before it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=790) [Let's look at an example of when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=793) [this can happen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=794) [Imagine you have tests A, B, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=796) [C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=798) [They always run in this order](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=799) [and they always pass.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=800) [But when you look at your tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=802) [in detail, you realize that test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=804) [A creates a database.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=806) [Then test B goes and writes some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=809) [data into it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=811) [And then finally, test C goes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=813) [and deletes it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=816) [Now these tests only pass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=820) [because they run in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=822) [specific order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=823) [But if you tried to shuffle them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=824) [around, for example, by renaming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=826) [them, then you try to run them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=828) [again, you might have test B](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=830) [writing into a database that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=832) [doesn't exist and your tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=834) [would just fail.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=835) [So, to prevent issues like this,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=837) [So, to prevent issues like this,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=837) [your tests should always](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=840) [correctly set up and tear down](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=842) [their own state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=844) [Not only will they be more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=846) [reliable, but it will also make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=847) [it possible for your tests to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=849) [run independently of all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=850) [other ones and this can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=852) [really beneficial during](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=854) [development and debugging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=855) [So, to help you ensure that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=857) [there are no unintentional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=859) [dependencies between your tests,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=861) [in Xcode 10, we're introducing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=863) [the new test randomization mode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=865) [If you turn it on, your tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=867) [will be randomly shuffled before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=870) [every time they're run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=871) [And if your tests still pass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=873) [with this mode on, you can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=876) [more confident that they are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=877) [really robust and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=878) [self-contained.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=879) [Randomization mode can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=882) [enabled in the scheme editor,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=884) [just like the other features](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=885) [we've seen today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=886) [So, these are the new test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=888) [selection and ordering features](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=891) [in Xcode 10.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=893) [Now I'm really excited about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=895) [what comes next.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=897) [To tell you all about the new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=899) [To tell you all about the new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=899) [parallel testing features in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=900) [Xcode, I would like to welcome](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=901) [Ethan Vaughan to the stage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=903) [Ethan.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=904) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=905) [&gt;&gt; Thanks, Honza.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=912) [So, many of you have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=914) [development cycle that looks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=916) [like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=918) [You write some code, you debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=919) [it, and then you run your tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=921) [before you commit and push your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=924) [changes to the repository.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=925) [By running your tests before you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=927) [push, you can catch regressions](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=929) [before they ever make it into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=931) [build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=932) [However, one of the bottlenecks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=935) [in this process can be just how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=937) [long it takes to run your tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=939) [Some of you have test suites](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=942) [that take on the order of 30](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=943) [minutes to hours to run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=945) [And if you have to wait that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=947) [long before you can confidently](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=949) [land your work, that represents](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=950) [a serious bottleneck in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=952) [workflow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=954) [We want to make sure that your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=955) [tests run as fast as possible in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=957) [order to shorten this critical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=959) [order to shorten this critical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=959) [part of the development cycle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=961) [So, last year, we introduced a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=963) [feature in Xcode 9 to help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=964) [run tests faster, it's called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=968) [Parallel Destination Testing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=970) [This is the ability to run all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=972) [of your tests on multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=973) [destinations at the same time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=975) [And you do this from the command](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=978) [line by passing multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=979) [destinations specifiers to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=980) [xcodebuild.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=982) [Previously, if you were to run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=985) [your tests, let's say on an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=987) [iPhone X and an iPad, xcodebuild](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=988) [would run all of the tests on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=991) [the iPhone X and then all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=993) [tests on the iPad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=995) [Neither device would be running](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=997) [tests at the same time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=998) [But in Xcode 9, we changed this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1002) [behavior so that by default,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1004) [tests run concurrently on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1006) [devices and this can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1007) [dramatically shorten the overall](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1009) [execution time, which is great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1010) [However, there are some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1014) [limitations to this approach.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1015) [First, it's only beneficial if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1018) [First, it's only beneficial if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1018) [you test on multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1020) [destinations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1021) [If you just want to run unit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1023) [tests for your Mac app, for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1024) [example, this doesn't help.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1026) [Also, it's only available from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1029) [xcodebuild, so it's primarily](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1031) [useful in the context of a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1033) [continuous integration](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1035) [environment, like Xcode Server](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1036) [or Jenkins.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1038) [I'm excited to tell you about a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1040) [new way to run tests faster than](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1042) [ever called Parallel Distributed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1044) [Testing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1046) [With Parallel Distributed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1048) [Testing, you can execute tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1049) [in parallel on a single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1051) [destination.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1052) [Previously, testing on a single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1054) [destination looks like this, a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1056) [continuous straight line with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1058) [one test executing after the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1060) [other.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1062) [Parallel Distributed Testing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1064) [allows you to run tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1065) [simultaneously so that testing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1066) [now looks like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1068) [In addition, it's supported both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1071) [from Xcode, as well as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1072) [xcodebuild, so no matter where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1073) [you run your tests, you'll get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1075) [the best performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1077) [Now in order to tell you about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1078) [Now in order to tell you about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1078) [how Xcode runs your tests in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1081) [parallel, we first have to talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1083) [about how your tests execute at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1084) [all, what happens at runtime.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1086) [Let's start with unit tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1090) [Your unit tests get compiled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1093) [into a test bundle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1095) [At runtime, Xcode launches an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1097) [instance of your app which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1100) [serves as a test runner.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1101) [The runner loads the test bundle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1104) [and executes all of its tests,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1106) [so that's how unit tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1109) [execute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1110) [What about UI tests?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1112) [For UI, tests the story is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1113) [similar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1115) [Your tests still get compiled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1116) [into a bundle, but the bundle is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1117) [loaded by a custom app that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1120) [Xcode creates.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1121) [Your app no longer runs the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1123) [tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1125) [Instead, the tests automate your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1126) [app by launching it and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1128) [interacting with different parts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1131) [of its UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1132) [If you'd like to learn more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1135) [about this process, I'd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1136) [encourage you to check out our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1137) [session from 2016, where we go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1138) [session from 2016, where we go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1138) [into even more detail.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1141) [So, now that we understand how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1144) [our tests execute, we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1145) [finally talk about how Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1147) [runs them in parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1149) [Just like before, Xcode will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1151) [launch a test runner to execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1153) [our tests but instead of just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1155) [launching a single runner, Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1157) [will launch multiple runners,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1160) [each of which executes a subset](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1162) [of the tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1164) [In fact, Xcode will dynamically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1166) [distribute tests to the runners](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1168) [in order to get the best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1170) [utilization of the course on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1171) [your machine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1172) [Let's go into more detail.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1173) [When Xcode distributes tests to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1178) [the runners, it does so by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1179) [class.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1181) [Each runner receives a test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1183) [class to execute and it'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1185) [execute that test class before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1186) [going on to execute another one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1188) [And then testing finishes once](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1191) [all the classes have executed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1192) [Now you might be wondering why](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1195) [Xcode distributes tests by class](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1198) [instead of distributing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1200) [individual test methods to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1201) [runners.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1203) [There are a couple reasons for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1204) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1205) [First, there may be hidden](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1207) [dependencies between the tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1209) [in a class, like Honza talked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1210) [about earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1212) [If Xcode were to take the tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1213) [in a class and distribute them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1215) [to different runners, it could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1217) [lead to hard to diagnose test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1219) [failures.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1220) [Second, each test class has a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1221) [class level set up and tear down](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1225) [method, which may perform](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1227) [expensive computation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1229) [By limiting the tests in a class](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1231) [to a single runner, XE tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1233) [only has to invoke these methods](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1235) [once, which can save precious](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1237) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1239) [Now I'd like to talk about some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1240) [specifics to parallel testing on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1243) [the simulator.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1245) [When you run tests in parallel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1248) [on the simulator, Xcode starts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1249) [by taking the simulator that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1251) [you've selected and creating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1253) [multiple distinct copies or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1255) [clones of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1257) [These clones are identical to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1258) [These clones are identical to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1258) [the original simulator at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1260) [time that they're created.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1262) [And Xcode will automatically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1264) [create and delete these clones,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1266) [as necessary.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1267) [After cloning the simulator](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1270) [several times, Xcode then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1271) [launches a test runner on each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1273) [clone and that runner then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1275) [begins executing a test class,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1276) [like we talked about earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1279) [Now the fact that your tests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1280) [execute on different clones of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1284) [the simulator has some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1285) [implications that you should be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1286) [aware of.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1288) [First, the original simulator is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1290) [not used during testing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1293) [Instead, it serves as a sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1295) [template simulator.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1297) [You can configure it with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1299) [settings and the content that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1300) [you want and then that content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1301) [gets copied over to the clones](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1303) [when they're created.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1304) [Next, there will be multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1306) [copies of your app, one per](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1309) [clone, and each copy has its own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1311) [data container.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1314) [This means that if you have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1316) [test class that modifies files](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1317) [on disk, you can't expect those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1319) [on disk, you can't expect those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1319) [file modifications to be visible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1321) [to another test class because it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1322) [could have access to a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1324) [completely separate data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1325) [container.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1326) [In practice, the fact that class](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1327) [is executed on different clones](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1330) [will likely be invisible to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1332) [tests, but it's something to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1334) [aware of.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1336) [So, where can you run tests in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1338) [parallel?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1340) [You can run unit tests in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1341) [parallel on macOS, as well as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1342) [unit and UI tests in parallel on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1345) [the iOS and tvOS simulators.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1347) [And with that, I'd like to give](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1349) [you a demo of Parallel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1351) [Distributed Testing in action.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1353) [All right, so this is the Solar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1368) [System app, which you may have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1369) [seen at some of the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1371) [sessions here at Dub-Dub.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1372) [As one of the developers of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1374) [app, I want to run all of my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1375) [tests before committing and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1377) [pushing my changes to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1378) [repository.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1379) [repository.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1379) [However, as I add more and more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1381) [tests, this is starting to take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1382) [longer and longer, and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1384) [becoming a bottleneck in my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1385) [workflow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1386) [So, let's see how parallel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1388) [testing can help.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1389) [I'll go ahead and switch over to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1391) [the Xcode project and I already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1392) [ran my tests and I want to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1395) [how long they took to run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1396) [All right, let's go back to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1401) [test report.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1403) [So, here, you can see next to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1405) [each method, we show exactly how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1406) [long that method took to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1408) [execute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1409) [Next, for each test class, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1411) [show the percentage of passing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1413) [and failing tests, as well as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1415) [how long the test class took to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1417) [execute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1418) [And finally, in the top right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1420) [corner, you can see exactly how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1421) [long all of your tests took to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1423) [run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1425) [So, here, we can see that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1426) [tests took 14 seconds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1427) [Now I'd like to enable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1429) [parallelization, which I can do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1430) [by going to the scheme.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1432) [So, I'll select the scheme and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1434) [choose edit scheme.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1435) [Next, I'll click the test action](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1437) [and I'll click the options](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1440) [button next to my test target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1441) [Finally, I'll select the execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1444) [in parallel checkbox and that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1446) [all I need to do to enable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1448) [parallel testing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1450) [So, let's go ahead and run our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1451) [tests now by choosing product](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1453) [tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1459) [So, I want you to look at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1459) [doc.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1460) [Xcode launches multiple copies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1461) [of our Mac app to run our unit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1463) [tests in parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1465) [So, great, it looks like that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1467) [finished.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1468) [So, now, let's go back to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1469) [report and select the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1471) [recent report.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1473) [So, whereas previously, our test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1475) [took 14 seconds to run, now they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1477) [only take 5 seconds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1479) [So, just by enabling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1481) [parallelization, we've seen the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1482) [greater than 50% improvement in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1483) [test execution time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1485) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1487) [So, the Solar System app isn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1493) [just available for the Mac, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1495) [also has an iOS companion.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1497) [And one of my responsibilities](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1499) [And one of my responsibilities](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1499) [was to write a UI test suite to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1501) [exercise the various screens of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1503) [my iOS app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1505) [Now I already enabled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1507) [parallelization for the iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1508) [scheme, so I'll go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1510) [just switch to that now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1511) [And then I'll run tests by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1513) [choosing product, test.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1518) [Now we'll go ahead and switch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1520) [over to the simulator.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1524) [So, here, you can see that Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1526) [has created multiple clones of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1528) [the simulator that I selected,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1530) [and these clones are named after](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1532) [the original simulator so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1534) [they're easy to identify.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1536) [And on each simulator, Xcode has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1539) [launched a test runner and each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1541) [runner is executing a different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1544) [test class in my suite.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1545) [Now while my tests are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1560) [executing, I'm going to switch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1561) [back to Xcode and show you the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1562) [test log.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1565) [You can find the test log](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1566) [associated with the test report.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1568) [The log is a great place to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1571) [how your classes are being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1573) [distributed to the different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1574) [runners.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1575) [You can see an entry in the log](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1577) [for each runner and beneath a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1580) [given runner, you can see the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1582) [exact test class that it is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1584) [currently executing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1585) [So, when the tests are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1587) [completely finished, this is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1588) [great place to see how your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1590) [classes were distributed, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1592) [gives you a picture of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1593) [overall parallelization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1594) [And with that, let's switch back](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1596) [to the slides.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1598) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1600) [So, let's briefly recap what we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1608) [learned in the demo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1609) [First, we saw how to enable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1611) [parallelization in the scheme](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1613) [editor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1615) [Next, we saw how to view results](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1617) [in the test report, as well as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1619) [in the test report, as well as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1619) [how our classes are distributed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1621) [in the test log.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1622) [Then we saw Xcode launch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1625) [multiple instances of our Mac](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1627) [app to run unit tests in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1629) [parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1630) [And finally, we saw multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1632) [clones of the simulator running](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1634) [our UI tests in parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1636) [Like I mentioned earlier,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1640) [xcodebuild has great support for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1642) [parallel testing as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1644) [We've added some new command](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1646) [line options that allow you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1647) [control this behavior and I'd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1649) [like to point out two of those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1650) [now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1651) [First, we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1653) [parallel-testing-worker-count,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1655) [which allows you to control the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1657) [exact number of workers or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1658) [runners that Xcode should launch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1660) [during parallel testing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1662) [Normally, Xcode tries to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1664) [determine an optimal number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1666) [runners based off of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1667) [resources of your machine, as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1669) [well as the workload.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1671) [This means that on a higher core](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1672) [machine, you will likely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1674) [experience more runners.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1675) [But if you find that the default](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1678) [number isn't working well for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1679) [number isn't working well for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1679) [you, you can override it using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1680) [this command line option.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1682) [Next, we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1684) [parallel-testing-enabled, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1686) [allows you to override the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1688) [setting in the scheme to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1689) [explicitly turn parallel testing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1690) [on or off.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1692) [Now for the most part, all you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1696) [need to do to get the benefits](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1698) [of parallel testing is just to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1699) [turn it on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1701) [But here are few tips and tricks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1702) [to help you get the most out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1704) [this feature.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1705) [First, consider splitting a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1707) [long-running test class into two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1709) [classes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1711) [Because the test classes execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1713) [in parallel, testing will never](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1716) [run faster than the longest](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1718) [running class.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1719) [When you run tests in parallel,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1721) [you may notice a situation like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1723) [this, where one test class](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1725) [dominates the overall execution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1727) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1730) [If you take that class and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1730) [divide it up, Xcode can more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1731) [evenly distribute the work of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1734) [test execution between the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1735) [different runners, which can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1737) [shorten the overall execution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1739) [shorten the overall execution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1739) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1740) [Now don't feel like you need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1742) [go and take all of your classes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1743) [and divide them up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1744) [That shouldn't be necessary but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1746) [if you notice a bottleneck like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1748) [this, this is something to try.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1749) [Next, put performance tests into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1753) [their own bundle with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1756) [parallelization disabled.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1758) [This may seem counterintuitive,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1760) [but performance tests are very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1762) [sensitive to system activity so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1764) [if you run them in parallel with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1767) [each other, they'll likely fail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1768) [to meet their baselines.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1770) [And finally, understand which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1771) [tests are not safe for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1775) [parallelization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1776) [Most tests will be fine when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1778) [run them in parallel, but if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1780) [your tests access a shared](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1781) [system resource, like a file or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1783) [a database, you may need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1785) [introduce explicit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1786) [synchronization to allow them to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1788) [run concurrently.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1789) [Speaking of testing tips and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1791) [tricks, if you'd like to learn](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1793) [more about how to test your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1794) [code, I'd encourage you to check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1796) [out our session on Friday hosted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1798) [out our session on Friday hosted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1798) [by my colleague Stuart and Brian](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1800) [[assumed spellings].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1801) [You won't want to miss it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1801) [To wrap up, we started today's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1805) [talk with code coverage and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1807) [new improvements to performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1809) [and accuracy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1811) [Next, we talked about new test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1813) [selection and ordering features,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1815) [which allow you to control](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1817) [exactly which tests run, as well](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1818) [as the order in which they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1821) [run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1822) [And finally, we talked about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1823) [Parallel Distributed Testing,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1825) [which allows you to distribute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1827) [test classes between different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1828) [runners to execute them in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1829) [parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1831) [For more information, I'd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1833) [encourage you to download our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1834) [slides from developer.apple.com](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1835) [and come see us in the labs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1838) [later this afternoon.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1839) [Have a great WWDC, everyone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1841) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/403/?time=1843)