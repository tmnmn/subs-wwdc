# Using Accelerate and simd

## Summary
Learn how to use sophisticated Signal and Image Processing techniques to bring higher performance to your apps while lowering battery consumption.  See compelling use cases for the Accelerate framework with interactive demos. Explore using simd—a valuable addition that effortlessly brings vector programming to your apps.

## Info
* Frameworks
* WWDC 2018 - Session 701 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/

## Text
 [（使用Accelerate
和simd 演讲701）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=17) [早上好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=22) [大家好吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=23) [很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=25) [我叫Matthew Badin
是Apple的工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=29) [欢迎来到“使用Accelerate
和simd”演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=32) [我和同事Luke Chang
今天很兴奋](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=36) [我们将与你讨论
Accelerate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=39) [及其关联框架中提供的优秀API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=41) [我们先对Accelerate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=45) [及其中包含的一些高性能库进行概述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=48) [然后我们将深入讨论一些库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=51) [我们首先从vDSP开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=55) [我们有两个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=58) [我们有两个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=58) [首先 我们会告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=60) [如何从噪音中提取信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=62) [然后我们会向你展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=64) [如何从图像中移除某些类型的痕迹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=65) [接着我们将看看simd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=69) [我们将向你展示如何使用四元数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=71) [来表示三维旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=73) [之后我将把话筒
交给同事Luke Chang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=78) [他将向你展示
你可以使用vImage做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=80) [一些有趣的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=82) [所以 让我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=84) [你可能会问自己](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=89) [Accelerate到底是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=91) [Accelerate的主要目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=95) [是提供数以千计的低级数学原语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=97) [我们在所有Apple平台上
提供这些原语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=101) [所以这不仅包括iOS和MacOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=104) [同时包括watchOS和tvOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=107) [这些原语中的大部分都是
经过对处理器的微架构手动调优的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=111) [这意味着我们将得到出色的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=116) [这种性能直接转化为节省的能量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=119) [这种性能直接转化为节省的能量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=119) [因此若你是app开发者
并使用Accelerate框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=124) [你的app将不仅运行更快
而且还会更省电](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=127) [这意味着你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=131) [将会在总体上有更好的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=132) [由于我们提供了如此多的原语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=138) [我们发现将它们分类为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=141) [领域特定库会非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=143) [例如 我们将所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=146) [信号处理原语集中到vDSP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=148) [因此这里面有你的FFT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=152) [或DFT和DCT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=154) [即你的快速傅里叶变换
以及离散余弦变换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=155) [VImage包含图像处理原语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=161) [如果你正在进行色彩空间转换
这就是为你准备的库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=164) [VForce
包含超越函数的矢量版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=169) [例如正弦和余弦](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=172) [我们也支持密集线性代数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=176) [以及稀疏线性代数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=179) [以及稀疏线性代数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=179) [我们有一个叫做BNNS的
专用神经网络库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=182) [它代表“基础神经网络子程序”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=186) [有些库不是
Accelerate框架的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=189) [但与其密切相关
我们发现这些库非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=192) [包括像simd这样的库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=195) [它是CPU的矢量编程辅助工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=197) [以及Compression](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=200) [它包含几种不同的无损数据压缩算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=201) [我们来看看我们的第一个库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=206) [我们先看看vDSP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=208) [vDSP是最先进的信号处理库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=211) [它包含了种类广泛的信号处理原语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=214) [其包括数组上的基本算术运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=217) [比如加法和减法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=220) [以及更复杂的操作
如卷积和FFT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=222) [如果你是成功的app开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=229) [也许你在过去避开了FFT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=230) [我想向你展示我们如何通过
Accelerate简化其使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=233) [只需几行代码就可以完成这项工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=236) [我这有一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=239) [我这有一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=239) [我将向你展示如何从噪声中提取信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=240) [我们这里有一个音频信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=254) [这是基带信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=256) [我们还没有对其添加任何噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=258) [你会注意到底部有两个滑块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=260) [在左下角有一个滑块
可以让我添加噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=262) [你可以看到它的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=267) [这是第二个滑块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=270) [它可以让我消除这种噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=272) [它被称为阈值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=274) [你还会注意到右下角有一个切换开关](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=277) [这让我可以在不同的域下观察它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=280) [目前我们在时域下看这个信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=283) [我们要做一些分析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=287) [现在在频域下看这个信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=289) [你可以看到左侧的所有尖峰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=293) [这些是信号的频率分量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=295) [你还会注意到蓝色条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=299) [你还会注意到蓝色条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=299) [蓝色条是阈值滑块
你可以看到我能够移动它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=302) [我现在要给信号增加一些噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=308) [我们多添加一些噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=313) [你可以看到我感兴趣的信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=318) [由左边的峰值表示
或者以另一种方式来看待它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=320) [是那些高度最高的尖峰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=325) [我们添加的噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=327) [其类型为背景噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=328) [所以它是均匀分布到各处的尖峰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=331) [但它们是低级尖峰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=334) [现在我要消除这些噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=337) [我的方法是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=339) [将此阈值略微调高一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=340) [当我这样做时
幕后发生的情况是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=344) [我们正在识别任何
低于此阈值的频率分量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=347) [并将其删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=350) [或者说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=352) [任何高度低于这个蓝色条的尖峰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=353) [我们将视其为噪音并将其删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=357) [所以如果我继续调高它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=361) [最终我会消除所有的噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=366) [如果我回到时域视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=370) [你可以看到我已经删除了噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=371) [如果你不信我 我们可以删除阈值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=374) [这就是所有噪声仍然存在的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=377) [告诉你我们如何做到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=382) [从高层角度来说
我们要做的是先对信号进行分析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=389) [这就是开关的作用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=393) [然后我们将识别代表噪音的频率分量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=396) [并将其移除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=398) [完成这步之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=401) [我们要重建音频信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=402) [我们来看一些代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=405) [这里我们要用到的是
离散余弦变换或者说DCT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=410) [你可在此看到
DCT_CreateSetup](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=415) [这个上下文将描述
我们要做的工作类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=419) [这个上下文将描述
我们要做的工作类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=419) [以及为我们分配空间来完成这项工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=423) [在这个例子中
我们将使用一个二类DCT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=426) [然后我们将把这个上下文
传递给一个执行函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=430) [这将实际执行此工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=436) [当我们执行了分析后
我们现在想要消除噪音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=441) [这就是魔术发生的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=444) [这个例程将会识别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=447) [任何小于该阈值的频率分量
并使其变为零](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=449) [这将把它清除出去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=453) [完成这步之后
我们要重建音频信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=456) [我们同样需要使用
CreateSetup创建上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=463) [在这个例子中
我们将使用三类DCT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=468) [来重建信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=471) [然后我们要将这个上下文传给
DCT_Execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=477) [然后我们要将这个上下文传给
DCT_Execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=477) [这实际上将执行重建音频信号的工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=480) [我们向你展示的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=485) [你如何使用vDSP从音频信号中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=488) [移除某些类型噪音的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=490) [我还想向你展示如何通过vDSP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=493) [移除图像中的某些类型的噪声的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=494) [在这个例子中
我们想要恢复旧报纸的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=500) [我们所做的是拍摄了这张图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=512) [并对其使用双色屏处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=515) [这可以代表一张旧报纸的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=519) [我们要做的就是移除这种效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=521) [我们将尝试移除你看到的痕迹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=525) [目前我们处于关闭状态
所以我们没有做任何事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=528) [我们要做的是对这个屏幕取样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=531) [然后从该样本中创建一个滤罩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=534) [然后将其应用于图像
以尝试将噪音删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=536) [让我向你展示第一次尝试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=539) [让我向你展示第一次尝试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=539) [我们所做的是我们识别了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=544) [某个阈值的频率分量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=547) [任何高于该阈值的频率分量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=550) [我们都将会删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=555) [你看 如果我们设置的阈值太低](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=557) [我们不仅移除了痕迹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=559) [也移除了图片的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=562) [如果我们设置得太高](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=567) [你可以看到这没有任何效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=572) [中等程度看起来不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=578) [中等程度似乎能够正确识别
图像中的痕迹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=580) [且不至于损坏太多的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=585) [告诉你我们如何做到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=588) [从更高层面来说
我们要做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=595) [我们要对图像和样本执行FFT运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=596) [我们要对图像和样本执行FFT运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=596) [然后我们将从该样本创建一个滤罩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=601) [并将其应用于图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=603) [一旦完成这个步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=607) [我们就可以重建原始图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=608) [我们来看一些代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=610) [我们要做一个FFT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=614) [这意味着它必须是二次幂](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=618) [这就是你看到log2调用的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=620) [1024x1024是图片的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=622) [然后我们将它传递给
fft2d_zrop函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=628) [这里的参数可不少](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=631) [这里的重点是
op代表空间不足](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=632) [所以我们将不得不创建
一些临时空间来存储结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=635) [我们将把它存储在这个复数结构中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=641) [这实际上是说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=643) [我们将把复数存储在两个数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=645) [实数部分存储在一个数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=648) [虚数部分存在第二个数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=649) [我们还需要指定一个方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=652) [这例子中
我们要做一个正向FFT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=654) [（频率移除）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=659) [（频率移除）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=659) [现在 痕迹移除技术更先进一点了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=661) [所以我只会在较高的层面讨论它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=666) [我建议你下载示例app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=669) [它现在可以在线下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=670) [而且其中每个例程
都被收录在vDSP文档中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=672) [我们拥有出色的在线文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=676) [从高层角度来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=680) [我们要做的是识别频率分量的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=681) [在这个例子中即样本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=685) [然后我们将确定要删除的分量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=687) [接着我们将从中创建一个滤罩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=693) [一旦完成这些步骤
我们就将这个滤罩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=696) [应用到图片上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=698) [实际上我们做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=701) [我们将想要删除的部分乘以0](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=702) [而将想要保留的分量乘以1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=705) [我们再次使用zrop来重建图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=712) [由于这是一个FFT
我们可以重用这个上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=714) [在这个例子中有一个关键细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=721) [即我们要将图像存储在两个数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=723) [因为这是一个复数结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=726) [其中偶数像素将保存在实数数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=728) [而奇数像素保存在虚数数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=730) [我们还要指定一个方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=735) [这次我们将使用逆FFT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=736) [现在我想稍微换个挡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=739) [刚才我们向你展示了两个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=741) [我们有两个vDSP的工作示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=746) [然后我们退一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=749) [向你展示了我们如何创建这些示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=750) [我们后退一步向你展示了
它的每个构件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=754) [对于下一个库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=757) [我想要做的是从基本组件开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=758) [我想逐步达到我们的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=761) [我们来看看simd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=763) [我们将从基本的低级原语开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=765) [我们将要逐步实现旋转效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=767) [在这个例子中是对3D对象的旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=770) [从高层角度来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=774) [simd是矢量处理单元的抽象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=777) [它可以让你声明向量和矩阵对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=780) [然后你可以对这些对象执行操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=785) [这将直接映射到处理器的矢量硬件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=787) [我们来看一个代码例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=791) [我们这里要做的是取两个数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=796) [计算其元素的平均值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=798) [所以我们将遍历其中每个标量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=800) [将它们加在一起再除以二](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=803) [这将会非常缓慢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=807) [另一种方法 你可将这些数组声明为
simd_float4矢量类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=811) [然后我们可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=816) [对这些对象进行基本的算术运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=818) [因此你不仅可以更自然地表达计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=823) [而且它也会尽可能快地运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=825) [这将适用于所有Apple平台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=829) [simd具有大量的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=835) [除了矢量和矩阵对象之外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=838) [除了矢量和矩阵对象之外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=838) [它还允许你对这些对象执行算术运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=842) [它还具有扩展功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=848) [例如 点积和clamp函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=849) [它也支持超越函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=854) [例如正弦和余弦](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=856) [以及四元数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=859) [四元数在表示三维旋转时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=861) [是非常有用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=862) [我想多谈一点这个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=865) [我们来看一段代码示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=869) [这里有很多东西要展开讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=873) [所以我们从右边开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=875) [这里有一个单位球体
就是这个灰色的球体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=877) [你会注意到这个红点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=880) [这实际上是这个向量的尖端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=883) [我们声明了
simd_float3向量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=885) [我们将x和y分量设置为零](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=888) [并将z分量设置为1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=890) [所以它指向我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=892) [那个红色点代表该向量的尖端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=894) [我们现在要使用四元数
对这个向量进行旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=898) [我们现在要使用四元数
对这个向量进行旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=898) [从技术上来说
我们正在旋转整个场景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=903) [但出于说明的目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=905) [我们说我们正在旋转这个向量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=906) [当使用四元数进行旋转时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=910) [你需要指定一个轴和旋转角度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=912) [或者换一种说法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=915) [你在旋转什么以及旋转了多少](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=916) [我们要围绕X轴旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=920) [我们将向上旋转三个pi的弧度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=921) [你可通过调用simd_act
函数来应用此旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=927) [这将在该向量上执行四元数的动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=931) [并返回一个
rotatedVector](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=934) [现在我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=937) [通常情况下
你不会对沿单轴旋转感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=947) [你通常要沿多个轴旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=950) [如果你已经熟悉旋转矩阵](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=954) [这将看起来很自然](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=956) [就像旋转矩阵一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=960) [你可以使用乘法来结合旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=961) [并且也像旋转矩阵一样
乘法是非可交换的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=963) [所以这意味着
如果你改变操作数的顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=966) [你将改变旋转的顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=969) [这里我们要做的事情是
向上旋转三个pi的弧度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=973) [然后向右旋转三个pi的弧度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=977) [我们将它们组合成一个单一的旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=979) [你可用四元数和simd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=986) [来做的一些更有趣的事情是插值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=988) [我们支持两种类型的插值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=990) [第一种是Slerp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=994) [它代表球面线性插值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=997) [它实际上有两种变体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1002) [我们有一个
simd_slerp函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1007) [它能找到这两个点之间的最短弧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1008) [这个例子中
是蓝色和绿色之间的弧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1010) [我们还有simd_slerp_longest函数
它会找到最长的圆弧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1013) [所以你会发现它位于单位球体后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1016) [第二种变体是Spline](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1027) [当你有两个以上的旋转时
Spline更有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1029) [例如 在这里我们要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1033) [在一个旋转数组中进行插值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1034) [这里有很多样板代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1037) [我希望你只关注
Spline函数的调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1039) [我们实际上正在做的只是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1044) [遍历每个旋转
并对其调用Spline](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1046) [你不仅要用Spline指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1054) [你希望插入的两个旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1056) [也应该指定上一个和下一个旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1060) [像这个样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1064) [如果你是一个游戏开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1071) [你可能对旋转单独的矢量不感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1072) [你可能对旋转物体感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1075) [我们为你准备了这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1077) [这是一个立方体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1079) [这是一个立方体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1079) [它由多个向量表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1080) [它将经历一连串的八次旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1083) [在左边 我们将使用Slerp来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1085) [跟踪这些旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1087) [右边
我们将用Spline](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1088) [我们来看看Slerp的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1090) [你可以看到
由于这是一个线性插值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1099) [它每改变一次方向
你都会得到这些尖角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1101) [而如果我们看Spline](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1105) [由于它还知道前一轮和下一轮旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1115) [你最终会得到这些圆角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1117) [所以让我们再看一遍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1119) [我非常快速地讨论了所有这些话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1132) [我们来回顾一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1135) [我们首先看了下vDSP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1138) [我们首先看了下vDSP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1138) [并向你展示了两个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1140) [第一个是如何从噪声中提取信号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1141) [第二个是如何从图像中
移除某些类型的痕迹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1144) [然后我们讨论了simd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1148) [我向你展示了如何使用四元数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1150) [来表示三维旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1152) [我现在要将话筒交给
我的同事Luke Chang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1155) [他将向你展示一些
你可以用vImage做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1158) [有趣的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1159) [谢谢你 Matthew](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1166) [大家好 我叫Luke Chang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1170) [我是矢量和数值团队的工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1172) [今天我要谈论vImage
vImage提供了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1175) [以及在你的app
使用vImage是多么容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1179) [只需几行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1182) [你就可以在你的app中
创建引人入胜的视频效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1183) [让我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1187) [VImage是我们的图像处理库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1190) [它有几个组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1194) [第一个组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1196) [是转换函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1197) [转换函数可帮助你
在不同的图像格式之间转换图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1200) [不同的图像格式有不同的优势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1206) [例如](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1210) [RGB格式与显示器上的像素相匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1211) [所以它最适合显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1214) [另一方面 我们有YCbCr图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1217) [这与人类如何感知图像相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1220) [人眼识别亮度 这就是亮度信道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1223) [还有颜色 即色度信道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1228) [而且相机使用
YCbCr格式来捕捉图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1232) [因此转换函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1237) [可帮助你轻松地在这些格式之间
转换图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1238) [我们还有几何函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1243) [几何函数能改变图像的大小或方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1246) [我们有vImageScale](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1252) [它可以放大或缩小图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1254) [我们使用Lanczos算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1257) [因此在操作之后会有高质量的输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1259) [因此在操作之后会有高质量的输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1259) [我们也有vImageRotate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1263) [可以顺时针或逆时针旋转图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1265) [接下来我们还有卷积函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1271) [卷积函数最显着的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1274) [是模糊效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1276) [你到处都能见到模糊效果
在用户界面中或者摄影中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1278) [如果你想将某些东西渐淡到背景中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1283) [你就可以使用模糊函数
模糊效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1286) [接下来是变换函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1291) [变换函数基本上是一个矩阵乘法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1293) [它可以让你在每个像素的
数据通道上进行操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1297) [假设你想增强红色或增强绿色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1301) [你可以用变换函数来做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1304) [形态函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1308) [形态函数改变图像中
物体的大小或形状](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1310) [而不改变图片本身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1315) [我们有vImageErode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1317) [和vImageDilate
来使对象变得更小或更大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1320) [如果你感觉这很冒险](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1325) [你实际上可以为这些函数
提供一个自定义的内核形状](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1327) [vImage侵蚀和扩张函数
会根据你提供的内核](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1331) [来使物体变小或变大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1336) [这些是vImage中的五种工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1340) [现在我想向你展示我们
基于vImage编写的演示app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1342) [来演示你可以使用vImage
获得什么样的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1347) [这里有一个使用后置摄像头](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1353) [捕捉图像的实验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1356) [我们将图像投影到屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1358) [我们现在是实时操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1362) [这是一个直播视频流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1364) [你可以看到那只喝水鸟
正在玫瑰旁边做动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1365) [好 我想向你展示的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1370) [第一个效果是颜色饱和效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1371) [你可以在很多照片编辑软件中
看到这种效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1374) [现在我想突出颜色效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1380) [我可以将此滑块移到右侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1382) [使红色更红 绿色更绿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1389) [在另一边有一朵白玫瑰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1393) [我觉得白玫瑰的颜色
对我来说并不是那么有趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1397) [我想引导我的观众关注其构图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1401) [以及这张图片的对比度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1405) [我可以向左滑动来使图像去饱和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1408) [直到它变成黑白图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1416) [现在色彩在这张图片中不再让人分心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1420) [现在观众可以专注于构图和对比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1423) [好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1428) [所以…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1429) [我们如何做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1430) [我们需要采取几个步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1435) [首先 我们当然必须从相机获取图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1437) [首先 我们当然必须从相机获取图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1437) [然后我们要使用
vImage来应用效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1443) [因此我们必须为vImage的
输入和输出准备缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1448) [然后我们实际调用vImage函数
来应用这些效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1453) [并将输出显示在屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1458) [我们先来讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1462) [如何使用vImage函数
来应用效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1464) [我向你展示的是一种色彩饱和效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1470) [这是计算色彩饱和效果的公式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1473) [我们想要消除像素的偏差](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1477) [并使用乘法来应用饱和效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1480) [然后我们再将偏差放回像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1485) [VImage具有完成此操作的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1489) [即vImageMatrixMultiply](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1493) [vImageMatrixMultiply
需要一个preBias参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1498) [vImageMatrixMultiply
需要一个preBias参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1498) [在这个例子中为-128
以消除偏差](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1501) [由于饱和度是浮点数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1506) [而图像是一个整数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1509) [我们希望先将此饱和度值
转换为定点格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1511) [我们选择Q12作为定点格式
因此令divisor值为0x1000](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1516) [再是postBias参数
其值为128乘以divisor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1522) [以此将偏差放回像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1525) [矩阵本身非常简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1530) [我们所要做的
只是对CbCr信道进行缩放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1533) [所以矩阵本身就是一个缩放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1537) [将CbCr信道与该缩放器相乘](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1539) [有了所需的所有信息
调用vImageMatrixMultiply](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1545) [只需一行代码 一个函数调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1549) [你就可以实现这个饱和效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1553) [现在让我们回到需要采取的其他步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1557) [我们需要从相机拍摄图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1561) [我们如何做到这一点？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1563) [我们需要写一个委托方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1566) [相机给我们的是
一个CVImageBuffer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1568) [因此我们获取这个缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1573) [我们必须确保CPU可以访问
这个缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1575) [这即vImage所在之处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1579) [在我们应用这些效果之后
无论是哪种效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1582) [我们必须解锁
这个像素缓冲区的基地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1586) [以便相机可以重新使用这块内存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1590) [第二步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1596) [我们必须准备
vImage输入和输出缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1597) [我们已经在CVImageBuffer中
保存了这个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1603) [我们需要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1606) [只是获取如高度和宽度等信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1607) [然后我们可以将它打包成
一个vImageBuffer对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1613) [以便它可以被vImage库使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1617) [我们为亮度和色度信道进行这项操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1619) [我们为亮度和色度信道进行这项操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1619) [现在我们需要准备一个输出缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1623) [请记住 我们还没有为输出图像
分配一块内存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1626) [因此我们需要这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1631) [vImage有一个很方便的函数
即vImageBuffer_Init](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1632) [可以做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1636) [给定其高度 宽度和每像素位数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1638) [vImageBuffer_Init
将为你分配一个足够容纳此图像的内存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1643) [然后也会创建一个
vImageBuffer对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1647) [从而可以被vImage库使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1650) [最后一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1655) [是将处理后的图像输出到屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1656) [正如我之前所说的
RGB是最佳显示格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1663) [所以让我们使用转换函数
将YCbCr图像转换为RGB图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1668) [然后 因为用户界面
期望的是CGImage对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1674) [所以我们必须创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1678) [在vImage中有一个方便的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1681) [vImageCreateCGImageFromBuffer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1683) [它能帮助你
基于vImage已有缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1688) [来创建CGImage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1690) [需要注意的一点是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1693) [我们实际上并没有将
图像中的大块数据缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1695) [从一个地方复制到另一个地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1699) [我们只是简单的创建一个
CGImage对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1701) [其向该图像缓冲区添加一个容器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1704) [因此我们只是向其中
填充CGImage需要的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1708) [创建一个CGImage对象
而不是到处复制数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1711) [一旦有了该对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1717) [我们就可以将CGImage对象
发送给imageView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1718) [它就会显示在屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1722) [就这么简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1724) [只需四个步骤
你就可以创建自己的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1726) [我们向你展示了饱和效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1730) [现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1731) [我们还可以用
vImage做其他效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1733) [我们可以做一个旋转
就像我之前说过的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1737) [顺时针或逆时针旋转图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1739) [顺时针或逆时针旋转图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1739) [我们可以模糊化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1743) [将某些东西渐淡到背景中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1745) [你感觉…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1748) [如果你觉得你想为图片
添加一些复古感](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1750) [你可以对黑白图像进行抖动处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1753) [或对彩色图像进行色彩量化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1756) [我们来看看它们在app中的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1760) [再一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1776) [这里有个滑块来控制旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1777) [我可以逆时针旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1780) [或顺时针旋转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1786) [现在我想尝试模糊效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1791) [让我点击这里的一个按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1793) [然后…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1795) [我可以加深模糊](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1797) [或…向左滑动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1800) [将玫瑰带回前景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1803) [对于黑白相片 我可以使用抖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1808) [现在 这张黑白图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1812) [其灰度现在由点的密度表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1814) [这就是抖动效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1818) [我们使用了重音和抖动算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1820) [我稍后会告诉你该如何做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1824) [对于色彩量化 我们使用了查找表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1827) [我可以移动这个滑块来增加量化级别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1831) [当我将滑块向右移动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1834) [此图片中的颜色越来越少](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1836) [这很有创意…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1841) [这就是电脑屏幕在
90年代或80年代看起来的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1844) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1850) [所以…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1851) [我们来看看这是如何做到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1853) [对于旋转效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1858) [你可以调用
vImageRotate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1859) [你可以调用
vImageRotate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1859) [并给定旋转角度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1861) [它就会逆时针或顺时针旋转你的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1864) [对于模糊效果 我们使用
TentConvolve函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1869) [模糊效果由内核大小控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1873) [内核越大 就会越模糊](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1876) [抖动效果基本上就是将8位图像
转换为1位图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1881) [同时你可以指定抖动算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1886) [在这个例子中
我们使用阿特金森抖动算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1889) [对于色彩量化
我们使用量化级别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1895) [来为RGB信道创建一个查找表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1898) [然后我们调用
vImageTableLookUp](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1902) [来将此查找表应用于RGB信道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1905) [以限制屏幕上的颜色数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1908) [这些是我想向你展示的四个额外效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1914) [我认为现在是
进入下一个主题的好时机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1917) [我认为现在是
进入下一个主题的好时机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1917) [LINPACK Benchmark](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1924) [我们谈到了
Accelerate的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1926) [我们也谈论了在你的app中
使用Accelerate有多容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1929) [但我们还没有谈到
Accelerate的速度有多快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1934) [LINPACK Benchmark
是做这件事的完美工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1938) [什么是LINPACK Benchmark？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1943) [它实际上会试图衡量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1945) [你可以多快地解决
机器上的线性系统问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1947) [实际上有三种不同的
LINPACK Benchmark](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1951) [第一个解决的是
100乘100的线性系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1954) [第二个解决的是1000乘1000](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1958) [最后一个…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1962) [这是最有趣的一个
也是我们今天要使用的这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1963) [即“不受限”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1967) [你可以解决你想要的任意大的系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1969) [来充分利用你的机器上的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1971) [所有计算能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1975) [我们看看使用Accelerate
的iPhone X的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1977) [我们看看使用Accelerate
的iPhone X的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1977) [性能以吉拍来衡量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1983) [以双精度运算追赶
iPhone 5S](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1987) [iPhone 6](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1991) [iPhone 6S](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1993) [iPhone 7](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1996) [iPhone X
大约能达到28.7吉拍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=1998) [这是双精度运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2002) [我们来看看单精度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2003) [再一次…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2006) [我们的空间用完了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2011) [我们不得不缩小以使它们更靠近](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2011) [iPhone X
大约能达到68吉拍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2018) [现在你可能会想 这并不令人意外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2022) [然而 随着时间的推移](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2027) [它的性能也会随之提高](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2028) [但事实上 这并不是全部](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2032) [当微架构发生变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2036) [从而为机器提供额外的计算能力时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2038) [从而为机器提供额外的计算能力时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2038) [你需要相应的软件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2041) [来充分利用这些额外的计算能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2043) [这就是与我们相关的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2046) [请记住 这些是用同样的
LINPACK Benchmark可执行文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2048) [运行在所有五代iPhone上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2053) [他们都使用Accelerate
获得了最佳性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2056) [而无需做出任何改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2060) [对于你的app也是如此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2063) [如果你在app中
使用Accelerate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2065) [你将自动获得最佳性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2068) [在我们支持的所有架构上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2071) [此外…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2075) [Accelerate还支持多平台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2077) [Accelerate能在macOS、iOS
tvOS、watchOS上工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2081) [假设明天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2087) [Apple推出了新架构或新平台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2088) [你也不必担心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2092) [你需要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2094) [顶多是重新构建你的app
并与Accelerate链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2097) [顶多是重新构建你的app
并与Accelerate链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2097) [你将自动在最新版本的平台或架构上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2101) [获得最佳性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2104) [总而言之](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2110) [我们谈到Accelerate
支持多种功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2112) [有极大可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2118) [你会在Accelerate中
找到你要的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2119) [如果你需要一些我们还没有的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2122) [请随时提交功能请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2124) [我们经常查看这个功能请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2127) [对它们进行评估 然后投入构建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2130) [实际上 我们的一些最佳功能
就是来自功能请求的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2132) [Accelerate很容易使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2138) [大部分时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2140) [只用一个函数调用就可以完成工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2142) [它快速且节能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2145) [因此你的app更具响应能力
电池续航时间也更长](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2148) [Accelerate可跨平台
和体系结构移植](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2153) [你可以在我们支持的
所有平台和所有架构上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2157) [你可以在我们支持的
所有平台和所有架构上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2157) [均获得最佳性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2160) [而其中最棒的是你不必改变你的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2163) [欲了解更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2169) [你可以参阅developer.apple.com上的
在线文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2170) [我们所有的演示app
简单代码和演讲资料](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2174) [都会在线提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2178) [明天下午两点
我们有一个实验室](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2180) [我期待在那里见到你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2184) [如果你有任何问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2186) [或你想了解更多
关于Accelerate的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2187) [我很乐意在那里见到你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2190) [以上就是我们今天的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2193) [谢谢大家的光临](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2195) [祝你有美好的一天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/701/?time=2196)