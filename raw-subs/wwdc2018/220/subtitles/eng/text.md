# High Performance Auto Layout

## Summary
Get a glimpse inside to find out what happens when you add a constraint! Dive into the internals of Auto Layout to develop intuition for how your code affects what happens under the hood. Learn how to measure and refine your approach to Auto Layout and see how its improved performance in iOS 12 will speed up your app.

## Info
* Frameworks
* WWDC 2018 - Session 220 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=7) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=19) [&gt;&gt; Good afternoon.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=25) [Welcome. My name is Ken Ferry.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=27) [Today Kasia Wawer and I are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=29) [going to talk to you about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=30) [performance in Auto Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=31) [Last time I was up here talking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=33) [about Auto Layout was in 2011](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=35) [when we first introduced it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=38) [So it's really great to be back](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=39) [up here chatting with you all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=42) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=43) [OK, so Auto Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=44) [This is how we position content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=49) [on iOS on the Mac.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=51) [The main object involved as we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=53) [know are views and constraints,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=55) [constraints giving the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=58) [relationships between views.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=59) [relationships between views.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=59) [When it comes to performance, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=61) [think the challenge here is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=63) [if all you've said is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=64) [distance between these two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=66) [buttons should be 20, it can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=67) [hard to understand the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=69) [step-by-step process that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=70) [machine goes through to do that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=72) [and that means it can be hard to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=74) [understand the expectations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=75) [around performance and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=77) [understand what's fast and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=78) [what's not and generally how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=79) [things are working.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=81) [So that's our goal for this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=82) [talk.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=84) [It's to really understand that,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=85) [to have a good feel for how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=87) [things are going to work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=88) [So we're going to start things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=89) [off by first showing some of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=91) [work that we've been doing in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=92) [this release for iOS 12 around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=93) [performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=95) [We've been doing a lot of work,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=96) [that's we get to give this talk.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=97) [When that's done we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=101) [move on to trying to build that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=104) [step-by-step understanding that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=106) [I was talking about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=107) [So we have good intuition and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=108) [good expectations around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=110) [performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=111) [To do that we're going to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=112) [something very unusual for us,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=113) [which is to go into internals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=115) [So enjoy that please.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=117) [Last, if you only ever rely on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=122) [our intuition for performance,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=124) [it's not going to work out very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=126) [well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=127) [So we will then look -- Kasia](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=128) [will take over and we'll analyze](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=130) [code and we'll sort of show how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=132) [to merge your intuition with,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=134) [you know, practice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=136) [But let's get to it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=138) [So first as is traditional for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=140) [an Apple presentation, we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=142) [going to look at a bunch of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=143) [numbers and brag.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=143) [[ Laughter ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=145) [Here we have, what we're looking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=149) [at here is a benchmark.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=151) [So the way we approached this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=153) [work is we went out and looked a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=155) [bunch of third party apps as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=157) [well as our own apps and we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=158) [tried to isolate what we saw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=160) [happening into test cases that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=161) [we could then benchmark.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=164) [So this one here, what we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=165) [looking at, is UICollectionView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=167) [with self-sizing cells and on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=169) [the whichever side looks bad is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=171) [iOS 11, which hopefully looked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=173) [janky and bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=179) [janky and bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=179) [And on iOS 12 it's perfect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=180) [It's hitting full frame rate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=183) [So that's just one of the cases](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=185) [we looked at.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=187) [Here are some more, just another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=187) [sampling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=190) [We have a lot.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=190) [These ones are all time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=192) [So what you're looking at is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=194) [that the gray bars are iOS 11.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=196) [How much time it took on iOS 11](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=198) [and the blue are iOS12.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=200) [So what you take from this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=202) [that we found a lot of places](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=204) [where we could make things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=205) [really a lot better.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=206) [And that will only improve your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=208) [apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=211) [That will make things quite a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=211) [bit better for you I hope.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=212) [This is going all the way up and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=215) [down the stack.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=216) [So some of it is in the real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=217) [guts that affect just absolutely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=219) [everything.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=221) [Some of it's moving into UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=222) [kits.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=224) [Some of it's up in the client](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=224) [layer so for in how people use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=225) [Auto Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=227) [So if you look at for example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=228) [that UICollectionView benchmark](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=229) [that we were looking at that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=231) [all of those.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=232) [It does include stuff that's in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=234) [the real guts but it also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=235) [includes a lot of really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=237) [important changes in just how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=238) [important changes in just how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=238) [UICollectionView uses Auto](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=240) [Layout and is more performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=241) [due to it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=244) [Which is a good segue to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=245) [rest of the talk, which is how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=247) [you can do that too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=249) [So how to use it properly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=250) [When we were going through these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=252) [I think a lot of the time the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=255) [reason why we were able to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=256) [all these improvements is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=257) [we have a good mental model for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=259) [how things are put together and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=261) [how it performs, how it works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=264) [We want to help you develop that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=267) [model as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=269) [So to frame this we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=270) [go through an example case, some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=271) [client code, that is not -- that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=274) [has some issues and we're going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=276) [to discuss why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=278) [So your code may or may not have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=279) [this particular issue, but we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=280) [did choose what we thought was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=282) [the most common thing that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=283) [saw when we went through all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=284) [these client apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=286) [But even if you don't have this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=288) [particular issue, the work we do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=289) [to go through what's happening](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=290) [should be meaningful to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=292) [everybody and probably new to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=293) [almost everybody.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=295) [So let's do it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=296) [This is the case we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=299) [This is the case we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=299) [go through so we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=300) [produce this layout, obviously](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=301) [very simple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=304) [Oftentimes I think you would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=305) [build this in interface builder.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=306) [That's a great idea.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=308) [It is such a good idea that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=309) [would completely prevent the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=311) [performance issues that we'd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=312) [like to go through.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=313) [So let's say we didn't do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=316) [Let's say that we built it like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=319) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=321) [First let's just walk through --](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=324) [before we try to analyze it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=325) [let's walk through what this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=326) [code is doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=327) [First, we are overriding the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=328) [UIView method updateConstraints,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=331) [whatever that does.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=333) [So we'll talk about it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=335) [Next, we have an Ivar called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=337) [myConstraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=341) [And we are taking everything in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=342) [that variable and we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=345) [deactivating all those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=346) [constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=347) [We are then creating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=348) [constraints, which implement the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=349) [layout that we were just looking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=351) [at.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=352) [That's fairly straightforward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=353) [It's using visual format](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=354) [language here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=355) [We're then activating those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=356) [constraints, installing them,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=357) [and last we're calling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=359) [and last we're calling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=359) [super.updateConstraints was an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=360) [important thing to do because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=362) [the UIView level implementation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=364) [that this method does do work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=366) [OK, that's the basic structure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=369) [of what it's doing and it does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=371) [work, it's functions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=374) [But let's talk about what it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=375) [doing more concretely now so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=378) [that we can understand the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=380) [performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=380) [So the first thing to understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=382) [is what exactly is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=383) [updateConstraints, this method](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=384) [we're overriding.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=386) [Well, it's one component of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=388) [Render Loop.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=390) [The Render Loop is the process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=391) [that runs potentially at 120](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=393) [times every second.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=395) [That makes sure that all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=397) [content is ready to go for each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=398) [frame.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=400) [OK, so it consists of three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=401) [phases -- Update Constraints,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=403) [Layout, and Display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=405) [First every view that needs it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=407) [will receive updateConstraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=409) [And that runs from the leaf most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=411) [views up to the view hierarchy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=413) [towards the window.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=415) [Next, every view receives layout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=416) [sub views.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=418) [This runs the opposite direction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=419) [This runs the opposite direction](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=419) [starting from the window going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=420) [down towards the leaves.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=421) [Last, every view gets draw if it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=423) [needs it, that kind of thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=425) [OK, what are these for?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=428) [Why do they exist?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=431) [Well, they all have the exact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=433) [same purpose and they have exact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=434) [parallel sets of methods.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=437) [And that purpose is to avoid](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=438) [wasted work, which I can explain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=440) [by example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=443) [So a label, a UI label needs to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=444) [have constraints that describe](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=448) [the size of its text, OK?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=450) [But there are many properties](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=454) [that contribute to that size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=454) [There's the text property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=456) [itself, there's the font, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=457) [the text size, etcetera.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=459) [One way to do this would be that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=461) [every time one of those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=464) [properties changes go re-measure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=464) [your text.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=467) [However, that would often be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=468) [pretty inefficient because you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=471) [usually change a bunch of these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=472) [right in a row.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=473) [When you're first setting up a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=474) [label, you're probably going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=475) [call a bunch of these property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=476) [setters and if you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=477) [re-measuring text on each one,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=478) [all the intermediate ones are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=480) [wasted, you really just want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=481) [measure at the end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=482) [And that's what the Render Loop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=483) [gives you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=484) [Because what you can do instead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=485) [is that inside a set font you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=488) [can just call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=490) [setNeedsUpdateConstraints and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=490) [then you're guaranteed to get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=493) [update constraints at the end](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=495) [before the frame goes to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=497) [screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=498) [And that's what it's for.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=499) [So the couple things to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=501) [understand from this before we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=502) [move on is number one it runs a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=504) [lot, 120 frames a second.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=506) [Number two they're parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=508) [So you can use that for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=510) [intuition as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=511) [If you feel like you understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=512) [the layout pass or have some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=513) [feel for that, same deal when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=515) [you're thinking about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=516) [UpdateConstraints or you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=517) [thinking about display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=518) [And then the last thing being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=520) [that the whole reason it's there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=521) [is to avoid wasted work, to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=523) [defer work and possibly skip it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=525) [entirely.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=527) [All right, so having looked at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=529) [that we are now in position to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=533) [analyze the rest of this method.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=534) [See how we are -- every time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=536) [it's called we're deactivating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=539) [it's called we're deactivating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=539) [constraints and then activating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=541) [them again new ones.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=543) [We are saying this is analogous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=545) [to layoutSubviews.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=546) [So if we wrote the exact same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=547) [code in layout Subviews that is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=549) [the analog, that would be as if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=551) [you -- every time layoutSubviews](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=554) [was called you destroyed all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=556) [your Subviews, created them from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=558) [scratch and then added them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=560) [again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=562) [And I think a lot of people have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=563) [the completely accurate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=565) [intuition that that's not going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=566) [to perform very well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=567) [So the thing to really get is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=569) [that it's the same.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=571) [Whatever intuition you take from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=573) [that apply it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=574) [updateConstraints as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=576) [When you are ripping down](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=578) [constraints like that you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=579) [doing a lot of extra work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=580) [So how do you fix it?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=582) [Well, you need to use -- as we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=583) [were saying, you need to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=586) [sure that you're not doing it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=587) [more than once.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=588) [It's for deferring work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=589) [So it should be something like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=591) [this, we say did we already do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=593) [this work?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=594) [If we did then just don't do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=595) [anything at all.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=597) [If we haven't done it yet, then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=597) [sure set up those constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=598) [once.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=599) [And that will perform well, OK?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=600) [So this is again, this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=604) [actually the most common error](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=605) [that we see in client code,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=607) [which is we call it churning the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=609) [constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=611) [Unnecessarily ripping them down](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=612) [and putting them back up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=614) [OK, great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=616) [We are going to do more but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=617) [stepping back for a second now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=619) [to think about the Render Loop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=621) [for a little bit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=622) [The Render Loop is great if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=624) [actually need it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=626) [The purpose again, it's really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=627) [useful for avoiding that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=629) [redundant work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=630) [But it's also dangerous because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=632) [it runs to often.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=634) [It's very sensitive code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=635) [So in a case like this usually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=638) [what you want to do about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=640) [sensitive code is not -- like,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=641) [you should take care if you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=643) [writing it but you should also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=644) [try to minimize how often you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=645) [write sensitive code because,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=646) [you know, you're probably going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=648) [to screw it up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=650) [We all do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=652) [So in this case, in fact you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=653) [might be, you should really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=655) [think again like could I just do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=655) [it once and not put it in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=657) [updateConstraints?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=660) [And a good way to do that is use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=661) [Interface Builder.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=663) [If you can use Interface Builder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=664) [you should.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=666) [It's great for all sorts of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=667) [reasons.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=668) [It puts you on a good path.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=668) [OK, so that's great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=671) [We've now talked about that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=673) [I think we have a better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=674) [understanding for why that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=675) [problematic, at least somewhat](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=677) [by analogy sub use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=678) [But for the purposes of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=681) [talk we want to do better than](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=682) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=683) [We don't just want to say this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=683) [is bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=685) [We want to really understand it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=686) [and understand the process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=688) [So to do that we're now going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=690) [peel back the covers and start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=693) [to really see what really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=694) [happens.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=696) [So when we activate these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=697) [constraints, when we add the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=702) [constraints, what is the process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=703) [that occurs?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=705) [Let's diagram it out at a high](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=706) [level.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=708) [So if this is the view that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=708) [we're adding the constraints to,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=710) [this view is in a window.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=713) [Hanging off the window is an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=715) [internal object called the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=717) [engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=719) [engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=719) [And the engine is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=720) [computational core of Auto](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=721) [Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=723) [When the constraint is added](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=723) [what will happen is that we make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=726) [an equation, which corresponds](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=730) [to the constraints, and we add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=732) [that equation to the engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=733) [The last object to understand in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=736) [the diagram is that the equation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=738) [is in terms of variables where a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=740) [variable is like, you know, if I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=742) [hand you an equation and I say](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=744) [solve for X, X is a variable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=745) [The things that we need to solve](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=749) [for in this case is the frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=750) [data of a view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=753) [So there will be four variables](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=755) [for every view, which is the min](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=756) [X, the min Y, the width, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=757) [height.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=760) [OK, so let's go into this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=761) [process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=763) [So this was the layout we were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=764) [going to do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=765) [We're going to focus just on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=765) [horizontal constraints for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=766) [simplicity, but we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=768) [follow through the process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=769) [So the first thing that happens,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=771) [as we said, is we make these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=772) [equations, which look like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=773) [These are pretty straight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=777) [forward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=777) [The most interesting one is I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=778) [The most interesting one is I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=778) [think the space between the two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=780) [text fields, which looks like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=781) [we're saying it looks very, very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=783) [similar to what you say with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=785) [constraint but it's somewhat](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=787) [lower level because it's in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=788) [terms of these variables.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=790) [OK, then each of those equations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=793) [needs to get added to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=796) [engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=797) [And we're actually going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=798) [follow along that process again](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=800) [with the goal being to have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=802) [good feel for the performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=804) [characteristics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=806) [What is happening when we do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=807) [this?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=808) [So the engine is trying to solve](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=809) [for these variables, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=811) [something you may have done in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=813) [algebra and it actually looks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=816) [exactly the same.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=817) [So let's follow it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=818) [So first equation comes in, says](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=820) [the first fields minX is 8.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=822) [Cool. Its width is 100, fine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=824) [OK, when this one comes in we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=828) [say the second field's minX is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=830) [equal to the first minX plus the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=832) [width plus 20.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=833) [What would you do in algebra if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=834) [somebody asked you to solve for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=837) [these variables?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=839) [You would substitute out for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=840) [ones that you already had in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=842) [there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=843) [And that's exactly what's going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=844) [to happen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=845) [If you are profiling, you'll see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=846) [there is a genuine method in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=848) [engine that contains the word](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=850) [substitute as well as another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=852) [140 characters because we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=853) [Cocoa Code Programmers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=856) [But and that's what it will do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=858) [And then, you know, and the last](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=862) [equation comes in and this looks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=863) [done.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=866) [it looks like that was all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=867) [work that had to happen at least](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=869) [in this case to solve for those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=870) [variables and that's true.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=872) [That's what I want to understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=875) [at this point is that the work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=876) [that happens is both not very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=878) [complicated.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=879) [It corresponds very, very, very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=881) [closely to what you would do if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=882) [you were doing it by hand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=883) [And it's also not very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=886) [expensive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=887) [It's just sort of substituting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=888) [out like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=889) [That's the work it does.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=890) [OK, so now we have sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=892) [solved for these variables in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=895) [the engine but that's not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=896) [layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=897) [So let's finish the process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=898) [So let's finish the process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=898) [What happens for the rest of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=902) [process is that whenever the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=903) [engine sort of assigns a value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=904) [to one of these variables, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=906) [going to inform the view that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=907) [the variable came from and say,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=909) [this thing changed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=911) [What will the view do in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=912) [response to that?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=914) [Well, if you think about it for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=916) [a minute it will call it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=917) [Superview and say hey,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=919) [setNeedsLayout because it needs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=920) [to move.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=923) [OK, that was all happening as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=925) [part of the update constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=927) [phase.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=929) [We now just receive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=931) [setNeedsLayout, so at some point](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=932) [it will move on to the layout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=933) [phase.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=935) [Then, OK, so the last piece of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=936) [the puzzle is that we'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=939) [receive, UIView will receive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=940) [layout Subviews will do is it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=942) [will copy that data from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=945) [engine into the frame.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=947) [So it will just say engine, what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=950) [are the values for those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=952) [variables?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=953) [Engine will tell it and it will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=954) [just call set Superview of that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=956) [view we'll call setBounds at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=958) [view we'll call setBounds at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=958) [setCenter on that Subview.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=960) [And that is the entire process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=963) [So just step back and think for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=966) [a second.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=967) [Like, that is the step-by-step](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=968) [process of Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=968) [If you can try to internalize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=970) [that and get a feel for it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=972) [you're going to have a much,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=974) [much, much better feel for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=975) [performance expectations around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=977) [this stuff.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=979) [In fact, let's see how that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=980) [going right now, because now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=981) [when we look at this and we look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=984) [at this method that we were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=986) [looking at that where we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=986) [deactivating constraints and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=988) [we're reactivating constraints,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=989) [think about what we just did and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=991) [think about what the engine is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=992) [going to be doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=993) [It's going to look like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=995) [Which we call churning [laughs].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1000) [So each operation it's doing is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1002) [not super expensive, but it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1005) [doing a lot of them and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1007) [just completely unnecessary.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1009) [This work is wasted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1011) [So if you can feel this in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1012) [heart, if you can really feel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1014) [that this is what is happening](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1016) [when you do this, then you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1018) [going to be in good shape.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1019) [going to be in good shape.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1019) [Then that's -- you're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1020) [be in the same position we are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1022) [to go through and really get a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1023) [good feel for this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1025) [OK, so I hope that's great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1026) [There's one other big topic that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1028) [we want to cover though.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1034) [If we want to really have a good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1035) [performance model is this idea](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1036) [that you only pay for what you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1038) [use with Auto Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1040) [And having looked at this, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1042) [think we're in a good position](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1043) [to understand what that means,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1043) [OK?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1046) [To do this, let's say we double](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1046) [the situation we had before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1048) [So we have four text fields in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1049) [two sort of independent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1051) [hierarchies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1052) [Now something you can do is you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1054) [can make a constraint that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1056) [crosses the hierarchy like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1058) [That goes -- that you can say,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1060) [well text field one should be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1062) [aligned with text field three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1064) [even though they don't have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1065) [same Superview.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1066) [I think sometimes people have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1068) [the impression that because this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1070) [possible, it means that things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1072) [are going to be generally quite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1074) [slow because anything could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1076) [affect anything at any time and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1078) [so it's just sort of a giant](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1079) [so it's just sort of a giant](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1079) [ball of mud and performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1080) [probably sucks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1083) [OK, but having looked at what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1085) [we've looked at, let's see what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1087) [happens in the common case where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1088) [you don't have this because most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1091) [of the time you don't.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1093) [Most of the time views are only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1094) [constrained to their parent and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1096) [to their siblings.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1097) [What you'll see there is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1099) [since we have these two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1102) [independent blocks, that will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1103) [give, if you look inside the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1105) [engine it will be two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1107) [independent blocks of equations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1108) [that completely don't interact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1109) [with each other, that don't have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1111) [any overlapping variables.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1112) [What that will do, is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1114) [because they completely don' t](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1116) [overlap, they just don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1118) [interact.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1119) [And if we have one of these it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1119) [will take some amount of time to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1121) [deal with.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1123) [If we have two of them it will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1124) [just take twice the time because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1125) [they have nothing to do with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1127) [each other.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1128) [Three of them, three times,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1129) [etcetera, the point is you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1130) [going to see a line.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1132) [You're going to see linear](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1134) [performance, which is the best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1136) [you can get.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1138) [That's perfect marks for this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1139) [That's perfect marks for this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1139) [kind of thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1140) [So I want to stress this again,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1141) [the reason why it's linear is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1143) [because there aren't any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1145) [dependencies between these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1146) [pieces.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1147) [If you do have a dependency,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1148) [then it will tie those blocks of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1150) [equations together and that will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1151) [be somewhat more, you know, more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1154) [computation to deal with but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1155) [that's only if you use it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1158) [And of course if you do have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1160) [something like that, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1161) [if you're doing it by hand of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1162) [course it's going to be a little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1163) [bit more expensive that's what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1164) [you expect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1165) [You're doing something more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1166) [complicated.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1166) [So it's kind of this usual thing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1167) [that we often aim for in Cocoa,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1169) [which is that the simple things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1171) [are simple and the complex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1172) [things are possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1174) [In this case it's more like they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1175) [cost a little more.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1176) [But you're not paying for it if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1177) [you're not using it, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1178) [actually the right way to think](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1181) [of the whole engine in terms of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1183) [intuition again, you can think](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1184) [of it as a cache for layout and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1186) [as a dependency tracker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1189) [It's very, very targeted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1191) [It understands which constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1192) [affect which views, and when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1194) [change things it just updates](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1195) [exactly the things that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1198) [needed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1199) [And this has implications on how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1200) [you write code too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1202) [Sometimes we see -- one issue we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1204) [sometimes see is people taking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1207) [great pains to avoid making](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1208) [constraints because they have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1211) [the impression it's going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1213) [expensive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1215) [But actually, it's very, very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1216) [targeted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1217) [As long as the constraints that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1218) [you're making correspond closely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1219) [to the problem that's being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1221) [solved, it's pretty unlikely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1222) [that whatever you do, if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1224) [tried to dodge it, it's going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1225) [be more performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1226) [Oftentimes we'll see people](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1228) [doing very complicated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1229) [measurement and adding things up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1231) [and sort of trying to pull](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1233) [information out and then push it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1234) [back in and that's almost always](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1235) [more expensive than just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1237) [directly expressing as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1238) [constraint what you're after.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1240) [Now the converse side of that is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1242) [that sometimes we see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1245) [hierarchies that look like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1247) [something like this where we see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1249) [lots and lots of constraints and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1251) [lots of priority and it's really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1252) [not clear what's happening and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1254) [this is a -- usually this is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1256) [telltale sign of this being the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1258) [telltale sign of this being the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1258) [situation that there's actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1260) [just two completely separate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1261) [layouts that someone has in mind](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1263) [and we're trying to sort of pack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1265) [them together into one set of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1267) [constraints and do it all in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1269) [one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1270) [And that's also not a real good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1271) [idea.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1273) [So that will -- that creates a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1274) [lot of false dependencies,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1277) [places where it seems like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1278) [things interact that they really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1279) [don't.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1280) [It's also nearly impossible to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1281) [Debug, if you haven't noticed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1282) [So the overall advice is try to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1286) [model the problem as directly as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1290) [possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1292) [Kasia is going to walk through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1292) [this kind of case where you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1293) [switching between different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1294) [layouts and show that a little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1295) [more explicitly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1296) [But that's the general advice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1298) [Just use it in a natural way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1300) [It's better for both performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1302) [and for understandability.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1303) [OK, so that most of what we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1305) [to say.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1310) [But since we're trying to build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1311) [an overall mental model of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1312) [performance characteristics of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1314) [Layout, I want to at least make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1315) [sure we touch on all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1317) [major features.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1318) [So there are some other things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1319) [So there are some other things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1319) [you can do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1321) [And let's discuss.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1322) [So you can say that some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1324) [particular view should be at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1325) [least 100 points wide.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1327) [You can use inequalities.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1328) [What does that cost?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1330) [Very, very, very little.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1331) [Compared to just saying it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1333) [equal to hundred points wide.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1333) [Since we went internals a little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1335) [bit, it's going to coast exactly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1337) [one more variable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1339) [That's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1340) [You can also call set constant.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1341) [The example use case for this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1344) [something like I have a gesture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1346) [recognizer and I'm kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1347) [trying to drag a view around and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1349) [what I'm going to do is every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1351) [time I receive a call from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1352) [gesture recognizer I'm going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1354) [take its translation and I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1356) [going to pump it into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1358) [constraint by calling set](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1359) [constant on that constraint with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1361) [that translation value.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1364) [OK, what that's going to do is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1366) [we talked about how the engine](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1368) [is a dependency tracker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1370) [This exploits that to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1372) [maximal degree.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1373) [So that's sort of a very, very,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1375) [very fast one step update of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1378) [very fast one step update of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1378) [just exactly what has to change](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1380) [due to this one constraint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1382) [changing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1383) [So that's a performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1384) [optimization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1385) [That's why we even have this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1386) [method set constant.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1387) [Last to talk about it priority.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1389) [So here you can say, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1392) [you can say this view should](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1394) [ideally be 100 points wide, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1396) [if something else prevents that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1398) [just please be as close as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1400) [possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1401) [This does incur some more work,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1402) [some amount of work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1405) [So let's talk about that a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1406) [little bit more.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1407) [Another way to think about that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1408) [is to say that the width of that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1410) [field is going to be equal to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1411) [100 plus some error and please](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1412) [minimize the error.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1415) [That's what you're asking for.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1417) [So there is an error](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1419) [minimization phase I didn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1421) [discuss before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1422) [So when the view asks the engine](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1423) [as part of layout subviews and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1426) [says, hey what's the value for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1428) [these variables?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1429) [The engine needs to make sure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1430) [that all of those error terms](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1431) [have been minimized first.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1433) [And this is actually, this is --](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1435) [I'm not going to go into how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1437) [this works but I am going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1438) [talk a little bit about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1439) [talk a little bit about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1439) [performance characteristics and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1440) [I'm also going to say that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1442) [super neat.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1442) [So you might want to look this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1444) [up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1446) [This is the simple X algorithm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1447) [This is what we're really doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1448) [It's super old.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1449) [It was developed during World](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1451) [War II.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1452) [What you might note is before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1453) [computers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1456) [In fact, the people who used to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1457) [be called computers, before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1459) [there were machines that were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1460) [called computers, this is kind](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1461) [of what they're doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1462) [They're doing it by hand, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1463) [does give you some feel for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1465) [performance characteristics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1467) [It must be pretty fast if you do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1468) [it by hand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1469) [And it is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1470) [It's pretty much the same stuff](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1471) [we've been doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1473) [It's more substitutions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1474) [That's how you should think of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1475) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1476) [Anyway, but it does -- you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1478) [when you use priority it does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1479) [cost at this level so that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1480) [just something to be aware of.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1482) [OK, and other than that it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1484) [just same as before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1485) [So that's what I wanted to talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1486) [about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1490) [So that is our attempt to build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1490) [this intuitive understanding of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1492) [the performance characteristics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1494) [around Auto Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1496) [So quick review of what we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1498) [talked about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1499) [Try not to churn your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1500) [constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1501) [That's when you're doing all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1502) [this work that just doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1503) [matter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1504) [So don't do it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1505) [When you do work with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1506) [constraints it's basic algebra](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1508) [and that algebra is happening](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1510) [when you add constraints, when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1511) [you remove constraints, when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1512) [call set constant, that's the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1514) [primary times.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1516) [And then also, you know, when we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1517) [have this error minimization](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1520) [phase.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1522) [The way to think about what Auto](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1523) [Layout does is that it's a cash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1526) [for your layout, we saw the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1528) [engine sort of contains all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1529) [those solved values and it's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1531) [dependency tracker so that when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1533) [things change we can update](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1534) [those values in a super, super](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1537) [targeted way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1538) [Which leads to our last point,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1539) [which is that you only pay for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1541) [the features that you're using.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1543) [That's what we talked about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1545) [You know, that's your intuition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1547) [And for the rest of the talk I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1548) [going to turn it over to Kasia](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1551) [because if you, again, if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1553) [only rely on intuition, things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1554) [are not going to go well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1555) [So she's now going to go into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1556) [some analysis, avoid we talked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1558) [about and putting that intuition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1559) [about and putting that intuition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1559) [into practice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1561) [So please enjoy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1562) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1564) [&gt;&gt; Ok let me get to my slide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1572) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1572) [Thank you, Ken.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1574) [Hi everybody.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1574) [My name is Kasia Wawer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1575) [I am a member of the iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1577) [Keyboards Team and we use Auto](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1578) [Layout and we love it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1580) [So I get to talk to all of you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1582) [about building efficient](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1584) [layouts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1584) [All right, let's go back to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1586) [Constraint Churn real quick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1587) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1588) [Constraint churn as we heard](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1589) [happens when you change your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1590) [constraints but the actual views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1591) [don't need to move so you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1593) [sending extra work to the engine](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1595) [and enough of that can affect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1597) [your performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1598) [So you tend to want to avoid it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1599) [So let's talk about how you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1601) [might run into this problem and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1603) [how you might get out of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1605) [So we're going to work with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1606) [spec here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1608) [This is for a social media type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1609) [app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1610) [There's an avatar view that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1611) [shows you who is sharing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1612) [There's a title, a date, and a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1613) [log entry view and for that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1616) [you're going to need some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1619) [you're going to need some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1619) [spacing, you're going to need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1620) [some sizing and you're probably](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1621) [going to need some alignment](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1623) [too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1624) [But this is actually not a pure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1625) [social media app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1628) [It is a semi social media app,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1629) [where you can choose whether you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1631) [want to share things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1632) [So there's also optionally a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1634) [view that says that you've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1635) [shared and who you've shared](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1636) [with.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1637) [And no social media app would be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1638) [complete without the ability to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1640) [share cat pictures.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1642) [So that's another layout that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1643) [you might have to put in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1644) [And maybe you don't even want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1646) [share that cat picture because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1648) [it's just too good, you want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1649) [keep it to yourself.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1650) [So we have four very similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1652) [layouts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1653) [They're not the same and there's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1654) [going to need to be some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1655) [adjustment when these table view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1656) [cells come on to the screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1658) [If I didn't mention it these are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1659) [in table view cells.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1660) [And let's say that you are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1662) [working on performance in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1663) [app and you ran it for the first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1665) [time and this is the scrolling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1667) [performance you got.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1668) [And there are a lot of hiccups](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1669) [there, especially on the scroll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1671) [back to top.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1672) [So you're like, OK, how do I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1673) [improve this app?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1675) [What's going on?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1677) [So I get to introduce something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1678) [So I get to introduce something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1678) [new today, a sneak peek into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1681) [something we're working on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1682) [This is not actually available](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1683) [in the beta but stay tuned](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1685) [because we're going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1687) [introducing an instrument for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1688) [layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1690) [And, OK.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1692) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1693) [I'm glad you are excited.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1699) [That's good motivation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1700) [Anyway, let's take a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1702) [what's here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1704) [The top track is your standard](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1705) [how much CPU is being used.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1707) [And this is sort of your canary](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1709) [in the coalmine view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1710) [If there are a lot of peaks here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1711) [you have an indication that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1713) [might have something you need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1714) [look at in your layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1715) [And if it's pretty flat,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1717) [probably your performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1719) [problems are originating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1720) [somewhere else.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1721) [Below that we will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1722) [specifically tracking constraint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1723) [churn.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1725) [The height of the bars in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1726) [instance correspond to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1727) [number of views that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1729) [experiencing constraint churn.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1731) [So when you see a big piece](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1733) [there you know a lot of views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1734) [are affected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1735) [We're also going to show you how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1737) [to remove and change constraint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1739) [to remove and change constraint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1739) [instances and finally sizing for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1741) [UILabel and other text views.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1745) [This one says UILabel because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1746) [that's what's in this app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1748) [It's also going to track other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1749) [types of text views as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1751) [So this was taken with that app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1753) [scrolling, so what do we look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1756) [here?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1758) [There are several peaks in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1759) [CPU view but let's zoom in on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1761) [this one because right below it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1764) [I see a big jump in constraint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1765) [churn and that's a little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1767) [concerning.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1768) [So if you highlight this view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1769) [and go down to the detailed view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1771) [in instruments, what you'll see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1773) [is a list of the views that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1775) [affected by churn by view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1776) [description.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1778) [And we are grouping them by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1779) [Superview so that in an instance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1780) [of say Table View Cells, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1782) [easier to see that it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1784) [happening over and over in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1786) [specific context and not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1788) [different ones.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1789) [So in this instance we see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1791) [the avatar view and three labels](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1792) [are experiencing churn.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1794) [And since I am the one who ran](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1797) [this through the instrument, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1799) [this through the instrument, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1799) [know that these labels](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1801) [correspond to the Title Label,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1802) [Date Label, and our Log Entry](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1803) [Label.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1805) [That's almost all of our views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1807) [in this cell.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1808) [That's a little concerning.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1809) [Let's see what happened.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1811) [All right, back to our spec](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1813) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1815) [So look into the code and find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1816) [that UpdateConstraints is being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1819) [overridden.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1821) [And in that method when anything](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1822) [changes or when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1824) [UpdateConstraints runs at all,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1825) [we're removing all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1827) [constraints and then adding back](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1828) [the ones that we think we still](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1830) [need.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1832) [Well, everything landed back in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1833) [the same place where it started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1835) [So that removal just is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1837) [contributing to performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1839) [issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1841) [So in the instance of the social](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1842) [label here, social avatar thing,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1844) [being added and removed, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1847) [don't actually need to pull it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1849) [all the way out.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1850) [When you look at the constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1851) [around this view, you'll see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1852) [that they don't actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1854) [interact with anything else,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1856) [just that particular view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1857) [So here you can use, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1859) [So here you can use, you know,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1859) [this neat little feature called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1861) [setHidden, maybe you've heard of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1863) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1865) [And because it's not affecting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1865) [any of the views around it, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1867) [just going to disappear, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1869) [constraints stay in place and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1870) [this is a very, very, very cheap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1871) [way to hide and show views,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1874) [rather than removing them from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1876) [the hierarchy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1877) [So that's fine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1878) [But this is a really simple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1880) [example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1881) [What about the image view?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1881) [All right, so for the image](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1883) [view, again we might we might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1884) [want to try removing all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1885) [constraints and then adding back](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1886) [the ones we already had plus the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1888) [image view ones.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1890) [And again, everything is landing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1891) [in the same place so we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1893) [experiencing churn.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1894) [Well, in a situation like this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1896) [how I want you to think about it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1898) [is to look at groups of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1899) [constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1900) [So let's start with this group](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1901) [that I'm highlighting here in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1903) [green.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1904) [These constraints stay the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1905) [in every one of our layouts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1908) [Once we're doing the hide and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1910) [show on the sharing view that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1911) [doesn't need to change, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1913) [avatar view never moves, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1914) [labels never move other than the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1916) [log entry label being able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1919) [log entry label being able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1919) [get longer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1920) [So those green constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1921) [should be added when you create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1923) [the views and then left in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1924) [place.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1927) [Don't touch them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1928) [They want to stay where they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1929) [are.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1930) [But now we have the four](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1932) [constraints that are controlling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1933) [the image view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1935) [So what do we do with those?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1935) [Well, let's stick them in an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1937) [array and let's also take the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1937) [constraints that are going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1941) [there when there's no image.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1942) [And I very creatively named](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1944) [these imageConstraints and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1945) [noImageConstraints so you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1946) [keep them apart.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1947) [And let's, when we're getting to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1949) [the point where we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1952) [be putting in this image view or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1953) [taking it away, let's see what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1954) [layout we're currently in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1956) [Deactivate the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1958) [noImageConstraints if we need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1958) [and activate the ones for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1961) [image.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1962) [If we don't have an image coming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1963) [in, you know, all of our other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1965) [constraints are already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1966) [activated, we just have the one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1967) [that we're adding.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1969) [Now I put these both in arrays](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1970) [despite the fact that this is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1971) [single constraint because it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1972) [simplifies things in my code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1973) [I don't need to check and see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1975) [whether I'm dealing with an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1976) [array or a single constraint,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1977) [I'm always dealing with an array](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1979) [I'm always dealing with an array](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1979) [of constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1980) [Your mileage may vary though.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1981) [So the nice thing about this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1983) [that if you are tracking your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1986) [constraints properly like this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1988) [and you know that you want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1990) [add this image view live in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1991) [front of the user, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1993) [deactivate these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1995) [noImageConstraints, activate the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1995) [ImageConstraints and call Layout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1997) [in needed inside a View](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=1998) [Animation block and it's going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2000) [to animate nicely into your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2002) [view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2003) [If you tried to do this with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2004) [deactivating all of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2005) [constraints and putting them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2005) [back in, it would look very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2006) [interesting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2009) [Let's say it that way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2009) [All right, so now that we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2011) [debugged this and we're working](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2013) [with groups of constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2014) [instead of throwing everything](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2015) [at it, let's look at what it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2016) [will look like.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2018) [This is what it looked like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2018) [originally just to remind you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2019) [Let's scroll to the top.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2021) [It's very bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2024) [And this is what it looks like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2025) [after we've debugged it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2026) [And that is much smoother.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2028) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2030) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2032) [But wait there's more!](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2034) [I actually took this video on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2035) [iOS 11.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2037) [This is not taking advantage of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2037) [This is not taking advantage of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2037) [any of our performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2040) [improvements in iOS 12.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2041) [This is just the client code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2043) [doing things more efficiently.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2046) [In iOS12 it also looks great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2047) [And of course fabulous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2049) [[laughing].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2053) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2054) [Yes, it's great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2057) [So how do we avoid constraint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2060) [churn?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2061) [Well, avoid removing all of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2063) [constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2064) [That's usually going to put you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2065) [into a situation where you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2066) [to put a bunch of them back and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2067) [that's going to land you in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2069) [position where you're relaying](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2070) [out frames that don't need to --](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2072) [or relaying out views that don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2073) [need to be laid out again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2074) [If you have a set of constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2076) [that going to be common to all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2078) [of the potential layouts in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2079) [app, add them one and then leave](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2080) [them alone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2082) [This is a good use for Interface](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2083) [Builder and the initial layout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2084) [of your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2085) [Changes to the constraints that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2086) [need changing but don't change](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2087) [the ones that don't need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2088) [changing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2089) [Kind of tautological but it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2090) [seems good.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2092) [And then you have a neat trick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2093) [now for hiding views instead of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2094) [removing them when that makes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2096) [sense.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2098) [All right, so that was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2099) [All right, so that was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2099) [constraint churn in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2100) [instrument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2101) [We also have that view at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2101) [bottom that said UILabel sizing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2102) [UILabel sizing is tracking the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2105) [amount of time it takes for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2107) [label to calculate its size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2108) [So let's talk about intrinsic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2110) [content size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2111) [I'm going to take a walk over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2112) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2114) [OK, not all views actually need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2115) [intrinsic content size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2117) [Some views do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2120) [Views with non-view content like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2121) [to return a size for their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2124) [intrinsic content size based on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2125) [that non-view content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2126) [Two examples of this are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2128) [UIImageView, which uses the size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2130) [of its image to calculate its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2132) [intrinsic content size and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2133) [UILabel, which measures its text](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2136) [and uses that to return its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2138) [intrinsic content size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2139) [There's nothing really magical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2141) [about intrinsic content size,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2143) [it's used to create constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2145) [by UIView.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2147) [It makes sizing constraints for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2148) [you and that's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2149) [You can define all of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2151) [sizing in constraints yourself](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2152) [and skip this whole thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2154) [There are a few circumstances](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2156) [where it needs to be overridden,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2157) [that's what it's there, as we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2158) [that's what it's there, as we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2158) [saw there are these couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2160) [things plus some other examples](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2161) [in UIView subclasses.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2162) [But a lot of the times it gets](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2164) [overridden because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2165) [assumption that it's either](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2167) [faster or more exact and it is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2167) [neither of those things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2170) [However, there is a circumstance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2172) [where overriding it might help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2174) [your performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2175) [Text measurement can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2178) [expensive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2179) [In our app here the UILabel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2181) [sizing did not take very long.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2184) [It was very short durations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2185) [So messing around with that is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2187) [not going to improve the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2188) [performance of that that much.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2189) [But if you have a text intensive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2191) [app and you're seeing a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2192) [time happening in the UILabel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2194) [text measurement or you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2196) [text view text measurement or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2197) [whatever else you're using, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2199) [might be able to help it along](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2200) [if you have some additional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2202) [information.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2203) [If you know the size that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2205) [text needs to be without doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2206) [all that text measurement, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2207) [can return that size and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2209) [intrinsic content size, or if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2210) [when you're going to be putting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2213) [this view on the screen the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2215) [constraints are going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2216) [fully defining the size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2217) [regardless of the size of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2218) [text inside of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2220) [For instance, the constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2220) [are always going to make it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2222) [larger than the amount of text](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2223) [you have.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2224) [Then you can go ahead and return](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2225) [no intrinsic metric for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2226) [width and height in intrinsic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2227) [content size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2229) [And what this will do is tell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2231) [the parent, hey I already have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2232) [my size, don't bother to do the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2233) [text measurement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2235) [So obviously this only works if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2236) [you're not trying to detect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2238) [measurement yourself, but it can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2239) [help some apps improve their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2241) [performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2243) [So I wanted you to know that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2243) [this little trick exists.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2244) [And we can't talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2246) [intrinsic content size without](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2247) [talking about system layout size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2249) [fitting size because people](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2250) [often conflate the two even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2253) [though they're kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2255) [opposites, so that's kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2256) [unfortunate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2257) [Intrinsic content size is a way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2259) [that you communicate size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2261) [information to be put into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2262) [engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2263) [System Layout Size Fitting Size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2265) [is a way that you get sizing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2267) [information back out of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2268) [engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2269) [They're actually kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2270) [opposites.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2271) [So this is used in sort of mixed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2272) [layouts where there's some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2274) [reason that you need frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2276) [information from a view that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2277) [manages its subviews using Auto](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2278) [manages its subviews using Auto](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2278) [Layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2280) [Not very frequent usage but is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2281) [there and can be used.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2283) [I want to tell you how this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2285) [method works because it might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2287) [a little more expensive than you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2289) [think.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2290) [When you call System Layout Size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2291) [Fitting Size an engine is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2293) [created.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2294) [Constraints are added to this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2296) [engine, the layout is solved,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2297) [and then the size of the top](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2299) [views frame is returned, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2301) [then the engine gets discarded.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2303) [So each time you call this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2305) [method an engine is being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2306) [created and discarded.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2307) [While this is fine for small](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2309) [uses, if you're doing it a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2311) [you can see how it might start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2313) [to build up over time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2314) [So be cautious when calling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2315) [System Layout Size Fitting Size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2317) [One of the uses that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2319) [sometimes see people do is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2321) [forwarding that call from their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2322) [self-sizing collection or table](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2324) [view cell to a content view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2325) [And when you do that you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2327) [actually overriding some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2329) [optimizations we've made to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2330) [that scrolling, scrolling in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2331) [that view faster and you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2333) [adding extra engines.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2334) [So if you're currently doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2336) [that and your scrolling is no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2337) [good, maybe look into that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2338) [All right, now we come to my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2341) [very favorite topic in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2342) [world.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2343) [Unsatisfiable Constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2343) [OK, so what are unsatisfiable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2346) [constraints?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2349) [If you haven't run into this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2350) [before, this is what happens](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2351) [when you do something like, hey](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2353) [this view should be 50 points](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2355) [wide, also it should be 200](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2356) [points wide.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2358) [Well, that's not really going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2359) [work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2361) [These are not actually quantum](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2361) [phones.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2363) [You know, I can't speak to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2365) [future but so the engine has to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2366) [kind of calculate the fact that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2370) [there's no layout available and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2371) [break a constraint in order to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2373) [generate some sort of layout for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2375) [you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2377) [When it breaks that constraint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2378) [it sends a very detailed log to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2380) [your debugger, possibly you've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2382) [seen it, that says, hey](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2383) [unsatisfiable constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2386) [Here's the constraint that I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2387) [broke and here's all the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2388) [ones that affected, that caused](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2389) [me to have to break it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2391) [So this can sometimes affect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2393) [performance directly and it can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2395) [also mask other issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2396) [So it's a good idea to get them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2397) [debugged.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2399) [And Mysteries of Auto Layout,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2400) [Part 2, had some good debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2401) [information so you might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2402) [interested in checking that out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2404) [if you have been having trouble](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2405) [with your unsatisfiable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2406) [constraints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2407) [OK, guys you've graduated.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2409) [Congratulations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2411) [You are all Auto Layout experts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2412) [and, you know, I hope that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2414) [really enjoyed learning about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2416) [the internals of how it works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2417) [Now you know better how to think](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2419) [before you update constraints](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2421) [and understand the process they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2423) [go through, you've got some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2424) [tuning information with size and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2425) [priority and inequality, and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2427) [have faster layouts in iOS 12 so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2429) [that's awesome.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2432) [We're going to be in the Labs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2433) [tomorrow if anybody has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2434) [questions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2435) [And we've got the link here for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2437) [information in related sessions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2438) [Enjoy the rest of your week.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2440) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/220/?time=2441)