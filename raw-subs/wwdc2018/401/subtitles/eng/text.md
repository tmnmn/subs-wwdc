# What's New in Swift

## Summary
Hear about the latest advancements in Swift, the safe, fast, and expressive language. Find out about improvements to build times, code size, and runtime performance. Learn how to take advantage of new features in your code that eliminate boilerplate, increase safety and security, and improve your overall development productivity.

## Info
* Developer Tools
* WWDC 2018 - Session 401 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=7) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=25) [&gt;&gt; Good morning and welcome to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=29) [What's New in Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=31) [This has been an exciting year](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=33) [for Swift and the Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=35) [Community.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=37) [And over the next 40 minutes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=37) [Slava and I are thrilled to give](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=39) [you an update on the major](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=40) [developments there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=41) [The session is roughly broken in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=43) [to two parts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=44) [First I'm going to give an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=46) [update on the Swift open source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=47) [project and the community around](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=48) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=51) [And then we'll dive into Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=51) [4.2, which is available as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=52) [preview today in the Xcode 10](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=54) [beta.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=58) [Since late 2015, Swift has been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=58) [Since late 2015, Swift has been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=58) [an open source project on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=60) [GitHub.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=62) [With a vibrant community of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=64) [users who discuss, propose, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=66) [review all changes to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=70) [language and standard library.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=71) [In that time over 600](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=75) [individuals have contributed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=77) [code to GitHub as Swift open](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=78) [source project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=80) [And together they have merged](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=82) [over 18,000 pull requests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=83) [Since Swift.org was launched](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=87) [Swift has been available for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=89) [download on Swift.org both for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=91) [downloadable tool chains for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=93) [Xcode, as well as various](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=95) [version of Ubuntu.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=96) [These are both development](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=98) [snapshots and official releases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=99) [Now we want Swift to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=105) [supported on all platforms so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=106) [everyone can use it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=108) [And a critical part of that is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=110) [extending the testing support](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=113) [provided to the community.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=115) [Various folks in the open source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=117) [project are working on bringing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=118) [project are working on bringing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=118) [Swift support to other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=120) [platforms.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=121) [And we'd like to support those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=122) [efforts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=123) [About a month ago we extended](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=125) [the public continuous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=127) [integration systems to support](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=128) [community hosted CI notes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=130) [So if you are a member of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=132) [community interested in bringing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=133) [Swift to another platform or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=134) [effort, you can now seamlessly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=136) [plug in your own hardware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=138) [support to bring testing there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=139) [This is a nice prerequisite for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=141) [supporting Swift in other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=142) [places.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=143) [We've also invested tremendously](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=146) [in the community around the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=149) [Swift open source project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=151) [This is the community that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=153) [discusses all changes to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=154) [language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=155) [About six months ago we moved](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=156) [from using mailing lists, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=158) [were very high traffic to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=160) [forums.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=162) [This was at the behest of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=162) [community.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=164) [Various people were concerned](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=165) [that they wanted to be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=167) [engage in the project at a level](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=168) [that worked well for them but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=170) [found it difficult to do so.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=172) [With the forums you can now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=174) [engage the level that works well](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=175) [for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=177) [The forums have also worked so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=179) [The forums have also worked so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=179) [well that we wanted to extend](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=180) [their utility out to supporting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=182) [the general open source project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=184) [If you maintain a Swift open](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=187) [source project such as a popular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=190) [Swift library, you can now use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=191) [the forums for use to discuss](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=193) [things on that project such as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=195) [discussions with your users or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=196) [development.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=198) [We've also looked at ways to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=200) [continue to extend Swift.org to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=202) [be of general use the community.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=204) [This week we've moved to hosting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=206) [the Swift programming language](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=207) [book to swift.org.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=209) [Located at docs.swift.org, this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=211) [will be a natural place for us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=213) [to extend more documentation for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=215) [use by the community.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=217) [Now the really exciting thing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=219) [about Swift is that people are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=222) [really thrilled about using it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=225) [And they're talking about it in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=226) [a variety of places.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=228) [At Podcasts, Meetups,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=229) [conferences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=231) [And we, Apple, thought it was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=233) [very important for us to engage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=234) [in those places because that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=236) [where a lot of the discussion is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=238) [happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=239) [Over the last year we have made](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=240) [a very conscious effort to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=242) [engage in those conferences and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=244) [present technical presentations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=246) [on things that we're doing with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=249) [Swift, or how does Swift work,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=250) [or how you can get involved in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=253) [the open source project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=254) [And this is something we're very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=256) [committed to continuing going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=257) [forward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=259) [One of these efforts I'd like to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=261) [talk about is a event co-located](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=262) [next to WWDC on Friday and that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=265) [is the try!](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=266) [Swift San Jose Conference.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=267) [There there will be a workshop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=269) [with members from the community](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=271) [to help on board people who are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=273) [interested in contributing to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=274) [the Swift open source project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=276) [And there will be members from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=278) [Apple's compiler team there to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=279) [also facilitate those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=282) [conversations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=283) [So that's all about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=285) [community update.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=287) [Let's talk about Swift 4.2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=289) [I think the natural place to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=290) [start is well, what is this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=292) [release about and how does it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=293) [fit into the bigger picture?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=294) [Swift updates occur -- some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=298) [major updates occur about twice](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=299) [major updates occur about twice](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=299) [a year.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=301) [And Swift 4.2 is a major update](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=302) [over Swift 4.1 and 4.0.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=304) [Now there are in broad strokes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=308) [two themes to this release.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=310) [One is a huge focus on developer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=312) [productivity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=314) [You can see this in a variety of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=315) [ways.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=316) [The faster builds for projects.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=317) [But also just through and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=319) [through massive improvement to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=320) [the core tooling experience from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=322) [the Debugger through the Editor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=324) [And the community has also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=326) [focused on language improvements](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=328) [that aim to improve common](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=330) [developer workflows, remove](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=332) [boilerplate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=333) [And Apple has continued invested](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=334) [improvements to the SDK so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=336) [the Objective-C APIs better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=339) [reflect into Swift making better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=341) [use of the language and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=344) [improving your use of our APIs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=345) [And the other side there's been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=348) [a massive effort on under the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=349) [hood improvements and changes to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=351) [the runtime towards this binary](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=353) [compatibility goal, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=355) [culminates in Swift 5, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=358) [culminates in Swift 5, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=358) [will be released in early 2019.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=361) [So what is binary compatibility?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=365) [Binary compatibility means that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=368) [you can build your Swift code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=369) [with the Swift 5 compiler and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=371) [layer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=372) [And at the binary level it will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=373) [be able to interoperate with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=375) [other code built with that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=376) [compiler or any other compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=377) [layer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=379) [This is a very important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=380) [milestone for the maturity of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=382) [the language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=383) [And what this will enable is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=385) [Apple to shift the Swift runtime](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=386) [in the operating system, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=388) [means apps can directly use it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=390) [meaning that they no longer need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=392) [it included in the application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=393) [bundle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=394) [So this is a code size win but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=395) [it's also important that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=397) [impacts things like startup](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=398) [time, memory usage, it's an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=400) [overall huge win for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=402) [community.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=403) [If you're -- we've been very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=404) [transparent on the progress](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=406) [towards ABI stability or binary](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=408) [compatibility.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=410) [You can follow along on the ABI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=411) [stability dashboard on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=412) [Swift.org.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=414) [Today's focus is on Swift 4.2,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=417) [Today's focus is on Swift 4.2,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=417) [which is an important waypoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=420) [toward Swift 5.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=421) [Let's talk about source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=423) [compatibility.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=425) [So just like in Xcode 9, Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=427) [10 shifts with one Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=430) [compiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=432) [So if you're using Xcode 10, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=433) [are using Swift 4.2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=435) [However, just like in Xcode 9,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=437) [the compiler also supports](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=440) [multiple language compatibility](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=442) [modes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=443) [Now in all the modes you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=445) [all the new APIs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=447) [You can use all the new language](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=448) [features.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=449) [What these gate are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=450) [source-impacting changes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=451) [The first two are ones that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=454) [existed previously in Xcode 9.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=457) [They're there to provide an out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=459) [of the box experience that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=460) [can build your Swift 3 and Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=461) [4 code without modifications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=463) [The Swift 4.2 mode is almost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=465) [identical to the 4 mode except](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=467) [it gates those SDK improvements](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=469) [that are talked about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=471) [That's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=473) [Just some previous versions of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=474) [Xcode, there's Migrator Support](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=477) [that you can find in the edit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=478) [menu to mechanize most of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=479) [menu to mechanize most of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=479) [changes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=481) [I want to give an important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=482) [disclaimer about the Swift 4.2](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=483) [SDK changes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=486) [Later Xcode 10 betas will likely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=487) [have further SDK improvements.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=489) [This is to provide opportunities](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=491) [to incorporate you feedback from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=493) [the betas of how these APIs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=494) [should be improved and how they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=496) [reflect into Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=498) [This means if you migrate to 4.2](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=500) [early, you should expect there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=502) [are going to be some changes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=503) [later.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=504) [Or you can hold off and migrate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=505) [later.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=507) [It's completely up to you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=507) [Now with Swift 4.2 we think we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=510) [are rapidly converging on what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=512) [Swift code is going to look like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=514) [going forward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=515) [This is an important phase in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=516) [the maturation of the language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=519) [And thus we really think it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=521) [important for everyone to move](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=523) [off of Swift 3 and embrace using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=524) [Swift 4.2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=527) [There are important code size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=528) [improvements there and just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=529) [overall improvements to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=530) [language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=531) [And this is Xcode 10 is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=532) [be the last release to support](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=534) [that Swift 3 compatibility mode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=535) [So let's talk about some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=539) [So let's talk about some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=539) [improvements to the tooling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=540) [In the State of the Union we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=542) [mentioned that there are some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=544) [significant improvements to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=545) [build improvement for Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=546) [projects over Xcode 9.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=547) [And so these numbers are run on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=550) [a 4-Core MacBook Pro i7.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=552) [Let's look a little bit closer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=553) [at one of them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=556) [This project is a mix and match](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=558) [of Objective-C in Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=560) [It started out as an Objective-C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=562) [project and started](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=563) [incorporating Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=564) [This is a very common scenario.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=566) [Now what this Build time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=568) [improvement doesn't really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=569) [underscore is how much faster](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=572) [building this Swift Code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=573) [actually became.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=574) [So if we just focus on how much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=576) [faster the Swift code built, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=577) [actually builds three times](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=579) [faster than it did before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=581) [And so that's why the project](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=583) [has that more modest 1.6x](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=585) [speedup.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=587) [And what you will see is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=589) [the overall build improvements](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=591) [will depend on the nature of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=592) [your project, how much Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=593) [code it's using, the number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=594) [cores on your machine, but we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=596) [in practice have seen from many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=598) [in practice have seen from many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=598) [projects it's a 2x speedup.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=600) [And the win comes from observing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=602) [that because within a Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=604) [target you have cross-file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=606) [visibility, right, that's one of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=608) [the great features of Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=609) [where you don't need header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=610) [files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=611) [There was a lot of redundant](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=612) [work being done by the compiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=613) [And what we've done is we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=615) [retooled the compilation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=617) [pipeline to reduce a lot of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=618) [redundant work and make better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=620) [use of the cores on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=621) [machine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=622) [And that's where these speedups](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=623) [come from.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=624) [If you're interested in more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=625) [details there's these two great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=626) [talks later this week that dive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=627) [into how the build process works](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=628) [under the book including more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=630) [details about where this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=631) [performance win comes from.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=632) [Now this big win comes from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=636) [debug builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=638) [I want to focus on how this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=641) [surfacing in the Xcode build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=644) [settings.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=647) [Recently we separated out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=648) [compilation mode from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=649) [optimization level.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=651) [Compilation mode is how your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=653) [project builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=655) [So for release builds the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=657) [default is whole module](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=658) [compilation that means all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=659) [compilation that means all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=659) [files within your target are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=661) [always built together.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=662) [This is to enable maximum](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=664) [opportunities for optimization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=665) [It's not the amount of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=667) [optimization done but the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=668) [opportunities for optimization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=669) [And for Debug builds the default](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=672) [is incremental.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=674) [That means not all the files are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=675) [all built, re-built always all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=676) [together.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=678) [So this is a tradeoff in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=679) [performance for build times.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=680) [Optimization level for Debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=683) [builds continues to be no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=684) [optimization by default.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=685) [This is for faster builds and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=686) [better Debug information and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=687) [release builds are optimized for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=689) [speed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=691) [We'll get back to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=692) [optimization level in a few](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=693) [minutes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=695) [All right so this separation of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=698) [compilation mode and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=701) [optimization level nicely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=702) [highlights and interesting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=705) [stopgap measure that various](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=706) [folds discovered that when they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=708) [combined whole module](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=710) [compilation with no optimization](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=711) [that they sometimes would get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=713) [faster Debug builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=715) [And this is because that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=716) [combination reduces a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=718) [combination reduces a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=718) [that redundant work that I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=720) [talked about before that we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=722) [no made great efforts to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=724) [eliminate or significantly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=726) [reduce.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=728) [The problem with this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=730) [combination is, is it impedes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=730) [incremental builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=732) [So anytime you touch a file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=733) [within a target the whole target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=734) [gets rebuilt.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=736) [Now with the improvements in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=737) [Xcode 10 to Debug builds, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=738) [feel you no longer need to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=740) [the stopgap measure and we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=741) [observed that the default](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=744) [incremental builds are at least](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=745) [as good as this combination or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=747) [better.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=749) [Especially since they support](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=749) [incremental builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=750) [Let's talk about some important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=754) [under the hood runtime](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=755) [optimizations and this is all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=757) [part of that march towards](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=758) [binary compatibility.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=759) [Swift uses automatic memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=763) [management and it uses reference](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=765) [counting just like Objective-C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=767) [for managing object instances.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=769) [On this slide I've illustrated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=771) [in comments where the compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=773) [inserts, retains, and releases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=774) [This is how it behaved in Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=777) [4.1.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=778) [4.1.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=778) [When an object is created](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=782) [there's a +1 reference account](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=783) [associated with it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=784) [What the convention was if the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=785) [object is passed off as an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=788) [argument to another function,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=789) [it's the obligation of that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=791) [function call to release the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=792) [object.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=794) [So it's basically you're passing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=794) [off the responsibility to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=796) [call to release it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=798) [This provided some performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=800) [opportunities to shrink the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=801) [lifetime of some objects to like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=802) [their smallest range of use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=805) [However, code often looks more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=807) [like this where you're passing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=810) [the object off several times to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=812) [different APIs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=814) [And because you have this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=815) [calling convention, you still](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=817) [have this dance where the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=818) [initial reference count is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=820) [balanced out with the final](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=821) [call.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=822) [But the intermediate calls are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=823) [expected to have these extra](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=824) [retains and releases because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=825) [that's what a convention is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=828) [This is really wasteful because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=830) [the object is really just going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=832) [to be alive during the entire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=833) [duration of this function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=835) [So in Swift 4.2 we changed the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=837) [calling convention so that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=839) [calling convention so that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=839) [was no longer the callee's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=841) [obligation to release the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=842) [object.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=844) [This means all these retains and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=845) [releases go away, which is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=846) [significant reduction in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=850) [retained release traffic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=852) [This has two implications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=853) [It's both a code size win](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=855) [because those calls are gone and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=856) [it has a runtime improvement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=859) [Another important optimization](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=861) [we did was to string.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=864) [And Swift 4.2 string is now 16](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=866) [bytes big where it as previously](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=868) [24.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=869) [We feel this is a good tradeoff](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=870) [between memory usage and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=871) [performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=873) [It's also, however, still large](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=875) [enough to do an important small](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=877) [string optimization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=878) [If the string fits within 15](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=880) [bytes then the actual string is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=882) [represented directly in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=885) [string type without going to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=886) [heap to allocate a separate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=888) [buffer to represent the string.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=889) [This is obviously also a memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=891) [win and a performance win.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=893) [This is as similar to an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=895) [optimization that exists within](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=896) [a string.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=897) [We can actually represent larger](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=898) [strings.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=899) [strings.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=899) [Finally before I hand it off to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=903) [Slava we'll talk about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=905) [language improvements.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=906) [I want to talk a little bit more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=907) [about the efforts to reduce code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=908) [size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=910) [I talked a little bit about that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=912) [calling convention change, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=913) [reduces code size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=914) [But we've also introduced a new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=915) [optimization level, Optimize for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=917) [Size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=919) [This can be useful for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=921) [applications that care very much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=922) [about app size limits such as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=924) [from cellular over the air](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=925) [download limits.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=927) [Swift is a very powerful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=929) [language with static knowledge](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=930) [about what your program does.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=933) [And so compiler has many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=935) [opportunities to do performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=936) [optimizations such as function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=938) [call inlining, speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=940) [devirtualization, which trade](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=941) [off a little bit of code size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=943) [for more performance, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=944) [sometimes that more performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=945) [isn't really needed in practice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=947) [This is the result of applying](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=949) [Osize to the Swift Source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=951) [Compatibility Suite, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=952) [contains an assortment of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=954) [projects from GitHub, frameworks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=955) [and applications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=957) [And what you'll see is a wide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=959) [And what you'll see is a wide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=959) [range depending on what language](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=960) [features are used about 10% to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=961) [30% reduction in code size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=963) [Now this, when I talk about code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=965) [size I'm talking about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=967) [machine code that is generated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=967) [as a result of compiling your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=969) [Swift code, not the overall app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=971) [size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=972) [The overall app size depends on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=972) [assets and all sorts of other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=974) [stuff.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=975) [In practice we observe that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=977) [runtime performance is usually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=979) [about 5% slower.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=980) [So you're trading off for a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=981) [little bit of performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=983) [For many applications this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=984) [totally fine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=985) [So it really depends on your use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=986) [case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=988) [But if this is something you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=989) [interested in we encourage you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=990) [to give it a try.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=991) [With that I'd like to hand it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=994) [off to Slava who will talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=995) [all the great language and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=996) [improvements with Swift 4.2](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=997) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1000) [&gt;&gt; Hey everybody, I'm Slava](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1006) [Pestov.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1007) [I work on the Swift Compiler and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1007) [today I'm going to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1009) [how the new language features in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1010) [Swift 4.2 allow you to write](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1012) [simpler and more maintainable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1014) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1015) [So before we start talking about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1017) [the new language changes, let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1019) [the new language changes, let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1019) [review the process for making](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1020) [improvements to the language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1022) [So as Ted mentioned, Swift is an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1024) [open source project, but it also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1026) [has an open design.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1028) [This means that if you have an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1030) [idea for improving the language,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1031) [you can go and pitch it on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1033) [forums and if the idea gains](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1034) [enough traction and crystalizes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1036) [into draft proposal, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1038) [submit it together with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1040) [implementation to the core team](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1041) [for review.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1043) [At this point a formal review](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1044) [period allows members of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1046) [community to give additional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1047) [feedback and then the core team](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1049) [makes a decision as to whether](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1050) [to accept the proposal.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1052) [If you go to the Swift Evolution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1054) [website, you can see a list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1056) [all the proposals that were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1058) [accepted and implemented in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1059) [Swift 4.2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1061) [And if you look at this list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1063) [proposals there's a lot here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1064) [There's more than I can cover](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1066) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1067) [But one thing I really wanted to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1068) [emphasize was the large number](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1070) [of proposals that were both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1071) [designed and implemented by the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1073) [community.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1075) [What this means is that these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1076) [proposals address common](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1078) [pinpoints in the language that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1079) [pinpoints in the language that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1079) [came up in the real world and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1081) [you came up with the idea for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1083) [fixing these pinpoints and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1085) [contributed these improvements](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1087) [back to Swift so that everybody](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1089) [benefits.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1091) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1092) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1094) [So for the first improvement](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1099) [we're going to see how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1101) [eliminate a common source of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1102) [boilerplate when working with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1103) [enum's.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1105) [So let's say I have to find an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1106) [enum.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1107) [And I want to print every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1108) [possible value that this data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1110) [type can have.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1112) [So in Swift 4, I had to define a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1113) [property perhaps with a list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1116) [all the possible cases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1119) [And if I add a new case then I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1121) [have to remember to update that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1124) [property, otherwise I just get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1126) [incorrect behavior or runtime.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1128) [And this is just not very good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1130) [because you're repeating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1133) [yourself to the compiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1134) [So in Swift 4.2 we've added a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1136) [new CaseIterable protocol and if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1139) [new CaseIterable protocol and if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1139) [you state a conformance to this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1141) [protocol, the compiler will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1143) [synthesize an all cases property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1144) [for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1146) [OK, that was short and sweet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1147) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1149) [For the next improvement we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1153) [going to see how to eliminate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1155) [another source of boilerplate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1156) [This time it's when you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1158) [unable to make your code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1159) [sufficiently generic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1160) [So in Swift 4 we have this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1162) [contains method on sequence.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1164) [And this requires that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1167) [element type of the sequence is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1168) [Equatable so that it can find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1170) [the element that it's looking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1172) [for.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1173) [And of course I could call this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1174) [within an array of strings](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1176) [because string is Equatable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1178) [But what if I call it within an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1179) [array of arrays.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1181) [Well array of Int, the element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1183) [type here is not equitable,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1185) [which meant that I would just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1188) [get a compile time error.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1189) [And you might ask, well why](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1191) [doesn't the standard library](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1193) [make all arrays Equatable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1195) [But that doesn't make sense](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1197) [either because if the element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1198) [either because if the element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1198) [type of the array is not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1200) [Equatable, like a function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1201) [perhaps, then you can't really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1203) [make the array Equatable either.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1205) [But certainly if the element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1207) [type of the array is Equatable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1209) [then I can define an equality](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1210) [operation on arrays that just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1212) [compares the elements pair wise.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1214) [And this is what conditional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1217) [conformance allows a standard](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1218) [library to do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1220) [So now array gets an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1221) [implementation of Equatable for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1223) [the case where the element type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1224) [is equitable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1226) [And in Swift 4.2 this example we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1227) [saw earlier now works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1229) [And in addition to arrays being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1231) [Equatable the standard library](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1234) [defines a number of other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1236) [conditional conformance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1237) [For example, optional and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1239) [dictionaries are now Equatable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1241) [when their element type is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1242) [Equatable and the same works for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1244) [Hashable, Encodable, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1246) [Decodable conformances.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1249) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1252) [And this allows you to compose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1258) [collections in ways that were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1259) [collections in ways that were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1259) [not possible before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1261) [So here I have a set of arrays](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1262) [of optional integers and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1265) [everything just works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1269) [If you want to learn more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1270) [there's a session later this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1273) [week where you can learn about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1274) [conditional conformance and some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1277) [other generics improvements in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1278) [Swift 4.2 that I won't be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1279) [covering today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1281) [So what about defining your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1283) [Equatable and Hashable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1285) [conformances.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1286) [Well, a common pattern in Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1288) [is that I have a struct with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1290) [bunch of stored properties and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1292) [all those stored properties are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1294) [themselves Equatable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1296) [And then I want to make the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1297) [struct Equatable just by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1298) [comparing those properties of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1300) [the two values.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1302) [In Swift 4 previously you had to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1303) [write this out by hand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1305) [And this is just boilerplate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1307) [If I add a new stored property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1308) [to my struct, I have to remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1310) [to update this implementation of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1311) [Equatable and it's easy to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1313) [a copy and paste error or some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1314) [other mistake.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1316) [So in Swift 4.1 we introduce](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1317) [this ability to synthesize the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1319) [this ability to synthesize the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1319) [implementation of equality.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1321) [If you emit the implementation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1323) [than the compiler will fill it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1325) [in for you as long as all those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1326) [stored properties are themselves](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1328) [Equatable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1329) [This also works for Hashable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1331) [Now what about generic types?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1333) [So here I have a data type whose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1336) [values are either instances of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1337) [the left type or instances of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1339) [the right type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1341) [And I might now want to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1342) [left and right constrained to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1344) [Equatable because again, I want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1346) [to be able to use this either](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1347) [type with functions, errors, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1348) [other non Equatable types.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1351) [But certainly I can define a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1352) [conditional conformance so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1354) [if left and right are both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1356) [Equatable then either is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1357) [Equatable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1359) [But I can do even better than](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1360) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1361) [Notice how the implementation of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1362) [equality here there's only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1363) [really one obviously correct way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1365) [to do it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1367) [You have to check that both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1367) [values have the same case and if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1369) [they do you check their payloads](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1371) [for equality.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1373) [So you might guess, well the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1374) [compiler should be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1376) [synthesize this for you and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1377) [can in Swift 4.2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1378) [can in Swift 4.2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1378) [And this also works for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1381) [Hashable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1382) [So now I can have a set of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1384) [either Int's or strings as one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1387) [example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1389) [OK.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1391) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1392) [Now, there are cases where you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1396) [really do have to implement](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1398) [equality and Hashing by hand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1399) [So let's look at one example of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1403) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1405) [Let's say I have a data type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1406) [that represents a city and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1408) [got a name, it's got the state](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1410) [that it's located in, and it has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1412) [the population.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1413) [And let's say that for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1414) [purposes of this example I only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1415) [have to compare the name and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1418) [state for equality and if I know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1419) [those are equal I don't have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1421) [check the population.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1422) [So if I let the compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1424) [synthesize the implementation of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1426) [equality here it's going to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1428) [unnecessary work because it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1429) [going to be comparing that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1431) [population field.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1432) [But I certainly write it out by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1433) [hand and maybe in this case it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1435) [not too bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1436) [But what about Hashable?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1438) [So if I want to calculate the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1441) [Hash code of the city object,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1442) [then I'm going to calculate the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1445) [Hash code of the name and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1447) [Hash code of the state and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1448) [have to combine them somehow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1449) [But how do I do that?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1451) [Well, I can use an exclusive or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1453) [operation or I could use some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1455) [random math formula that I found](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1458) [on the Internet or just came up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1460) [with myself.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1461) [But neither one of these is very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1463) [satisfying and it feels like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1464) [these Hash combining functions](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1467) [have a lot of magic to them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1469) [And the cost of getting it wrong](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1470) [is pretty high because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1472) [performance properties that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1474) [expect to get from a dictionary](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1475) [or a set really rely on having a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1477) [good high-quality Hash function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1479) [There's also a security angle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1482) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1484) [So if an attacker is able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1484) [craft inputs that all Hash to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1486) [the same value and send them to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1489) [your app over the Internet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1491) [somehow, then it might slow your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1492) [app down to the point where it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1494) [becomes unusable creating a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1495) [denial of service attack.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1496) [So in Swift 4.2 we've added a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1498) [So in Swift 4.2 we've added a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1498) [better API for this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1501) [Now recall the Hashable protocol](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1503) [in Swift 4 and 4.1.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1505) [It has a single Hash value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1507) [requirement that produces a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1509) [single integer value.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1510) [In Swift 4.2 we've redesigned](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1512) [the Hashable protocol so now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1514) [there's a different Hash into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1517) [requirement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1519) [And instead of producing a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1520) [single Hash code value, Hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1521) [into takes a Hasher instance and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1523) [then you can feed multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1526) [values into the Hasher, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1527) [will combine them into one Hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1529) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1531) [So going back to our example of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1532) [the city data type, all we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1534) [to do is implement Hash into by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1536) [recursively calling Hash into on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1538) [the name and the state passing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1540) [in the Hasher object instance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1542) [that we were given.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1544) [And the Hash combining algorithm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1546) [in the Hasher, it does a good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1549) [job of balancing the quality of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1551) [the Hash code with performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1553) [and as an added layer of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1555) [protection against denial of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1556) [service attacks, it uses a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1557) [random preprocess seed, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1559) [random preprocess seed, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1559) [generated when your app starts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1561) [And we think that it should be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1565) [pretty easy to migrate your code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1567) [to using the new Hashable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1569) [protocol and we encourage you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1570) [do so.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1572) [The one caveat to watch out for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1573) [is you might have some code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1575) [where you're expecting that Hash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1576) [values remain constant from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1578) [different runs of your app or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1580) [that if you iterate over a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1582) [dictionary or a set you're going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1583) [to get the elements in the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1585) [order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1586) [And this is no longer the case](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1587) [because of that random](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1588) [preprocess seed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1589) [So you will need to fix your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1590) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1591) [And to make this easier we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1592) [added a build setting, the Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1595) [Deterministic Hashing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1597) [Environment Variable, which you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1598) [can enable in the scheme editor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1599) [to temporarily disable that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1602) [preprocess random seed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1603) [OK, so let's talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1605) [generating random numbers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1609) [So how do you generate random](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1612) [numbers in Swift today?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1613) [Well, you have to use imported C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1615) [APIs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1617) [And this is really not ideal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1618) [because they are different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1619) [because they are different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1619) [between platforms and they have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1621) [different names, different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1623) [behavior, so you have to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1624) [build configuration checks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1626) [But also they're quite low level](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1628) [and these common operations that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1630) [are not quite so obvious to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1632) [implement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1634) [For example, if I want to get a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1635) [random number between 1 and 6,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1636) [then I might think to just call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1639) [this Darwin arc4random function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1641) [and then calculate the remainder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1643) [of dividing by 6.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1645) [But that actually gives you a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1646) [result that is not uniformly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1647) [distributed between 1 and 6.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1649) [So in Swift 4.2 we've added a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1652) [new set of APIs to make this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1655) [kind of thing easier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1657) [First of all, all the numeric](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1659) [types now define a random method](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1661) [that takes a range and returns a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1663) [number uniformly distributed in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1665) [that range.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1667) [This uses the correct algorithm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1668) [and it even works for floats.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1669) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1672) [For higher level code we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1679) [For higher level code we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1679) [added a random element method to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1680) [the collection protocol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1683) [And just like min and max this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1684) [returns an optional so that if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1687) [you pass in an empty collection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1688) [you get back no.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1690) [And finally there's a shuffled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1692) [method on collection where this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1694) [gives you an array with a random](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1697) [permutation of the elements of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1698) [that collection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1700) [And we think the default Random](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1702) [Number Generator is a good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1705) [choice for most apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1706) [But you can also implement your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1708) [own.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1709) [So there's a random number](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1710) [generator protocol and once you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1711) [write a type that conforms to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1714) [this protocol you can pass it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1715) [all these APIs that I talked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1717) [about which have an additional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1719) [overload with a using parameter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1720) [that takes a random number](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1723) [generator.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1724) [OK, so we saw these build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1726) [configuration checks earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1729) [Let's talk some more about them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1731) [Well, this is a pretty common](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1734) [pattern in Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1735) [You have a little piece of Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1737) [code that is shared between iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1738) [code that is shared between iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1738) [and macOS and on iOS you want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1740) [do something with UIKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1743) [On macOS you want to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1745) [something similar in AppKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1746) [So if you want to do this today](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1748) [you're going to write a #if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1750) [compile time condition check and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1752) [then you have to list out those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1754) [operating systems where UIKit is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1755) [available.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1757) [So but what you really care](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1758) [about is not that you're running](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1760) [on this particular operating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1761) [system, but that you can import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1763) [UIKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1764) [So on Swift 4.2 we've added a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1765) [has import Build Configuration](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1767) [Directive so you can better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1770) [express your intent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1772) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1774) [And with the new features of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1776) [Swift 4.2, I can actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1778) [improve this code further.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1779) [So let's say that I'm also going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1781) [to explicitly check for AppKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1783) [and then if neither UIKit nor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1785) [AppKit is available, for example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1787) [if I'm building on Linux, I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1788) [going to use the new #error](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1790) [build directive to produce a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1792) [friendly compile time error](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1793) [message.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1795) [OK, now here's another similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1797) [source of boilerplate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1799) [source of boilerplate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1799) [So if I want to compile](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1801) [something conditionally when I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1803) [in the simulator environment,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1805) [then today in Swift 4 I have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1806) [copy and paste this ugly thing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1809) [everywhere I want to perform](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1811) [that check.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1812) [In Swift 4.2 you can use the new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1814) [hasTargetEnvironment condition,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1816) [to again better state your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1818) [intent and just explicitly ask](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1821) [the compiler, am I compiling for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1823) [the simulator or not?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1825) [And while we're at it, let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1826) [replace that FIXME with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1828) [#warning build directive to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1830) [produce a message or compile](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1832) [time so that I don't forget to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1834) [fix my FIXME.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1835) [OK, so that about wraps up all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1838) [the features that I'm going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1840) [discuss today, but I have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1842) [couple more things to talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1843) [about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1844) [Let's unwrap, Implicitly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1846) [Unwrapped Optionals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1847) [That's a horrible pun.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1848) [OK, so Implicitly Unwrapped](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1850) [Optionals can be a little bit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1852) [confusing and let's first review](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1854) [the mental model for Implicitly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1857) [Unwrapped Optionals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1859) [Unwrapped Optionals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1859) [How do I think about them?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1860) [Well, so since Swift 3 they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1861) [not the type of an expression.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1864) [Don't think of it as a type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1866) [Instead, think of Implicitly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1868) [Unwrapped Optionals as an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1869) [attribute of a declaration.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1871) [And what the compiler does when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1873) [you reference such a declaration](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1875) [is it will first try to type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1877) [check it as a plain optional and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1879) [then if that doesn't make sense](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1881) [in the context where it's used,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1883) [it goes ahead and unwraps it and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1884) [then type checks it as the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1886) [underlined type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1888) [So let's look at an example of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1890) [the first case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1891) [So here I have two functions,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1893) [the first of which produces and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1894) [implicitly unwrapped optional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1896) [integer and the second of which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1897) [takes a value of any type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1899) [And I'm going to call the second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1901) [function with the result of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1903) [first function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1904) [Now in this case I can store an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1905) [optional Int inside of an Any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1907) [and so no forced unwrapping is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1910) [performed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1912) [The value simply becomes a plain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1913) [optional.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1915) [Let's look at an example of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1915) [second case now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1919) [Here, the first function now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1920) [produces -- sorry, the second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1922) [function now takes an integer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1925) [So when I call the second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1927) [function with the result of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1929) [first function then I cannot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1930) [pass an optional Int where an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1933) [Int was expected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1934) [So the compiler has to insert a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1936) [force unwrap and then it all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1938) [works because now I have an Int](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1941) [and an Int And this mental model](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1942) [makes Implicitly Unwrapped](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1946) [Optionals very easy to reason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1947) [about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1949) [But until recently the compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1950) [had some edge cases where it did](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1952) [not always follow this model.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1954) [So recall that you cannot have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1956) [an implicitly unwrapped optional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1958) [that is part of another type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1960) [And this is still the case in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1962) [Swift 4.2.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1963) [I cannot have an array of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1964) [implicitly unwrapped Int's.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1966) [However, in Swift 4 previously,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1969) [there is some edge cases like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1971) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1973) [I could define a type alias](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1973) [where the underlying type was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1975) [implicitly unwrapped Int and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1977) [then I could make an array of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1979) [then I could make an array of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1979) [this type alias and I would get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1981) [very confusing behavior from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1983) [compiler that made code hard to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1984) [understand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1986) [So in Swift 4.2 we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1987) [re-implemented Implicitly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1989) [Unwrapped Optional so that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1990) [exactly matches the mental model](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1992) [I outlined earlier and this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1994) [confusing code example now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1997) [generates a compile time warning](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=1999) [and the compiler parses that as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2001) [if it was just a plain array of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2003) [integers, of optional integers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2005) [Now, most code will not be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2008) [affected by this change to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2010) [Implicitly Unwrapped Optional,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2012) [but if you were accidentally](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2014) [relying on these edge cases I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2015) [encourage you to check out this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2017) [blog post on Swift.org that goes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2018) [into a lot of detail and has a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2021) [lot of examples about what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2022) [changed and how.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2024) [OK, now there's only one more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2027) [thing here today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2029) [Let's talk about memory](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2030) [exclusivity checking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2032) [So if you recall, in Swift 4 we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2035) [introduced something called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2037) [Memory Exclusivity Checking,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2039) [Memory Exclusivity Checking,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2039) [which was a combination of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2041) [compile time and runtime checks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2042) [that restricted certain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2045) [operations from being performed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2046) [In particular we banned](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2049) [overlapping access to the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2051) [memory location.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2053) [What does this mean?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2054) [Well, let's look at an example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2055) [So here's a piece of code that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2057) [implements a data type for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2060) [operating system paths.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2061) [And this is represented as an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2063) [array of path components.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2065) [And there's a withAppended](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2067) [method.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2068) [This method adds an element to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2070) [the array, then in calls a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2071) [closure that you pass in and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2073) [then it removes that element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2075) [from the array.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2077) [And this code is totally fine,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2078) [it's a valid Swift 4 code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2080) [But let's look at this usage of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2082) [our path data type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2084) [So here I have a path that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2086) [stored and a local variable and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2087) [then I call withAppended on it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2090) [and inside the closure I access](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2092) [that local variable again](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2094) [printing it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2096) [So what the problem here?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2097) [Well, it turns out this code is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2099) [Well, it turns out this code is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2099) [actually ambiguous because when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2101) [I access that local variable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2103) [inside the closure, it's already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2106) [being modified by this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2108) [withAppended method, which is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2110) [mutating method.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2111) [So the ambiguity is that do I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2113) [mean the original value of path](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2116) [as it was before I called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2118) [withAppended or do I mean the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2120) [current value that is being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2122) [modified whatever that means.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2124) [Well, in Swift 4 this was a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2126) [compile time error because it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2128) [was an exclusivity violation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2130) [And one way to address this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2132) [to resolve the ambiguity by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2134) [telling the complier, hey I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2135) [really want the new value so I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2137) [going to just pass it in as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2140) [parameter to the closure instead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2141) [of capturing it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2143) [OK, but now look at this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2145) [example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2147) [So this is almost the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2148) [function except that it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2149) [generic, it's prioritized by the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2151) [return type of the closure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2153) [And in this case we can have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2155) [same kind of ambiguity by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2157) [accessing the path value from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2159) [accessing the path value from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2159) [inside the closure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2161) [But previously Swift 4 did not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2162) [catch this error at compile](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2164) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2166) [In Swift 4.2 we've improved the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2168) [static exclusivity checking to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2170) [catch ambiguities like this in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2172) [more cases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2174) [And in addition to improving --](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2176) [OK, and you can also fix the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2179) [ambiguity in the same way by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2180) [passing it as a parameter to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2182) [closure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2183) [In addition to improving the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2184) [static checks, we've also added](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2186) [the ability to use the runtime](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2188) [exclusivity checks and release](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2190) [builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2192) [And this has some overhead but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2193) [if your app is not performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2195) [critical, we encourage you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2196) [try this out and leave it on all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2198) [the time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2199) [In the future, we will get the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2200) [overhead of these dynamic checks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2202) [down to the point where we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2204) [leave this enabled all the time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2206) [and it will give you an extra](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2208) [level of protection just like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2209) [array bounce checking or integer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2210) [overflow checking today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2213) [And there's a lot more in Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2215) [4.2 that I didn't talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2218) [4.2 that I didn't talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2218) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2221) [And we encourage you to try it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2222) [out on your existing apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2223) [We also want you to try out the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2225) [new features and if you have any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2226) [questions please come to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2228) [labs and ask us.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2230) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2232) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/401/?time=2234)