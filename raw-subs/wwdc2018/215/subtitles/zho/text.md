# Introducing ClassKit

## Summary
The new ClassKit framework lets you organize educational content in your app so that teachers can discover and assign specific activities and view students' progress in the new Schoolwork app. Learn how to adopt ClassKit to your content structure, declare assignable content, and share student progress on activities teachers assign in Schoolwork.

## Info
* Frameworks
* WWDC 2018 - Session 215 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/

## Text
 [（ClassKit简介
演讲215）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=17) [大家早上好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=31) [我叫Pavel](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=33) [Marin与我今天和大家
谈谈ClassKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=35) [我们的演讲分为三部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=40) [在第一部分中
我们将对ClassKit进行概述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=43) [我们将向你展示数据
如何在系统中流动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=47) [演讲的第二部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=50) [我们将列出系统中所有的类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=52) [以及介绍每个类的一些有趣特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=54) [最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=58) [Marin将向我们展示如何在现有
app中使用ClassKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=59) [Marin将向我们展示如何在现有
app中使用ClassKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=59) [（使用ClassKit）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=62) [让我们从概述开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=63) [（总体概述）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=66) [ClassKit
是一个基于教育的框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=69) [这意味着它被设计于学校环境中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=72) [它允许你在app中定义可布置的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=77) [以便教师可以将其作为家庭作业
布置给学生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=82) [它可以汇报](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=86) [这些由老师布置的内容的进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=90) [而且这是在考虑到
隐私的情况下完成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=94) [我的意思是你可以在你的app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=96) [报告任何所布置内容的进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=100) [但老师只会看到那些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=103) [他们明确布置给学生的任务的进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=106) [你为何应采用ClassKit呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=110) [首先 这将能够提供更好的学生体验
以及更优的教师工作流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=113) [因为他们将能够确切地知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=119) [因为他们将能够确切地知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=119) [你的app中有哪些可布置的内容
并将其布置给学生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=121) [它能让教师了解在app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=126) [每个学生的表现如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=128) [这使个性化学习成为可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=132) [如果老师能够知道
学生在你的app中的表现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=135) [他们将能够更好地调整
以后的家庭作业](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=139) [最后 它也给你一个竞争优势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=143) [这是因为如果教师…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=147) [当这类信息反馈给他们时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=149) [他们很可能会提倡在学校内广泛使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=152) [你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=157) [说到学校](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=160) [有一个叫Apple School
Manager的相关技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=162) [学校管理员和IT部门](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=166) [使用它为该组织中的每个人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=169) [创建托管Apple ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=173) [每个老师都会得到一个
托管Apple ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=175) [所有学生也将得到
托管的Apple ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=178) [所有学生也将得到
托管的Apple ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=178) [管理员也可以使用它
在学校内创建课程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=182) [例如 在数学课上我们有一位老师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=184) [他自己有一个托管Apple ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=191) [而学生也有各自的
托管Apple ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=193) [这也是学校管理
所有内容和设备的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=198) [正如我们提到的竞争优势一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=203) [这是学校在ClassKit功能中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=206) [启用学生进度报告的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=211) [此外 这也是学校批量购买
app的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=216) [任何启用了
ClassKit支持的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=221) [都将在其名字旁边有一个
“Works with Schoolwork”选中标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=226) [Schoolwork是一个
即将推出的新教育app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=231) [学生使用此app查看
分发给他们的讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=236) [学生使用此app查看
分发给他们的讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=236) [教师用它来布置家庭作业](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=240) [我们在系统中称之为讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=245) [讲义只是一组任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=249) [例如 一段内容可能是
讲义中的一项任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=251) [这也是教师查看学生
在某一份讲义中的表现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=258) [进度报告的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=263) [让我们来看看一个讲义的
生命周期是什么样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=268) [（讲义的生命周期）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=272) [但在我们制作讲义之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=273) [你的app需要能够声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=278) [哪些内容是可布置的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=281) [在我们的框架中 这是通过使用
交叉代码CLS上下文来实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=286) [CLS上下文能够允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=290) [将你的内容表示为树结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=293) [你的app中已经预定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=297) [你的app中已经预定义了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=297) [一个主app上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=301) [这充当上下文树中的根上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=305) [而你所有的内容都只是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=310) [主app上下文的后代](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=313) [所以…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=316) [我们请求你尽早…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=318) [定义你的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=322) [因为你越早定义你的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=323) [Schoolwork中的教师
越早可以使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=325) [并将其布置给学生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=329) [假设你已经创建了你的上下文树](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=333) [一位教师将能够打开
Schoolwork](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=335) [然后点击“Create
New Handout”按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=338) [这将创建一个新的讲义实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=342) [然后他们会将讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=344) [指向你app内的某个特定内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=347) [一旦他们完成这个步骤
就可以把这份讲义分发给学生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=350) [一旦学生收到这份讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=355) [他们会点击讲义
这会打开你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=357) [他们会点击讲义
这会打开你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=357) [这时你的app将会创建必要的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=361) [为了更好的学生体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=366) [你最好将学生导航到相应的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=369) [Marin一会儿将会告诉我们
这是如何在代码中实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=375) [现在假设](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=379) [学生开始做这份家庭作业](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=381) [你的app开始向学生报告进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=384) [所有这些进度将被发送到教师的设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=388) [并捆绑在我们称之为
进度报告或活动报告中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=391) [当这些完成以后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=396) [教师可以从分发的讲义中获得该报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=399) [这整个流程包括
你有一个教师托管ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=406) [一个学生托管ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=411) [也可能有一些设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=413) [甚至只是一台你可以登录登出的设备
以便你可以进行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=416) [甚至只是一台你可以登录登出的设备
以便你可以进行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=416) [但尽管如此
我们实际上还可以做得比这更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=421) [我们创建了一个我们称之为
开发者模式的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=425) [开发者模式的作用是
能够让你充当老师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=429) [以便你可以创建讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=436) [分发给学生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=439) [并查看这些学生的进度报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=441) [它也可以让你充当学生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=443) [使用这些讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=446) [并且你的app可以将进度报告给教师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=447) [还有一种重置开发数据的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=453) [说实话我个人经常需要使用这个按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=455) [有了这些作为前提
我们来看看框架中有哪些类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=462) [（框架类）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=465) [在最顶端
我们有一个Data Store](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=466) [它用于在我们的app中管理上下文树](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=470) [这也是主app上下文作为属性
暴露出来的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=477) [这也是主app上下文作为属性
暴露出来的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=477) [Data Store跟踪系统中的
所有的修改对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=482) [所以如果你想保存这些对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=487) [你可以调用
CLSDataStore.save(completion:)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=489) [我还想提一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=498) [一个Data Store共享实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=499) [你可以与之交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=502) [接下来我们讨论一下上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=505) [我们看到上下文是一个树层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=510) [Marin稍后会讨论上下文的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=515) [如何使用它们
并提及一些关于它们的有趣属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=519) [但我想专注于上下文身份](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=523) [ClassKit中上下文的身份
包含两样东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=528) [第一个是identifier属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=533) [identifier属性允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=536) [在兄弟节点中唯一识别上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=538) [在兄弟节点中唯一识别上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=538) [我的意思是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=544) [你可以拥有具有相同
identifier的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=545) [或具有相同identifier
的多个上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=548) [只要他们没有相同的父节点
那就没问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=551) [另一个东西我们称之为
上下文标识符路径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=555) [上下文标识符路径是我们实际用来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=561) [在上下文树中唯一的识别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=563) [特定上下文的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=567) [上下文标识符路径是什么呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=569) [其实它只是一个
上下文标识符的数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=571) [我们使用它的方式是
从根开始遍历上下文树](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=574) [沿着这条路径
直到我们到达一个节点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=578) [即路径中的最后一个节点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=582) [我们来看看这在实践中看起来如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=585) [在这个例子中 我们有一个指向
某本书中某一章的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=590) [“section-1”上下文的
上下文路径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=594) [右边是我们的上下文树](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=596) [要查找“section-1”
我们将首先访问“App”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=599) [要查找“section-1”
我们将首先访问“App”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=599) [然后我们访问“Book”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=603) [然后找到“Book”上下文的
孩子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=604) [标识符为“chapter-2”的
上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=606) [我们将访问这个节点 然后以同样的
方式访问“section-1”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=608) [由于“section-1”
是我们路径上的最后一个节点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=612) [这个节点就是该路径所代表的节点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=615) [我们有几种方法来查找
系统中的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=620) [一种是使用绝对上下文路径
为此你可以调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=624) [CLSDataStore的 contexts
(matchingIdentifierPath)方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=628) [此方法将会返回路径中的所有上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=634) [所以在这个例子中
它应该是一个包含“App”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=639) [“Book”上下文、“chapter-2”上下文
以及“section-1”上下文的数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=643) [如果由于某种原因 “section-1”中的
“chapter-2”丢失了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=648) [那么完成块中的数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=651) [将继续包含“App”上下文
和“Book”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=653) [这使你有机会为遗失的上下文
创建完全不同的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=657) [这使你有机会为遗失的上下文
创建完全不同的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=657) [还有一种使用相对路径
查找上下文的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=663) [如果你已经持有对某个上下文的引用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=667) [但你想找到其后代
这时它就很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=669) [实现它的方法是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=672) [CLSContext的 descendent
(matchingIdentifierPath)函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=674) [这里的区别在于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=677) [你要么获取到该上下文
要么获取到null](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=678) [如果它不匹配任何路径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=680) [还有一种查找上下文的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=684) [这是通过CLSDataStore的 contexts
(matching:predicate)方法实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=687) [在幻灯片的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=693) [你可以看到如何找到
某个上下文的所有孩子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=694) [此外 还有一个
DataStoreDelegate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=699) [它与我们刚才看到的路径查找方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=703) [一同使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=708) [屏幕上是委托声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=712) [这当你的上下文是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=719) [这当你的上下文是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=719) [按需下载的时候通常很有用
这种情况下你的所有上下文都不可用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=720) [因此你想按需创建这些上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=724) [它的工作原理是
当我们开始查询路径中的上下文时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=728) [如果你没有在该路径上找到上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=733) [我们将在你定义的委托上调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=738) [createContext(forIdentifier)方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=742) [这给你一个创建所遗失上下文的机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=744) [当你创建好了上下文
我们将把这个上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=747) [添加到树中的正确位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=750) [正如我所提到的
这对具有动态内容的app非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=755) [让我们来看看实践中这是如何运作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=760) [我们还使用相同的标识符路径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=763) [但这次 我们的树并不完整
而且我们有一个委托对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=765) [（委托实战）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=769) [我们首先访问“App”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=771) [然后我们将访问“Book”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=775) [接着我们将尝试访问
“chapter-2”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=777) [接着我们将尝试访问
“chapter-2”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=777) [但它并不存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=782) [因此我们要求委托创建它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=783) [如果委托创建了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=786) [我们会将它添加到树上的正确位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=788) [我们可以访问这个上下文了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=791) [我们将为“section-1”
做同样的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=793) [由于“section-1”
是路径上最后一节点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=798) [这意味着它就是这条路径所指的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=800) [接下来我们谈谈活动对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=806) [活动对象实际上是用来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=809) [向教师报告进度的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=812) [事实上他们应被理解为“活动报告”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=816) [活动对象始终与上下文相关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=822) [你可以自己分配一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=826) [你可以通过调用 CLSContext.
createNewActivity()方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=829) [来创建一个新的活动对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=833) [这将返回一个与方法的接收者
相关联的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=836) [新的活动对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=838) [新的活动对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=838) [如果你想查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=842) [当前是否有一个活动
与你的上下文相关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=843) [你可以通过查询CLSContext的
currentActivity属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=847) [来完成此操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=851) [我想提醒一下
每当你协同创建一个新活动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=854) [这与重新启动该活动是一回事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=858) [这意味着教师将收到
一份新的进度报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=862) [我们来看看如何将进度添加到活动中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=870) [一种方法是直接设置
progress属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=872) [这行代码是要添加一个进度范围
从开始到结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=876) [另外直接设置progress属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=882) [与将进度范围的开始设为0
具有相同效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=886) [我还想提一下
添加互相重叠的进度范围](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=891) [甚至将同一个进度范围添加多次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=894) [都是完全没有问题的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=897) [我们会在幕后处理好所有细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=900) [以确保最终向教师提交正确的报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=903) [我们还需要讨论另外一个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=908) [那就是活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=912) [什么是活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=914) [它是你希望作为你的报告的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=918) [展示给教师的数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=921) [每个活动可以有一个主要活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=925) [这将是除了进度以外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=928) [你想展示给教师的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=931) [主要信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=934) [例如 这对于展示测验的
最终分数很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=936) [你还可以拥有多个其他活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=941) [你可以使用它添加额外的信息
并展示给教师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=945) [比如 给学生提供了多少提示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=949) [每个问题的答案 等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=952) [活动分项和抽象类
在我们的系统中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=957) [活动分项和抽象类
在我们的系统中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=957) [我们已经定义了三个子类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=962) [其中之一是
CLSQuantityItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=965) [这对于简单的标量 如提示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=967) [经验点和类似的事情非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=971) [（CLSActivityItem）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=973) [我们还有一个ScoreItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=974) [这对于表示"Y分之X"之类的
数值很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=975) [例如 对于测验的最终分数
这可能很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=979) [我们也有一个BinaryItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=984) [这个是用来回答
“是或否”一类的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=987) [我们来看看如何将主活动项目
添加到活动中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=994) [你首先需要创建一个活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=998) [在幻灯片中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1002) [我们向你展示了如何创建名为
“Total Score”的ScoreItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1003) [然后将其作为主活动项目
与一个活动进行关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1007) [你需要设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1010) [一个活动的
primaryActivityItem属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1012) [要添加其他活动项目
你将再次创建一个新的活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1018) [要添加其他活动项目
你将再次创建一个新的活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1018) [在幻灯片中 我们展示了
如何创建QuantityItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1022) [其类型为“hints”
然后是它的数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1026) [为了将它与一项活动联系起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1030) [你需要调用CLSActivity的
addAdditionalActivityItem方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1032) [将你刚刚创建的项目作为参数传给它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1036) [此时 该活动项目将与活动相关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1039) [在处理活动项目时有一些最佳实践](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1044) [其中之一是始终为主活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1049) [设置相同的子类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1053) [我的意思是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1055) [想象一下 教师给两个学生
分配相同的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1057) [你知道 在学生A的设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1061) [你将主活动项目设置为
ScoreItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1063) [在学生B的设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1067) [你将主活动项目设置为
BinaryItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1069) [如果你这样做
我们实际上无法产生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1073) [一个汇总报告给老师
因为没有明确的启发式方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1075) [一个汇总报告给老师
因为没有明确的启发式方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1075) [将ScoreItem转换为
BinaryItem 反之亦然](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1080) [正因为如此 最好始终使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1084) [活动项目的相同子类作为主活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1087) [另外 请为你的活动项目提供清晰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1091) [简单但描述性强的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1095) [这是因为你在活动项目上设置的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1097) [将在其报告中显示给教师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1100) [并请好好利用附加活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1104) [它们是提供额外信息的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1107) [教师实际上需要这些信息来真正了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1111) [学生在你的app中的表现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1113) [因此 我想邀请Marin上台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1117) [她将在实践中向我们展示
所有这些如何运作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1119) [（使用ClassKit）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1130) [大家好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1131) [我的名字是Marin
我是ClassKit团队的工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1133) [我想告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1137) [如何将ClassKitapp到
现有的app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1139) [如何将ClassKitapp到
现有的app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1139) [为了做到这一点 Pavel
和我预先构建了一个演示app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1143) [该演示app叫Quizzler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1147) [这是一个简单的数学测验app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1150) [你看到的第一个屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1153) [要求你选择你想要测试的数学类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1155) [让我们继续并选择加法测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1159) [选择好之后
我们就会进入另一个界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1162) [问我们是否想查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1165) [所有用户的高分记分牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1168) [或者我们只是想直接开始测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1171) [让我们直接点击开始测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1174) [然后 我们会看到每一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1177) [我们只要回答这些问题
最后我们会得到一个总分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1181) [现在我们了解了这个
演示app的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1185) [让我们来谈谈
使用ClassKit的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1189) [首先我们将讨论
什么类型的上下文数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1193) [对我们的演示app有意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1198) [对我们的演示app有意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1198) [讨论完这些之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1200) [我们还会讨论什么类型的
由学生产生的活动数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1202) [也可能有意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1206) [我们将确保我们支持深度链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1208) [现有两种方法可做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1211) [第一种方法是使用全局链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1213) [如果你已经在app中
采用了全局链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1216) [你可以简单地设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1221) [CLSContext中的
全局链接属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1224) [而我们的演示app不支全局链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1227) [所以我会向你展示第二种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1231) [即使用NS User Activities
Continue Restoration Handler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1233) [然后我们将确保使用开发者模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1238) [在Schoolwork app上
进行我们的测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1241) [现在我们来谈谈什么类型的
上下文结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1246) [可能对这个app有意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1249) [作为第一步 我们可能会做一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1251) [我们的用户界面与上下文树的
一对一映射](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1254) [如果我们这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1259) [如果我们这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1259) [最终会得到这样一个结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1261) [其中最顶层是我们的主app上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1263) [即我们的Quizzler app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1267) [在它的下面是“Addition”上下文
和“Multiplication”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1269) [在它们各自的下面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1274) [还有“Scoreboard”上下文
以及真正的“Quiz”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1276) [Pavel告诉我们
上下文是我们app的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1282) [教师将它们布置给学生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1287) [现在我们牢记这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1291) [我们先来谈谈
“Scoreboard”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1292) [“Scoreboard”上下文
是什么？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1296) [这是所有用户的最高分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1300) [一位老师给他的学生分发这些
真的有意义吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1302) [好像并没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1309) [所以我们将删除它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1310) [现在 剩下的结构看起来像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1313) [接下来让我们看看
“Addition”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1316) [我们app中的“Addition”
上下文是什么？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1320) [难道它不就只是加法测验吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1324) [这实际上就是一件事
而不是两件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1327) [所以这些应该被合并为一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1330) [所以我们继续这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1333) [对于“Multiplication”上下文也是如此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1334) [现在我们剩下的结构看起来像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1338) [Pavel和我讨论了一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1342) [我们决定在将来可能会
添加一个减法测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1344) [以及一个除法测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1349) [如果我们决定这样做 我们可以
很方便地将它们添加为兄弟节点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1351) [现在 当你们都在想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1356) [哪种结构对你的app有意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1357) [不要只考虑你当前的功能集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1361) [同时也要考虑你将来可能做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1363) [并确保你的结构将随着
你的需求变化轻松扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1366) [现在让我们来谈谈上下文本身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1370) [我们希望确保我们有明确的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1373) [那是因为标题是一个重要信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1377) [那是因为标题是一个重要信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1377) [学生和老师都必须通过这个信息
了解这个上下文代表什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1381) [（CLSContext）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1386) [我们也希望尽早定义我们的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1387) [对于我们的演示app
我们使用的是静态内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1392) [因此一旦app启动
我们就知道要编写哪些上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1395) [所以这就是我们定义
我们的上下文的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1399) [我们可能也想要始终向教师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1402) [以特定顺序展示我们的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1406) [对于我们的演示app
意味着“Addition”上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1410) [应该始终显示在
“Multiplication”上下文之上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1413) [为了做到这一点
我们将利用CLSContext中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1419) [displayOrder属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1423) [现在我们已经确定了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1426) [我们要写什么类型的上下文数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1427) [让我们来谈谈由学生生成的活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1429) [在这里 我有一个
Schoolwork app的截图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1433) [这是一些活动数据可能的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1436) [这是一些活动数据可能的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1436) [对于我们的测验
我认为记录学生进行这项测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1441) [所花费的总时间绝对有意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1444) [为了做到这一点 我们可以调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1449) [CLSActivity的
start()和stop()方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1451) [现在 如果能够显示学生得到的总分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1457) [可能也很不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1461) [如果我们仔细想想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1463) [总分可能是这整个测验中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1464) [最重要的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1469) [因此我们可能想使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1471) [Schoolwork UI突出显示它
就像我们在这里做的一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1473) [为了做到这一点 我们可以创建
一个CLSScoreItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1476) [然后我们将其设置为主活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1481) [这样 它就会在
Schoolwork UI中突显](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1484) [现在 如果能显示每个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1488) [是否回答正确可能也很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1491) [要做到这一点 我们可以创建
CLSBinaryItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1495) [要做到这一点 我们可以创建
CLSBinaryItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1495) [并将其中每一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1501) [都添加为活动的附加活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1503) [现在我们已经确定了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1507) [要写什么类型的
ClassKit代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1508) [让我们看看这实际上看起来如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1511) [（演示）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1515) [现在屏幕上是我的显示器镜像
我打开了Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1520) [我首先要做的是
选择我的项目的目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1524) [然后我将选择
Capabilities窗格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1530) [在这里找到
ClassKit API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1533) [然后 我们要确保将这个选项打开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1537) [现在我们就准备好开始
写一些ClassKit代码了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1540) [首先我们要写我们的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1544) [我们说过可以在app
启动后立即这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1547) [现在让我们打开
AppDelegate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1550) [我们在这里创建一个函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1554) [它将为我们发布我们的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1557) [这是我们的发布上下文函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1562) [而我们现在要做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1565) [实例化一个
CLSContext实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1567) [传递该上下文的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1570) [给它一个唯一的标识符
然后是一个清晰简洁的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1574) [确保设置了
displayOrder属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1580) [因为我们希望加法测验
显示在乘法测验之上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1582) [然后 我们将为乘法测验
做同样的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1587) [实例化一个上下文
并确保设置显示顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1590) [接着 我们创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1594) [必须要创建的上下文字典](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1598) [然后我们要获取我们希望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1601) [将这些添加到其中的父上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1604) [由于我们的上下文结构比较简单
我们知道我们的父上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1606) [永远是主app上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1610) [现在让我们运行一个查询来查看
这些上下文是否已经存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1613) [所以我们需要创建
一个predicate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1618) [所以我们需要创建
一个predicate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1618) [寻找所有父节点是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1620) [我们刚刚定义的父节点的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1622) [然后 我们将向CLSDataStore的
共享实例发出该查询](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1625) [以找出所有与我们刚定义的
predicate相匹配的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1631) [这将返回一个上下文数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1637) [我们只要遍历所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1641) [我们知道其存在的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1643) [然后 对于已经存在的每个上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1646) [我们将从需要创建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1650) [上下文字典中删除它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1652) [接着我们将遍历剩余的
尚不存在的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1655) [并且对于这些上下文中的每一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1658) [我们将它作为一个子上下文
添加到我们的父上下文中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1662) [然后我们调用save函数保存更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1668) [现在我们需要做的就是在app启动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1671) [调用这个函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1673) [让我们运行此代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1677) [以测试我们的上下文
是否真的被创建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1679) [以测试我们的上下文
是否真的被创建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1679) [我这有一个设备
我将其投影到屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1683) [完美](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1686) [我们的Quizzler app
已启动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1688) [但一切看起来都一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1690) [我们如何知道这些上下文
已经被创建了呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1692) [这就是我们使用到开发者模式
和Schoolwork的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1696) [我现在点击主页按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1700) [并打开设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1702) [现在我向下滚动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1704) [我需要寻找开发人员设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1705) [当我选择开发人员设置时 我将看到
一些ClassKit API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1708) [如果我选择
ClassKit API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1713) [我们可以看到
我们可以切换并扮演老师的角色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1715) [我要确保我选择了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1719) [现在 我们可以点击主页按钮
打开Schoolwork app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1722) [当Schoolwork app启动时
我首先会看到欢迎屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1728) [我将关掉它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1732) [如果我们看右上角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1733) [我可以看到那有一个加号按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1736) [这时我就知道
我是以老师的身份登录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1738) [这时我就知道
我是以老师的身份登录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1738) [如果我点击那个加号按钮
我将打开“创建新讲义”视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1741) [我可以添加一个活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1745) [然后点击“Apps” 可以看到
Quizzler app显示在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1748) [如果我选择它 真棒
我们的上下文就在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1752) [所以现在我们已经能够验证
我们的上下文实际上已经创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1756) [我还想指出加法测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1761) [在乘法测验之上显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1763) [我们现在也能够验证
我们的显示顺序已经设置正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1766) [现在让我们选择加法测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1771) [这将会为这份讲义添加该上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1773) [现在让我们将这份讲义
发送给我们的班级](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1776) [我要点击收件人字段
选择我的班级](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1780) [让我们给这个讲义添加一个标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1785) [现在我继续点击“Post”按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1789) [它所做的是将这份讲义
发送给我的班级](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1791) [并为这份讲义中的上下文授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1794) [现在该上下文可以开始
记录进度数据了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1798) [现在该上下文可以开始
记录进度数据了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1798) [我们可以看到
我的讲义成功发布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1802) [我可以点击它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1805) [在这里我们看到了我添加的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1806) [并且我的漂亮图标
就在上下文名称旁边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1808) [如果我点击图标 它应该直接将我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1814) [导航到加法数学测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1816) [我们点击它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1819) [Schoolwork启动了app
但这不是加法数学测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1821) [哦 对了 这是对的
我们忘了添加深度链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1827) [让我们回到Xcode并添加它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1829) [打开AppDelegate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1833) [让我们加入Continue
Restoration Handler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1834) [在这里 Continue Restoration
Handler将处理一些用户活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1840) [我们需要使用该用户活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1845) [并获取它的
contextIdentifierPath](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1847) [一旦我们有了上下文路径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1851) [我们将实例化我们自己的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1853) [关联到该上下文的内部测验模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1856) [然后我们要确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1859) [然后我们要确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1859) [我们调用的是同一个发布上下文函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1861) [如果该上下文还没有被创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1864) [我们需要确保创建它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1867) [这里将返回一个可选错误
我们需要确保能够处理任何错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1869) [然后 我们将与主线程进行同步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1875) [实例化我们的Storyboard](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1878) [并且实例化此测验的视图控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1881) [然后我们将在视图控制器上
设置我们的测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1885) [并压入适当的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1888) [现在 让我们运行此代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1890) [并测试我们的深度链接是否正常工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1893) [现在切换回我的设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1897) [然后导航回
Schoolwork app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1899) [在这里 我们再次点击图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1904) [真棒 它直接启动了加法数学测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1908) [现在我们准备开始编写
用户生成的活动数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1912) [让我们回到Xcode
并找到当测验第一次启动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1916) [让我们回到Xcode
并找到当测验第一次启动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1916) [被调用的那部分代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1920) [这里 我们想要为我们的测验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1924) [启动计时器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1929) [我们要做的是
向CLSDataStore实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1934) [发起一个查询](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1936) [然后我们要在主app上下文中查询](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1940) [所有与标识符路径相匹配的后代](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1943) [这些标识符路径与此测验相关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1947) [这将返回一个可选上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1950) [我们使用该上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1953) [确保调用它的
becomeActive方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1955) [然后我们将实例化
一个新的CLS活动实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1958) [这是因为当这部分代码运行时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1963) [我们就知道学生正对该测验
进行一次新的尝试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1967) [接着我们要缓存该活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1971) [以及我们定义的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1973) [然后我们调用活动的start方法
来启动我们的计时器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1976) [然后我们调用活动的start方法
来启动我们的计时器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1976) [我们还说过我们想报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1980) [每个问题的回答是否正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1983) [所以我要找到当学生选择答案时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1985) [所调用的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1988) [在这里我们要做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1991) [获取当前运行的活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1994) [这正是我们刚刚创建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1997) [接着 我们将实例化一个
CLSBinaryItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=1999) [给它一个唯一的标识符
以及一个清晰明确的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2004) [然后记得传入
此binaryItem的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2010) [现在我们要设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2014) [学生的回答是否正确的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2017) [然后我们要在当前运行活动中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2022) [将这个binaryItem
作为附加活动项添加进去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2025) [我们最不想做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2031) [停止计时器并设置总分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2033) [我们找到当学生停止答题时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2036) [所调用的那部分代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2038) [所调用的那部分代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2038) [这里我们获得同样的当前运行活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2043) [接着 我们将创建一个
CLSScoreItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2047) [传递一个唯一的标识符、标题
我们还要传入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2051) [可能的最高分数中学生所得到的分数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2056) [然后 我们将该分数项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2063) [作为主活动项添加到我们的活动中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2065) [注意每次我这样做时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2068) [我总是设置CLS活动项目的
相同子类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2070) [它总是一个ScoreItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2075) [然后我们调用stop方法
来停止我们的计时器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2079) [并调用save
以保存我们所有的更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2082) [现在让我们重新运行此代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2085) [以测试我们的学生生成的活动数据
是否已被设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2088) [我切换回我的设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2092) [现在我们要切换并充当学生的角色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2094) [我将返回到开发人员设置界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2098) [我将返回到开发人员设置界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2098) [设置在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2102) [我们点击“Student”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2104) [现在我转而扮演学生的角色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2105) [现在我们打开
Schoolwork app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2108) [这时候右上角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2112) [不再有一个加号按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2114) [我就知道我是以学生身份登录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2116) [我们可以看到
我这里有老师分发给我的讲义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2119) [如果我点击它
我们可以看到我需要完成的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2122) [我可以点击图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2127) [它直接将我导航到测验界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2129) [现在我看到一条提醒
它向我展示我的进度数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2132) [将以我的名义进行记录
并发送给老师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2134) [我来关掉它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2137) [然后回答我们所有的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2140) [最后得到总分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2145) [可以看到 我得了100%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2147) [我们回到
Schoolwork app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2149) [在这里我们可以看到活动数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2152) [我们可以看到时间和总分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2154) [注意总分在用户界面的主要部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2157) [突出显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2159) [突出显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2159) [现在我们能够验证
我们的活动项目设置正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2161) [我也可以点击单元格
这会显示一个弹出框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2164) [上面有我写的所有活动数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2168) [我可以看到浅灰色的总得分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2170) [还有我设定的总分的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2173) [在底部 我们可以看到所用时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2176) [然后是每个问题的回答结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2179) [我们还可以看到我为每个问题
设置的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2181) [它们也是浅灰色的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2184) [现在我们已经能够验证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2187) [我们的活动数据已经被记录下来了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2189) [现在我想重新将Pavel请上台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2192) [以继续他的演讲
并总结我们看到的这些东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2196) [谢谢Marin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2208) [我想提一下关于ClassKit的
一些最佳实践](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2210) [首先 尽早声明你的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2215) [以便教师可以进行分发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2218) [以便教师可以进行分发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2218) [并且Marin向我们
展示了你的app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2221) [不是所有东西都非得是一个上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2224) [如果这样做有意义 就请使用
CLS Data Store Delegate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2227) [另外 请好好利用附加活动项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2231) [它们的确是提供额外信息的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2236) [而教师可能需要这些信息来了解
学生在你的app中的表现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2239) [还有一些关于教育app的
一般性最佳实践](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2245) [其中之一是
删除StoreKit依赖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2248) [这是因为在学校环境中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2252) [使用app内清除并不是个好主意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2253) [这个库是用来支持可清除存储的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2256) [总的来说 这是一个好主意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2260) [但在学校环境中非常重要的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2261) [在那里共享iPod是很常见的
而空间在这种情况下很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2264) [最后 通过托管app配置
实现设置访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2270) [这样做可以使学校管理员
在配置设备时更轻松](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2274) [你可以在
developer.apple.com/education](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2280) [找到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2283) [关于所有这些内容的链接
和正在进行的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2284) [愿大家在剩余的WWDC中
度过愉快时光](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2289) [谢谢大家的参与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/215/?time=2293)