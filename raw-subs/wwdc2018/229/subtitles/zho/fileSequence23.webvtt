WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:22:58.145 --> 00:23:00.948 align:middle line:0
在我们改变字典的那一刻
我们使索引无效了

00:23:01.448 --> 00:23:03.851 align:middle line:0
值得指出的是
这段代码可能会崩溃

00:23:05.085 --> 00:23:06.553 align:middle line:0
我们该如何解决这个问题呢？

00:23:07.688 --> 00:23:10.524 align:middle line:0
其实这与我们在数组中
使用的修复方法完全一样

00:23:11.225 --> 00:23:13.493 align:middle line:-2
我们只需要在发生改变后
重新计算索引

00:23:14.328 --> 00:23:15.429 align:middle line:-1
请记住一件事

00:23:15.562 --> 00:23:16.997 align:middle line:-1
当你重新计算索引时

00:23:17.297 --> 00:23:18.899 align:middle line:-1
这有时会造成很大的开销

00:23:18.966 --> 00:23:21.768 align:middle line:-1
一些索引搜索方法需要线性时间

00:23:22.336 --> 00:23:25.205 align:middle line:-1
而且你只关心你所需要的那个索引

00:23:26.874 --> 00:23:27.708 align:middle line:-1
所以如果你想

00:23:27.774 --> 00:23:30.344 align:middle line:-2
避免陷入这种情况
以下是我的建议

00:23:30.410 --> 00:23:33.580 align:middle line:-2
请记住 改变集合几乎
总是使你的索引无效

00:23:33.914 --> 00:23:35.983 align:middle line:-1
你有时可能会侥幸成功

00:23:36.049 --> 00:23:38.385 align:middle line:-1
但最好将这视为一条硬性规则

00:23:38.585 --> 00:23:39.953 align:middle line:-1
你最终会为此感到高兴

00:23:40.854 --> 00:23:42.422 align:middle line:-1
还要记住切片依赖于

00:23:42.489 --> 00:23:45.058 align:middle line:-1
其底层的原始集合的状态

00:23:45.125 --> 00:23:46.493 align:middle line:-1
即使是在它发生了改变之后

00:23:46.894 --> 00:23:50.831 align:middle line:-2
因此当底层集合是可变的时
如果你还想继续使用索引或切片

00:23:51.164 --> 00:23:53.133 align:middle line:-1
请务必三思而后行

00:23:53.767 --> 00:23:55.502 align:middle line:-1
并记住索引计算

00:23:55.636 --> 00:23:57.771 align:middle line:-1
有时可能花费大量的时间

00:23:57.838 --> 00:23:59.139 align:middle line:-1
（建议：索引和切片）

00:23:59.206 --> 00:24:01.441 align:middle line:-1
所以注意只在必要时才进行索引计算

