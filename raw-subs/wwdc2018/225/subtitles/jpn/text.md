# A Tour of UICollectionView

## Summary
UICollectionView is a flexible, powerful tool to help you achieve great user experiences in your applications. Hear how you can leverage these rich APIs to rapidly move from initial design ideas to polished shipping applications. Topics range from getting started to advanced update animations and layouts.

## Info
* Frameworks
* WWDC 2018 - Session 225 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/

## Text
 [(音楽)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=7) [(拍手)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=22) [A Tour of UICollectionViewへ
ようこそ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=29) [私はスティーブ･ブリーン](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=34) [フレームワークエンジニアです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=36) [本日は 私と同じUIKitチームの](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=39) [モハメド･ジスロウイと
ツアーを行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=42) [今日は変わったことをします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=48) [デザイナーのスペックを基に
アプリケーションを構築し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=51) [UICollectionViewの
機能を活用します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=56) [UICollectionViewの
機能を活用します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=56) [アプリケーションを構築する過程で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=60) [様々なトピックに
触れたいと思います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=64) [レイアウト 更新
アニメーションを含みます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=67) [それでは早速 始めましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=72) [これはデザイナーのスペックです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=77) [フレンドフィードのようです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=80) [レイアウトは縦で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=82) [分かりやすい作りです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=84) [これはいいですね](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=88) [フレンドフィードのコンテンツが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=90) [モザイクで表示されています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=93) [これらを使うためのコードを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=96) [モハメドが説明します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=99) [デザインはどう？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=101) [実際に見るのは初めてだけど](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=103) [CollectionViewが使えると思う](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=105) [作業するのが楽しそうだ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=108) [これはすごくいい](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=110) [コードを使った説明は
モハメドが後ほど行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=112) [まず CollectionViewを
理解するために](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=117) [まず CollectionViewを
理解するために](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=117) [３つのコンセプトを説明します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=121) [レイアウト データソース
デリゲートです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=123) [まずレイアウトからお話しします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=130) [UICollectionViewの
定義を開きます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=133) [UITableViewに詳しければ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=138) [APIが似ていることに気づきます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=140) [デリゲートや
データソースがあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=144) [しかし UICollectionViewの
レイアウトコンセプトは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=147) [独特で すごい力を持っています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=152) [視覚配置の情報を
コンテンツから抽象化できます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=156) [コンテンツ自身とは別にです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=161) [レイアウトは
コンテンツの配置場所です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=164) [全アイテムが
UICollectionViewの](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=168) [レイアウト属性で特定されています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=171) [境界 センター
フレームなどの属性です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=175) [表示アイテムを定義する
プロパティとも言えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=179) [表示アイテムを定義する
プロパティとも言えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=179) [サブクラスを作成して
カスタマイズすることもでき](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=184) [自分のデザインに組み込めます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=189) [ユーザがコンテンツを
スクロールする時―](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=192) [通常レイアウトは変わりません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=197) [しかし レイアウトの表示を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=200) [変えたい時もあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=203) [その時には
無効化メカニズムを使用します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=205) [レイアウトがコンテンツとは別に
抽象化されるので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=211) [別のレイアウトへの移行が簡単です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=216) [また移行時に
アニメーション効果が使えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=219) [レイアウトＡとＢの
情報共有は要りません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=223) [作りたいレイアウトを
宣言するだけです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=227) [CollectionViewLayoutは
抽象クラスなので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=231) [直接は使用されません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=236) [むしろサブクラスが使用されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=239) [むしろサブクラスが使用されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=239) [今回は UICollectionView
FlowLayoutがあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=243) [CollectionViewを
知っていれば簡単です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=248) [UICollectionViewFlowLayoutの
カスタマイズには](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=253) [色々と方法があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=256) [デリゲートを使うこともできます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=259) [しかし
CollectionViewFlowLayoutは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=262) [CollectionViewDelegateより
多くのものを特定できます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=267) [フローレイアウトは
行配置に基づいているため](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=274) [様々なデザインに
対応することができます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=278) [行配置とはどういう意味か？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=286) [行配置システムを説明するには](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=289) [例を挙げるのが一番でしょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=293) [この縦にスクロールする
CollectionViewで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=296) [この縦にスクロールする
CollectionViewで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=296) [フローレイアウトの
コンテンツ表示を再現します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=300) [まず最初のアイテムを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=304) [上端に配置します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=307) [そして同じ行にアイテムを並べます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=310) [アイテムを並べる行は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=314) [スクロール軸に直交し
水平になます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=316) [最初の行が一杯になったので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=321) [次の行に移動します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=324) [コンテンツを更に並べます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=327) [最後の行に来ました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=331) [コンテンツを全て並べました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=333) [水平なレイアウトが分かるように](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=336) [線を引きました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=339) [フローレイアウトを
カスタマイズする定義を見ます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=342) [最初はラインスペース](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=347) [矢印で表示されている
行間のスペースです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=350) [同様に](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=356) [レイアウトに沿った
アイテム間スペースもあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=358) [レイアウトに沿った
アイテム間スペースもあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=358) [両方の最低スペースを定義する
プロパティは２つ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=363) [それでは理解を深めるために](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=369) [90度回転させて
もう１度やってみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=372) [最初は左上です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=375) [今度は横スクロールなので
縦にアイテムを並べます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=377) [下まで一杯になったら上に戻ります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=383) [パターンは分かりましたね](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=388) [コンテンツを全て入れて](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=391) [縦のレイアウトができました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=394) [この方向での
ラインスペースはこれです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=396) [アイテム間スペースはこれ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=401) [必ず覚えてください](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=405) [以上がレイアウトです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=408) [今度はデータソースです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=411) [TableViewを知っていれば
すぐに使えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=414) [APIが似ているのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=419) [APIが似ているのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=419) [レイアウトは
コンテンツの表示場所で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=422) [データソースがコンテンツです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=426) [メソッドは３つあり
１つ目はセクションの数です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=429) [入力しない場合 値は１になります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=435) [２つ目はセクション内の
アイテムの数で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=439) [各セクションの
アイテム数が分かります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=444) [３つ目はコンテンツを提供する
cellForItemAtIndexPathです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=447) [以上がデータソースです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=454) [３つ目のトピックはデリゲート](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=456) [コードに入る前に説明します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=459) [デリゲートの使用は
必須ではありません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=462) [CollectionViewは
UIScrollViewのサブクラスです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=467) [そのため
UIScrollViewが提供する―](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=470) [同じデリゲートを拡張して使います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=473) [スクロールを変える時も
同じデリゲートを使います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=477) [スクロールを変える時も
同じデリゲートを使います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=477) [また ハイライトや選択の
細かい作業を可能にする―](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=482) [UICollectionViewDelegate
メソッドとも連携できます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=487) [willDisplayItemと
didEndDisplayingItemのAPIが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=494) [スクリーンの
新着情報を通知します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=498) [UICollectionViewの
コードを説明する前に](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=503) [お話ししたかったのは
この３点です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=507) [ではモハメドと交代して
実際に見てみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=511) [モハメド](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=515) [CollectionViewFlowLayoutを
使用するのに](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=516) [最初の縦のレイアウトは最適です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=521) [そこで全てを行えるので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=524) [UICollectionViewを
使うのに向いています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=527) [更にカスタマイズするために
フローレイアウトではなく](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=534) [CollectionViewFlowLayoutの
サブクラスを見ます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=539) [CollectionViewFlowLayoutの
サブクラスを見ます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=539) [ColumnFlowLayoutクラスの
インスタンスを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=545) [作成することから初めましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=549) [そのインスタンスを使い
CollectionViewを作り](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=553) [ビュープロパティを設定します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=558) [autoresizingMaskや
backgroundColorです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=561) [ScrollViewプロパティも設定します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=564) [これで希望どおりに表示されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=568) [ビュー階層に
CollectionViewを入れた後に](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=573) [一意識別子を使い
PersonCellクラスを登録します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=578) [View Controllerを
データソースとして設定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=584) [表示するセルの数や
データの種類などの情報を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=589) [これで提供できます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=593) [デリゲートとしても設定して
セル選択を可能にします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=597) [デリゲートとしても設定して
セル選択を可能にします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=597) [そして ２つのプロトコルに
準拠させます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=603) [まずデータソースに準拠させます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=607) [２つのメソッドを実装します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=612) [１つ目は
セクション内のアイテムの数です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=615) [people配列にある
人数やアイテムの数を返して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=620) [データモデルオブジェクトを
表示させます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=625) [２つ目に実装するメソッドは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=628) [CellForItemAtIndexPathです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=631) [一意識別子でCollectionViewから
セルを取り除き](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=635) [people配列のPersonオブジェクトを
セルに渡します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=639) [データを実際に表示させて
セルを戻します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=643) [最後に
選択をハンドルできるように](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=650) [デリゲートプロトコルの
任意メソッドを実装します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=654) [まず
DidSelectItemAtIndexPathを追加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=659) [まず
DidSelectItemAtIndexPathを追加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=659) [feedViewControllerを
インスタンス化し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=663) [２つ目のスクリーンを作ります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=667) [表示する画像が誰か分かるように](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=671) [Personオブジェクトを渡します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=673) [navControllerに置きます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=677) [ではシミュレータで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=681) [実際にやってみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=684) [始めます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=689) [(拍手 喝采)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=690) [これはCollectionViewです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=694) [いくつかセルが見えますが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=698) [表示サイズが正しくありません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=700) [そこでカスタマイズしたいと
思います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=703) [ではXcodeに戻りましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=707) [そして 列のクラスを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=711) [開きます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=715) [先程の
ColumnFlowLayoutクラスです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=717) [先程の
ColumnFlowLayoutクラスです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=717) [そして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=723) [必要な作業をお見せします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=725) [既にprepareメソッドを
スタブに置き換えています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=728) [UICollectionViewの
prepareメソッドが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=733) [レイアウトの無効化で呼ばれます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=736) [UICollectionViewFlowLayoutでは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=739) [サイズの境界が変わると
レイアウトが無効化されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=742) [アプリケーションの向きや
サイズが変わった時です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=747) [ですからCollectionViewの
サイズを考慮した](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=753) [カスタマイズを行うのに最適です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=758) [セルに
CollectionViewの幅に関する](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=761) [機能を持たせます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=765) [CollectionViewに
アイテムサイズのプロパティで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=767) [希望サイズを知らせます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=771) [実際にやってみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=774) [アイテムのサイズを
CGサイズにして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=777) [アイテムのサイズを
CGサイズにして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=777) [CollectionViewの境界幅に
合わせます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=781) [レイアウトのマージンに合わせ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=785) [高さを70ポイントにします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=788) [これでデザインに合います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=790) [ついでに見た目を
もう少し良くしましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=793) [アイテム間スペースに合うように](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=799) [セクションを挿入します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=803) [CollectionViewの
セーフエリアに全て収まるように](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=805) [挿入参照プロパティを
セーフエリアから設定します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=810) [シミュレータでレイアウトが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=815) [どう見えるか確認します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=819) [スペックどおり表示されています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=823) [デザイナーも満足でしょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=826) [画面を横にすると
セルのサイズが変更されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=830) [無効化コードが呼び出されたのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=835) [しかし
もっと良いレイアウトにできると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=839) [しかし
もっと良いレイアウトにできると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=839) [考える人もいると思います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=844) [まだスペースが余っているので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=848) [複数の列を表示させてみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=851) [フローレイアウトなら
簡単にできます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=855) [スティーブが説明したように
フローレイアウトは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=858) [１行にできるだけ多くの
アイテムを入れます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=863) [そして 入らないと行を変えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=867) [つまり アイテムのサイズを
変更すると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=870) [複数の列が作成されるのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=875) [Xcodeのレイアウトに戻り](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=879) [アイテムサイズの計算を
変更します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=883) [サイズに合わせる設定を消し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=887) [代わりに少し計算式を入れます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=891) [まず 使用可能な幅は
前回と同じです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=896) [まず 使用可能な幅は
前回と同じです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=896) [これはマージンによる
境界のインセットです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=900) [列の最低幅を決める
任意の定義は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=903) [300ポイントになります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=907) [この決められたスペースに
最大 何列まで入るかを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=912) [両方の値を使って計算します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=917) [求めた数値で幅を割ると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=920) [最適なセルの幅がでます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=924) [300ポイント以上かもしれません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=926) [それをCGSizeに伝えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=930) [シミュレータに再び戻って](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=934) [レイアウトの更新を確認します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=938) [前と同じように表示されています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=942) [画面を横にして表示すると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=946) [列が左右に並んでいます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=949) [どうだい？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=954) [簡単に調整できる良いレイアウトだ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=955) [次のデザインは？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=960) [フレンドリストは終わりにして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=961) [モザイクのレイアウトを作ります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=964) [いい考えだね](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=968) [スライドに戻って説明をしましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=970) [このレイアウトを見て
何ができるか考えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=977) [私はフローレイアウトを
使う傾向にあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=982) [まず使ってみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=986) [このデザインに
フローレイアウトが適切か考えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=989) [３枚の写真が並ぶ
この箇所を拡大してみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=994) [このインスタンスには
左に大きな写真があり](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1000) [右には写真が縦に並んでいます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1005) [フローレイアウトでは
左にアイテムを置いた後に](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1008) [次のアイテムを
空いている場所に置きます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1013) [空きがなければ次の行です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1016) [縦に並ぶ写真を改善します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1018) [縦に並ぶ写真を改善します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1018) [このレイアウトは
行配置に基づかないため](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1021) [フローレイアウトを
使うことはできません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1024) [しかし試しに一度 使ってみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1029) [カスタムレイアウトを
作成しましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1035) [難しくありません
４つの基本メソッドに](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1039) [もう１つメソッドを
追加するだけです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1044) [４つのメソッドを説明します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1049) [１つ目はCollectionViewの
コンテンツサイズ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1052) [CollectionViewは
UIScrollViewのサブクラスです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1057) [UIScrollViewの特徴は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1061) [広いコンテンツ領域が
可視である点です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1063) [そのため領域内で
快適にコンテンツを動かせます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1067) [ScrollViewに伝えるべき
コンテンツサイズを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1072) [どうやって求めるのでしょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1077) [どうやって求めるのでしょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1077) [コンテンツを含む長方形があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1080) [その長方形の領域の
サイズを出すのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1083) [以上がコンテンツサイズです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1089) [次の２つのメソッドは
レイアウト属性を提供します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1093) [１つ目はlayoutAttributesFor
ElementsInRectです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1099) [これはCollectionViewが
画面に何を表示するか](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1103) [確認する時に呼び出します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1107) [このクエリは幾何学領域からです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1111) [もう１つのAPIは
特定のアイテムを探す―](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1115) [LayoutAttributes
ForItemAtIndexPathです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1121) [後ほどモハメドが説明しますが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1125) [この２つのAPIでは
処理能力がカギとなります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1128) [４つ目のカスタムレイアウトの
サブクラスは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1137) [４つ目のカスタムレイアウトの
サブクラスは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1137) [prepareメソッドです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1141) [これはレイアウトが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1144) [無効化される度に呼び出されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1146) [キャッシュ保存したい
レイアウト属性や](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1149) [コンテンツのサイズを
計算する良い機会です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1154) [追加のAPIについて話します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1163) [shouldInvalidateLayout
(forBoundsChange:)です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1166) [これは境界が
変更される度に呼び出されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1170) [これもUIScrollViewの
サブクラスです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1175) [境界の変更とは何を指すのか？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1178) [スクロール中に原点が変わったり](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1182) [アプリケーションと共に
サイズが変わったりします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1186) [そのため スクロール時や](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1191) [絵文字の使用中に呼び出されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1195) [うまく設定する必要があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1198) [うまく設定する必要があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1198) [UICollectionViewLayoutは
デフォルトでfalseを返します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1201) [変更したければ ここで行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1207) [これに対して
UICollectionViewFlowLayoutは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1211) [原点が変わるとfalseを返します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1215) [スクロール時は
デフォルトに任せます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1218) [機器が回転してアプリケーションの
サイズが変わると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1223) [trueを返します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1228) [例外は
フローティングヘッダとフッタで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1230) [スクロール中に再計算が必要です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1234) [これはカスタム無効化で行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1237) [理論はここまでにして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1240) [実際に見てみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1244) [では このレイアウトのコードを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1246) [モハメドに説明してもらいます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1249) [では始めましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1254) [このレイアウトで使用する](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1256) [サブクラスを入力しました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1259) [サブクラスを入力しました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1259) [UICollectionViewLayoutの直下で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1262) [UICollectionViewFlowLayoutの
下ではありません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1266) [その理由は
スティーブが説明しました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1269) [UICollectionViewFlowLayoutは
カスタムモザイクを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1273) [サポートしないからです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1276) [まずインスタンス変数を設定して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1280) [後で重要な情報を
参照できるようにします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1284) [１つ目は
コンテンツ境界のCGRectです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1290) [CollectionView内の
アイテムの境界を示します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1296) [２つ目は
キャッシュ済みの属性配列です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1301) [後でレイアウト属性を
参照することができます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1306) [ではレイアウトに
prepareメソッドを実装します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1311) [レイアウト作業に
prepareが使われるのは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1317) [レイアウト作業に
prepareが使われるのは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1317) [無効化の度に
呼び出されるからです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1321) [レイアウトを
ここに作れば終わりです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1324) [もっと頻繁に呼ばれる
メソッドのように](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1328) [難しい作業や計算は要りません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1331) [まずキャッシュ属性と
コンテンツ境界をリセットして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1338) [古い無効化情報は
全て消去します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1343) [次にCollectionViewの
全てのアイテムに対し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1349) [属性を設定します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1355) [レイアウトごとに
必要なものが違うので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1358) [詳細は省きます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1362) [ここでサイズ 位置
変化などを計算して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1364) [セルを自分のデザインに
合わせるのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1369) [属性を設定したら
重要な作業を行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1373) [後で使うため
属性をキャッシュ保存し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1378) [後で使うため
属性をキャッシュ保存し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1378) [キャッシュ属性配列に置きます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1381) [次にコンテンツ境界矩形を使い
フレームを統合し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1385) [コンテンツ境界を最新に保ちます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1390) [prepareメソッドは作動したので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1394) [レイアウトの
残りのメソッドを実装します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1398) [まずCollectionViewの
コンテンツサイズです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1404) [prepareで設定しているので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1407) [コンテンツ境界を
サイズとして返します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1410) [次はshouldInvalidateLayout
(forBoundsChange:)です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1415) [スクロール中に
無効化する必要のある要素は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1419) [レイアウトに含まれていません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1423) [フローティングヘッダもフッタも
ありません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1425) [境界のサイズが変更された時のみ
無効化します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1429) [新しい境界のサイズが
現在のサイズと](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1434) [異なる場合にtrueを返します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1437) [異なる場合にtrueを返します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1437) [その後layoutAttributesForItem
AtIndexPathを実装します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1444) [準備はprepareメソッドで
行っています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1447) [そのため
要求したIndexPathに合う属性を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1451) [配列から選ぶだけです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1455) [最後に実装するのは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1459) [layoutAttributesForElements
InRectです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1462) [このメソッドで呼び出された
矩形の範囲は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1465) [CollectionViewより大きい
こともあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1470) [CollectionViewは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1472) [領域に合う属性だけを要求します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1475) [CollectionViewの矩形内に
表示されるアイテムに](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1478) [対応する属性を含む配列を
返す必要があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1484) [これは簡単に行えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1490) [キャッシュ保存された属性配列を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1493) [属性フレームでフィルタにかけます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1496) [属性フレームが矩形と交われば](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1500) [これを返すことができます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1502) [シミュレータで
レイアウトを確認してみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1506) [フィードを１つ選んで
レイアウトを出します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1513) [画像が奇麗に
モザイク配置されています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1517) [横にすると
セルのサイズが変更されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1522) [全てが適切に更新されています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1526) [しかし スクロール機能が
いま一つです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1535) [すごく悪いですね](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1539) [ご存じかもしれませんが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1541) [コードに戻り問題を確認しましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1544) [矩形内のレイアウト属性を
見てみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1549) [これはスクロール中に
よく呼び出されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1553) [この関数は配列全体を
フィルタにかけます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1558) [この関数は配列全体を
フィルタにかけます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1558) [そのためアイテムが増えると
作業が大変になります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1563) [写真が増えると
スクロールの速度が落ちるのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1568) [こういう時は 一段階前に戻り
レイアウトの性質と](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1574) [最適化について考えてください](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1580) [レイアウトの要求は何か？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1584) [それは アプリケーションのセルが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1587) [上下 左右に並ぶことです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1590) [つまり属性は既に
キャッシュ属性配列内で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1593) [フレームの最低Ｙ値で
並べられているのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1597) [配列はソート済みです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1603) [従って フィルタではなく
２分探索を使うと](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1605) [検索を迅速に行うことができます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1609) [まずスピードの遅い実装を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1613) [削除しましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1617) [そして 速いものと入れ替えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1619) [そして 速いものと入れ替えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1619) [ステップごとに説明をします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1624) [まず初めに
準備した２分探索機能を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1628) [使うことから始めます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1633) [配列と矩形内の
様々なインデックスを使います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1636) [属性がフレームを持ち
矩形内にある場合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1642) [配列内で属性を
インデックスとして返します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1647) [このインデックスを使って
矩形のための](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1652) [残りの属性を
設定することができます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1656) [配列内でループさせて
属性を選んでいき](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1659) [矩形外の属性を
見つけるまで続けます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1664) [この方法は迅速です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1669) [配列にある何千ものアイテムを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1671) [何千回も検索しなくていいのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1674) [スクロールのアルゴリズムを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1678) [スクロールのアルゴリズムを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1678) [シミュレータで確認してみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1681) [スクロールすると
速いのが分かります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1687) [どうだいスティーブ？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1692) [いいね
２つのレイアウトが完成した](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1693) [次は何？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1697) [残りはフレンドリスト用の](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1698) [更新アニメーションです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1702) [“すごくクールな
更新アニメーション”を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1704) [スライドで見てみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1709) [アニメーションのビデオを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1713) [実際に見てみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1716) [画面上の最後のアイテムが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1720) [誰かが写真を投稿したので
更新されました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1723) [そして３番目の
サミアのアイテムは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1727) [画面から消されました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1731) [今３つのことが行われました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1733) [リロード 移動 削除です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1736) [モハメドがシミュレータで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1740) [やり方を説明します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1742) [では始めます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1746) [複数の更新アニメーションを
同時に行っています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1748) [UICollectionViewと
UITableViewが提供する―](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1753) [performBatchUpdatesのAPIが
使えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1759) [これで更新とアニメーションが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1761) [同時に実行されるようにします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1765) [performBatchUpdatesを
呼び出します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1770) [データソースとCollectionViewの](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1775) [両方の更新をここで行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1778) [これは更新が矛盾を生まないように](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1781) [同期させる最善の方法と言えます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1785) [初めに データソースの
最後のアイテムを](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1790) [更新したいと思います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1795) [下から２番目を削除し
最後を１番上に持ってきて](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1797) [下から２番目を削除し
最後を１番上に持ってきて](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1797) [アニメーションを表示させます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1802) [シミュレータで
レイアウトを確認します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1806) [更新コードを
右上の更新ボタンで送りました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1811) [おかしいな](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1817) [どうした？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1819) [何てことだ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1822) [どうした](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1824) [私もiOSのコードで
同じ画面を見たよ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1825) [ステージで起こるなんて](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1829) [時間があまりないので
データをリロードして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1834) [アニメーションをやり直さないか？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1838) [本気で？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1842) [(拍手)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1843) [でも“すごくクールな
更新アニメーション”を失い](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1848) [ユーザの期待に応えられない](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1852) [確かにそのとおりだ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1856) [分かってくれた](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1859) [分かってくれた](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1859) [ではスライドに戻り](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1860) [アニメーションを
救えるか見てみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1862) [これは前に見ました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1867) [では](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1868) [このデバッグ例外が
示すものを見てみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1870) [indexPathの0-3から](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1875) [削除と移動を試みました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1878) [４番目のアイテムを
リロードして移動しました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1881) [４番でなく
３番目の0-2を削除したはず](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1886) [そうだね](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1890) [何かおかしいな](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1891) [まずperformBatchUpdatesの
APIを確認して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1893) [ハイレベルな原則について
お話しします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1898) [このAPIを使用する目的は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1902) [同時に複数の更新を行うことです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1905) [そして全てに
アニメーションを演出させます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1909) [CollectionViewの更新と共に](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1914) [データソースの更新を
必ず行ってください](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1918) [データソースの更新を
必ず行ってください](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1918) [CollectionViewに関することは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1923) [TableViewにも当てはまります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1927) [では見てみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1931) [CollectionViewの更新では](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1934) [挿入 移動 削除を行う順番は
重要ではありません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1938) [しかしデータソースの更新で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1943) [データソースの構成を変える時は
順序が重要です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1947) [分かりやすいように例を挙げます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1952) [３つの要素を含む
配列が２つあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1955) [理解しやすいように
削除と挿入を行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1959) [１回目は削除を最初に行い](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1964) [２回目は削除を２番目に行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1967) [こうすると感覚的に理解できます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1970) [１番目のアイテムを削除し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1974) [インデックス１に挿入します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1977) [インデックス１に挿入します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1977) [２つ目は逆に
挿入をした後に 削除します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1981) [違う結果が出るので
悪い例だと思うでしょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1986) [これをCollectionViewの更新と
比較します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1992) [BatchUpdates経由の
CollectionViewの更新が２つあり](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=1996) [データソースの更新は
していません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2000) [１つは挿入した後に削除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2004) [もう１つは
削除した後に挿入です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2007) [結果は全く同じになります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2010) [エンジニアとしては
その理由が気になります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2013) [なぜCollectionViewでは
更新の順番が重要でなく](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2018) [データソースでは重要なのか](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2023) [ステップごとに見てみます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2025) [１番目の削除は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2027) [indexPathで降順に処理されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2030) [indexPathを説明します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2034) [BatchUpdatesが始まる前は](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2037) [データソースは更新前の状態です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2039) [データソースは更新前の状態です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2039) [終わると更新後の状態に移行します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2043) [indexPathは
削除に対し常に更新前の状態を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2048) [参照します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2054) [一方 挿入は
indexPathで昇順に処理されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2056) [よってindexPathは挿入に対して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2060) [常に更新後の状態を参照します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2064) [移動はこの２つを混ぜたもので
indexPathからの更新前と](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2069) [indexPathへの
更新後の状態があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2074) [リロードはスーパーコマンドで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2081) [削除と挿入に
分解することができます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2084) [リロードのindexPathは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2089) [更新前の状態を示しています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2092) [リロードの仕組みを理解すると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2096) [リロードの仕組みを理解すると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2096) [今回のアプリケーションの
エラーが分かってきます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2100) [リロードでの削除が
移動と矛盾を起こしているのです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2105) [後でコードで修正します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2110) [参考までに紹介しておきますが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2114) [これがCollectionViewが
作動しなくなる原因です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2118) [どうやって
これらの知識を活用できるのか](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2125) [どのように
データソースの更新を適用し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2129) [全てが同期するように保てるのか](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2133) [４つの基本原則があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2137) [移動を 削除と挿入に分解して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2139) [２つのリストに分けます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2143) [まずindexPath上で
削除を降順で処理し](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2147) [挿入を昇順で適用します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2152) [これをやれば大丈夫です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2155) [データのリロードは？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2159) [データのリロードは？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2159) [モハメドが言ったように
リロードは](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2161) [ボタン１つで終わります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2164) [しかしアニメーションが出せず](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2167) [荒っぽいアプローチです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2169) [アニメーションを提供したいので](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2172) [これは特別な時にしか使いません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2176) [モハメド コードを修正して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2180) [更新アニメーションを出せるか
試してみよう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2183) [名誉挽回の時間だ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2187) [スティーブが説明した
修正ガイドラインを使用します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2189) [まず古い実装を削除します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2195) [更新はリロード 削除
移動から成っていました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2198) [そしてリロードと移動は
同じindexPathを使いました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2204) [そこが矛盾点でした](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2210) [まず この２つを切り離します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2212) [リロードを
performBatchUpdatesに移します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2215) [リロードを
performBatchUpdatesに移します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2215) [そしてデータソースを更新して](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2222) [リロードのアイテムを
CollectionViewに呼び出します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2226) [performWithoutAnimationで
実行しています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2230) [実はスペックをよく見ると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2234) [アニメーションは使われていません](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2238) [次に 残りの更新の
削除と移動を行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2242) [状況を整理しましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2249) [index 2に削除があります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2252) [index 3のアイテムを
index 0に移動します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2256) [ガイドラインに従って
移動を分けると](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2261) [index 2とindex 3に削除がきます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2266) [そしてindex 3のアイテムを
index 0に挿入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2271) [ここでの作業は２つで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2277) [ここでの作業は２つで](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2277) [削除と挿入です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2280) [順番に作業を行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2283) [まず削除を降順で行います](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2285) [index 3で削除を行い](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2288) [Personを後から
挿入できるようにします](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2292) [そしてindex 2のアイテムを削除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2297) [その後 昇順で挿入を処理します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2303) [１つしかないので
それを挿入します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2306) [最後にCollectionViewに](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2310) [アニメーションの表示を指示します](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2313) [正しいアニメーションを
表示させるために](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2317) [移動の指示のままにしています](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2322) [データソースが正しければ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2325) [正しいアニメーションが
表示されます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2327) [シミュレータに戻り
更新の状況を](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2331) [見てみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2336) [うまくいくでしょうか](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2339) [うまくいくでしょうか](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2339) [成功しました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2342) [(拍手)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2343) [リロードして
スローモーションでもう一度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2348) [スペックのとおりです](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2353) [良くできてる](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2356) [ではスライドに戻って
まとめてみましょう](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2358) [カスタムレイアウトを作る時に](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2363) [緊張したことはありますか](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2367) [今日ご紹介した方法で](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2371) [CollectionViewソリューションを
作ってください](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2373) [リロードデータが一杯で
アニメーションが](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2378) [使えない時もあります](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2381) [これらの事項をチェックして](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2383) [間違った点を修正してください](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2387) [このリンクで
詳しい情報が見られます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2392) [明日の朝９時に
CollectionViewラボに来れば](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2396) [質問を受け付けます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2399) [質問を受け付けます](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2399) [モハメドと私がいる予定です](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2402) [本日はありがとうございました](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2405) [(拍手)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/225/?time=2409)