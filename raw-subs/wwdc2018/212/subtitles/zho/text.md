# Introducing MapKit JS

## Summary
MapKit JS brings Apple Maps to your website. See how MapKit JS provides map rendering that is optimized for various browsers and devices, and supports native gestures such as pinch-to-zoom, two-finger rotate, and more. Learn how to add annotations and overlays, and how to use JavaScript interfaces to Apple Maps services such as Search and Directions to deliver an amazing map experience on your website.

## Info
* Frameworks
* WWDC 2018 - Session 212 - iOS, macOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/

## Text
 [（MAPKIT JS简介
演讲212）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=18) [大家好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=21) [我是Vicki Murley](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=28) [我是MapKit JS团队的
工程经理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=29) [这是演讲212
MapKit JS简介](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=32) [十多年前当iPhone刚出来时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=37) [它确实改变了整个行业](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=40) [它将我们带入了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=42) [现在称为app生态系统的世界](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=43) [仔细想一下这很有趣
因为对我们很多人来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=47) [app是我们日常生活中
一个不可或缺的组成部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=49) [但在有app之前
先有的是网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=53) [如果你的公司
是在iPhone之前成立的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=57) [你可能以一个网站开始你的事业](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=59) [你可能以一个网站开始你的事业](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=59) [即使在今天 如果你有app产品](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=62) [你可能也在使用网站来吸引更多用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=64) [或者只是其它不同的受众](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=67) [所以很多开发者 就像你一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=70) [有一个网站和一个app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=73) [WWDC网站就是一个很好的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=75) [我们有这个网站
还有一个附带app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=80) [你可能正在使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=83) [在会议中心附近寻找各种路线信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=84) [就好像这周你在这里做的一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=86) [所以在Apple 我们真的很幸运](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=89) [因为我们已经能够在我们自己的
网站上显示Apple Maps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=92) [有一段时间了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=97) [这是WWDC网站上的一个页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=98) [它能向你展示
会议中心附近的其他活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=101) [若你曾用过iCloud.com
Find My iPhone功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=106) [你就已经在网站上
看到过Apple Maps了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=109) [如果你曾经搜索过零售商店](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=112) [这也是网页中的
Apple Maps的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=115) [（寻找商店）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=118) [你们中的大多数人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=119) [你们中的大多数人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=119) [可能都在app中
使用过MapKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=120) [今天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=124) [我们开放了MapKit JS
以便你可以在你的网站上使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=125) [（MAPKIT JS）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=128) [本周的WWDC上
开放了MapKit JS测试版](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=134) [这是我们一直在自己的网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=139) [所使用的库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=142) [当前所有网页地图库
都有一个免费的使用级别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=144) [比如你的某些数量以内的请求
是免费的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=150) [MapKit JS测试版也不例外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=153) [作为MapKit JS测试版
的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=156) [你可以得到25万次地图初始化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=158) [和两万五千个服务请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=163) [这包括地理编码 搜索
搜索自动完成和路线查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=166) [通常这些免费的使用级别
有一定的使用期限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=171) [可能是每年 每月或每周](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=176) [对于MapKit JS测试版](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=180) [我们每天都会为你提供
刚才所说的免费使用量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=181) [（每天）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=185) [所以这是很大一笔数额](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=191) [但是如果你需要更多来支持你的用例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=193) [或你的公司
你可以与我们联系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=196) [网上有一个表格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=198) [只需填写并提交 我们将收到该请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=200) [（需要更多？联系我们）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=203) [要想使用MapKit JS
你需要一个密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=204) [你可以通过登录你的开发者帐户
来获得这个密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=207) [你需要转到
“证书、ID和配置文件”面板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=210) [你可以在那里得到一个密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=214) [就像你使用开发者帐户中的
任何其他服务一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=216) [（获取MAPKIT JS密钥）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=219) [MapKit JS测试版
当前可用的密钥 数量有限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=221) [所以我建议你尽快去申请一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=224) [一旦你得到一个密钥
并开始使用MapKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=230) [我的意思是 我可能带有偏见
因为我在这工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=234) [但我认为你会很喜欢它的很多东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=236) [第一件事是它可以
让你的app和网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=240) [统一使用同一个地图提供者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=244) [我们注意到有很多人在app中
使用了Apple Maps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=247) [你将可在任何地方
用Apple Maps了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=250) [（为什么你会喜欢
MAPKIT JS）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=253) [MapKit JS API
实际上受到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=255) [你正在使用的本地
MapKit API的启发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=259) [但它们使用的是
Web开发者所熟悉的约定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=262) [所以它们应该很容易适应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=265) [此外 MapKit JS能为网页
带来与Apple Maps同样的使用体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=269) [它具有32种本地化语言
并完全支持从右到左的文字显示顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=276) [它可以通过键盘和语音来使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=281) [它拥有Apple Maps中
我们都见过且喜爱的漂亮制图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=285) [它也支持原生手势
如双指缩放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=289) [双指旋转 还可以移动
和双指滚动进行放大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=292) [它还使用了一种
称为自适应渲染模式的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=299) [它还使用了一种
称为自适应渲染模式的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=299) [它的意思是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=302) [有几种不同的模式可以渲染地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=304) [第一种是客户端渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=307) [这是一个完整的WebGL引擎
它在客户端渲染地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=310) [这使我们能够做很多事情
比如当用户双指缩放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=315) [或双指滚动来放大时
这些非常平滑的过渡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=320) [当我们在缩放级别之间切换时
你会看到标签淡入淡出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=324) [就像本地app一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=328) [（客户端渲染（CSR）
在客户端渲染的完整WebGL地图）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=329) [此外 客户端渲染为我们提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=332) [对地图上标签的完全控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=335) [所以我们可以启用旋转等功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=336) [我用两根手指旋转地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=339) [但标签在我旋转时仍然保持水平](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=342) [最后 通过使用CSR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=347) [我们可以显示你经常
在iOS上看到的标记样式注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=349) [这个注释的标题是
My Marker](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=354) [如果我选择这个注释
就会出现副标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=358) [如果我选择这个注释
就会出现副标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=358) [但它会覆盖它下面的那个标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=361) [因此通过客户端渲染
和对标签的完全控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=364) [我们可以将该标签隐藏起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=368) [从而使地图上的标签不会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=371) [与注释的文本重叠](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=375) [即使用户放大和缩小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=378) [并且地图标签正在不断变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=380) [但地图标签永远不会
覆盖你的注释标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=383) [实际上 如果你有一个可拖动的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=388) [并且用户在地图上到处移动它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=390) [地图标签永远不会覆盖你的注释标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=394) [这是渲染模式之一
即客户端渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=399) [但是Web代码可以在任何地方运行
并且不是所有设备都是一样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=403) [有些时候你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=408) [可能运行在低性能配置的设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=411) [也许是一个旧设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=414) [我们有一种不同的模式
我们称之为仅标签客户端渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=416) [我们有一种不同的模式
我们称之为仅标签客户端渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=416) [它实际上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=420) [是一个显示底图的图像块网格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=422) [其顶部有一层WebGL标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=425) [因此我们仍然可以为
尽可能多的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=430) [以高性能的方式提供这些强大的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=434) [如旋转和标签冲突处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=438) [如果用户的配置
根本不支持WebGL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=442) [他们将会得到我们称之为
服务器端渲染的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=445) [这是一个图像贴图网格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=447) [在这种情况下
标签实际上是图像的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=451) [所以自适应渲染模式非常酷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=456) [因为对每个客户端配置
都有一个理想的模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=458) [我们会自动为你的用户选择最佳模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=463) [因此你无需决定
应该使用WebGL版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=466) [还是贴图版本
或其他什么版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=470) [我们运行一个快速测试
并为该用户提供该配置的最佳模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=472) [（自适应渲染模式）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=477) [根据我们迄今的经验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=478) [根据我们迄今的经验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=478) [大多数用户正在使用客户端渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=480) [或仅标签客户端渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=482) [以上是对MapKit JS
的快速介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=486) [现在为了告诉你
有关使用API的更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=488) [我将把舞台
交给Julien Quint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=491) [谢谢 Vicki](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=501) [（在你的网站上
使用MAPKIT JS）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=502) [我们来看看为你的网站
使用MapKit JS的技术细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=504) [我们将看到如何设置地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=509) [如何导航以及注释这张地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=512) [以便你可以显示自己的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=514) [最后 我们将看到如何启用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=517) [与其它服务的富交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=520) [（设置你的地图）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=522) [要设置你的地图
你需要经过这四个步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=523) [第一步是导入MapKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=527) [你可以看到一个script标签
你可以将其添加在页面的某处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=530) [MapKit JS脚本的URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=533) [包含一个版本号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=538) [包含一个版本号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=538) [我们遵循语义版本控制系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=541) [其中第一个数字是主要版本号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=544) [它在引入重大更改时才会更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=547) [第二个数字是次要版本号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=550) [所以当修复漏洞或添加新功能时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=553) [以及引入性能改进时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=557) [我们更新这个数字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=559) [最后对于紧急补丁
我们更新补丁号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=561) [你可以指定一个X而不是特定的数字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=564) [作为次要或补丁版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=567) [我们建议你
从此版本5.0.X开始使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=569) [以便你能够在我们的第一个
公开发行版中得到所有bug的修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=574) [（第2步：创建地图容器）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=578) [为了能够在你的网站上显示地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=580) [你需要告诉MapKit
在哪里显示该地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=583) [为了做到这一点
你可以使用HTML元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=587) [它将成为你的地图的容器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=592) [这个例子中
我用元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=595) [这通常是非常好的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=597) [这通常是非常好的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=597) [我给它一个ID
以便我可以轻松地引用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=601) [一件非常重要的事情是设定它的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=604) [因为地图没有自己的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=609) [所以它只会使用包含它的元素的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=611) [所以如果你有一个元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=616) [它在这里用灰色背景表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=618) [地图会显示在该元素内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=621) [如果你的元素大小发生变化
那么你的地图大小也会发生变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=624) [（第3步：
初始化MAPKIT JS）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=628) [我为我的地图设置了一个元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=629) [下一步是初始化MapKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=632) [我们刚才看到你需要一个密钥
才能使用MapKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=635) [以及初始化MapKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=639) [你需要获得
authorizationCallback](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=643) [以便你能够使用
MapKit JS提供的服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=646) [最重要的是它可以在你的网站上
实际显示地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=651) [最后一步是使用MapKit中的
map构造函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=658) [最后一步是使用MapKit中的
map构造函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=658) [创建一个地图对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=661) [我给它地图容器的ID
因此地图将显示在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=664) [这就是所发生的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=667) [我们的网页上显示了一个地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=668) [这是默认地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=672) [我们没有传递任何其他参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=673) [所以它会显示
一个默认区域和默认控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=676) [你可以在角落处看到控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=678) [你可以看到用来旋转的指南针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=681) [缩放控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=684) [顶部的地图类型控件等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=686) [这是一个非常大的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=690) [但是如果你在一个页面上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=693) [只想显示一张非常小的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=696) [这些控件会占用很多宝贵的空间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=699) [因此默认情况下 当你的地图尺寸
低于某个宽度或高度时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=702) [我们将自动隐藏这些控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=706) [在触控设备上 情况略有不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=710) [我们并不需要显示一些控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=714) [比如缩放或指南针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=716) [因为我们可以用手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=718) [因为我们可以用手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=718) [来旋转地图或放大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=721) [所以我们不需要显示这些控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=725) [来浪费这些空间
因此我们默认关闭它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=728) [（平台和地图尺寸
——特定的默认值）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=731) [注意Apple徽标和法律文本
将始终存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=733) [这些是控件的默认值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=736) [但你也可以自己设置
这些控件的可见性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=738) [某些控件是所谓的自适应控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=742) [这包括指南针和比例尺](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=744) [这意味着取决于平台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=746) [他们的行为会略有不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=749) [在iOS上 默认情况下不显示
指南针控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=751) [但如果地图旋转了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=755) [我们就会显示它以指示
北方的朝向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=757) [比例尺是地图上距离单位的指标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=760) [我们只在用户放大和缩小时才显示它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=764) [所以当我们进行缩放和旋转时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=769) [我们可以看到指南针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=773) [在右下角出现并消失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=776) [并且比例尺在左上角出现和消失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=777) [并且比例尺在左上角出现和消失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=777) [当然我们也可以设置这些控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=780) [始终可见或始终隐藏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=782) [（任意情景下的可配置控件）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=784) [其余控件都有一个二进制状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=786) [以便通过设置其布尔属性
将它们隐藏或设置为可见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=788) [在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=796) [我们将显示桌面上默认不显示的控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=797) [例如用户位置控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=800) [它出现在窗口的右下角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=802) [在这里 我已经选择了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=806) [现在正在跟踪用户位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=807) [你可以在地图中心看到用户当前位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=810) [比例尺显示在左上方
因为我将其标记为始终可见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=813) [我们可以进一步配置这些控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=818) [为了更好地匹配页面的配色方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=822) [你可以设置地图的色调](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=825) [这会改变用户控件的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=827) [例如 你可以看到地图的所有控件…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=831) [你可以看到用户控件
现在突出显示为红色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=835) [因为我将其色调颜色设置为红色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=837) [因为我将其色调颜色设置为红色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=837) [你可以在此处使用任何CSS颜色值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=840) [（本地化）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=843) [MapKit将使用你的浏览器的
语言配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=844) [以便它能够调整为
你的用户所期望的语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=849) [你也可以在初始化调用中设置语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=855) [或者你甚至可以使用
language属性即时设置它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=858) [这里我把它设置为日语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=861) [因此我可以以日语显示地图以及控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=862) [比如你可以看到指南针中的
北方指示符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=868) [已被替换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=870) [并且单位现在使用了公制系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=872) [这在日本比使用英里或码更传统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=875) [如果你将语言设置为从右向左显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=882) [例如本例中的希伯来语
或阿拉伯语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=885) [其中的控件也会被镜像显示
以符合用户的期望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=888) [控件是你的用户可以与地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=893) [进行交互的一些方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=896) [也是直接交互的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=898) [也是直接交互的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=898) [正如我所说的
我们可以在触摸设备上使用触摸事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=900) [在桌面上对于一些手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=904) [你可以使用触控板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=906) [你也可以使用鼠标点击并平移地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=908) [或双击以放大地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=911) [你也可以直接禁用这些交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=914) [比如通过将ZoomEnabled
ScrollEnabled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=918) [或RotateEnabled属性值
设置为“false”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=920) [例如 如果你有个非常小的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=923) [就像我之前展示的那种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=925) [你可能需要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=927) [用户不会意外移动地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=928) [以确保它始终显示正确的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=931) [你就可以将这些属性
设置为“false”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=933) [这将会使地图变为静态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=936) [（导航和注释地图）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=938) [现在我们知道了
如何在我们的页面上设置地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=940) [我们还希望展示一些有趣的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=943) [我们可以通过导航浏览世界各地
来展示特定区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=947) [也可以注释地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=952) [来引起对我们想展示的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=953) [区域的关注](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=956) [我们将看到如何设置中心和区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=960) [如何向地图添加注释以标记位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=963) [以及如何使用叠层
来覆盖地图的某些区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=965) [我们从地图的中心和区域开始说起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=969) [同样 这是一个默认地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=973) [它显示的是默认区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=975) [它已经缩小到最小级别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=978) [并将地图中心置于0/0经纬度上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=982) [你可能想展示世界中
一个更具体的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=986) [对于这个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=989) [我想将焦点集中在巴西的里约热内卢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=991) [为此 我将设置我的地图中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=995) [为里约热内卢的坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=997) [你可以在右边看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=999) [地图中心已经移动到里约热内卢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1000) [但是设置地图的中心
不会改变缩放比例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1005) [因此在这样的尺度下
里约还不算关注的焦点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1008) [因为我们可以看到整个南美洲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1011) [所以让我们放大一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1013) [（在地图上移动）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1015) [为了做到这一点
我会设置一个区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1016) [一个坐标区域由一个中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1019) [一个坐标区域由一个中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1019) [它由处于地图的中心的这些点表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1022) [以及纬度和经度范围组成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1025) [我在这里将该区域显示为这个虚线框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1027) [但我们会注意到
最终在地图上显示的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1032) [将比你要求显示的区域更大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1037) [因为我们需要确保它完全包括在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1040) [你为地图设置的边界里面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1043) [所以在这种情况下
我需要添加一些填充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1046) [即该地区的北部和南部](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1048) [以显示指定的整个区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1052) [就编码
和MapKit JS框架而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1054) [中心被设置为一个
mapkit.Coordinate对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1060) [这是一个纬度和经度对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1063) [地图的区域用
CoordinateRegion来表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1065) [它是一个包含两个成员的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1069) [一个中心 也即一个坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1072) [以及坐标跨度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1074) [它是一个纬度增量和一个经度增量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1075) [（总是展示正确的区域）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1079) [（总是展示正确的区域）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1079) [我是怎么得到我在这些截图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1081) [向你展示的这个区域或坐标的呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1084) [实际上有很多方法可以查到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1086) [特定的区域和坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1090) [你可以在维基百科上查找它们
并将其放入你的代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1092) [你可以从某些
具有地理信息的数据库中获取它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1096) [但还有一种方法可以获得这些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1102) [就是使用MapKit服务
它包括地理编码和搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1105) [地理编码可以让你查找一个地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1111) [并将返回一个坐标和一个区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1114) [在前面的这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1117) [我使用了
MapKit JS的地理编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1118) [来查找里约热内卢的坐标和区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1121) [这就是我对地图进行的设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1124) [你也可以使用搜索功能来搜索地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1126) [它不仅会返回这些地方的坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1130) [而且还会返回
你可在地图上进行设置的边界区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1134) [以此确保它包含全部结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1136) [（设置一个包含项目的区域）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1139) [（设置一个包含项目的区域）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1139) [在地图上快速设置区域的另一种方式
非常方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1141) [它是一个名为
showItems的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1145) [我们现在看看
如何在地图上添加注释和叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1147) [且通过调用showItems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1150) [我们将确保能够得到
一个包含所有这些项目的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1151) [以便用户可以看到它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1155) [（区域变化可以使用动画效果）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1157) [我会提到区域更改可以使用动画效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1159) [因此你可以提供一个很好的动画效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1161) [或者你也可以立即设置区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1164) [这些事情 比如改变地区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1169) [改变中心等
可以在你的代码中完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1172) [但它们也可以由用户的交互来完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1175) [你希望能够对这些交互作出响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1179) [map对象…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1183) [允许你监听用户事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1185) [例如区域更改事件
它们何时开始以及何时结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1189) [因为这可以用动画来表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1192) [还有诸如滚动 缩放和旋转等手势的
开始和结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1194) [我们遵循DOM事件处理模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1198) [我们遵循DOM事件处理模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1198) [所以你会见到这些熟悉的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1201) [如addEventListener
和removeEventListener](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1203) [其参数为事件的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1206) [以及一个包含事件参数的
event对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1207) [举个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1211) [如果我想每当用户打开不同的区域时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1212) [都用一些新信息刷新我的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1215) [我可以监听
region-change-end事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1218) [这会让我知道
地图已经切换到一个新的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1221) [现在我可以使用该地图的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1224) [来计算我想在此阶段显示哪些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1227) [现在我们知道了如何设置地图
让我们在上面添加一些自己的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1234) [我们可以用注释和叠层来做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1239) [我将从注释开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1241) [MapKit JS提供了三种注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1243) [第一种你刚才已经看到过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1245) [它是标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1247) [你可使用图像或DOM元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1250) [来自定义注释
这比标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1251) [所提供的信息更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1256) [其中DOM元素注释将
具有完全可定制的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1257) [其中DOM元素注释将
具有完全可定制的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1257) [（标记注释）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1261) [标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1262) [是MapKit JS提供的
最有用的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1263) [因为它们内置了丰富的交互功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1266) [并且还有很多样式可供选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1272) [因此它们与你在iOS上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1274) [看到的标记注释类似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1276) [他们有一个选中和取消选中的
内置动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1279) [并且它们会自动隐藏底层的地图标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1282) [如我们刚才所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1285) [所以这里当我选中我的注释时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1286) [车站出口的标签将会隐藏
从而为副标题留出空间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1288) [（外观自动适应当前的渲染模式）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1294) [标记注释…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1296) [标记注释的外观也会自动适应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1299) [MapKit JS为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1303) [你的地图选择的渲染模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1304) [我们已经看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1306) [当使用客户端渲染模式
或仅标签客户端渲染模式时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1308) [我们可以隐藏标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1312) [我们也可以显示你在地图上的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1313) [注释的标题和副标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1315) [这就是左侧显示的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1317) [这就是左侧显示的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1317) [如果你使用服务器端渲染
则标签会内置到标签贴片中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1320) [而且无法隐藏它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1324) [如果你看下右边的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1326) [我们可以看到更多的标签
因为它们都没有被隐藏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1328) [因此为了能够清晰地显示我们的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1331) [我们将只显示注释气球
并且标签不会显示在地图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1335) [我们仍然可以通过选中标注泡泡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1339) [来看到这些注释的标题和副标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1343) [就像在这个例子中一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1346) [自定义注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1347) [也会使用这种标注泡泡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1348) [来显示其标题和副标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1351) [最后 标记注释提供了很多样式选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1355) [这是标记注释的默认值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1359) [你可以使用坐标和一些属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1361) [如标题和副标题
来创建注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1364) [这是基本的默认渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1366) [你将看到一个字形图像
它是气球中显示的图钉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1370) [并且它呈现红色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1373) [你可以将该颜色更改为
任何CSS颜色值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1376) [你可以将该颜色更改为
任何CSS颜色值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1376) [在这里我用了一个绿色的气球](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1380) [你还可以更改字形的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1383) [字形只能有一种颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1386) [在这个例子中
我从默认的白色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1388) [切换为黄色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1391) [你可以更改字形的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1393) [将MapKit JS
提供的默认图钉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1395) [更改为你可以提供的任何光栅图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1398) [在这个例子中 我提供了这个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1401) [你可以为图片提供多个来源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1403) [以适应不同的像素比例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1406) [（自定义以适应你网站的
外观和感觉）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1407) [当注释被选中时 它变得更大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1409) [因此你有更多空间
在你的字形中显示更多细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1412) [因此在这个例子中
我们也可以指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1415) [一个选中字形图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1417) [它与原始图像不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1419) [最后 除了图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1423) [你还可以使用某些文字来更改字形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1424) [我们建议你使用非常短的字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1427) [比如一到三个字符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1431) [在这个例子中
我只使用了一个字母M](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1433) [当字形文字和字形图像都被指定时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1435) [将显示字形文字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1438) [将显示字形文字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1438) [现在我们知道了如何显示标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1441) [我们可以疯狂的在地图上
添加很多注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1444) [这是在巴黎搜索咖啡馆和酒吧的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1447) [我为它们设置了不同的样式
以便将它们彼此区分开来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1451) [但问题是在同一区域内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1455) [有非常密集的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1458) [幸运的是我们在
MapKit JS中有两种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1461) [来处理这种混乱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1464) [第一种是在注释上设置
displayPriority属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1466) [这意味着当两个注释相冲突时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1470) [displayPriority
最高的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1473) [其为一个数字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1475) [将会隐藏具有
最低displayPriority的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1477) [（注释冲突）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1481) [因此在这个例子中
我们看到很多注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1482) [已被隐藏出去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1484) [当你放大和缩小时
这种冲突检测将再次运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1485) [比如放大地图可以让你发现更多注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1488) [当它们具有相同的
displayPriority时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1493) [我们将使用屏幕底部显示的那个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1495) [来作为优先级最高的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1500) [（注释群集）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1501) [处理混乱的另一种方法是使用群集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1503) [而不是使用这些显示优先级](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1505) [在这种情况下
当两个注释具有相同的群集标识符时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1507) [这是一个可以
在标记注释上设置的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1511) [且是一个简单的字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1514) [当两个注释冲突
并具有相同的群集标识符时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1515) [它们将被替换为
能够表示它们两个的单个注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1519) [当然 如果两个以上的注释相冲突
它们也将如此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1523) [因此在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1527) [我们看到一些注释可以单独显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1528) [因为它们没有邻居](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1531) [但在中心的密集区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1534) [我们将几个注释聚集在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1536) [创建群集时
我们使用标记注释来表示它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1540) [我们使用字形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1544) [来显示群集中有多少个注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1545) [你还可以更改群集的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1547) [通过指定新的样式或新的注释类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1552) [现在我们将通过一个小演示
来展示这些注释的实际操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1557) [现在我们将通过一个小演示
来展示这些注释的实际操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1557) [（标记注释演示）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1561) [在这个演示中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1566) [它应该在这里显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1569) [（嘿！是大脚怪！）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1571) [这个演示中
我们将使用一张地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1572) [我们要显示的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1574) [是在这个地区发生的大脚怪目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1577) [所以在本次演讲之后
或者也许是本周末](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1580) [当会议结束以后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1583) [你可以去探索北加州的树林](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1586) [来看看能不能找到大脚怪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1589) [我创建了一张地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1593) [我已经按照刚才幻灯片中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1596) [所显示的方式进行了初始化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1599) [我所做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1603) [我收集了大脚怪目击事件的清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1604) [包括他们的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1610) [它们发生的年份
以及其它一些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1612) [我想要做的是…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1617) [我想要使用这些注释并在地图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1618) [我想要使用这些注释并在地图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1618) [用标记注释来显示它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1621) [让我创建一个函数来将
一个具有所有这些属性的目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1622) [转换为一个标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1627) [所以对于一个目击事件
我想将其坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1632) [用作标记注释的坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1635) [这些目击事件还有其他一些属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1638) [例如目击年份
我将在标题中显示它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1640) [这些数据来自](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1644) [大脚怪野外研究组织的数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1647) [所以我会显示ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1650) [以便如果你有兴趣了解
更多有关该目击事件的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1652) [你可以查看该数据库并获取更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1654) [最后 我已经准备好
创建一个标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1659) [通过使用这个坐标
和我创建的这些选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1662) [现在我知道了该如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1666) [设置目击事件的标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1669) [我现在要获取准备好的目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1670) [在这个目击清单中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1676) [我会为其中每个目击事件
创建一个注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1678) [我会为其中每个目击事件
创建一个注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1678) [然后我会确保它们在地图上显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1682) [我的注释将显示在地图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1687) [我将使用showItems方法
这非常方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1689) [因为它不仅确保项目可见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1692) [还会将它们添加到地图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1695) [由于我正在做一个网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1698) [因此我还可以在我的页面上
添加一些额外的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1700) [比如这个地区有多少次目击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1702) [让我保存它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1706) [并重新加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1710) [我现在看到一张
有60个目击事件的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1713) [所有这些注释都是目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1716) [我们遇到了我刚才强调的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1718) [这就是在这个公园地区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1721) [我可以看到很多目击事件发生
并且它们都相互重叠](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1723) [即使我放大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1727) [这仍然很混乱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1728) [所以我会使用注释上的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1730) [显示优先级属性清理它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1732) [为了替显示优先级选择一个指标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1738) [为了替显示优先级选择一个指标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1738) [我将使用的是这些目击中的
一个非常重要的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1740) [即是否是清晰的目击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1745) [也就是是否有人真的看到了大脚怪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1747) [还是说他们只是听到或看到
它的一些痕迹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1750) [现在我有了这个明确的指标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1753) [我将用它来设置我的显示优先级](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1755) [显示优先级是一个数字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1758) [并且这些优先级可能非常随意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1759) [因此我们提供预定义的值
比如Required](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1762) [它表示你的注释必须
始终显示在地图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1766) [除此以外也有
High和Low显示优先级](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1769) [因此当目击清晰时
我会设置displayPriority为High](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1771) [否则我会设置
displayPriority为Low](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1775) [最后 我还会编码这些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1778) [作为我的注释的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1781) [以便用户更好地理解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1782) [为什么有些注释会显示而有些不会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1784) [当它是棕色时
代表这是一个清晰的目击注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1787) [当它是绿色时
则代表它不是那么清晰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1790) [我们来看看它的区别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1793) [现在你可以看到地图更简洁了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1796) [因为所有的冲突都已解决](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1799) [因为所有的冲突都已解决](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1799) [你可以看到一些注释是棕色的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1802) [这些都是清晰的目击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1805) [它们可能是那些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1806) [应该最先访问的最有趣的目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1807) [但是你也可以看到
如果我放大地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1812) [会有新的目击事件显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1814) [因此你的用户可以浏览地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1817) [并找出他们希望看到大脚怪的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1819) [我将通过为地图添加另一条信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1825) [来结束本演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1829) [我会改变字形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1831) [为…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1833) [我准备好的大脚怪的图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1835) [这是一个简单的PNG图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1837) [我将其用于清晰的目击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1841) [如果目击不太清晰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1844) [我将设置字形文本为一个问号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1847) [使其更加明确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1852) [现在我可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1855) [这些值得怀疑的目击上有一个问号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1858) [这些值得怀疑的目击上有一个问号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1858) [而对大脚怪的清晰目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1862) [将会有大脚怪的图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1865) [这是我们的第一个演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1869) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1872) [（演示回顾）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1874) [所以…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1876) [在本演示中 我们展示了
如何从JavaScript对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1877) [创建标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1881) [如何设置注释的显示优先级
来整理我们的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1883) [以及如何使用彩色字形图像
和字形文字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1888) [来将我们的信息转换到地图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1891) [（图片注释）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1896) [有时标记注释非常方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1897) [但可能不是你想要在地图上
使用的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1900) [例如 如果你想使用公司的徽标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1904) [它有多种颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1906) [那么你不能使用字形图像
因为它仅限于一种颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1908) [有时候注释的形状](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1913) [并非是你想要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1915) [所以在这种情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1917) [你可以提供图像来表示你的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1918) [你可以提供图像来表示你的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1918) [在这个例子中
我使用这样的小贴纸图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1922) [来标记我最近去过的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1925) [我可以使用这些光栅图像进行注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1929) [标题和副标题将显示在标注泡泡中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1932) [就像服务器端渲染的标记注释一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1934) [为了创建一个图像注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1937) [这与创建标记注释非常相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1939) [但必须提供附加属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1942) [即图像的URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1945) [在这里你可以看到
两个不同像素比的不同URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1947) [（自定义注释）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1951) [表示注释的另一种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1952) [是使用经典的图钉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1955) [而且图钉通常有许多不同的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1958) [问题是如果我想提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1961) [很多不同的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1963) [我需要提供很多不同的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1965) [这很快就会变得无法管理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1967) [因此我可以使用自定义注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1969) [在这种情况下
我不使用图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1973) [而是使用任何DOM元素
来表示我的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1974) [（元素是根据需求创建的）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1978) [（元素是根据需求创建的）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1978) [这些元素是根据你的注释需求创建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1980) [我们来看一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1983) [这里如果我想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1984) [在我的地图上显示任意颜色的图钉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1987) [我将用坐标和选项作为参数
创建一个注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1991) [第三个参数是一个函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1995) [它将返回该注释的DOM元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1997) [在这个例子中
我将使用canvas元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=1999) [我创建一个canvas元素
获取它的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2002) [我在该canvas元素上
绘制一个图钉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2004) [我将图钉头的颜色改成我想要的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2007) [然后返回这个canvas](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2010) [这就是地图上为此注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2011) [显示的画布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2013) [这些是你可以使用的三种注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2017) [但有时候你想要展示的
不仅仅是单个位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2020) [或一组单个位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2024) [有时你想要在地图上显示完整的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2027) [（叠层）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2030) [要做到这一点
我们可以使用叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2032) [我们提供三种不同的叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2033) [以下是一些如何使用它们的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2037) [使用圆形叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2040) [你可以显示从某个点开始的所有距离](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2041) [使用折线叠层
我们可以显示两点之间的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2045) [你可以使用多边形叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2048) [来突出显示地理区域 例如州](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2053) [国家或城市的边界等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2056) [（圆形叠层）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2058) [这里是一个圆形叠层的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2059) [现在这是布鲁塞尔](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2062) [并且我把我的地图的中心
放在Manneken Pis](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2064) [它在城市的正中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2067) [这是一个非常适合逛街的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2071) [通过使用围绕中心点的
递增半径同心圆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2073) [我可以看到步行距离](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2079) [这里我使用坐标创建了叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2081) [你需要传给圆形叠层的第二个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2084) [是以米为单位的半径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2088) [所以在这里 每个叠层都有一个半径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2090) [从400米开始每次增加400米](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2092) [即400 800等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2095) [我们可以看到右边有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2097) [我们可以看到右边有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2097) [漫画艺术博物馆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2100) [这听起来很有趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2103) [它看起来可能在
1200到1600米之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2104) [即大约10到15分钟的步行路程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2108) [我可以用叠层做的一件重要的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2111) [是我也可以设计它们的样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2114) [所以在这里
为了表示这种样式的叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2116) [我可以使用
mapkit.Style对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2119) [它有几个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2122) [如线宽 线条和笔触颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2124) [它也可以是任何CSS颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2127) [默认情况下圆形叠层用蓝色填充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2129) [但在这个例子中
我希望它们是透明的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2135) [所以我将fillColor
设置为null](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2137) [我决定我想去参观这个漫画博物馆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2141) [正如我们将要展示的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2145) [MapKit JS可以为你提供
显示两点之间行走](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2147) [和驾车路线的服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2151) [在这个例子中 我向它查询了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2152) [从我所在之处Manneken Pis
到我想去的地方的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2154) [我得到的结果是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2158) [我得到的结果是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2158) [此地图上使用折线叠层表示的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2160) [折线叠层是一个点列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2163) [它们都是相互关联的坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2165) [我还可以调整它们的样式
比如通过设置笔触不透明度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2169) [或粗线宽
以确保它显示在我的地图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2173) [最后一个例子是多边形叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2178) [这对数据可视化之类的用例非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2180) [这里我有一张美国地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2183) [其中每个州都是它自己的叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2185) [多边形叠层也由一系列点定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2188) [在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2191) [叠层形状是封闭且被填充的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2194) [（多边形叠层）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2196) [你甚至可以指定点列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2197) [来实现更复杂的方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2200) [比如说 如果你有飞地和外飞地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2202) [这通常是真实地理区域的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2204) [注释和叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2209) [也可以添加一些额外的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2210) [即这个data属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2214) [因此在这个例子中 我想展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2216) [美国每个州的人口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2218) [美国每个州的人口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2218) [我可以将其显示为一种颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2221) [这让我对人口有一个大概的了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2223) [但我也可以添加一些额外的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2226) [这样如果用户选中其中一个叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2229) [在这个例子中是德克萨斯州](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2232) [我可以显示
其实际人口超过两千万人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2234) [叠层可以被选中 就像注释一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2240) [（GEOJSON导入）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2243) [为了显示叠层
例如我向你展示的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2245) [或所有的州](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2249) [我们需要大量的数据
我们需要很多点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2251) [对于州来说
我们有成千上万的点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2253) [所以将这些数据存入你的程序的
一种简单方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2257) [是使用GeoJSON导入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2260) [若你有一个GeoJSON数据文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2262) [你就可以使用
MapKit JS自动导入它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2264) [注解和叠层会被创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2267) [在这个例子中
这是一个不同的数据文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2269) [其中有很多UFO目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2272) [这只是地图的一部分细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2276) [你可以看到有很多目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2278) [你可以看到有很多目击事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2278) [所有这些注释和叠层都是自动创建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2282) [它们当然也可以使用
一些委托方法进行定制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2285) [（响应用户交互）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2289) [最后 这些注释和叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2291) [可以被用户选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2295) [你想监听它们上的事件
以及地图上的事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2297) [你可以监听选中和取消选中事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2301) [我们之前也看到过
注释可以被拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2304) [所以你也可以监听拖动事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2307) [这也使用了
addEventListener方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2309) [例如 你可以使用
addEventListener](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2312) [来监听地图中的选中事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2316) [它会告诉你注释或叠层何时被选中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2318) [我们将在演示中看到一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2322) [下一节是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2326) [启用与服务的富交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2327) [对于本节
我将把麦克风交给Melody](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2329) [MapKit JS
为你提供三种服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2345) [地理编码 搜索和路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2349) [我将逐步介绍每一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2352) [但在此之前
我会告诉你他们有什么共同之处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2354) [你可以以类似的方式使用这些服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2358) [它包括四个简单的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2360) [首先创建服务对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2362) [然后指定请求参数和选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2365) [然后你发出请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2368) [最后通过回调函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2370) [处理异步响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2372) [首先我们来谈谈地理编码器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2374) [（地理编码）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2376) [下面是一个如何使用
地理编码器的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2378) [它包含两个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2380) [lookup和
reverseLookup](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2382) [如果你有一个地址或位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2384) [而你想找到坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2387) [或者反过来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2388) [你有一个坐标
并且你想要找到该地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2390) [第一步是创建你的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2393) [你可以向其提供一个可选的
getsUserLocation参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2397) [你可以向其提供一个可选的
getsUserLocation参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2397) [这将允许你为地理编码器
提供更多上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2401) [这在存在同名地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2405) [但处于不同位置的情况下很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2407) [例如 如果你在此处使用地理编码器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2410) [你最有可能得到
加利福尼亚布里斯班](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2413) [而非澳大利亚布里斯班](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2416) [接下来你需要构建请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2420) [我们在这里使用这个会议中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2421) [接下来你需要处理响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2425) [正如我们之前提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2427) [地理编码器可以轻松用于
放置标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2428) [所以我们这里在地图上
添加一个标记注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2432) [我们在这里有一个反向查找的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2437) [其中我们有一个坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2440) [我们想找到这个地方的地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2441) [这就是地理编码器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2446) [接下来是服务上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2447) [正如我之前提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2451) [你可以提供一个
getsUserLocation参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2452) [你也可以提供搜索的坐标和区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2455) [这对为你的用户提供
最相关的结果很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2458) [这对为你的用户提供
最相关的结果很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2458) [这就是存在同名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2463) [但不同地方的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2467) [或者你可以将最近的
搜索结果提供给用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2468) [（服务上下文）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2470) [（搜索）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2472) [以下是如何使用搜索服务的示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2473) [这是一个在用户附近
找到咖啡馆的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2476) [首先你创建你的服务对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2480) [然后使用“coffee”
这样的查询来构建请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2485) [你也可以做一些更具体的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2488) [比如提供咖啡店的具体名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2490) [然后你可以处理结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2495) [这可以使用注释轻松显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2498) [因为有时它返回多个结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2501) [你也可以使用坐标以及标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2504) [来填充注释的字段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2506) [最后我们使用
map.showItems方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2511) [同时添加并显示该注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2513) [如果请求中包含](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2518) [如果请求中包含](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2518) [你想要发送的完整查询
这就很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2520) [但是如果你想要一个
能响应用户输入的搜索栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2522) [你就可以使用
Search.autocomplete方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2526) [（搜索自动补全）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2528) [通过使用搜索自动补全功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2529) [你可以向服务提供部分查询字段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2530) [并提供建议来让你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2534) [少输入一些字符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2537) [你随后可以使用
用户选择的建议来完成搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2538) [（路线）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2542) [最后一项服务是查找路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2543) [与其他服务类似
你可以创建你的路线对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2547) [你可以选择提供一种语言
随后将以该语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2552) [返回路线步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2555) [如果你不提供语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2558) [提供给MapKit
初始化函数的语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2560) [将被使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2563) [如果那也没有提供
则浏览器的首选语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2564) [将被使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2567) [然后使用两个必填字段构建你的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2570) [即origin
和destination](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2572) [它们可以是坐标 地址或地点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2574) [默认情况下 交通工具类型是汽车](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2580) [你可使用Transport枚举
将其切换为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2583) [步行路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2585) [我们不会这样做
因为这是一个很远的路程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2587) [但我们会使用
requestAlternateRoutes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2590) [你可以使用它为用户
提供多个可选路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2592) [这样我们可以显示不同的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2595) [而不是默认的最佳路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2598) [最后 你可以在地图上显示你的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2602) [这里我们使用了折线叠层
就像你之前看到的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2606) [你还会得到一组路线步骤以及距离](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2609) [和旅行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2612) [以上这些就是服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2614) [现在你对它们更熟悉了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2615) [Julien将回到台上演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2616) [谢谢 Melody](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2625) [我们将从刚才的地方继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2626) [我们将继续构建
Bigfoot Finder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2629) [这个网页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2633) [还缺少一样东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2637) [尽管它可以告诉我们当前在哪里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2638) [尽管它可以告诉我们当前在哪里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2638) [也可以告诉我们大脚怪的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2642) [但它还没有告诉我们如何到达那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2644) [所以我想补充一些路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2647) [从我们当前的位置
即McEnery会议中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2650) [到这些大脚怪的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2654) [我将用MapKit JS路线服务
来做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2657) [我将使用折线叠层来绘制这些路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2661) [但我需要做的第一件事
是我需要确保用户…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2664) [我需要找到一种方式
以便用户可以告诉我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2669) [他们希望看到哪一个目击点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2671) [所以…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2674) [这一个被选中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2675) [这可能是用户想要看的 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2677) [接下来就是我们要做的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2680) [我们将使用地图的选中事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2682) [来监听用户对注释的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2686) [当某个注释被选中时
这意味着用户可能想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2689) [如何去到那个特定的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2692) [所以我们会请求路线并绘制它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2696) [以便用户看到如何到达那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2700) [最后 我们还可以让他们选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2701) [路线服务返回的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2704) [可选路线中的一条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2706) [并显示有关这些路线的更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2709) [我们先来设置我们的事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2713) [我们在地图上监听选中事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2717) [它告诉我们注释或叠层何时被选中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2720) [这是我收到的事件对象的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2724) [如果annotation属性中
有值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2728) [那么这意味着这个注释刚刚被选中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2730) [因此在MapKit中
一次只能有一个注释或叠层被选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2732) [所以这里就不会有歧义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2737) [这是我们想要去的那个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2739) [我将显示到该注释的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2741) [显示我们的路线意味着
在地图上绘制它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2746) [让我们设置一个折线叠层
来在地图上绘制路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2749) [首先我将定义一种
用于所有路线的样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2754) [设置不透明度和线宽
以确保路线更加显眼](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2759) [设置不透明度和线宽
以确保路线更加显眼](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2759) [默认的颜色是蓝色 这挺好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2763) [我们就用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2766) [就像我们之前写的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2768) [来为引用对象按需创建注释一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2770) [这里我们将为路线按需创建叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2774) [MapKit JS路线服务
所返回的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2777) [包含许多信息 其中包括一条路径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2782) [这是你可以从A到B的步骤列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2786) [每个步骤列表本身都包含一个点列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2790) [如果你记得为了创建折线叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2795) [我需要一个点列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2798) [所以既然我有一个点列表的列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2799) [我会将它缩减为一个列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2801) [以便我将所有路径步骤
一个接一个地放入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2803) [这是我想用来创建
我的折线叠层的点列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2808) [这是我刚刚定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2811) [我希望我的叠层显示的样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2814) [然后我会让用户能够选择这个叠层
来查看更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2817) [然后我会让用户能够选择这个叠层
来查看更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2817) [我会将所有路线对象
保存在data属性中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2822) [这样我就可以显示
预计行程时间和距离](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2826) [我知道如何绘制这些叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2831) [现在我需要从服务中请求它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2834) [所以我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2837) [这有点长 但不是很糟糕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2841) [我首先需要创建一个路线对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2844) [我将为路线使用当前语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2846) [所以使用默认就可以了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2850) [现在当我请求一条
到特定注释的路线时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2853) [或更确切地说
一组到特定注释的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2856) [我会先清理我的地图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2859) [因为也许我之前已经展示过
去其它地方的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2861) [如果我查询地图的其他列表属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2865) [它会告诉我哪些叠层
目前已添加到地图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2868) [我就可以使用removeOverlays方法
删除它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2872) [现在我有了一个干净的地图
我可以显示新的路线了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2875) [我正在构建请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2879) [我正在构建请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2879) [对于origin 我将这个位置硬编码进去
即“McEnery Convention Center”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2882) [我也可以设置坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2885) [但这样更方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2890) [对于destination
我将使用坐标 因为我有这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2892) [它们是作为参数给出的注释的坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2895) [我想展示几条可能的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2900) [所以我要确保requestAlternateRoutes属性
被设置为true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2907) [现在我的请求已经构建完毕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2912) [我可在directions服务上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2915) [调用route方法执行它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2916) [当你做这样的查询时可能会出错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2922) [所以我们必须确保当错误发生时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2925) [我们可以处理错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2928) [在这个例子中 我会回退到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2929) [显示我创建的默认路线
它只是一条直线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2931) [所以如果我们看到一条直线
我们就知道发生了错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2935) [但让我们关注…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2940) [让我们乐观一点
并关注请求成功的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2941) [在这种情况下
我将得到一个路线列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2945) [我将为它们中的每一个
创建一个新的折线叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2948) [我将在地图上使用
可靠的showItems方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2953) [来添加这些路线
并确保通过设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2956) [能够包含这些路线的区域来显示它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2959) [让我介绍一下该方法的更多选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2961) [第一个是animate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2966) [因为我想确保有一个流畅的动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2968) [以从地图的当前区域过渡到
显示路线的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2971) [最后 我还将添加一些填充
以便我可以保留一些上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2978) [而不是只将地图限制在路线周围](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2982) [我现在已经准备好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2986) [从本会议中心请求路线
到其中一个注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2989) [让我们再次选中这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2995) [现在我的注释已被选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2997) [现在我的注释已被选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=2997) [请求也已经执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3000) [我看到有三个不同的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3003) [这些路线的一部分是一样的
但随后分道扬镳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3005) [它们从我们现在的位置开始
即会议中心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3009) [所以我认为这是对的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3013) [是的 这看起来没错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3014) [我有三个结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3017) [现在我可能有兴趣了解更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3019) [关于行程时间和距离的差异](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3022) [我可以通过选中来做到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3025) [但如果我选中一条路线
其结果是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3027) [我的注释已被取消选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3029) [因为一次只能有一个选中对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3033) [这里的问题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3035) [选中的叠层没有默认行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3039) [所以我们来实现自己的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3042) [我们要做的是突出显示这些叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3043) [然后在侧栏中显示它们的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3046) [为了突出这些叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3049) [我将创建一个新的样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3052) [用于突出显示叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3055) [让我们把它放在我的旧样式旁边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3056) [让我们把它放在我的旧样式旁边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3056) [此样式将保持相同的不透明度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3060) [我们让线变粗 并且设置为紫色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3062) [以使其更加明显](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3065) [但是现在我们需要在叠层被选中后
为其应用此样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3070) [幸运的是我已经有了一个
选中事件处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3074) [到目前为止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3080) [我们只对监听选中的注释感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3082) [但现在我们只需添加一个新的…
我们将其追加到这个函数中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3086) [哎呀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3093) [逗号…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3095) [现在如果注释被选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3096) [其处理仍然与以前一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3098) [但如果是叠层被选中
我就会将其样式设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3100) [我刚刚定义的
SELECTED_ROUTE_STYLE](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3103) [以便其突出显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3106) [我们看看实际效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3109) [我们这次可以选择不同的注释
我感到很幸运](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3115) [现在我们可以看到
我们可以从所提供的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3120) [路线列表中选中路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3127) [我还没有实现显示数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3129) [我们看看选中另一条路线如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3132) [这里发生的事情是当一个叠层
被选中时 默认情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3134) [没有任何事情发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3138) [而取消选中叠层时
默认情况下也不会发生任何事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3139) [所以我也必须实现这部分行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3142) [在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3147) [我将为deselect事件
添加一个新的事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3149) [当取消选中叠层时
我将切换其样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3154) [为默认值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3158) [这应该能解决我的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3161) [我们再试一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3165) [我选中这条路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3167) [如果我再次选中同一个地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3169) [因为我们这里有两个叠层互相重叠](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3172) [这将选中另一个叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3174) [现在取消选中事件处理器
能够正常运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3176) [所以我刚才的突出显示已经消失了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3179) [所以我刚才的突出显示已经消失了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3179) [而且现在新选中的对象能够正确显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3182) [这似乎工作得很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3187) [这是另一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3190) [同样的 我可以选中这些路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3192) [但我想了解更多关于它们的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3197) [我想知道行车路线是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3198) [使用其中一条路线与另一条路线相比
分别所需的时间等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3200) [所以…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3205) [这非常简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3206) [因为我需要的东西都已经存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3208) [我已将数据保存在我的叠层中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3212) [我也有一个选中事件监听器
和一个取消选中事件监听器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3216) [所以当叠层被选中时
我会将这些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3219) [显示在侧边栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3226) [这属于很典型的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3228) [Web开发技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3230) [我们有一些数据并且
想将其格式化为HTML](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3233) [所以我不会讨论其中的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3238) [但我们关注的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3239) [但我们关注的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3239) [与叠层相关](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3241) [当叠层被选中时 它就会显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3244) [我不会在这个选中事件上
犯同样的错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3247) [所以当叠层取消选中时
我会直接隐藏数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3250) [从而不会同时出现多条路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3253) [我们再试一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3258) [我们还是选中上次那个注释
我喜欢这个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3260) [我再次选中这条路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3263) [现在该路线被选中了
我们可以在右侧看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3266) [一些额外的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3270) [这是路线的简称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3273) [这是从汉密尔顿公路出发的路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3274) [路程为70公里
在理想的驾驶条件下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3278) [我需要1小时32分钟到达那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3281) [以下是我可以跟随的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3284) [到达目的地的所有步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3286) [我也可以看看这条路线如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3289) [它的路程实际上更长 但它却更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3292) [就是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3297) [我们已经构建了一个大脚怪查找器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3299) [我们已经构建了一个大脚怪查找器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3299) [它可以让我们选择想去的地方
并告诉我们怎么去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3305) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3312) [（演示——路线和用户交互）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3313) [（演示回顾）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3314) [快速回顾一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3316) [我们看到了如何对用户事件做出响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3317) [在这个演示中为选中事件
和取消选中事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3320) [我们从MapKit JS服务中
获得了行车路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3323) [我们使用折线叠层
来显示这些驾驶路线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3327) [我们为选中叠层事件
添加了自定义的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3331) [因为默认情况下没有提供特定的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3335) [（关键要点）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3339) [关于MapKit JS
还有很多东西值得讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3340) [但我们只有一个小时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3344) [所以我们就谈到这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3345) [但我希望我们为MapKit JS
做了一个很好的示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3349) [为Web app提供了
一流的地图体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3353) [它让你能够统一使用单个地图提供者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3358) [它让你能够统一使用单个地图提供者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3358) [并且它具有熟悉且灵活的API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3361) [所以如果你的团队](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3363) [使用过原生MapKit API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3364) [这应该感觉非常熟悉
因为它们使用相同的概念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3367) [Web开发者应该也很乐意看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3370) [这些API是为了适配
JavaScript而定制的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3373) [我要提醒你
你需要MapKit JS密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3379) [才能够使用MapKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3381) [因此请到开发者门户获取你的密钥
然后马上开始试用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3384) [若你想了解更多
MapKit JS的知识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3389) [你可以在此URL
找到文档和示例代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3391) [如果你想了解更多
关于本次演讲的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3397) [这是这次演讲的URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3400) [我们附带的视频将逐步教你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3402) [如何获取和使用
MapKit JS密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3407) [（更多信息）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3409) [最后 我们还有相关的实验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3411) [它们分别在周三早上和周五早上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3413) [届时你可以与
整个MapKit JS团队交谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3416) [并向我们询问
有关MapKit JS的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3419) [并向我们询问
有关MapKit JS的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3419) [非常感谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/212/?time=3422)