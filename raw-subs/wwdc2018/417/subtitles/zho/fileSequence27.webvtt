WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:26:58.185 --> 00:27:00.120 align:middle line:-1
因此在这里我展示了如何使用

00:27:00.187 --> 00:27:03.690 align:middle line:-1
协议来模拟与外部类及其委托的交互

00:27:04.224 --> 00:27:06.760 align:middle line:-2
这是很多步骤
让我们回顾一下我们所做的

00:27:08.862 --> 00:27:10.764 align:middle line:-1
首先我们定义了一个新的协议

00:27:10.831 --> 00:27:13.600 align:middle line:-1
表示外部类的接口

00:27:14.301 --> 00:27:17.171 align:middle line:-2
该协议需要包含
我们在外部类上使用的

00:27:17.237 --> 00:27:19.339 align:middle line:-1
所有方法和属性

00:27:19.540 --> 00:27:22.409 align:middle line:-1
并且通常它们的声明可以完全匹配

00:27:23.777 --> 00:27:27.147 align:middle line:-2
接下来我们在原始的
外部类上创建了一个扩展

00:27:27.214 --> 00:27:29.082 align:middle line:-1
它声明符合协议

00:27:30.450 --> 00:27:32.953 align:middle line:-1
然后我们用我们的新协议替换了

00:27:33.020 --> 00:27:34.321 align:middle line:-1
外部类的所有用法

00:27:34.755 --> 00:27:36.523 align:middle line:-1
并添加了一个初始化器参数

00:27:36.590 --> 00:27:38.959 align:middle line:-1
以便在测试中设置该类型

00:27:41.028 --> 00:27:43.830 align:middle line:-1
我们还讨论了如何模拟委托协议

00:27:43.897 --> 00:27:45.933 align:middle line:-1
这是SDK中常见的模式

00:27:46.934 --> 00:27:48.669 align:middle line:-1
这里还有一些步骤

00:27:48.735 --> 00:27:49.837 align:middle line:-1
但这里是我们所做的

00:27:51.004 --> 00:27:55.008 align:middle line:-1
首先我们定义了一个模拟委托协议

00:27:55.075 --> 00:27:56.643 align:middle line:-2
其方法签名
与我们正模拟的协议相似

00:27:57.077 --> 00:28:00.747 align:middle line:-2
但是我们用模拟协议类型
代替了真正的类型

