# Embracing Algorithms

## Summary
When you imagine building a new app, what do you think about? Models, views, and controllers deserve their prominent place in the design process, but we don't often give the same attention to the underlying work our apps need to do. Understand how to identify and optimize the algorithms in your app, and discover how implementing algorithms as generic protocol extensions results in efficient, effective, and maintainable code.

## Info
* Developer Tools
* WWDC 2018 - Session 223 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=7) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=17) [&gt;&gt; Hi, everybody.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=23) [It's great to see you all here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=24) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=26) [I'm Dave, and the next 40](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=27) [minutes are about understanding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=29) [and honoring what makes our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=32) [programs actually work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=34) [There will be practical advice,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=36) [but this is not a talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=38) [tips and techniques or any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=41) [specific algorithms even, though](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=43) [we will look at a few.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=44) [It's about revealing something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=47) [fundamental, the potential of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=49) [which is already present in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=51) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=53) [I hope that for at least a few](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=54) [of you it marks the beginning of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=57) [a new relationship to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=58) [a new relationship to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=58) [practice of programming.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=60) [Speaking personally, when I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=62) [discovered this approach, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=63) [changed the course of my life](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=65) [and my career.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=66) [It's the reason I care so much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=68) [about software libraries, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=69) [it's also the source of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=71) [liability, maintainability, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=73) [performance in every piece of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=75) [concrete code I've written](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=77) [since.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=79) [But before we get into that, let](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=80) [me introduce you to a friend of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=82) [mine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=84) [This is Crusty.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=86) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=88) [Crusty is old school.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=92) [He doesn't trust debuggers or or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=94) [mess around with integrated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=97) [development environments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=98) [No, he favors an 80 x 24](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=100) [terminal window in plain text,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=103) [thank you very much.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=105) [Now, Crusty takes a dim view of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=107) [the latest programming fads, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=109) [it can sometimes be an effort to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=111) [drag him into the 21st century.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=113) [He just thinks different.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=116) [But if you listen carefully, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=118) [But if you listen carefully, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=118) [can learn a thing or two.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=120) [Now, sometimes his cryptic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=123) [pronouncements like "programming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=125) [reveals the real; border on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=127) [mystical."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=130) [And to understand him, I found](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=131) [it helpful to actually write](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=133) [some code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=135) [So, lately, I've been working on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=137) [a little program called Shapes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=138) [I'm hoping to make it into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=141) [full-featured vector drawing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=142) [program, but so far it lets you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=144) [arrange shapes on an infinite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=146) [canvas.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=148) [Now, I want to tell you the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=150) [story of the delete selection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=151) [command because I learned so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=153) [much from implementing this one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=155) [feature.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=157) [I think we've probably all gone](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=159) [through part of this progression](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=161) [as programmers as we learn how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=163) [to remove things from an array.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=165) [Everybody starts out doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=167) [something like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=169) [That's the delete selection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=173) [command.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=176) [We loop from 0 to count, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=178) [We loop from 0 to count, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=178) [when we find something to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=182) [delete, we [inaudible] remove](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=183) [that, and then we continue with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=185) [our loop until, ouch, we walk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=187) [off the end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=191) [The array got shorter, but we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=193) [picked the number of iterations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=194) [when the loop started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=196) [Fortunately, you can't miss this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=197) [bug if you Swift and test your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=199) [code because it'll trap.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=200) [But if you had to learn this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=203) [lesson as a C-programmer, like I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=205) [did, you might not be so lucky.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=206) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=209) [So, we can fix it by replacing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=210) [the for loop with a somewhat](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=212) [uglier while loop, which lets us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=214) [examine the count at each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=216) [iteration.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=217) [But there's a subtle bug in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=218) [one too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=222) [If two consecutive elements are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=223) [selected, it'll remove the first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=226) [one and then immediately hop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=228) [over the next one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=231) [Now, this bug is a little more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=234) [insidious because it hides from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=236) [you unless your tests happen to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=238) [you unless your tests happen to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=238) [exercise it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=240) [But if we're lucky enough to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=242) [notice it, we press ahead and we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=244) [fix the implementation again by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=246) [guarding the increment in an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=248) [else block.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=250) [So, are we done now?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=251) [Are we sure this one is correct?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=253) [I think I can prove to myself](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=257) [that it works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=259) [Anyway, having gone through this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=261) [ordeal, what do we do?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=264) [Well, of course, we lock this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=265) [nine-line pattern into our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=267) [brains so we can trot it out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=268) [whenever we have to delete](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=270) [something.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=272) [Now, I'm sure many of you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=273) [been holding yourselves back](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=275) [from screaming at me because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=276) [that there's a much more elegant](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=278) [way to do it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=280) [I still remember the day I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=281) [discovered this trick for myself](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=283) [because once you find it, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=285) [never do this nine-line dance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=286) [again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=288) [The iteration limit and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=289) [index of the next item to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=291) [examine kept shifting under our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=292) [feet because remove(at: i)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=294) [changes parts of the array after](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=297) [i.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=299) [But if you go backwards, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=300) [only iterate over the parts of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=306) [the array that you haven't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=307) [changed yet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=308) [Slick, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=310) [And this is the pattern I've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=311) [used ever since because it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=312) [clean, and it never fails, until](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=314) [a few months ago.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=320) [One morning, I had just finished](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=321) [my avocado toast, and I was idly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=324) [fooling with my app when I tried](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=326) [deleting about half the shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=328) [from a really complicated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=329) [canvas.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=331) [My iPad, it froze up for like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=333) [three seconds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=335) [So, I took a sip of my half caf](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=336) [triple shot latte in its bamboo](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=340) [thermal commuter cup, and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=343) [considered my options.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=344) [This was disturbing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=347) [I mean, it's a pretty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=349) [straightforward operation, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=350) [my code was so clean, how could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=351) [it be wrong?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=353) [Profiling showed me that the hot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=356) [spot was right here, but beyond](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=358) [spot was right here, but beyond](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=358) [that, I was stumped.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=361) [So, just about then, Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=362) [walked up behind me carrying a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=365) [can of off-brand coffee grounds](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=367) [from the local supermarket for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=369) [his daily brew.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=370) ["Stuck?" he said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=372) ["Yeah," I sighed, and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=376) [explained the situation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=378) ["Well, did you even look at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=379) [documentation for that?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=384) [Well, I hadn't, so I popped up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=387) [the Quick Help for Remove At,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=389) [and Crusty leaned in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=391) ["There's your problem, right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=394) [there," he said, leaving a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=395) [smudge on my gorgeous retina](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=398) [display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=400) [Now, I carefully wiped off the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=402) [fingerprint with a handcrafted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=405) [Italian microfiber cloth, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=407) [Crusty said, "What's that tell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=410) [you, son?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=413) ["Well," I said, "it means that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=415) [removing an element takes a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=417) [number of steps proportional to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=419) [number of steps proportional to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=419) [the length of the array."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=421) [And it kind of makes sense,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=422) [since the array has to slide all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=424) [of the following elements into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=426) [their new positions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=428) ["So, what's that mean about your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=430) [Delete Selection command?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=432) [he asked.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=434) ["Uh," I said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=436) [That's when he pulled out a pack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=438) [of mentholated lozenges and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=441) [lined them up on my desk.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=442) ["Try it yourself."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=444) [So, I went through the process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=447) [as I tried to answer his](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=449) [question.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=450) ["Well, since Delete Selection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=450) [has to do order n steps, once](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=452) [for each selected element, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=454) [you can select up to n elements,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=455) [the total number of steps is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=457) [proportional to n squared."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=458) [Crusty added, "That's quadratic,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=462) [son, whether you do it the ugly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=464) [forward way or the fancy pants](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=466) [backward way."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=468) [I realized then that for my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=470) [little 10 to 20-element test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=474) [cases, we'd only been talking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=476) [about a few hundred steps, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=478) [about a few hundred steps, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=478) [since the steps are pretty fast,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=480) [it seemed great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=482) [But the problem is that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=484) [doesn't scale well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=485) [Fifty squared is 2,500 and 100](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=486) [squared is 10,000.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=490) [So, if you do all your testing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=492) [in this little region down here,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=495) [you'll probably never see it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=497) [but scalability matters because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=499) [people are using their phones](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=501) [and iPads to manage more and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=503) [more data, and we keep shipping](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=505) [devices with more memory to help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=507) [them do it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=509) [You care about this because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=510) [scalability is predictability](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=512) [for your users.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=514) [So, now, I understood the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=515) [problem, but I still wasn't sure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=519) [what to do about it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=521) ["Now what?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=523) [I asked Crusty.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=523) ["You know, kid," he said,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=525) [popping a lozenge, "there is an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=527) [algorithm for that."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=529) [I told him, "Listen, Crusty, I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=533) [an app developer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=536) [You say you don't do object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=538) [You say you don't do object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=538) [oriented.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=540) [Well, I don't 'do' algorithms."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=540) [You pay attention to your data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=543) [structures in algorithms class](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=544) [because you know when it's time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=546) [to get a job, your interviewer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=548) [is going to ask you about them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=549) [But in the real programming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=551) [world, what separates the elite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=552) [from the newbies is the ability](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=554) [to wire together controllers,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=556) [delegates, and responders to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=558) [build a working system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=559) ["Bonkey," he said; I don't know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=562) [why he calls me that, "What do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=564) [computers do?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=567) ["They compute."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=570) ["Now, where's the computation in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=571) [all that?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=573) ["Well," I replied, "I guess I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=575) [don't see anything that looks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=577) [like an algorithm in my code."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=579) [But Crusty wasn't having it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=581) ["Oh, your app is full of them,"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=583) [he said, dropping an old dead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=585) [tree dictionary on my desk,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=586) ["Look it up."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=588) [After I gathered my composure, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=591) [carefully slid the book to one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=594) [side and typed Define Algorithm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=595) [into Spotlight, which Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=597) [thought was a neat trick.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=598) [Hmm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=603) [A process or set of rules to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=605) [followed in calculations or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=606) [other problem solving](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=608) [operations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=609) [Well, come to think of it, that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=611) [did sound like most code, but I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=613) [still wasn't sure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=616) ["You ever do a long division?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=618) [asked Crusty.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=619) ["That's an algorithm."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=620) [I started to type into Spotlight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=625) [again, but he snapped, "On](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=627) [paper."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=629) [And not wanting to embarrass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=630) [myself, I turned the subject](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=631) [back to my code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=632) ["Hmm."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=635) [I asked, "So, what is this magic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=636) [algorithm that will cure my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=639) [performance problem?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=641) ["Well, if you'll just let me at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=644) [your TTY there for a minute," he](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=645) [said, "How do you work this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=646) [thing?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=648) [Oh, it's a track pad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=648) [I'll try not to touch that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=649) [So, first, you do away with this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=651) [foolishness.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=653) [Now, shapes.removeallwhere the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=657) [Now, shapes.removeallwhere the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=657) [shape is selected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=660) [Hmm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=663) [Try that on for size."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=664) [Now, Crusty headed off to wash](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=666) [out the pitcher of his coffee](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=667) [maker, leaving me to figure out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=668) [what had just happened in my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=671) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=673) [First, I checked, and I found](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=674) [that the performance problem was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=677) [fixed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=678) [Nice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=679) [And I didn't want another earful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=681) [from Crusty about looking at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=682) [documentation, so I popped up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=684) [Quick Help for removeAll(where:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=686) [and I saw that its complexity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=688) [scales proportionally to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=692) [length of the collection just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=694) [like removeAt.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=696) [But since I didn't have to put](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=697) [it in a loop, that became the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=699) [complexity of my whole](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=701) [operation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=702) [Now, I want to give you some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=704) [intuition for the kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=706) [difference this makes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=708) [What are n means that the time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=710) [the algorithm runs scales](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=712) [linearly with the problem size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=714) [The graph is a straight line.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=716) [Now, the orange line is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=719) [Now, the orange line is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=719) [shape of order n squared.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=720) [As you can see, a linear](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=723) [algorithm may do worse on a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=724) [small problem, but it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=726) [eventually faster than a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=727) [quadratic algorithm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=729) [The cool thing is though, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=731) [doesn't matter how expensive you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=733) [make the steps of the linear](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=735) [algorithm, if you keep looking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=736) [at larger problem sizes, you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=739) [always find one where the linear](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=742) [algorithm wins and continues to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=744) [win forever.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=747) [So, we're talking about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=749) [scalability, not absolute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=750) [performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=752) [Well, my scalability problem was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=756) [fixed, but I really wanted to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=760) [see how the standard library had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=762) [improved on my backward deletion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=764) [scheme.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=766) [Crusty reminded me that Swift is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=767) [open source, so I could pull it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=769) [up on what he calls "the hipster](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=770) [web."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=773) [But the rest of us know as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=773) [GitHub.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=774) [Now, the first thing I noticed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=779) [Now, the first thing I noticed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=779) [was the dot comment, which was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=780) [the source of all that Quick](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=783) [Help, describing both what the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=784) [algorithm does and its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=786) [complexity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=788) [Next, it turns out that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=789) [removeAll(where) isn't just some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=794) [method on a reg; it's a generic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=795) [algorithm, which means that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=798) [works on a wide variety of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=800) [different collections.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=802) [It depends on a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=804) [things, the ability to rearrange](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=805) [elements, which comes from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=808) [mutable collection, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=809) [ability to change the length and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=811) [structure, which comes from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=814) [range-replaceable collection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=816) [And it's built from a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=818) [other order n algorithms.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=821) [The first is a half stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=824) [partition, which moves all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=826) [the elements satisfying some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=828) [predicate to the end and tells](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=829) [us where that suffix starts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=833) [The half stable in its name,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=836) [that comes, that indicates that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=838) [that comes, that indicates that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=838) [it preserves the order of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=840) [elements that it doesn't move,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=842) [but it can scramble the elements](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=844) [that it moves to the end.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=846) [Now, sometimes, that doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=849) [matter though; the second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=850) [algorithm removes subrange.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=851) [It's just going to delete them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=853) [anyway.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=854) [Have we all seen this partial](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=856) [range notation?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=857) [It's just a really convenient](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=859) [way of writing a range that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=861) [extends to the end of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=862) [collection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=863) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=866) [Now, remove subrange is part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=867) [the library's public API, so you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=869) [can find its documentation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=871) [online, but halfStablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=873) [is an implementation detail.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=876) [Now, we're not going to step](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=878) [through all of it, but there are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=882) [a few things worth noticing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=883) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=884) [First, it starts by calling yet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=886) [another algorithm,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=888) [firstIndex(where), to find the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=890) [position of the first element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=892) [that belongs in the suffix.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=894) [Next, it sets up a loop variable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=897) [j, and there's a single loop,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=898) [j, and there's a single loop,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=898) [and the loop index j moves](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=901) [forward one on each iteration.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=905) [So, it's a sure bet that j makes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=907) [just one pass over the elements.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=909) [You can almost see the order and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=911) [complexity just from that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=914) [Lastly, because this method](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=920) [needs to rearrange elements but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=922) [not change the length or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=923) [structure of the collection, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=924) [only depends on mutable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=926) [collection conformance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=927) [So, this is the first lesson I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=929) [learned.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=932) [Become familiar with what's in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=933) [the Swift Standard Library.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=934) [It contains a suite of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=937) [algorithms with documented](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=938) [meanings and performance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=940) [characteristics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=941) [And although we happened to peek](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=943) [at the implementation, and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=945) [can learn a lot that way, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=947) [designed so that you do not have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=949) [to.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=950) [The official documentation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=952) [should tell you everything you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=953) [need to know in order to use the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=955) [library effectively.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=956) [You'll even find a playground](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=958) [You'll even find a playground](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=958) [tutorial there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=960) [Now, I realize there's a lot in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=961) [Swift, so it can look daunting,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=963) [but you don't need to remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=966) [everything.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=967) [Having an idea of what's there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=968) [and how to find it will take you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=970) [a long way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=972) [Now, before we move on, I want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=974) [to point out something else that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=976) [happened in my code when Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=978) [made this change.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=979) [Which one of these most directly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=981) [describes its meaning?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=982) [Now, I actually have to read and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=984) [think through the first one to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=987) [know what it's doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=988) [Hmm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=990) [Maybe I'd better add a comment.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=990) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=992) [How does that look?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=993) [Oh, even with that comment, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=994) [reverse iteration is kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=995) [tricky, and I don't want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=997) [somebody breaking this code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=998) [because they don't understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=999) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1000) [So, I'd better explain that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1001) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1005) [While we're clarifying things,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1006) [the After code actually reads](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1007) [better with a trailing closure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1009) [syntax.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1010) [Now, take a breath and look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1011) [again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1014) [Which one is more obviously](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1016) [correct?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1017) [Even with all these comments, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1019) [Even with all these comments, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1019) [still need to read through the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1020) [first one just to see that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1022) [does inefficiently the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1023) [thing as the second one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1025) [Using the algorithm just made](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1028) [the code better in every way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1029) [So, this is a guideline, an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1031) [aspiration for your code first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1035) [put forward by Shawn Perin.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1036) [Every time you write a loop,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1039) [replace it with a call to an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1041) [algorithm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1042) [If you can't find one, make that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1043) [algorithm yourself and move the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1045) [loop into its implementation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1047) [Actually following this might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1050) [seem unrealistic to you now, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1052) [by the end of the talk, I hope](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1054) [it won't.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1056) [For a little motivation though,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1058) [think back to the last time you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1059) [were looking at spaghetti code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1062) [Was it full of loops?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1064) [I bet it was.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1067) [All right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1070) [Done and done.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1071) [I have just made the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1072) [shorter, faster, and better in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1073) [every way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1076) [I was ready to call it a day.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1076) ["Thanks for your help, Crusty,"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1079) ["Thanks for your help, Crusty,"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1079) [I said, fastening the titanium](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1080) [carabiners on my bespoke leather](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1082) [messenger bag, but he looked at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1085) [me suspiciously, and said, "You](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1087) [suppose you might have made that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1089) [mistake anywhere else?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1090) [I sighed, put my bag down and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1094) [started hunting down the loops](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1096) [in my code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1098) [There were lots in the file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1100) [[inaudible].](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1102) [Bring to front, send it back,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1104) [bring forward, which sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1109) [hops the selected shape over the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1111) [one in front of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1112) [Let's do that a couple of more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1114) [times.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1118) [Send backward with hops, under](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1118) [the shape, below the selected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1120) [shape, and last of all, dragging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1121) [in the shape list at the left.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1125) [Now, these sound really simple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1129) [until you realize that they all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1132) [need to operate on multiple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1136) [selected shapes that might not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1137) [even be contiguous in the list.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1139) [even be contiguous in the list.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1139) [So, it turns out that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1145) [behavior that makes sense is to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1146) [leave all of the selected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1147) [elements next to each other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1149) [after the operation is finished.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1150) [So, when you're bringing shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1153) [forward, you hop the front most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1154) [selected shape in front of its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1155) [neighbor, and then you group all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1157) [the other ones behind it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1158) [And when you send shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1162) [backward, you hop the bottom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1163) [most selected shape backward](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1165) [behind its neighbor and group](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1166) [the other ones in front of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1168) [So, if you didn't follow that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1173) [completely, don't worry.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1176) [We'll come back to it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1177) [But suffice it to say that I had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1178) [some pretty carefully worked out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1181) [code to get all of these details](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1182) [right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1184) [For example, this was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1185) [bringToFront, and when I looked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1187) [at it, sure enough, there was an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1191) [order n loop over the shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1193) [containing two order n](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1195) [operations, remove(at:) and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1197) [operations, remove(at:) and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1197) [insert(at:), which makes this,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1200) [you guessed it, n squared.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1203) [In fact, that same problem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1206) [showed up in every one of my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1208) [other four commands.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1210) [All of the implementations here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1212) [loop over an array, performing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1214) [insertions and removals, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1216) [means they're all quadratic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1217) [Now, I was kind of discouraged](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1219) [at this point, so I asked Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1223) [if he'd look at them with me.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1224) [He said, "Can't stay too late,"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1227) [he said, "I got my ballroom](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1229) [dancing tonight, but I guess we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1231) [better get a move on."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1233) [So, I pulled up bringToFront,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1235) [and Crusty's first question was,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1238) ["What does it actually do?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1242) ["Well," I said, "there's a while](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1245) [loop and j tracks the insertion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1247) [point and i tracks the element](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1249) [we're looking at."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1251) ["In words, not in codes," said](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1252) [Crusty.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1254) ["Describe it."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1255) ["Okay. Let's see.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1258) [It moves the selected shapes to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1259) [It moves the selected shapes to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1259) [the front, maintaining their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1261) [relative order."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1263) ["Write that down in a dot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1264) [comment and read it back to me."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1267) [I'm a superfast typist.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1270) ["Moves the selected shapes to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1275) [the front, maintaining their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1277) [relative order."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1278) ["Sound familiar?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1279) [said Crusty.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1282) [That's when I realized that this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1284) [was a lot like half stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1285) [partition, except it's fully](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1286) [stable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1289) [I was starting to get excited.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1289) [And what do you think this one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1292) [is called?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1293) [So, I had to guess, "Stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1294) [partition?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1296) ["That's right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1297) [One of my old favorites, and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1298) [can find an implementation in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1301) [this here file from the Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1302) [Open Source project."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1303) [So, I pulled the file into my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1306) [project, while Crusty mumbled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1308) [something about how that comment](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1310) [we added should have been there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1311) [all along, and I started coding,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1312) [getting about this far before I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1316) [had a problem.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1319) [had a problem.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1319) [You see, stable partition takes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1321) [a predicate that says whether to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1323) [move an element into the suffix](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1326) [of the collection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1328) [So, I had to express bring to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1329) [front in terms of moving things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1331) [to the back.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1333) [I looked at Crusty.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1335) ["Visualize it," he said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1337) [So, I closed my eyes and watched](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1340) [as the unselected shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1342) [gathered at the back, which gave](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1344) [me my answer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1345) [Now, I guess sendToBack was even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1347) [easier because we just need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1351) [invert the predicate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1352) [We're sending the selected ones](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1353) [to the back.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1355) [Now, I was just about to attack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1358) [the bring forward command, and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1360) [figured that Crusty would be as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1362) [eager to move on as I was, given](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1363) [his plans for the evening, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1366) [he stopped me.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1367) ["Hold your horses, Snuffy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1369) [I don't want to miss the opening](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1371) [tango, but aren't you going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1372) [check whether it'll scale?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1374) [He had a point, so I popped up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1377) [the Quick Help for stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1379) [the Quick Help for stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1379) [partition, and I saw that it had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1380) [(n log n) complexity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1384) [So, for a way to think about (n](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1386) [log n) take a look at log n.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1389) [It starts to level off really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1392) [quickly, and the bigger it gets,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1395) [the slower it grows, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1397) [closer it comes to being a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1399) [constant.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1401) [So, when you multiply that by n,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1402) [you get something that doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1404) [scale quite as well as order n](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1407) [but that gets closer and closer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1409) [to linear as it grows.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1411) [So, order n login is rightly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1414) [often treated as being almost](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1416) [the same as order n.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1418) [I was pretty happy with that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1420) [So, we moved on to bring](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1423) [forward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1424) [Now, as we said earlier, bring](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1425) [forward bumps the front most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1429) [selected shape forward by one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1431) [position and gathers the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1433) [selected shapes behind it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1435) [But Crusty didn't like that way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1437) [But Crusty didn't like that way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1437) [of thinking about it at all.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1440) ["That little do-si-do at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1442) [beginning is making a line dance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1443) [look like a Fox Trot."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1445) [he said, "You don't need it."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1446) [When I looked at him blankly, he](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1449) [broke out the lozenges again,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1450) [and with five of his free](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1453) [digits, he executed the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1455) [bringForward command.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1457) ["See it again?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1462) [he asked.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1463) [I felt a little like a mark in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1465) [Three-card Monte, but I played](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1466) [along.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1473) ["Look familiar?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1474) ["No."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1476) [He threw a hanky over the first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1477) [few.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1479) ["How about now?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1482) [That's when I realized it was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1486) [just another stable partition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1488) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1491) [I got this, I thought.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1492) [If we find the front most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1495) [selected shape, then move to its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1498) [selected shape, then move to its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1498) [predecessor, and isolate the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1501) [section of the array that starts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1505) [there, we could just partition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1507) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1510) ["But how do you modify just part](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1512) [of a collection?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1514) [I asked Crusty.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1514) ["Ain't you never heard of a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1516) [slice?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1517) [he said, taking over the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1518) [keyboard.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1519) ["Shapes, starting with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1523) [predecessor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1525) [There.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1527) [Stick that in your algorithm and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1528) [mutate it."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1529) [Which I promptly did.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1530) [So, human knowledge about how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1537) [compute things correctly and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1541) [efficiently predates computers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1543) [by thousands of years, going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1544) [back at least to ancient Egypt,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1547) [and since the invention of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1549) [computers, there's been an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1550) [explosion of work in this area.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1552) [If the standard library doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1555) [have what you need, what you do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1556) [need is probably out there with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1558) [need is probably out there with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1558) [tests, with documentation, often](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1560) [with a proof of correctness.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1563) [Learn how to search the web for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1565) [research that applies to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1567) [problem domain.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1568) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1572) [Back to the code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1572) [I was intrigued by this slice](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1574) [thing, and when I checked out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1575) [its type, I saw that it wasn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1577) [an array.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1579) [Since we had used stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1580) [partition on an array and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1583) [bringToFront and sendToBack, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1584) [now we were using it on an array](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1587) [slice, I guessed out loud that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1588) [it must be generic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1590) ["Of course, it is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1592) [What's stable partition got to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1595) [do with the specifics of array?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1596) ["That's right, nothing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1599) [Speaking of which, Blonkey, just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1601) [what does bringForward have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1604) [do with shapes and selection?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1605) ["Well," I said, "it works on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1608) [shapes, and it brings forward](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1611) [the selected ones."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1612) ["That's right, nothing," he went](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1614) [on without listening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1615) ["Can you run bring forward on a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1618) ["Can you run bring forward on a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1618) [row of lozenges?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1620) [Of course, you can.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1621) [So, it's got nothing to do with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1624) [shapes."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1626) [Hmm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1628) ["Are you suggesting we make it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1628) [generic?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1630) [I asked.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1631) ["Isn't that premature](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1632) [generalization?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1633) [Answering a question with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1635) [question, Crusty replied, "Well,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1636) [just how do you plan to test](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1640) [this method?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1642) ["Okay," I said, "I'll create a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1644) [canvas.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1646) [I'll add a bunch of random](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1647) [shapes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1648) [I'll select some of them, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1649) [then finally..."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1650) [But I didn't even finish the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1652) [sentence because I knew it was a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1653) [bad idea.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1655) [If I did all of that, would I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1657) [really be testing my function,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1659) [or would I be testing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1660) [initializers of Canvas and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1662) [various shapes, the addShape](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1663) [method, the isSelected property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1665) [of the various shapes if it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1667) [computed?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1669) [I have to build test cases for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1670) [sure, but ideally, that code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1672) [shouldn't depend on other code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1674) [that I also have to test.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1676) [If I can bring the lozenges](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1679) [If I can bring the lozenges](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1679) [forward, it should be possible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1680) [to do something casual with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1682) [[inaudible] in a playground,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1684) [like this, which brings forward](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1685) [the number divisible by 3.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1688) [Now, at the other end of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1693) [spectrum, I should be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1694) [throw vast quantities of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1696) [randomly generated test data at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1698) [it and make sure that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1699) [algorithm scales.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1701) [Neither of those was going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1703) [easy as long as the code was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1704) [tied to Canvas and shapes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1706) [And so, I admitted to Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1709) [that he was right and started](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1712) [making this non-generic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1713) [bringForward into a generic one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1715) [The first step was to decouple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1718) [it from Canvas and move it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1720) [arrays of shapes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1724) [Of course, this array is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1727) [shape, so I had to replace](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1729) [shapes with self, and then I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1730) [decoupled it from selection by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1734) [passing a predicate indicating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1736) [whether a given shape should be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1738) [whether a given shape should be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1738) [brought forward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1740) [And everything kept compiling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1744) [Awesome!](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1747) [At that point, I was pleased to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1748) [find there were no dependencies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1750) [left on shape, and I could just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1752) [delete the where clause.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1754) [Pretty cool, I thought.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1755) [Now, I can bring forward on any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1758) [array.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1760) [I looked over at Crusty, who had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1761) [been quietly practicing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1763) [cha-cha-cha in the corner, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1764) [he didn't seem to think I was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1766) [finished.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1769) ["What does bring forward have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1771) [do with arrays?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1772) [he asked.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1774) ["Well, nothing," I sighed and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1777) [started thinking about how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1778) [remove this dependency.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1780) [Let's see, there's a stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1782) [partition here, which requires](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1783) [mutable collection conformance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1786) [So, maybe I'll just move it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1788) [mutable collection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1789) [Hmm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1793) [I thought, clearly the index](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1793) [type doesn't match Int.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1796) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1799) [So, there's a simple fix for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1799) [So, there's a simple fix for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1799) [this, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1800) [Have you done this?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1804) [Don't do this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1806) [It compiled, but Crusty had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1809) [suddenly stopped dancing, and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1811) [knew something was wrong.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1812) ["What?" I said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1815) ["Rookies always do that," said](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1816) [Crusty, shaking his head.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1818) ["First, you got that comparison](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1821) [with 0, which is going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1823) [wrong for array slice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1824) [So, did you know that array](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1826) [slices, their indices don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1829) [start at 0?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1831) [The indices of all slices start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1832) [with the corresponding index in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1835) [the underlying collection that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1837) [they were sliced from.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1838) [That relationship is critical if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1840) [you want to be able to compose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1842) [generic algorithms using slices,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1844) [so it's really important."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1847) [Well, this problem, I knew to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1849) [fix.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1851) [Just compare it with start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1853) [index.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1854) [But the real problem is "What](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1855) [does bringForward have to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1858) [does bringForward have to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1858) [with having integer indices?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1860) [I interrupted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1861) ["Yeah, I know."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1863) ["Well, I do have to get the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1865) [index before i, which I can do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1867) [with subtraction."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1870) [Crusty just sighed and broke out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1872) [the lozenges again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1874) [And then, he laid two fingers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1877) [down on the desk and walked them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1879) [across until his right hand was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1882) [pointing at the first green](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1885) [lozenge.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1886) ["Not a backwards step in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1887) [whole dance," he said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1891) [And I realized that Crusty had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1893) [just shown me a new algorithm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1895) [Let's call that one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1898) [indexBeforeFirst.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1899) ["Now, the trick here is to keep](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1902) [your focus by assuming somebody](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1903) [already wrote it for you."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1906) [And he proceeded to hack away](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1907) [all the code that we didn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1909) [need, like that and that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1910) ["Predecessor is the index before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1916) ["Predecessor is the index before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1916) [the first one where the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1920) [predicate is satisfied.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1922) [Now, just look how pretty that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1925) [reads."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1926) [Now, if you look at it, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1928) [see that he's right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1930) [Taking away all the irrelevant](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1933) [detail about shapes, selections,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1935) [arrays, and integers had left me](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1937) [with clearer code because it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1940) [only traffics in the essentials](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1942) [of the problem.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1943) ["I already showed you how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1944) [indexBeforeFirst works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1947) [See if you could write it," he](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1949) [said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1951) [So, I think I was starting to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1952) [catch on now because I got it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1954) [right the first time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1956) [I told you, I'm a superfast](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1957) [typist.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1960) [All right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1961) [So, return the first index whose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1962) [successor matches the predicate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1965) [I was pretty excited about how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1969) [well this was going.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1971) ["All right, Crusty," I said,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1973) ["let's do the next one."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1974) ["Ain't you forgetting something,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1977) [Bonkey?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1978) [he asked.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1980) [I didn't know what he was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1980) [talking about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1982) [The code was clean, and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1983) [worked.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1985) ["Semantics, son.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1987) [How am I supposed to use these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1989) [from other code if I don't know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1990) [what they mean?"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1991) [And that's when I realized every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1992) [time we'd use the new algorithm,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1997) [we had leaned on his](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1999) [documentation to draw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2000) [conclusions about the meaning](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2001) [and efficiency of our own code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2003) [And because most algorithms are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2006) [built out of other algorithms,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2007) [they lean on the same thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2009) [Recently, I was interviewing a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2013) [perspective intern and asked him](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2014) [about the role of documentation,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2016) [and he began with a phrase I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2018) [won't forget.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2020) ["Oh, it's incredibly important,"](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2021) [he said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2023) ["We're building these towers of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2025) [abstraction," and now I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2026) [paraphrasing, "the reason we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2028) [build without constantly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2030) [inspecting the layers below us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2032) [is that the parts that we build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2034) [on are documented."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2036) [Now, as an app developer, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2037) [Now, as an app developer, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2037) [are working at the very top of a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2042) [tower that stretches through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2043) [your system frameworks, DOS, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2045) [into the hardware, which rests](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2047) [on the laws of physics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2050) [But as soon as you call one of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2052) [your own methods, it becomes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2054) [part of your foundation; so,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2055) [document your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2058) [The intern was hired, by the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2060) [way, and he's sitting right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2061) [there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2066) [So, I took the hint and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2066) [documented Crusty's new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2068) [algorithm, which meant that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2069) [could forget about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2072) [implementation and just use it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2073) [knowing that Quick Help had](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2077) [everything that we needed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2078) [Now, I also documented](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2081) [bringForward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2082) [Cool!](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2085) [Now, because it seemed to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2088) [solving all of my problems, at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2089) [this point, I was really curious](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2091) [to see what was going on inside](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2093) [stablePartition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2095) [It turns out I was well rewarded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2097) [because it's a really beautiful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2099) [because it's a really beautiful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2099) [and instructive algorithm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2101) [The public method gets the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2103) [collections count and passes it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2105) [on to this helper, which uses a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2106) [divide and conquer strategy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2110) [So, first, it takes care of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2113) [base cases when the count is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2115) [less than 2, we're done.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2117) [We just need to figure out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2118) [whether the partition point is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2120) [at the beginning or at the end](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2121) [of the collection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2123) [Next, we divide the collection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2126) [in two.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2128) [Now, at this point, you have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2131) [temporarily take it on faith](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2133) [that the algorithm works because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2135) [we're going to stable partition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2137) [the left half and the right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2138) [half.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2141) [Now, if you take a look at these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2142) [two ends, you can see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2146) [everything is exactly in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2149) [right place, but this center](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2150) [section has two parts that need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2154) [to be exchanged.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2156) [Now, they won't always have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2158) [Now, they won't always have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2158) [same length as they do in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2161) [example, and fortunately there's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2163) [an algorithm for that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2166) [We call it rotate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2168) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2171) [I'm not going to go into rotate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2174) [here, but it's actually quite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2176) [beautiful, and if you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2178) [interested, you can find its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2179) [implementation in the same file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2180) [as stable partitions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2182) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2184) [Back to shapes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2185) [Now, this mess implemented the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2188) [dragging in the shapes list, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2192) [it had always been one of my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2194) [most complicated and buggy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2196) [operations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2198) [The strategy had been to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2200) [allocate the temporary buffer;](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2201) [then, loop over the shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2204) [before the insertion point,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2207) [extracting the selected ones and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2208) [adjusting the insertion point,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2210) [and then separately loop over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2212) [the rest of the shapes without](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2214) [adjusting the insertion point,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2215) [extracting the selected ones.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2217) [And then, finally, reinsert](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2219) [And then, finally, reinsert](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2219) [them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2222) [Honestly, I was a little scared](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2226) [to touch the code because I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2228) [thought I finally had it right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2230) [It had been almost a week since](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2232) [the last time I discovered a new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2234) [bug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2235) [But I had gotten pretty good at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2236) [this process now, so I tried](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2241) [visualizing the operation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2243) [happening all at once.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2244) [Hey, that looks familiar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2249) [Let's see it again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2251) [Hmm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2255) [Suppose we do this first, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2256) [then take care of the parts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2259) [separately.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2260) [That's right.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2263) [This is just two stable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2264) [partitions with inverted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2265) [predicates.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2268) [So, the generic algorithm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2269) [collapsed down to this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2271) [two-liner, and here's what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2272) [left in canvas.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2276) [Now, let's just see that next to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2278) [Now, let's just see that next to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2278) [the old code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2281) [That's not bad, but we got a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2284) [reusable efficient documented](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2287) [general purpose algorithm out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2290) [it, which is spectacular.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2292) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2294) [So, this is a learned skill to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2297) [look past the details that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2301) [specific to your application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2303) [domain, see what your code is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2305) [doing fundamentally, and capture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2307) [that in reusable generic code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2309) [It takes practice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2312) [So, why bother?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2314) [Well, the practical answer is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2316) [that because they're decoupled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2318) [from those irrelevant details,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2319) [generic algorithms are more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2322) [reusable, testable, and even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2324) [clearer than their non-generic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2326) [counterparts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2327) [But I also think it's just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2329) [deeply rewarding for anyone that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2331) [really loves programming.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2333) [It's a search for truth and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2335) [beauty but not some abstract](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2336) [untouchable truth because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2339) [untouchable truth because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2339) [constraints of actual hardware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2341) [keep you honest.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2342) [As Crusty likes to say,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2344) ["Programming reveals the real."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2347) [So, treat your computation as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2350) [first class citizen with all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2352) [rights and obligations that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2354) [take seriously for types and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2356) [application architecture.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2358) [Identify it, give it a name,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2360) [unit test it, and document its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2362) [semantics and performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2365) [Now, I want to close by putting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2367) [this advice you saw from Shawn](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2370) [Perin in its full context.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2372) ["If you want to improve the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2374) [quality in your organization,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2377) [replace all of your coding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2379) [standards with one goal, No Raw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2381) [Loops."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2384) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2386) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2387)