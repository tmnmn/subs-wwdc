# Embracing Algorithms

## Summary
When you imagine building a new app, what do you think about? Models, views, and controllers deserve their prominent place in the design process, but we don't often give the same attention to the underlying work our apps need to do. Understand how to identify and optimize the algorithms in your app, and discover how implementing algorithms as generic protocol extensions results in efficient, effective, and maintainable code.

## Info
* Developer Tools
* WWDC 2018 - Session 223 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=7) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=17) [&gt;&gt; 大家好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=23) [非常高兴见到今天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=24) [到场的各位](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=26) [我是 Dave 之后的 40 分钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=27) [是关于理解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=29) [和致敬 驱动我们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=32) [程序运行的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=34) [我们将会聊到一些实用的建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=36) [但这并不是一个关于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=38) [技巧 技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=41) [或者任何具体算法的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=43) [尽管我们仍会有所涉及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=44) [这个演讲主要的内容是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=47) [揭示一些根本的东西 它的潜力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=49) [已经在你的代码中有所体现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=51) [我希望至少对于你们之中的一些人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=54) [这标志着与编程实践](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=57) [建立新关系的开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=58) [建立新关系的开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=58) [就个人而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=62) [当我发现这种方法时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=63) [我的生活和事业的航向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=65) [就由此改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=66) [这就是为什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=68) [我如此关心软件库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=69) [但它也是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=71) [我所编写过的具体代码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=73) [每一部分之中的可靠性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=75) [可维护性以及性能表现的来源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=77) [但在我们开始之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=80) [请允许我向你们介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=82) [我的一个朋友](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=84) [他就是 Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=86) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=88) [Crusty 是一个传统派](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=92) [他不相信调试工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=94) [也不爱使用集成开发环境](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=97) [没错 他喜欢那种 80 × 24](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=100) [的纯文本终端窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=103) [非常感谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=105) [现在 Crusty 对最新的编程潮流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=107) [持悲观态度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=109) [所以想把他拖到 21 世纪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=111) [有时会比较费力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=113) [他总是有不同的想法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=116) [但是如果你仔细听](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=118) [但是如果你仔细听](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=118) [你肯定会学到点东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=120) [有时他会有一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=123) [神奇的表达方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=125) [比如“编程揭示本真”  甚至可以说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=127) [有点玄幻了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=130) [为了理解他](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=131) [我发现一种方法很有帮助](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=133) [那就是写代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=135) [所以最近我在编写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=137) [一个叫做《Shapes》的小程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=138) [我希望将它创造成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=141) [一个全能矢量绘图程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=142) [但目前为止 它只能让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=144) [在无限画布上排列形状](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=146) [现在 我想与你们讲一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=150) [关于删除选择指令的故事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=151) [因为我从实现这一功能的过程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=153) [学习到了很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=157) [我想我们可能都](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=159) [经历过这个过程的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=161) [作为程序员 我们要学会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=163) [如何从数组中删除东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=165) [每一个人都会从](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=167) [做这种事情开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=169) [刚刚这个就是删除选择指令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=173) [我们从 0 开始循环计数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=178) [我们从 0 开始循环计数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=178) [当我们发现要删除的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=182) [我们就调用 remove(at: )方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=183) [然后我们就可以继续循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=185) [直到 哦 溢出了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=187) [数组会变短](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=193) [但是当循环开始时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=194) [我们选择了固定的迭代次数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=196) [幸运的是 如果你使用 Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=197) [并测试你的代码 你不可能遗漏这个 Bug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=199) [因为程序会产生内中断](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=200) [但如果你像我一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=203) [是 C 语言出身的程序员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=205) [面对这种问题 你可能没那么幸运](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=206) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=209) [我们可以通过将 for 循环替换为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=210) [更难看的 while 循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=212) [来修复它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=214) [这可以使我们在每一次迭代中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=216) [检查计数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=217) [但这里也有一个细微的 Bug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=218) [如果两个连续的元素被选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=223) [它将会删除第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=226) [并且立即](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=228) [跳过下一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=231) [这个 Bug 更加的阴险](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=234) [因为它隐藏了起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=236) [除非你的测试碰巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=238) [除非你的测试碰巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=238) [试运行了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=240) [但是如果我们足够幸运注意到了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=242) [我们便可以继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=244) [用一个 else 代码块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=246) [来保护自增语句 再次修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=248) [这个实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=250) [那么 我们完成了吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=251) [我们有把握确定 这次是正确的吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=253) [我认为我可以自证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=257) [它能够运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=259) [不管怎样 经过这次的严峻的考验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=261) [我们收获了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=264) [当然 我们将这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=265) [九行的代码套路 牢记在脑中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=267) [这样我们就可以在想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=268) [删除什么的时候 把它调出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=270) [现在 我确定你们中的许多人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=273) [正控制着自己](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=275) [不向我大声喊叫](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=276) [因为有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=278) [更加优雅的方式可以用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=280) [我仍然记得 自己发现了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=281) [这个技巧的那一天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=283) [因为一旦你发现了它 你就不用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=285) [再用那九行套路代码了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=286) [迭代限制以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=289) [下一个要检查的项的索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=291) [像传送带一样不断滚动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=292) [因为 remove(at: i)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=294) [改变了数组中 i 之后的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=297) [但是如果你从后往前检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=300) [你只会迭代数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=306) [你还没有改变的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=307) [干得漂亮 对吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=310) [这就是我一直](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=311) [使用的模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=312) [因为它简洁并且从不失败](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=314) [直到几个月前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=320) [一天早晨 我刚吃完](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=321) [我的牛油果吐司](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=324) [并漫不经心地摆弄我的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=326) [当我尝试从一个非常复杂的画布中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=328) [删除差不多一半的图形时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=329) [我的 iPad 卡死了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=333) [将近 3 秒钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=335) [所以 我喝了一口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=336) [装在竹质随行保温杯里的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=340) [三倍浓度半因拿铁咖啡压压惊](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=343) [开始考虑我的对策](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=344) [这令人十分不安](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=347) [我的意思是 这是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=349) [非常简单的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=350) [我的代码如此简洁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=351) [怎么可能出错呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=353) [性能分析结果告诉我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=356) [红点就在这 但是除了这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=358) [红点就在这 但是除了这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=358) [我一点头绪都没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=361) [然后 就在这时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=362) [Crusty 在我身后经过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=365) [拿着一罐从当地超市买的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=367) [准备作为日常饮品的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=369) [杂牌咖啡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=370) [“卡住了？” 他说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=372) [“是的” 我叹了口气](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=376) [并向他解释情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=378) [“那么 你有为此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=379) [看过文档吗？”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=384) [显然我没有 所以我呼出了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=387) [remove(at: ) 的 “Quick Help（快速帮助）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=389) [Crusty 靠近了一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=391) [“你的问题就在这”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=394) [他说 并在我华丽的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=395) [视网膜显示屏上留下了一个指纹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=398) [我用一块手工制作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=402) [意大利超细纤维布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=405) [小心地擦掉了指纹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=407) [这时 Crusty 说 “小子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=410) [它告诉你了什么”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=413) [“唔” 我说 “它说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=415) [移除一个元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=417) [需要使用大量的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=419) [需要使用大量的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=419) [而且与数组的长度成正比”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=421) [这的确有些道理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=422) [因为数组需要将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=424) [之后所有的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=426) [放入它们的新位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=428) [“那么 这对你的删除选择指令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=430) [又有什么意义呢” 他问道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=432) [“呃” 我说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=436) [就在这时他拿出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=438) [一包薄荷糖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=441) [然后排成线放在我的桌子上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=442) [“你自己试一试”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=444) [所以我走完一遍流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=447) [试图回答他的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=449) [“嗯 既然删除选择指令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=450) [需要进行 O(n) 个步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=452) [每一步都对应每一个已选的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=454) [而且你可以选择最多 n 个元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=455) [那么总步数将与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=457) [n 的二次方成正比”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=458) [Crusty 继续说 “那可是二次方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=462) [小子 无论你用丑陋的方式正着走](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=464) [还是穿着花哨的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=466) [裤子倒着来”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=468) [我那时才意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=470) [对于我的 10 到 20 个元素的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=474) [小型测试案例 我们只需使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=476) [几百个步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=478) [几百个步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=478) [由于每一步都运行迅速](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=480) [一切看起来棒极了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=482) [但是问题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=484) [它的延展性不足](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=485) [50 的二次方是 2500](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=486) [100 的二次方更能达到 10000](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=490) [如果你所做的所有测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=492) [都在这个狭小范围之内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=495) [那你可能永远发现不了问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=497) [但是延展性很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=499) [因为人们正在使用他们的手机和 iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=501) [处理越来越多的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=503) [我们也一直提供带有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=505) [更多存储空间的设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=507) [帮助他们这么做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=509) [你们要关心这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=510) [因为对你们的用户而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=512) [延展性意味着可预测性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=514) [所以 我理解了问题所在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=515) [但是我仍然不能确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=519) [我应该怎么解决它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=521) [“现在我该怎么办？”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=523) [我问 Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=523) [“你知道吗 小伙子” 他一边说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=525) [一边把一粒薄荷糖放到嘴里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=527) [“有一个解决这个问题的算法”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=529) [我和他说 “听着 Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=533) [我是一个 App 开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=536) [你说过你不做面向对象的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=538) [你说过你不做面向对象的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=538) [同样 我也不做算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=540) [你关注在算法类中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=543) [数据结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=544) [因为你知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=546) [找工作的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=548) [你的面试官会考你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=549) [但在真正的编程世界](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=551) [区分大神和菜鸟的关键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=552) [是将控制器 委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=554) [以及响应程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=556) [连接在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=558) [构建一个工作系统的能力”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=559) [“豆包” 他说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=562) [我不知道为什么他这么称呼我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=564) [“计算机是做什么的”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=567) [“它们计算”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=570) [“那么 你的代码中的计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=571) [在哪里呢”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=573) [“好吧” 我回答](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=575) [“我想在我的代码里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=577) [我看不见什么东西像个算法”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=579) [但是 Crusty 不这么认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=581) [“哦 你的 App 里面可全都是算法”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=583) [他说 接着将一本破旧的字典](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=585) [扔在我的桌子上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=586) [“翻翻看”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=588) [在我镇定下来后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=591) [我小心地将书移到一边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=594) [在聚焦搜索栏中输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=595) [“define: Algorithm (定义：算法)”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=597) [Crusty 认为这是个巧妙的技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=598) [嗯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=603) [在计算或其他解决问题的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=605) [运算中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=606) [要遵循的过程或规则集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=608) [好吧 细想一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=611) [这听起来像大多数的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=613) [但是我仍不能确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=616) [“你有做过长除法吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=618) [Crusty 问道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=619) [“那就是一个算法”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=620) [我又开始将它打到聚焦搜索中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=625) [但是他突然说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=627) [“在纸上算”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=629) [不想让自己难堪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=630) [我把话题转回到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=631) [我的代码上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=632) [“嗯”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=635) [我问 “所以 这个可以解决](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=636) [我的代码性能问题的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=639) [神奇的算法是什么呢”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=641) [“那么 如果你愿意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=644) [让我用一下你的打字机”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=645) [他说 “这个东西怎么用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=646) [哦 这是一个触控板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=648) [我会尽量不碰它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=649) [所以首先 你要删掉这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=651) [愚蠢的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=653) [然后 shapes.removeAll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=657) [然后 shapes.removeAll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=657) [(where: { $0.isSelected})](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=660) [嗯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=663) [试试合不合身”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=664) [然后 Crusty 离开了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=666) [去洗他的咖啡机的拉花缸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=667) [留下我去琢磨](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=668) [我的代码里到底](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=671) [发生了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=673) [首先 我检查过并且发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=674) [性能问题确实解决了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=677) [太棒了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=679) [我不想再听一遍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=681) [Crusty 唠叨说看文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=682) [所以我弹出 removeAll(where: ) 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=684) [“Quick Help”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=686) [然后我发现它的复杂度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=688) [也与集合的长度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=692) [成正地变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=694) [就像 removeAt 一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=696) [但是由于我不必](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=697) [把它放入循环中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=699) [那么它就变成了我整个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=701) [运算的复杂度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=702) [现在 我想让你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=704) [直观地理解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=706) [这能带来什么不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=708) [O(n) 表示算法运行的时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=710) [与问题的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=712) [成线性关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=714) [这个图是一条直线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=716) [然后 这个橙色线是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=719) [然后 这个橙色线是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=719) [n 的二次方的形状](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=720) [正如你所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=723) [线性算法也许在小型问题中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=724) [表现稍差](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=726) [但他最终比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=727) [二次方算法运行更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=729) [很棒的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=731) [不管你用线性算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=733) [的成本有多高](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=735) [如果你继续放更大的问题尺寸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=736) [你总是会找到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=739) [一个线性算法会赢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=742) [并且在后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=744) [一直赢的点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=747) [所以 我们正在讨论的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=749) [延展性 而不是绝对的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=750) [好了 我的延展性问题终于解决了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=756) [但我真的很想看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=760) [标准程序库如何改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=762) [我倒着来的删除方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=764) [Crusty 提醒我说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=767) [Swift 是开放源码 所以我可以把它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=769) [放在他口中的“嬉皮士网”上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=770) [也就是我们其他人所知的 GitHub](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=773) [现在 我注意到的第一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=779) [现在 我注意到的第一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=779) [便是点注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=780) [它是所有 “Quick Help” 的来源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=783) [描述了算法的功能以及复杂度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=784) [接下来 结果是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=789) [removeAll(where) 不是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=794) [常规的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=795) [它是一个通用的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=798) [这意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=800) [它可以在各种不同的集合上运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=802) [这取决于很多因素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=804) [重新排列元素的能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=805) [它来自于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=808) [MutableCollection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=809) [改变长度和结构的能力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=811) [它来自于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=814) [RangeReplaceableCollection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=816) [它是由一些其他的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=818) [O(n) 算法构成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=821) [第一个是 halfStablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=824) [它将所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=826) [满足某些谓词的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=828) [移动到末尾](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=829) [并告诉我们后缀从哪里开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=833) [halfStable 正如其名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=836) [表明了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=838) [表明了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=838) [它保留了不移动的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=840) [元素的顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=842) [但是它也可以打乱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=844) [移动到最后的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=846) [有些时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=849) [这不是很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=850) [因为第二个算法 removeSubrange()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=851) [无论如何也会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=853) [删除子区间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=854) [我们都见过这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=856) [部分区间的标记吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=857) [它是一种非常方便的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=859) [方式来编写扩展到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=861) [集合末尾的范围](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=862) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=866) [现在 removeSubrange 是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=867) [库全局 API 的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=869) [因此你可以在网上找到它的文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=871) [但是 halfStablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=873) [是一个运行的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=876) [现在 我们不打算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=878) [一一介绍 但是这里有一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=882) [值得注意的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=883) [首先 它一开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=886) [调用另一个算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=888) [firstIndex(where: )](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=890) [来查找属于后缀的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=892) [第一个元素的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=894) [接下来 它设置了一个循环变量 j](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=897) [有一个循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=898) [有一个循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=898) [然后这个循环指数 j 在每次迭代中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=901) [会从前向后移动一位](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=905) [所以 可以肯定的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=907) [j 只对元素进行了一次传递](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=909) [你几乎可以从这里看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=911) [量级和复杂度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=914) [最后 由于该方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=920) [需要重新排列元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=922) [但不更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=923) [集合的长度或结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=924) [因此它只依赖于对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=926) [MutableCollection 的遵循](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=927) [所以 这就是我学到的第一堂课](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=929) [熟悉 Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=933) [标准库中的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=934) [它包含一组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=937) [提供文档描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=938) [和性能特征的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=940) [虽然我们看了一点执行过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=943) [你也可以从中学到很多东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=945) [但由于它是设计好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=947) [所以你不必用我之前的笨方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=949) [官方文档会告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=952) [需要知道的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=953) [以便有效地使用该库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=955) [你甚至可以在那找到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=958) [你甚至可以在那找到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=958) [一个 Playground 教程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=960) [我知道 Swift 中有很多内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=961) [所以它的确可能看起来很吓人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=963) [但是你不需要记住一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=966) [知道那里有什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=968) [以及如何找到它将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=970) [为你省下很多精力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=972) [现在 在我们继续之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=974) [我想指出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=976) [当 Crusty 做出此更改时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=978) [在代码中发生的其他事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=979) [这两个中哪一个最直接地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=981) [描述了它的意义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=982) [现在 我必须先通读](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=984) [并思考第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=987) [才能知道它在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=988) [嗯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=990) [也许我最好加个注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=990) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=992) [看起来怎么样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=993) [哦 即使有了评论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=994) [反向迭代仍旧有点棘手](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=995) [而且我也不想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=997) [有人因为他们不理解而破坏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=998) [这个代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1000) [所以我最好解释一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1001) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1005) [当我们一一澄清时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1006) [Crusty 改过的代码实际上更好理解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1007) [因为它有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1009) [尾随闭包语法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1010) [现在 让我们深呼吸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1011) [然后再看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1014) [哪一个更明显是正确的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1016) [即使带有这些评论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1019) [即使带有这些评论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1019) [我仍然需要通读第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1020) [去明白它其实和第二个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1022) [做的是同样的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1023) [但是效率更低](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1025) [使用这个算法可以使代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1028) [在各个方面都做得更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1029) [所以 这是你的代码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1031) [一个准则 也是一个目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1035) [是由 Sean Parent 首先提出的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1036) [每当你编写一个循环时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1039) [就用对某个算法的调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1041) [来替换它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1042) [如果你找不到对应的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1043) [就自己做一个算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1045) [然后用这个算法来执行循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1047) [实际上 现在对你来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1050) [这似乎是不现实的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1052) [但是在谈话的最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1054) [我希望它不再是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1056) [不过为了获得一点动力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1058) [回想一下上一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1059) [你看到乱得像面条一样的代码的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1062) [是不是充满了循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1064) [我打赌一定是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1067) [好吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1070) [大功告成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1071) [我已经使代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1072) [变得更短 更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1073) [在各个方面都更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1076) [我准备今天到此为止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1076) [“感谢你的帮助 Crusty”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1079) [“感谢你的帮助 Crusty”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1079) [我说 同时系上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1080) [我定制的皮革邮差包上的钛制钩环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1082) [但他怀疑地看着我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1085) [然后说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1087) [“你不认为你可能在别的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1089) [犯过那样的错误吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1090) [我叹了口气 把包放下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1094) [开始追踪我代码中的循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1096) [然后我发现 在处理层级命令的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1100) [文件中 有很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1102) [放到最前 放到最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1104) [向前移动一层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1109) [也就是把选定的图形移到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1111) [前面的图形上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1112) [让我们来多做几次吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1114) [向后移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1118) [放在选定的图形下面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1120) [最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1121) [在左边的图形列表中拖拽](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1125) [现在 这些操作听起来非常简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1129) [直到你意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1132) [它们都需要对多个选定的图形进行操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1136) [这些图形在列表中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1137) [甚至可能都不是连续的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1139) [甚至可能都不是连续的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1139) [因此结果表明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1145) [在操作完成后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1146) [将所有选定的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1147) [放在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1149) [才是有意义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1150) [所以 当你把图形向前移动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1153) [你把选定的最前面的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1154) [放在紧邻它的图形前面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1155) [然后你把所有其他的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1157) [放在它后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1158) [当你向后移动图形时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1162) [你把选定的最后面的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1163) [放在紧邻它的图形后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1165) [然后把其他的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1166) [放在它前面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1168) [如果你没有完全跟上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1173) [不要担心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1176) [我们会回头再讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1177) [但我只想说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1178) [我有一些精心设计的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1181) [来正确地处理所有这些细节 就足够了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1182) [例如 这是 bringToFront()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1185) [当我看到它时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1187) [我十分地确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1191) [这些图形有一个 O(n) 的循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1193) [还包含两个 O(n) 的运算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1195) [remove(at:)  insert(at:)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1197) [remove(at:)  insert(at:)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1197) [这就产生了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1200) [没错 n 的二次方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1203) [事实上 同样的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1206) [出现在每一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1208) [我其他的四个命令中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1210) [这里的所有执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1212) [都对数组进行循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1214) [执行插入和删除操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1216) [这意味着它们都是二次的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1217) [现在 我有点气馁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1219) [所以我问 Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1223) [他是否愿意和我一起看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1224) [他说 “我不能待太晚”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1227) [他说 “我今晚有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1229) [交际舞聚会 但是我想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1231) [我们还是抓紧继续吧”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1233) [我在 bringToFront() 这里停下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1235) [Crusty 的第一个问题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1238) [“它到底是做什么的”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1242) [“好吧” 我说 “这是个 while 循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1245) [j 跟踪插入点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1247) [i 跟踪我们正在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1249) [查看的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1251) [“用语言 而不是用代码”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1252) [Crusty 说“描述它”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1254) [“好吧 我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1258) [它将选定的图形移动到前面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1259) [它将选定的图形移动到前面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1259) [保持它们的相对顺序”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1261) [“把它写在点注释上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1264) [然后读给我听”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1267) [我是一个手速超快的打字员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1270) [“将选定的图形移动到前面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1275) [保持它们的相对顺序”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1277) [“听起来熟悉吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1279) [Crusty 说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1282) [就在那时我意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1284) [它很像 halfStablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1285) [但它是完全稳定的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1286) [我开始激动起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1289) [“你觉得这个叫什么”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1292) [我不得不猜](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1294) [“stablePartition”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1296) [“没错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1297) [我最喜欢的一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1298) [你可以在这个 Swift 开源项目中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1301) [找到一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1302) [执行文件”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1303) [因此 我把文件拖进了我的项目中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1306) [同时 Crusty 含糊地说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1308) [我们添加的注释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1310) [应该在一开始就写上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1311) [我开始编写代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1312) [写了这么多 就又遇到了一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1316) [写了这么多 就又遇到了一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1316) [你看 stablePartition 使用了一个谓词](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1321) [它表示是否将元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1323) [移动到集合的后缀中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1326) [所以 要把东西搬到后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1329) [我需要执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1331) [bringToFront()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1333) [我看向 Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1335) [“脑补一下” 他说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1337) [于是 我闭上眼睛](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1340) [看着那些未被选中的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1342) [聚集在后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1344) [这就给了我答案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1345) [我猜 sendToBack 会更加简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1347) [因为我们只需](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1351) [反转谓词](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1352) [我们将选定的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1353) [移动到后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1355) [现在 我正准备执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1358) [向前移动的命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1360) [我想 Crusty 会和我一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1362) [急于继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1363) [考虑到他晚上的计划](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1366) [但他阻止了我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1367) [“刹车 Snuffy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1369) [我不想错过开场探戈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1371) [但你不打算看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1372) [它能不能延展尺寸吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1374) [他有道理 所以我弹出 stablePartition 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1377) [“Quick Help”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1379) [“Quick Help”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1379) [然后看到它的复杂度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1380) [是 O(n log n)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1384) [为了有一个 O(n log n) 的概念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1386) [我们不妨看看 O(log n)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1389) [它从开始很快就进入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1392) [平稳状态 n 越大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1395) [它增长的越慢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1397) [越接近一个常数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1399) [所以当你乘 n 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1402) [你所得到延展性图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1404) [与 O(n) 的并不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1407) [但是随着它的增长它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1409) [越来越接近线性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1411) [所以 O(n log n)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1414) [通常被认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1416) [和 O(n) 差不多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1418) [我对此十分开心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1420) [所以我们继续处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1423) [bringFoward()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1424) [现在 就像我们之前说过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1425) [bringFoward() 将最前面选定的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1429) [向前移动一层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1431) [并将后面的其他](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1433) [被选定的图形聚集起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1435) [但是 Crusty 根本不喜欢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1437) [但是 Crusty 根本不喜欢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1437) [这种思考方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1440) [“刚开始的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1442) [那个绕来绕去的东西 让那行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1443) [像是在跳狐步舞狐步舞”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1445) [他说 “你并不需要它”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1446) [当我茫然地看着他的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1449) [他又拿出了薄荷糖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1450) [用他五根灵活的手指](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1453) [执行了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1455) [bringForward() 指令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1457) [“看到了吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1462) [他问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1463) [我感觉就像 明知道“赌徒三张”是一个陷阱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1465) [但我还是踩了进去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1466) [“看着熟悉吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1474) [“不”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1476) [他用手帕盖住了前几个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1477) [“现在呢”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1482) [就在这时我意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1486) [这就是另一个 stablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1488) [好吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1491) [我明白了 我想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1492) [如果我们找到选定的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1495) [最前面的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1498) [最前面的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1498) [然后移动到它前面图形的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1501) [并隔离从那里开始的数组的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1505) [我们可以对它进行分区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1507) [“但是，你如何只修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1512) [集合中的一部分呢”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1514) [我问 Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1514) [“你难道没听说过切片吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1516) [他说 同时接管了键盘](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1518) [“shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1523) [[predecessor...]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1525) [好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1527) [把它放在你的算法里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1528) [然后进行变换”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1529) [我立即照做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1530) [因此 人类关于如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1537) [正确有效地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1541) [计算事物的知识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1543) [要比计算机早几千年](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1544) [至少可以追溯到古埃及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1547) [自从计算机发明以来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1549) [这一领域的工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1550) [出现了爆炸式增长](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1552) [如果标准库没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1555) [你所需要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1556) [那么你需要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1558) [那么你需要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1558) [可能是测试 阅读文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1560) [通常更正后还要检查一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1563) [要学会如何在网络上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1565) [搜索适用于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1567) [你的问题领域的研究](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1568) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1572) [回到代码上来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1572) [我对这个切片很感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1574) [当我检查它的类型时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1575) [我发现它不是一个数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1577) [由于我们是在一个数组上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1580) [使用了 stablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1583) [bringToFront 以及 sendToBack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1584) [现在我们还在一个数组切片上使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1587) [所以我大胆猜测](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1588) [它一定是通用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1590) [“当然是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1592) [stablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1595) [和特定的数组有什么关系”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1596) [“没错 没有联系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1599) [说到这 豆包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1601) [bringForward() 与图形和选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1604) [又有什么关系呢”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1605) [“嗯” 我说 “它作用于图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1608) [然后将选定的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1611) [移到前面”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1612) [“没错 也没关系”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1614) [他听都没听便说道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1615) [“你能在一排薄荷糖上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1618) [“你能在一排薄荷糖上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1618) [执行向前移动吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1620) [当然 你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1621) [所以 这和图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1624) [没有关系”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1626) [嗯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1628) [“你是在建议我们让它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1628) [变得通用吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1630) [我问道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1631) [“难道它不早就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1632) [通用的了吗”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1633) [用一个新问题回答了这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1635) [Crusty 回答道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1636) [“唔 你打算怎样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1640) [测试这个方法”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1642) [“好的” 我说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1644) [“我会创造一个画布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1646) [我会添加一些随机的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1647) [我会选定它们中的一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1649) [然后最终”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1650) [但我的话没有说完](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1652) [因为我知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1653) [这是个坏主意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1655) [如果我就这么做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1657) [我真的会测试我的功能吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1659) [还是我会测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1660) [画布和不同图形的初始化设定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1662) [addMethod() 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1663) [再或者测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1665) [各种形状的 isSelected 属性是否](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1667) [计算出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1669) [我的确应该建立测试用例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1670) [但是理想情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1672) [那段代码不应取决于其他](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1674) [我需要再测试的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1676) [如果我可以将薄荷糖向前移](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1679) [如果我可以将薄荷糖向前移](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1679) [那么我也应有可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1680) [用 Playground 中的整数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1682) [做一些随机的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1684) [就像这样 用 bringForward() 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1685) [把能被 3 整除的数提到前面来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1688) [现在 在频谱的另一端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1693) [我应该可以向它抛出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1694) [大量随机生成的测试数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1696) [并确保算法的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1699) [可扩展性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1701) [只要代码与画布和图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1703) [绑定在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1704) [这些事情就都不会简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1706) [所以 我向 Crusty 承认他是对的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1709) [并开始把这个非通用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1713) [bringForward() 变成通用的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1715) [第一步是将它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1718) [从画布中解耦出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1720) [并将其移动到图形数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1724) [当然 这个数组就是 shapes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1727) [所以我必须用 self](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1729) [把它替换掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1730) [然后我通过传递一个谓词](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1734) [将它从选择中解耦出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1736) [该谓词指示是否应该将选定的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1738) [该谓词指示是否应该将选定的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1738) [向前移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1740) [一切都在正常编译着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1744) [太棒了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1747) [此时 我很高兴地发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1748) [在 shapes 上没有依赖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1750) [我可以删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1752) [where 子句了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1754) [非常好 我想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1755) [现在 我可以在任何数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1758) [执行 bringForward 了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1760) [我看了看 Crusty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1761) [他一直在角落里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1763) [安静地练习恰恰舞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1764) [但他似乎认为我还](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1766) [没有结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1769) [“bringForward() 和数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1771) [有什么关系”他问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1772) [“好吧 的确没有” 我叹了口气](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1777) [然后开始思考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1778) [如何移除这个依赖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1780) [让我们看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1782) [这有一个 stablePartition()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1783) [需要遵循 MutableCollection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1786) [所以 也许我只需要将它移动到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1788) [MutableCollection 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1789) [嗯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1793) [我想 显然索引类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1793) [与 int 类型不匹配 好吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1796) [这应该很好修复 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1799) [这应该很好修复 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1799) [你是这么做的吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1804) [不要这么做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1806) [它编译好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1809) [但是 Crusty 突然停止了跳舞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1811) [我知道有些不对劲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1812) [“什么” 我说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1815) [“菜鸟总是这样做”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1816) [Crusty 边摇着头边说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1818) [“首先 你让它与 0 的比较](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1821) [这对于数组切片来说是错误的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1823) [所以 你知道数组切片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1826) [它们的索引不是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1829) [从 0 开始的吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1831) [所有切片的索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1832) [从它们被切片的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1835) [底层集合中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1837) [相应索引开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1838) [这种关系十分关键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1840) [如果你想要用切片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1842) [组成通用算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1844) [所以它真的很重要”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1847) [好吧 我知道要修正这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1849) [只需将它与开始索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1853) [进行比较](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1854) [但是真正的问题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1855) [“bringForward() 与拥有整数索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1858) [“bringForward() 与拥有整数索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1858) [有什么关系”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1860) [我打断了他](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1861) [“是的 我知道”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1863) [“我必须在 i 之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1865) [得到索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1867) [我可以用减法获得”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1870) [Crusty 只是叹了口气](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1872) [然后又将薄荷糖拿了出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1874) [然后 他把两个手指](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1877) [放在桌子上 像小人一样走啊走](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1879) [直到右手指向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1882) [第一块绿色的薄荷糖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1885) [“整支舞中都没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1887) [向后的舞步” 他说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1891) [之后我意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1893) [Crusty 刚刚向我展示了一个新的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1895) [“我们叫它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1898) [indexBeforeFirst 吧”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1899) [“现在 这里的诀窍是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1902) [保持注意力集中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1903) [假设有人已经为你写了它”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1906) [然后他把我们不需要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1907) [代码都删掉了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1909) [像这样 这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1910) [“predecessor 就是第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1916) [“predecessor 就是第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1916) [在谓词被满足之前的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1920) [前面的索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1922) [现在 快来看看这读起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1925) [多么动人”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1926) [如果你看到了这个代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1928) [你就会发现他是对的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1930) [删除所有无关的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1933) [包括图形 选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1935) [数据以及整数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1937) [给我留下更清晰的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1940) [因为它只处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1942) [问题的本质](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1943) [“我已经向你展示了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1944) [indexBeforeFirst 是如何工作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1947) [试一试你能不能写出来” 他说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1949) [所以 我想我现在开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1952) [跟得上他了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1954) [因为我第一次做对了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1956) [我说过 我是个手速超快的打字员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1957) [好吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1961) [所以 返回第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1962) [successor 与谓词匹配的索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1965) [我非常兴奋地看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1969) [这进展得有多么顺利](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1971) [“好吧 Crusty” 我说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1973) [“让我们做下一个”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1974) [“你难道没有忘记什么事吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1977) [豆包” 他问道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1978) [豆包” 他问道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1978) [我不知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1980) [他在说什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1982) [代码很简洁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1983) [而且运行正常](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1985) [“语义 小子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1987) [我怎么能从其他代码中使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1989) [如果我不知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1990) [它们是什么意思呢”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1991) [于是我意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1992) [每一次我们使用新的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1997) [我们都依靠他的文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=1999) [得出关于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2000) [我们自己代码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2001) [意义和效率的结论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2003) [因为大多数算法都是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2006) [由其他算法构建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2007) [所以它们依赖于相同的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2009) [最近 我正在面试一位](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2013) [未来的实习生并且问他](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2014) [关于文档的作用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2016) [他以一个我不会忘记的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2018) [短语开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2020) [“哦 它实在太重要了” 他说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2021) [“我们正在构建这些抽象的塔”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2025) [我在向你们复述他的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2026) [“我们之所以能够成功构建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2028) [而无需经常检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2030) [下面层级的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2032) [是因为我们构建的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2034) [是有文档记录的”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2036) [现在 作为一名 App 开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2037) [现在 作为一名 App 开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2037) [你正在一个塔尖上工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2042) [这个塔贯穿了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2043) [你的系统框架 DOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2045) [一直延伸到硬件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2047) [这是基于物理定律的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2050) [但是一旦你调用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2052) [你自己的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2054) [它就成为你的基础的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2055) [所以 请为你的代码写文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2058) [顺便说一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2060) [那位实习生被录用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2061) [他就坐在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2066) [所以 我接受了提示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2066) [并把 Crusty 的新算法写入了文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2068) [这意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2069) [我们可以忘记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2072) [它如何实现 并使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2073) [因为我们知道 “Quick Help”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2077) [拥有我们所需要的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2078) [现在 我也记录了 bringForward](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2081) [酷](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2085) [现在 因为它似乎](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2088) [解决了我所有的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2089) [在这时 我真的很好奇](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2091) [想看看在 stablePartition 里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2093) [发生了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2095) [结果是我得到了很好的回报](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2097) [因为这是一个非常漂亮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2099) [因为这是一个非常漂亮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2099) [而且有指导意义的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2101) [这个公共的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2103) [获取集合计数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2105) [并将其传递给这个 helper 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2106) [该 helper 方法使用“分而治之”的策略](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2110) [首先 它会处理基本情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2113) [当计数小于 2 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2115) [我们便结束了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2117) [我们只需要弄清楚](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2118) [分区点是在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2120) [集合的开始处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2121) [或者在集合的末尾](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2123) [接下来 我们将集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2126) [分成两部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2128) [现在 在这一点上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2131) [你必须暂时相信](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2133) [算法是有效的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2135) [因为我们要用 stablePartition() 处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2137) [左半边和右半边](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2138) [现在 如果你看一下这两端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2142) [你会发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2146) [所有东西都在正确的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2149) [但是这个中心区段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2150) [有两个部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2154) [需要交换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2156) [现在 它们不会总是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2158) [现在 它们不会总是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2158) [和在这个例子中一样长](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2161) [幸运的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2163) [“有一个算法可以使用”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2166) [我们叫它 rotate()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2168) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2171) [我不打算在这里深入讨论 rotate 算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2174) [但是它真的很漂亮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2176) [如果你感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2178) [你可以在与 stablePartition 同样的文件中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2179) [找到它的实现方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2182) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2184) [回到图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2185) [现在 这个烂摊子实现了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2188) [在图形列表中拖放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2192) [这一直是我最复杂](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2194) [和 Bug 最多的运算之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2196) [我的策略是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2200) [分配临时缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2201) [然后在插入点之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2204) [对 shapes 进行循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2207) [提取选定的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2208) [并调整插入点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2210) [然后在不调整插入点的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2212) [分别对其余的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2214) [进行循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2215) [提取选定的图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2217) [最后 重新插入它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2219) [最后 重新插入它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2219) [老实说 我有点害怕触碰代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2226) [因为我觉得我终于做对了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2230) [距离我最后一次发现新 Bug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2232) [已经差不多有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2234) [一个星期了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2235) [但是我现在已经在这个过程中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2236) [做得很好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2241) [所以我试着把操作可视化一次完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2243) [嘿 看起来很熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2249) [让我们再看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2251) [嗯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2255) [假设我们先做这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2256) [然后分别处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2259) [各个部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2260) [没错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2263) [这就是两个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2264) [带有反转谓词的 stablePartition](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2265) [所以 这个通用的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2269) [被压缩到了这两行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2271) [而这是 Canvas 上剩下的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2272) [现在 让我们把它放在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2278) [现在 让我们把它放在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2278) [旧代码旁边看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2281) [还不错 但是我们得到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2284) [一个可重复使用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2287) [高效文档化的通用算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2290) [这是非常棒的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2292) [好的 这是一种需要习得的技能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2294) [审视特定于你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2301) [领域的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2303) [了解你的代码从根本上在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2305) [并在可重复使用的通用代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2307) [捕获这些细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2309) [这需要实践](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2312) [但是 为什么要那么麻烦呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2314) [实践得到的答案是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2316) [因为它们是从无关的细节中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2318) [解耦出来的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2319) [通用的算法更加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2322) [可重复使用 经得起考验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2324) [甚至比对应的非通用代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2326) [更加简洁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2327) [但我也认为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2329) [对于任何真正喜欢编程的人来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2331) [这都是非常有益的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2333) [它是对真与美的追求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2335) [而不是抽象的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2336) [不可触及的真理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2339) [不可触及的真理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2339) [因为实际硬件的约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2341) [让你保持诚实](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2342) [就像 Crusty 常说的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2344) [“编程揭示本真”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2347) [因此 将你的计算视为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2350) [具有类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2352) [和 App 体系结构的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2354) [具有权利和义务的 VIP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2356) [标识它 给它一个名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2360) [对它进行单元测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2362) [并记录它的语义和性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2365) [最后 我想把](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2367) [Sean Parent 的建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2370) [包括上下文引用一下 作为结束语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2372) [“如果你想要提高](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2374) [组织中的代码质量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2377) [请将所有的代码标准](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2379) [替换为一个目标 不要单独写循环”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2381) [谢谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2386) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/223/?time=2387)