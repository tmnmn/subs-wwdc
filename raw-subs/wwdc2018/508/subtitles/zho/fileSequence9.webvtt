WEBVTT
X-TIMESTAMP-MAP=MPEGTS:900000,LOCAL:00:00:00.000

00:09:00.073 --> 00:09:02.643 align:middle line:-1
当它传递给你的JWT签名库时

00:09:02.709 --> 00:09:05.212 align:middle line:-1
将输出一个JWT令牌

00:09:05.646 --> 00:09:07.748 align:middle line:-1
由MapKit JS使用

00:09:08.649 --> 00:09:10.450 align:middle line:-1
由于短命令在用户完成其会话之前

00:09:10.517 --> 00:09:12.486 align:middle line:-1
可能会过期

00:09:12.819 --> 00:09:15.956 align:middle line:-2
你的服务器需为MapKit JS
提供一个端点

00:09:16.023 --> 00:09:18.325 align:middle line:-1
将响应新令牌的请求

00:09:18.926 --> 00:09:22.329 align:middle line:-2
稍后我将向你展示如何使
MapKit JS知道你的端点

00:09:22.396 --> 00:09:24.932 align:middle line:-2
但现在 我已经创建了
一个快速的JS路线

00:09:24.998 --> 00:09:27.201 align:middle line:-1
这里是一个端点的例子

00:09:28.602 --> 00:09:31.438 align:middle line:-2
每次调用时 这条路线只是返回
一个新的访问令牌

00:09:31.505 --> 00:09:34.741 align:middle line:-1
设置为在1800秒或30分钟内

00:09:35.175 --> 00:09:36.276 align:middle line:-1
过期

00:09:36.944 --> 00:09:38.946 align:middle line:-1
无论你的令牌是否到期

00:09:39.279 --> 00:09:41.381 align:middle line:-1
贯穿用户的会话

00:09:41.448 --> 00:09:43.250 align:middle line:-1
任何时候需要授权

00:09:43.317 --> 00:09:44.985 align:middle line:-1
MapKit JS会调用该端点

00:09:46.787 --> 00:09:49.289 align:middle line:-1
由于你的端点需要返回一个新的令牌

00:09:49.356 --> 00:09:50.457 align:middle line:-1
每次调用时

00:09:50.858 --> 00:09:53.160 align:middle line:-1
你需要让浏览器知道不要缓存

00:09:53.861 --> 00:09:56.330 align:middle line:-1
你可以通过设置缓存控制标题来做到

00:09:57.831 --> 00:09:58.899 align:middle line:-1
如果设置正确

00:09:59.166 --> 00:10:01.802 align:middle line:-2
你应该在你的服务器上
有一个返回令牌的路线

