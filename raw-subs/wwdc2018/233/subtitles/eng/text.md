# Adding Delight to your iOS App

## Summary
iOS contains powerful technologies you can use to make your app truly delightful. Learn how to take your app to the next level with easy-to-implement features such as Handoff and External Display support. Preserve that feeling of magic in your app with pro-tips that combine animations, gestures and layout, while keeping your scrolling smooth, and your code scalable. Dive into the anatomy of a launch to get your app responsive quickly, and learn some great debugging tricks from the pros!

## Info
* Frameworks
* WWDC 2018 - Session 233 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=7) [&gt;&gt; Hey guys!](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=19) [&gt;&gt; Good afternoon.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=21) [Welcome to Adding Delight to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=27) [your iOS App.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=29) [My name's Ben.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=31) [&gt;&gt; And, my name is Peter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=32) [And, we're going to show you six](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=34) [pro tips to make it magic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=35) [&gt;&gt; We're going to start with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=38) [external display support,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=39) [bringing your app's experiences](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=41) [to the big screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=42) [&gt;&gt; Next, we're going to go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=45) [through a brand-new programming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=47) [pattern for you, called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=49) [layout-driven UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=50) [&gt;&gt; Then, we're going to show you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=52) [how to get your customers to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=53) [your delightful experiences as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=55) [fast as possible, with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=56) [laser-fast launches.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=58) [&gt;&gt; We're going to focus hard on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=60) [smooth scrolling, and keeping](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=61) [things feeling great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=63) [&gt;&gt; Continuity is one of the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=65) [magical experiences on iOS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=66) [And, we're going to show you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=68) [just how easy it is to adopt](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=69) [Handoff in your applications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=71) [&gt;&gt; And, finally, we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=73) [teach you some Matrix-level](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=75) [debugging skills, in debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=76) [like a pro.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=78) [&gt;&gt; We have a lot to cover, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=80) [let's get started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=81) [iOS devices are defined by their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=88) [stunning, integrated displays.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=91) [And, you can bring your app's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=94) [experience even further, by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=96) [adding support for an external](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=99) [display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=101) [We've built a demo app to help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=102) [illustrate this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=105) [Built right into iOS, is Display](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=107) [Mirroring, which replicates the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=109) [entire system UI on the external](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=111) [connected display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=114) [Here's our demo app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=116) [As you can see, it's a simple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=118) [photo viewer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=119) [When you tap on a photo](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=120) [thumbnail, the photo slides in,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=121) [and it's full screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=123) [And, this entire experience is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=125) [replicated on the external](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=127) [display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=129) [To take full advantage of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=130) [size of the external display, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=132) [can rotate the iPhone to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=134) [landscape to fill it up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=135) [And, this is great, with no work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=137) [on our part, we were able to get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=140) [this experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=142) [But, we can do better than this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=143) [Built right into iOS, are APIs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=148) [that allow you to create an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=150) [entirely custom, second user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=152) [interface on this externally](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=154) [connected display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=156) [Let's take a look at a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=159) [examples of apps that have done](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=160) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=165) [Keynote is a great example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=165) [On the external display, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=168) [remain focused on the primary](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=169) [slide at hand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=171) [But, on the integrated iPhone](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=173) [display, you can see presenter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=175) [notes, and the next slide, tools](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=176) [essential to any presentation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=179) [essential to any presentation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=179) [Or, maybe you have a game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=181) [But, typically you'd have soft,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=185) [overlaid controls.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=186) [Well, you could create an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=188) [entirely custom interface to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=189) [control your game, and put that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=191) [on the iOS device's display, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=194) [have your full, unobstructed and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=197) [immersive gaming experience on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=199) [the external display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=201) [When designing your applications](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=202) [for an external display, there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=207) [are some key things that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=210) [should think about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=211) [Aside from the obvious size](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=213) [differences, your iPhone is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=215) [personal.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=218) [And so, you should consider the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=219) [kind of information that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=220) [show on this display as private.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=221) [Whereas, the external display](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=224) [will typically be situated in an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=227) [environment where many people](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=229) [can see it, such as a TV in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=230) [living room, or a projection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=232) [system in a conference hall.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=234) [So, you should assume that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=237) [information shown on this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=238) [information shown on this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=238) [display is public.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=240) [&gt;&gt; Additionally, while the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=242) [displays built into iPhone and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=244) [iPad are interactive, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=246) [external display is not.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=248) [So, you should avoid showing UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=250) [elements, or other interactable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=252) [controls on the external](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=254) [display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=255) [&gt;&gt; So, let's apply this kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=256) [thinking to our demo app, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=259) [see what we can come up with.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=261) [Here's our optimized version for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=264) [the external display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=266) [As you can see, we're now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=268) [showing the selected photo full](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=269) [size on the external display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=272) [And, on the integrated display,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=274) [we're showing just the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=277) [thumbnails, and a new selection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=278) [indicator to show the photo that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=279) [is currently being shown full](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=281) [screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=283) [While simple, this is a really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=285) [powerful use of this design.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=286) [To show you how we built this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=290) [into our demo app, we're going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=292) [to cover three topics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=293) [Connectivity, behavior, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=296) [connection transitions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=298) [Let's start with connectivity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=301) [How do you know if you have an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=303) [external display connected?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=305) [UIScreen has a class variable,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=307) [screens, which contains a list](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=310) [of all the connected displays,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=312) [including the device, built into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=313) [the iPhone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=315) [So, if there's more than one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=315) [element in this array, you know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=318) [you have an external display](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=320) [connected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=321) [Additionally, because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=324) [external display can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=326) [connected and disconnected at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=327) [will, UIKit will post](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=329) [notifications to help you know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=331) [when this happens.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=333) [So, you should listen for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=334) [UIScreen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=336) [.didConnectNotification, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=337) [UIScreen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=339) [.didDisconnectNotifications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=340) [And, bring up and tear down your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=342) [UI accordingly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=343) [Peter, can you show our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=346) [developers just how easy it is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=347) [to set up a second user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=348) [interface?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=349) [&gt;&gt; Ben, I'd be happy to.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=350) [Let's jump into our code for our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=352) [UIScreen connection callback.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=354) [Here, we'll set a local variable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=357) [to the last screen in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=359) [to the last screen in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=359) [screens array.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=361) [We know that this is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=362) [external screen, because we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=363) [inside of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=365) [didConnectNotification callback.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=365) [Next, we'll make a new UI window](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=368) [to show on this external](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=370) [display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=372) [And, we'll assign its screen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=372) [property to the screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=374) [Next, we're going to want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=377) [make sure we set up this window.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=378) [We factored this into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=380) [function, but all we're doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=381) [here is making a root view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=383) [controller, and sticking it on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=384) [the window, the same way we'd do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=385) [for the onboard display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=387) [And, finally, we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=389) [mark this window as not hidden](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=391) [to show it on the external](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=393) [screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=394) [So, that's connection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=396) [Now, let's look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=397) [disconnection, which is even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=398) [easier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=399) [So, here we are inside of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=401) [UIScreen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=402) [.didDisconnectNotification](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=403) [handler, and all we have to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=405) [here is hide the window, and nil](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=407) [out our local reference to it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=409) [to free up any resources.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=410) [And, that's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=412) [We've implemented screen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=413) [connection and disconnection in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=414) [our app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=416) [&gt;&gt; Wow, Peter, that was really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=417) [easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=418) [The next thing you're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=420) [want to think about is changing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=421) [your app's default behavior for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=423) [when it has an external display](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=425) [connected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=426) [Let's look at an example of some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=427) [code from our demo app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=430) [This is the code that's called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=433) [when we tap on a photo in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=434) [collection view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=436) [When we're in single display](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=437) [mode, we create our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=439) [photoViewController and push it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=441) [onto our navigation stack.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=443) [But, when we have an external](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=445) [display connected, we're already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=446) [showing that photoViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=448) [full screen in that second UI,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=450) [so we just tell it to present](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=452) [that photo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=454) [Really easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=455) [The third thing you should think](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=457) [about when designing for an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=459) [external display is you should](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=460) [handle connection changes with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=463) [graceful transitions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=465) [Let's go back to our demo app to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=467) [illustrate this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=470) [Here you can see our demo app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=472) [currently showing a photo full](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=474) [size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=476) [And, we haven't yet connected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=477) [the external display yet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=478) [Watch what happens when we plug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=480) [it in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=481) [What happened here, is we popped](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=486) [our viewController back to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=488) [thumbnail view while](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=489) [simultaneously showing that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=490) [previously selected photo full](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=492) [size on the external display.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=494) [And, it's these graceful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=496) [transitions that really help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=499) [preserve the context, and help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=501) [your customers understand where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=503) [they are in your app's flow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=504) [So, that's external display](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=506) [support.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=509) [It's really easy to set up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=510) [Just consider the different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=512) [display contexts when designing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=513) [your application, and be sure to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=515) [handle connection changes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=517) [gracefully.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=518) [To learn more about this, check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=520) [out this talk from WWDC 2011.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=521) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=524) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=525) [&gt;&gt; Layout-driven UI is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=531) [powerful way to write your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=533) [to make it easier to add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=536) [features, and easier to debug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=537) [features, and easier to debug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=537) [Layout-driven UI helps us deal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=541) [with the number one cause of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=543) [issues in iOS apps, and that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=544) [managing UI complexity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=548) [I'm sure you've been here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=550) [before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=552) [I know I have.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=552) [You add some code, and a gesture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=554) [callback.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=556) [You add even more UI update code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=557) [in a notification callback.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=559) [And, more when you get a value](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=560) [trigger from a UI control.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=562) [And, suddenly your app is in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=565) [this weird, and hard to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=566) [understand state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=568) [And, you have to follow these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=569) [strange orders to reproduce](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=570) [these unusual bugs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=572) [And, as you add more features to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=574) [your app, the problem gets worse](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=576) [and worse.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=578) [If we instead follow a simple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=580) [recipe, and push these UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=582) [updates into layout, we can get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=584) [rid of these bugs, and make it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=587) [much easier to add features.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=589) [Let's walk through the recipe](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=591) [for adding layout-driven UI to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=593) [your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=595) [&gt;&gt; The first thing you should](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=597) [do, is you need to identify and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=598) [do, is you need to identify and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=598) [track all of the state that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=600) [affects your UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=602) [Then, every time that states](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=605) [changes, you should dirty the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=607) [layout system by calling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=609) [setNeedsLayout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=610) [Finally, you'll want to update](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=612) [your UI with this state in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=615) [layoutSubviews.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=617) [And, that's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=618) [&gt;&gt; So, what I love about this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=620) [recipe is just how easy it is to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=621) [follow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=623) [And, if we apply layout-driven](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=624) [UI to our app holistically,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=627) [while considering the three core](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=630) [components of an iOS app,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=632) [layout, animations, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=634) [gestures, you'll find that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=636) [implementation of all three of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=638) [these works harmoniously, in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=640) [really awesome way.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=643) [Let's start with layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=645) [Layout is the process by which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=649) [you position your application's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=651) [content onscreen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=653) [But, we're also recommending](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=655) [that you do all other UI updates](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=657) [in layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=659) [in layout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=659) [Let's look at a simple sample](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=660) [app that we wrote to highlight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=662) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=663) [Ben, can you take us through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=664) [this app?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=666) [&gt;&gt; Sure, Peter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=667) [So, there's a really simple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=669) [sample app, with this cool guy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=670) [in the middle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=671) [He shows when we're feeling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=672) [cool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=674) [When we're not, he hides away.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=675) [But, we're feeling quite cool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=677) [right now, Peter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=678) [So, let's bring him back in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=679) [&gt;&gt; Great. So, while this is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=681) [simple example, it's really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=683) [important to walk through, so we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=685) [can understand how layout-driven](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=687) [UI works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=688) [So, let's go through a skeleton](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=689) [of this app, and follow through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=691) [the layout-driven UI recipe that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=694) [Ben showed us earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=696) [So, here we've got our managing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=698) [view that hosts this cool guy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=700) [view, in our coolView, which I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=702) [wrote ahead of time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=703) [So, Ben, what's the first step](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=705) [in our recipe?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=707) [&gt;&gt; Well, we need to identify and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=708) [track that state that affects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=710) [our UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=712) [&gt;&gt; So, remember what Ben said.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=713) [The cool guy is there when we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=715) [feeling cool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=716) [And, he's not there when we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=717) [not.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=719) [So, I guess we'll have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=720) [variable called feelingCool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=721) [OK. Ben, what's the second step](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=723) [in the recipe?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=726) [&gt;&gt; Well, now, every time this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=727) [state changes, we need to dirty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=728) [the layout system by calling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=730) [setNeedsLayout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=732) [But, we need to make sure that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=733) [every time this state changes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=735) [this happens.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=736) [And, this state could change](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=737) [from various places in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=739) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=740) [So, Peter, how can we ensure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=741) [that we're always dirtying the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=743) [layout system when there's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=744) [changes?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=745) [&gt;&gt; I'm happy you asked, because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=745) [I think I've got a good idea for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=747) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=748) [We can use a feature called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=749) [Swift property observers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=750) [These let us run code before or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=753) [after a property is set.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=755) [So, we can use the didSet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=757) [property observer to call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=759) [setNeedsLayout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=761) [This is a really excellent use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=762) [of Swift property observers in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=764) [your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=765) [OK. So, we're almost done.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=767) [Ben, what's the last step in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=769) [recipe?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=770) [&gt;&gt; Well now, Peter, using this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=771) [state, we need to update our UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=773) [in layoutSubviews.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=775) [&gt;&gt; OK, easy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=777) [We'll override layoutSubviews,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=779) [We'll override layoutSubviews,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=779) [and we'll updated the isHidden](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=780) [property of our cool guy view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=782) [based on the value of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=784) [feelingCool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=785) [And, that's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=787) [That's all you need to do to add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=788) [layout-driven UI to your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=789) [Now, while this works really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=791) [well for this simple example, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=793) [works well for some more complex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=794) [ones earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=796) [Ben and I were up really late](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=798) [last night playing this new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=799) [macOS The Gathering trading card](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=801) [game, which is sweeping the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=803) [Apple campus.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=805) [We built this fun little deck](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=807) [builder app to help us win the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=808) [tournament next weekend, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=809) [we're really going to do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=811) [It lets you pick up and drag](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=812) [these cards around, and you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=814) [fling them into this little deck](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=815) [area.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=816) [And, it's really fast, and fun,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=817) [and fluid.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=819) [We can pick up two cards at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=819) [same time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=821) [I think with this app we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=822) [really show you how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=824) [layout-driven UI works, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=825) [importantly, we can beat Ben's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=827) [officemate next weekend.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=828) [So, let's walk through the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=831) [two core aspects of an iOS app,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=833) [and how we can apply](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=835) [layout-driven UI to them,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=836) [starting with animations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=838) [starting with animations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=838) [&gt;&gt; Animations are the hallmark](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=841) [of any great iOS experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=843) [The life-like motion of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=846) [user interface truly makes your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=848) [apps feel alive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=851) [UIKit has some great API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=852) [available to help you create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=854) [these delightful animations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=855) [The UIViewPropertyAnimator API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=858) [is a really powerful tool, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=861) [it was turbocharged last year](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=863) [with a bunch of new features.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=864) [To learn all about how to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=867) [it, check out Advanced](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=868) [Animations from UIKit from WWDC](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=869) [2017.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=872) [In addition to this, the tried](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=874) [and true UIView closure API is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=876) [also a great way to make these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=878) [animations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=879) [&gt;&gt; So, great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=882) [We can use UIViewAnimations with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=883) [our layout-driven UI-based app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=886) [One thing to keep in mind, is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=889) [we're always going to want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=890) [use the beginFromCurrentState](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=891) [animation option.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=893) [This tells UIKit to take the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=895) [current onscreen position of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=897) [your view, even if it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=899) [your view, even if it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=899) [mid-animation, when doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=901) [animation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=902) [And so, this lets us do these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=904) [really wonderful, interruptible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=906) [interactive animations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=907) [Let's look at an example in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=909) [macOS The Gathering trading card](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=911) [game app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=913) [So, here we've got a variable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=915) [that tracks what cards are in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=917) [our deck.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=918) [And, using those Swift property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=919) [observers we talked about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=921) [earlier, we're dirtying the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=922) [layout system every time this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=924) [changes by calling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=925) [setNeedsLayout.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=927) [Next, when we want to put a card](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=928) [in the deck, all we have to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=932) [is add that card to this array,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=934) [which will dirty our layout, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=936) [then inside of an animation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=938) [block, using this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=940) [beginFromCurrentState option, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=941) [call layoutIfNeeded.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=943) [This will trigger a call to our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=946) [code in layoutSubviews, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=947) [will move all of our views](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=949) [around, play the appropriate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=950) [animation state transitions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=952) [And, what's really excellent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=954) [about this, that I really want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=955) [to highlight here, is notice how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=957) [we didn't add any special case](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=958) [we didn't add any special case](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=958) [for these animations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=960) [We just kind of got this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=962) [animated layout for free by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=963) [doing our layout inside of an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=965) [animation block.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=967) [This is really, really awesome.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=969) [So, that's how we can add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=971) [animations to our layout-driven](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=972) [UI app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=974) [Finally, let's take about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=976) [third core aspect of an iOS app,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=978) [and that's gestures.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=980) [And, of course, we can't talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=982) [about gestures without talking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=984) [about UIGestureRecognizer,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=985) [UIKit's awesome API for adding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=987) [gestural interactions to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=989) [app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=993) [&gt;&gt; UIKit provides a number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=993) [great concrete subclasses of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=995) [UIgestureRecognizer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=996) [Everything from pans to pinches](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=998) [to swipes to rotation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1000) [You should be able to create the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1002) [kind of interactions you want,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1003) [using these.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1004) [And, they're highly customizable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1005) [as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1007) [If you want something really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1009) [crazy, you can always subclass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1010) [UIGestureRecognizer yourself as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1012) [well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1013) [&gt;&gt; When looking between the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1015) [built-in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1017) [UIKitGestureRecognizers, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1017) [UIKitGestureRecognizers, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1017) [important to understand the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1020) [difference between discrete and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1021) [continuous gestures.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1023) [Discrete gestures tell you that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1026) [an event happened.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1027) [They start in the Possible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1029) [state, and then they don't pass](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1030) [go, they don't collect $200.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1033) [They move immediately into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1035) [Recognized state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1036) [These are really useful for fire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1038) [and forget interactions in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1040) [app, but won't tell you at every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1041) [phase during the interaction.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1044) [&gt;&gt; The other type of gestures](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1046) [are continuous gestures.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1048) [These provide a much greater](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1050) [level of fidelity to you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1051) [Like discrete gestures, they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1054) [start out in the Possible state,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1055) [but as they begin to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1057) [recognized, they move to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1058) [Began state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1060) [As they track, they enter the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1061) [Changed state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1064) [And, at this point you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1065) [receiving a continuous stream of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1066) [events as the gesture moves](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1068) [around.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1069) [Finally, when the gesture is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1071) [complete, it moves to the Ended](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1073) [state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1075) [One of our favorite types of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1077) [continuous gestures is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1078) [continuous gestures is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1078) [UIPanGestureRecognizer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1080) [And, there are two great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1082) [functions available to help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1083) [get the most out of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1085) [translationInView will tell you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1088) [where the gesture is tracking,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1089) [relative to your views.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1091) [And, velocityInView will tell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1093) [you how fast your gesture is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1096) [moving.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1097) [And, this is really powerful for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1098) [handing off velocity between a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1100) [gesture and a subsequent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1101) [animation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1103) [To learn all about how to build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1105) [really great gesture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1106) [interactions using these, check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1108) [out Building Interruptible and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1110) [Responsive Interactions from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1111) [WWDC 2014.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1113) [&gt;&gt; So, I also love](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1116) [UIPanGestureRecognizer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1117) [And, we used it to help build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1119) [that card dragging behavior you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1120) [saw earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1122) [Let's look at how we did this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1124) [using layout-driven UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1125) [Again, we have a local variable,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1128) [which tracks the offsets for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1131) [each of our cards that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1133) [gesture has applied.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1135) [And again notice every time this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1137) [variable changes, we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1139) [variable changes, we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1139) [triggering setNeedsLayout, using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1140) [one of Swift's property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1142) [observers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1143) [Next, inside of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1146) [panGestureRecognizer callback](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1147) [function, we're just going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1149) [grab the current translation and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1151) [view out of the gesture, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1152) [associate this gesture to one of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1155) [our cards.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1157) [We'll then increment the offset](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1158) [for this card in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1161) [dictionary.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1163) [And finally, in layoutSubviews,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1165) [we'll make sure to update the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1168) [position of our card views based](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1170) [on their offsets from this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1172) [dictionary.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1174) [Notice again how we're not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1176) [really doing anything special,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1177) [other than -- besides the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1180) [traditional layout-driven UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1181) [case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1182) [We just have this piece of state](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1184) [that happens to be driven by a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1186) [gesture, and we're responding to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1187) [it in layoutSubviews.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1189) [In fact, if you follow this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1191) [pattern throughout your app,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1193) [you'll find that it makes a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1195) [of these types of interactions](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1196) [much easier to adopt.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1197) [So that's layout-driven UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1200) [Remember the recipe.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1202) [Find and track all of that state](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1204) [that affects your UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1206) [And, use Swift property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1208) [observers to trigger](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1209) [setNeedsLayout whenever this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1210) [state changes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1212) [Finally, in your implementation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1214) [of layoutSubviews, make sure to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1216) [update your view state based on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1218) [this state that you tracked.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1221) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1222) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1223) [&gt;&gt; The iOS experience is all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1229) [about being responsive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1231) [And, you want to get your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1233) [customers to your delightful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1235) [experiences as quickly as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1236) [possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1239) [There is one step between them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1240) [tapping on your icon, and being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1243) [delighted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1245) [And, that one step is your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1247) [launch time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1249) [To help you optimize this, we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1252) [going to take you through the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1254) [five high-level components that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1256) [make up the anatomy of a launch.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1258) [make up the anatomy of a launch.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1258) [Starting with number one,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1262) [process forking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1264) [Peter, what can we do in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1267) [phase of the launch?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1268) [&gt;&gt; Well, for process forking,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1270) [it's really complicated.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1272) [You're going to want to read the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1273) [Man pages for fork and exec, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1274) [familiarize yourself with POSIX](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1277) [fundamentals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1279) [No, no, I'm just kidding.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1280) [iOS will take care of process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1281) [forking for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1283) [&gt;&gt; We'll deal with number one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1284) [for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1286) [Let's look at number two.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1287) [[ Audience Laughter ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1288) [Dynamic linking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1291) [At this phase, we're allocating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1292) [memory to begin executing your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1296) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1298) [We're linking libraries and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1299) [frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1301) [We're initializing Swift,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1302) [Objective-C, and Foundation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1303) [And, we're doing static object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1306) [initialization as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1307) [And, typically we see this can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1309) [take 40 to 50% of the typical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1311) [launch time of an app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1314) [And, one key thing to remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1317) [is at this point, none of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1318) [is at this point, none of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1318) [code has run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1320) [So, it's vital that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1321) [understand how to optimize this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1323) [Peter, do you have any great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1326) [advice for our developers?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1327) [&gt;&gt; I'm happy you asked, Ben.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1328) [It's important that you take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1330) [great care when optimizing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1331) [linking phase of your app's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1334) [launch time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1335) [Because it takes up such a large](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1336) [amount of your launch time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1338) [My first piece of advice for you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1341) [is to avoid code duplication](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1343) [wherever possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1345) [If you have redundant functions,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1346) [objects, or structs, remove them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1349) [from your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1351) [Don't repeat yourself.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1352) [Next, you're going to want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1355) [limit your use of third-party](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1356) [libraries.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1358) [iOS first-party libraries are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1360) [cached, and may already be in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1362) [active memory if another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1364) [application is using them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1366) [But, third-party libraries are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1368) [not cached.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1370) [Even if another app is using the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1371) [same version of a library as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1372) [you, we'll still have to pull in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1374) [the framework if your app uses](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1376) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1378) [So, you should really limit your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1378) [So, you should really limit your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1378) [use of these third-party](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1380) [libraries as much as possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1381) [And, finally, you're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1384) [want to avoid static](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1385) [initializers, and having any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1386) [behavior in methods like plus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1389) [initialize, and plus load.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1391) [Because these have to run before](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1393) [your app can do any meaningful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1395) [work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1396) [&gt;&gt; To learn more about this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1398) [vital part of your launch time,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1399) [check out App Start-up Time:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1401) [Past, Present, and Future from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1403) [WWDC 2017.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1405) [The next phase of your launch is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1408) [your UI Construction.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1410) [At this point, you're preparing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1412) [your UI, building up your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1414) [viewControllers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1416) [The system is doing state](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1417) [restoration, and loading in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1420) [preferences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1421) [And, you're loading in the data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1422) [that you need for your app to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1425) [become responsive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1426) [So, Peter, what can we do at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1428) [this phase of the launch to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1430) [optimize?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1432) [&gt;&gt; You'll want to optimize the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1433) [UI construction phase to be as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1434) [fast as possible for your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1436) [This means returning as quickly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1439) [This means returning as quickly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1439) [as possible from the UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1441) [application activation methods.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1442) [WillFinishLaunching,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1445) [didFinishLaunching, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1447) [didBecomeActive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1448) [Because UIKit waits for you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1450) [return from these functions](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1451) [before we can mark your app as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1453) [active.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1455) [Next, you're going to want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1457) [avoid any file system writes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1458) [during your application launch,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1461) [as these are blocking, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1463) [require a sys call.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1464) [Hand in hand with these, you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1466) [going to want to avoid very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1468) [large reads during app launch as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1469) [well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1471) [Instead, consider streaming in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1473) [only the data you absolutely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1475) [need right now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1476) [And, finally I encourage you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1479) [check your database hygiene.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1481) [It's always a good idea to stay](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1482) [clean.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1484) [If you're using a library like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1485) [CoreData, consider optimizing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1487) [your schema, to make it as fast](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1489) [as possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1491) [And, if you're rolling your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1492) [solution with SQLite, or similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1493) [technology, consider vacuuming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1496) [your database at a periodic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1498) [your database at a periodic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1498) [interval.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1500) [For example, every time your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1500) [gets updated.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1502) [&gt;&gt; Thanks, Peter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1504) [The next phase of the launch is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1506) [when we create your very first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1508) [frame.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1509) [At this point, core animation is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1510) [doing all the rendering](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1513) [necessary to get that frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1514) [ready.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1515) [It's doing text drawing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1517) [And, we're loading and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1518) [decompressing any images that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1519) [need to be shown in your UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1521) [So, Peter, do you have any more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1523) [sage advice for this phase of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1525) [the launch?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1527) [&gt;&gt; Oh, do I.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1528) [When preparing your first frame,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1529) [it's really important that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1531) [take great care to only prepare](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1532) [the user interface that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1535) [absolutely need during launch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1536) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1537) [If your user hasn't navigated to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1538) [a particular section of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1541) [app, avoid loading it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1542) [And, instead, pull it in lazily](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1544) [when you absolutely need it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1546) [Also, you should avoid hiding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1548) [views and layers that should not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1551) [be visible when we first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1552) [navigate to your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1553) [Even when views and layers are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1556) [hidden, they still have a cost.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1557) [So, only bring in the views and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1559) [So, only bring in the views and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1559) [layers that you absolutely need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1560) [for your first frame.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1562) [&gt;&gt; The final phase of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1565) [launch is what we call extended](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1567) [launch actions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1569) [These are tasks that you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1572) [potentially deferred from your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1573) [launch path to help you get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1575) [responsive faster.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1577) [So, while your app may be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1579) [responsive at this point, it may](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1580) [not be very usable yet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1582) [This phase is really all about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1584) [prioritizing what to do next.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1586) [Bring in the content that needs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1589) [to be onscreen right now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1590) [And also, if you're loading](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1593) [content from a remote server, be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1594) [sure to consider that you may be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1596) [in challenging network](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1598) [conditions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1599) [And, have a placeholder UI ready](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1600) [to go if necessary.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1602) [So, those are the five](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1604) [high-level components that make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1607) [up the anatomy of a launch.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1609) [We've one more thing for you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1611) [today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1615) [ABM. A: Always.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1616) [B: Be. M: Measuring.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1619) [B: Be. M: Measuring.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1619) [&gt;&gt; Coffee is for quick apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1621) [&gt;&gt; It's essential that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1624) [understand where your launch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1625) [time is going.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1627) [So, measure it regularly using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1628) [the Time Profiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1630) [Any time you change code in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1632) [path -- in your launch path,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1633) [you'll want to remeasure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1634) [And, take statistical averages.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1637) [Don't depend on a single profile](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1639) [to check your launch time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1641) [So, laser-fast launches.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1644) [Get responsive fast.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1646) [Use only what you need.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1647) [And, measure, measure, measure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1649) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1651) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1652) [&gt;&gt; Scrolling is a key part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1659) [the iOS user experience, and a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1661) [huge part of the experience](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1664) [inside your apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1666) [iPhone and iPad are magical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1668) [sheets of glass that can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1671) [transform into anything your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1672) [would like them to be.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1674) [So, it's important that you work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1677) [to help preserve this illusion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1678) [to help preserve this illusion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1678) [of your app's content sliding on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1680) [this magic sheet of glass.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1682) [At Apple, we've got a phrase](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1685) [that we like to say, that your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1686) [app should feel smooth like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1687) [butter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1689) [But, from time to time, you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1690) [some hitches and stutters that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1693) [make it feel less like butter,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1695) [and more like peanut butter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1697) [And, you've seen this before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1700) [Your app feels choppy or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1701) [stuttery.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1702) [Ben, what are some causes of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1704) [slow behavior in apps?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1706) [&gt;&gt; Well, Peter, this slow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1709) [behavior that you're describing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1710) [is really that we're dropping](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1712) [frames.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1714) [And so, we need to understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1715) [why that might be happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1716) [And, there are two key areas](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1717) [where this can happen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1719) [The first is you could be doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1721) [too much computation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1722) [And, the second is you could be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1724) [doing too much complex graphics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1726) [compositing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1728) [Let's look at each of these in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1730) [turn, starting with computation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1731) [How do you know if you're doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1735) [too much computation?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1736) [Well, the Time Profiler, built](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1738) [Well, the Time Profiler, built](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1738) [into Instruments, is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1740) [ultimate tool for this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1741) [It can give you down to the line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1744) [measurements for just how much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1745) [CPU time your code is using.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1747) [It's a really powerful tool, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1750) [we encourage you to go and check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1752) [out Using the Time Profiler in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1753) [Instruments from WWDC 2016.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1754) [&gt;&gt; So, once you've identified](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1758) [these hot spots, using the Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1760) [Profiler tool, we've got some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1761) [great tips for you to optimize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1763) [them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1765) [The first is to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1767) [UICollectionView and UITableView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1768) [prefetching.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1770) [These are pieces of API that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1772) [will tell you while the user is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1773) [scrolling towards particular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1775) [cells, and can give you an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1776) [opportunity to preload that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1778) [data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1780) [There was a wonderful talk given](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1781) [by two very handsome presenters](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1783) [on this in 2016 that I encourage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1785) [you to watch.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1787) [The next tip that I have for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1789) [you, is to push as much work as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1791) [possible off of the main queue](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1793) [and onto background queues,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1795) [freeing up the main queue to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1797) [update your UI and handle user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1798) [update your UI and handle user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1798) [input.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1800) [Ben, what kind of work can we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1801) [push off the main queue?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1804) [&gt;&gt; Well, there's some usual](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1806) [stuff that you might expect,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1806) [like network and file system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1808) [access.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1810) [These should never be running on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1811) [the main thread.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1812) [But, maybe some other stuff that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1813) [you might not expect, like image](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1815) [drawing and text sizing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1816) [UIGraphicsImageRenderer, and its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1818) [distributed string, both have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1820) [functions available that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1822) [safe to use on a background](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1824) [thread, that might just help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1825) [move some of that complex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1827) [computation off of your main](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1829) [queue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1831) [&gt;&gt; Wow, Ben, those are great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1832) [tips.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1834) [I never would have thought to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1834) [that off of the main queue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1835) [So, let's say I've run the Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1838) [Profiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1840) [I've used prefetching, just like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1841) [those guys told me to.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1842) [And, I've pushed as much work as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1844) [possible off of the main queue,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1845) [but my app is still slow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1847) [Surely this isn't my problem,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1850) [right Ben?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1851) [&gt;&gt; Well, Peter, we may not be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1853) [out of the woods just yet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1854) [While we may have optimized our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1856) [computation, we could still be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1857) [computation, we could still be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1857) [having problems with our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1860) [graphics system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1861) [Fortunately, there's another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1864) [great tool available here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1866) [The Core Animation instrument is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1867) [a really powerful way to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1871) [exactly what your frame rate is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1872) [doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1874) [And, also at the same time,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1875) [looking at your GPU utilization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1876) [It's another really powerful](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1880) [tool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1881) [And, to learn all about how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1882) [use it, check out Advanced](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1883) [Graphics and Animations for iOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1884) [Apps from WWDC 2014.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1886) [&gt;&gt; Once you've identified that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1890) [your app is graphics-bound,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1891) [we've got some great low-hanging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1894) [fruit for you to investigate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1895) [Usually, you have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1898) [graphics-bound app due to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1899) [overuse of one of two things:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1900) [visual effects, or masking and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1903) [clipping.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1905) [Visual effects, like blur and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1907) [vibrancy, are expensive, and so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1909) [you should use them tastefully](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1911) [within your apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1913) [You should also definitely avoid](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1914) [things like blurs on blurs on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1916) [blurs, as this will cause the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1918) [blurs, as this will cause the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1918) [GPU to work in overdrive,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1920) [slowing down your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1922) [Also, you should avoid masking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1924) [and clipping wherever possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1927) [Instead, if you can achieve the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1930) [same visual appearance by just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1931) [placing opaque content on top of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1934) [your views, then I would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1936) [encourage you to too that,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1938) [instead of using the masked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1939) [view, or masked property of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1940) [UIViewer CA Layer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1943) [So, that's how we can optimize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1945) [smooth scrolling performance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1947) [Make sure to run the Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1949) [Profiler, and Core Animation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1950) [instruments on your apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1952) [Use prefetching, and push as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1955) [much work as possible off of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1956) [main queue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1958) [And, try to use visual effects,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1959) [and masking and clipping](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1962) [sparingly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1964) [For even more information about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1966) [profiling, check out this great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1967) [talk from WWDC 2015.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1969) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1971) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1972) [&gt;&gt; Continuity is one of the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1976) [magical experiences across Apple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1978) [magical experiences across Apple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1978) [platforms.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1980) [And, Handoff is a fantastic way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1982) [to truly delight your customers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1984) [The ability to take a task from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1987) [one device, and seamlessly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1990) [transition it to another device](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1992) [is an absolutely awesome](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1995) [experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1996) [Handoff works between iOS,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1999) [macOS, and watchOS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2001) [It doesn't require an internet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2003) [connection because it uses](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2004) [peer-to-peer connectivity, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2006) [best of all for all of you, is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2008) [it's really easy to set up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2010) [So, how should you think about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2013) [using Handoff in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2015) [applications?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2016) [Well, let's go through a few](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2018) [examples of how we do it in some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2019) [of our Apple apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2021) [Let's say I get a message from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2023) [my handsome co-presenter, and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2025) [want to reply on my iPhone X](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2027) [with a humorous animoji.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2029) [Well, I can get right back into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2032) [that conversation, right from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2033) [the App Switcher on iOS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2035) [&gt;&gt; Or, if I'm editing a document](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2038) [&gt;&gt; Or, if I'm editing a document](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2038) [in Pages on my Mac, and I have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2040) [to run, and I want to hand it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2043) [off to my iPad, I can do so by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2044) [tapping the icon in the Dock.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2046) [&gt;&gt; Or, again, if I'm casually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2050) [browsing photos on my watch, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2051) [I find one from a previous WWDC,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2054) [and I just want to go and look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2056) [at all the photos in that album,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2057) [I can get right back into my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2059) [Photo library on my iPhone,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2061) [without having to go search for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2062) [that one photo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2063) [Handoff is really powerful, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2066) [it can save your customers so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2068) [much time when moving from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2069) [device to device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2071) [So, we're going to show you just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2072) [how easy it is to adopt.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2075) [And, it's all built on top of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2076) [the NSUserActivity API.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2078) [NSUserActivity represents a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2081) [current state or activity that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2084) [you're currently doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2086) [In this case, we're composing an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2087) [email.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2089) [When this activity is created,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2092) [all of the nearby devices that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2095) [are signed into the same iCloud](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2096) [account all show that Handoff is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2098) [account all show that Handoff is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2098) [available.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2101) [On the Mac, you'll see an icon](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2102) [down in the Dock.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2104) [When you click on this Mail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2106) [icon, the activity will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2108) [transferred over to the Mac, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2110) [Mail can launch and continue](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2113) [exactly where you left off.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2114) [So, let's look at the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2118) [necessary to set this up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2119) [On the originating device, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2124) [start by creating your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2126) [NSUserActivity with a given](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2127) [type.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2129) [And, this type represents the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2130) [kind of activity that your user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2131) [is currently doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2133) [You then set a title, and set](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2134) [isEligibleForHandoff to true.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2137) [And you then want to populate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2140) [your userInfo dictionary.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2142) [And, you need to fill this with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2144) [all the information necessary to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2145) [be able to continue the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2147) [activity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2148) [In this case, our example is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2150) [video, and we're including a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2152) [video ID, and a current play](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2153) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2155) [Finally, you'll want to set this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2158) [activity to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2159) [activity to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2159) [viewController's userActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2160) [property.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2162) [This will cause it to become the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2164) [current activity, whenever that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2165) [viewController is presented.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2166) [And, that's all you need to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2169) [on the originating device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2170) [On the continuing device, first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2172) [of all, your app needs to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2174) [declare support for the type of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2175) [activity that you created.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2178) [Then, you need to implement two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2180) [UIApplicationDelegate callbacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2181) [The first is application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2184) [willContinueUser](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2185) [ActivityWithType.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2186) [And, this is called as soon as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2187) [you click or tap on the icon to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2189) [initiate the handoff.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2192) [At this point, we don't have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2194) [NSUserActivity object ready yet,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2196) [but you know the kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2198) [activity that's going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2199) [continued, so you can begin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2200) [preparing your UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2202) [Very shortly after, you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2204) [receive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2206) [applicationContinueRestoration](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2206) [handler, which will contain the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2208) [fully reconstructed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2210) [NSUserActivity object.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2212) [From that point, you can set up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2213) [and continue the experience](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2216) [right on that device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2218) [&gt;&gt; If you've got more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2221) [information than can fit in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2221) [userInfo dictionary, there's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2223) [great feature of NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2225) [that you can use, called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2227) [continuation streams.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2228) [All you have to do is set the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2230) [supportsContinuationStreams](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2232) [property to true.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2234) [Then, on the continuing device,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2236) [you'll call the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2239) [getContinuationStreams method on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2239) [the NSUserActivity, which will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2242) [provide you with an input and an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2244) [output stream.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2246) [Back on the originating device,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2248) [the NSUserActivity's delegate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2250) [will receive a callback](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2252) [providing it with input and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2254) [output streams as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2255) [And, through these channels, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2257) [can do bi-directional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2259) [communication between the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2260) [originating and the continuing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2262) [device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2264) [But, you're going to want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2265) [finish this as fast as possible,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2266) [because the user may be moving](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2267) [the devices apart to leave.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2269) [For more about streams, check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2272) [out the Stream Programming Guide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2274) [on developer.apple.com.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2275) [&gt;&gt; Now, this is great for moving](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2277) [&gt;&gt; Now, this is great for moving](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2277) [things that wouldn't be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2280) [appropriate to put in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2281) [userInfo dictionary, like images](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2281) [or video content, such as in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2283) [email handoff example earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2285) [But, for document-based apps,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2288) [the handoff story is even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2290) [easier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2291) [Because you get much of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2293) [behavior for free.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2294) [UIDocument and NSDocument](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2296) [automatically create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2297) [NSUserActivity objects to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2299) [represent the document that is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2300) [currently being edited.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2302) [And, this works great for all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2304) [documents stored in iCloud.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2306) [All you have to do in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2310) [applications is configure your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2311) [info.plist accordingly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2312) [In addition to app-to-app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2314) [handoff, we also support](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2317) [app-to-web browser handoff.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2319) [If you have a great web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2323) [experience to go alongside your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2324) [native app experience, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2326) [continuing device doesn't have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2329) [your native app installed, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2330) [can handoff to Safari, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2332) [continue the activity right in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2334) [the web browser.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2336) [&gt;&gt; Handoff also supports web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2338) [&gt;&gt; Handoff also supports web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2338) [browser-to-app handoffs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2340) [You need to configure a list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2343) [approved app IDs on your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2345) [server, and then you need to add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2346) [an associated domain entitlement](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2348) [in your iOS app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2351) [And then, the user can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2352) [seamlessly continue from your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2353) [web experience to your app on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2355) [iOS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2357) [For even more about this, check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2358) [out this great Handoff talk from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2360) [2014.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2362) [&gt;&gt; So, that's Handoff.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2364) [Go out and implement it in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2367) [applications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2368) [Truly delight your users, and as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2369) [an added bonus, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2372) [NSUserActivity API is used all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2373) [over the system experiences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2375) [In things like Spotlight search,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2377) [and the new Siri Shortcuts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2378) [feature.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2380) [For more about these, check out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2381) [these talks, from previous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2383) [WWDCs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2384) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2384) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2386) [&gt;&gt; You write amazing apps and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2396) [experiences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2398) [But, from time to time, you have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2400) [problems that you need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2403) [investigate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2404) [And, for that, we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2405) [teach you some Matrix-level](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2407) [debugging skills.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2409) [But first, a word of warning.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2410) [Before we give you this red](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2414) [pill, and show you just how deep](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2415) [the rabbit hole goes, I want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2417) [let you know that the methods](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2419) [that we're going to show you in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2421) [this section are great for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2422) [debugging, but must not be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2423) [submitted to the App Store.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2425) [If you do, your application will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2427) [be rejected, and you'll have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2429) [bad day.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2431) [So, with that warning, let's get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2432) [started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2434) [We're going to start with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2435) [detective mindset.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2437) [How you should approach problems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2438) [that you find in your program.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2440) [Next, we're going to talk to you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2442) [about how to debug issues with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2444) [your views and view controllers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2445) [We're going to teach you about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2448) [LLDB, and how you can use it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2449) [identify state issues in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2451) [app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2453) [And finally, we're going to look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2454) [at some techniques for some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2455) [great memory issues that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2456) [might run into that make you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2458) [might run into that make you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2458) [feel less than great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2460) [So, let's start with a detective](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2461) [mindset.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2464) [When you're looking at a problem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2465) [in your program, you want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2467) [make sure to verify your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2469) [assumptions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2470) [What do you expect your program](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2471) [to be doing?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2473) [And then, verify that it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2474) [actually doing that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2475) [This can be a great step, when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2477) [you start to debug issues in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2478) [your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2480) [Once you're pretty sure which of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2481) [your assumptions is being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2483) [violated, you can start by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2484) [looking for clues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2487) [You'll use the tools that we'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2490) [show you during this section to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2491) [poke and prod at your objects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2493) [and structs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2494) [And then, you're going to want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2496) [to test your hunches, by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2498) [changing state in your app, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2500) [verifying that you found the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2502) [issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2503) [Let's start with a sample bug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2504) [that's a real bug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2506) [One of the great things that I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2507) [get the privilege of working on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2510) [here at Apple, is the screenshot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2511) [editor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2513) [Recently, we were debugging an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2514) [issue, where my screenshot pen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2516) [tools were missing, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2518) [tools were missing, which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2518) [pretty bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2520) [Ben, are there any tools we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2521) [use to help diagnose this issue?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2524) [&gt;&gt; Absolutely.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2527) [Built right into Xcode, is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2528) [View Debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2530) [You can launch it by simply](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2532) [clicking on this icon in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2533) [bottom toolbar.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2534) [And, Xcode will show you a 3D](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2536) [representation of your entire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2538) [view hierarchy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2540) [As you can see here, our pencil](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2541) [controls are still there, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2544) [they're being occluded by this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2546) [full screen view in front of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2547) [So, we need to go and look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2550) [where we're building this UI,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2551) [and see what's happening with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2552) [the ordering there, Peter, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2553) [think.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2554) [&gt;&gt; That's great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2556) [The Xcode View Debugger is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2556) [wonderful tool for debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2558) [view issues in your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2560) [There are even more tools that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2562) [you can use to help out with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2564) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2567) [UIView recursiveDescription,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2568) [UIView parentDescription, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2570) [the class method](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2573) [UIViewController printHierarchy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2574) [are great tools for debugging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2576) [view and view controller issues](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2578) [in your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2580) [Again, they're also great things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2581) [to not include when you submit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2583) [to the App Store.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2585) [It's important to note that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2587) [these are Objective-C selectors.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2588) [So, before using them, you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2591) [want to put your debugger into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2592) [Objective-C mode, using this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2594) [command.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2596) [We're going to walk through each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2598) [of these debugging methods,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2599) [step-by-step, and how they can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2601) [help you, starting with UIView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2602) [recursiveDescription.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2605) [&gt;&gt; So, UIView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2608) [recursiveDescription will print](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2609) [the view hierarchy of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2611) [receiver -- the subview](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2614) [hierarchy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2615) [And, some associated properties](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2616) [to help you understand the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2618) [layout attributes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2619) [Let's take a look at an example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2620) [We have another bug in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2623) [screenshots UI with a missing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2624) [view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2626) [So, we're going to call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2627) [recursiveDescription on our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2628) [viewController's view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2629) [Now, this might look like a wall](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2632) [of debug text, and that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2635) [because it is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2636) [But, we know what we're looking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2637) [for.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2639) [for.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2639) [Our screenshots view is there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2640) [We can see it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2642) [And, on inspection, we can see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2643) [that it is currently hidden.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2645) [So, we need to go and look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2647) [everywhere we're setting the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2649) [hidden property on this view,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2650) [and really understand why it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2651) [not showing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2654) [In addition to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2656) [recursiveDescription, UIView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2656) [also has parentDescription,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2658) [which will walk up the view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2660) [hierarchy to the parent views,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2661) [until it reaches no -- to a nil](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2664) [parent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2666) [It'll print the same kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2667) [debugging information.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2668) [&gt;&gt; RecursiveDescription and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2671) [parentDescription are great for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2673) [UIView issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2675) [But, sometimes you have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2676) [problem with UIViewControllers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2678) [And, for that you can use the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2680) [great class method,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2681) [UIViewController printHierarchy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2683) [Recently we had a bug in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2687) [screenshot editor, where one of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2688) [our viewControllers had not yet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2690) [received the viewDidAppear](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2691) [message.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2693) [And so, it hadn't set up its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2694) [state appropriately.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2695) [By running UIViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2697) [printHierarchy, we can get an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2698) [printHierarchy, we can get an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2698) [output of all of our presenting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2701) [viewControllers, our presented](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2702) [viewControllers, our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2704) [parentViewControllers and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2706) [childViewControllers, and even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2708) [our presentationControllers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2710) [It's Controllerpalooza.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2712) [So, let's run printHierarchy in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2714) [our screenshot UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2716) [Here we can see our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2719) [viewController hierarchy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2720) [And, when we inspect the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2722) [viewController that we're having](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2723) [the problem with, we can see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2724) [that it's stuck in the appearing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2726) [state.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2728) [So, we had missed a callback.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2729) [And so, we need to look into our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2731) [app to where we're calling this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2732) [callback, and then we found the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2734) [issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2735) [So, great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2737) [Using these methods, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2738) [identify view and viewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2739) [issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2741) [But, sometimes you have a more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2743) [fundamental issue with your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2744) [And, for that we can use some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2746) [great state debugging tips that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2748) [we have for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2750) [LLDB's expression command can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2752) [let you run arbitrary code in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2755) [the debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2756) [Think about that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2758) [Any code that you can run in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2758) [Any code that you can run in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2758) [source editor, you can write](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2760) [right in the debugger, and run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2762) [while your program is running.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2764) [This is so useful for debugging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2766) [You can call functions on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2769) [structs, get properties on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2770) [objects, and better diagnose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2772) [what your program is doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2774) [For even more about debugging,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2777) [check out this great talk on how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2779) [to debug with LLDB from 2012,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2780) [and how to debug with Swift from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2783) [2014.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2785) [There's some great functions](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2787) [that you can run inside of LLDB](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2789) [with the expression command,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2791) [that we're going to teach you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2793) [And, the first one, is dump.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2794) [[ Laughter ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2796) [&gt;&gt; Dump will print all of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2801) [Swift objects and structs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2803) [properties.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2806) [Let's go through another bug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2808) [that we have in some of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2810) [custom UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2811) [We have a view with a number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2813) [subviews, including some labels,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2815) [and an imageView.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2817) [And, right now one of our labels](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2819) [And, right now one of our labels](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2819) [is missing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2820) [So, we're going to run dump on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2822) [our parent view, and take a look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2823) [at what's going on here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2825) [So, we've found our missing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2827) [label.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2828) [It is here, but it's -- if we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2829) [bring up and look at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2832) [imageView that's alongside it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2833) [we notice that the frame of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2835) [these two things, they both have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2838) [the same origin.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2839) [So, what's likely happening](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2842) [here, is that the label is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2842) [obstructed by the imageView.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2844) [So, we need to go and look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2847) [our layout code again, I think.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2848) [In addition to dump for Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2850) [objects, if you still have some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2854) [Objective-C code lying around,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2856) [NSObject also has the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2858) [ivarDescription method.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2860) [This will print all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2862) [instance variables of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2864) [Objective-C objects.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2865) [We have another bug in our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2868) [screenshot's code, where our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2869) [crop handles aren't working for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2871) [some reason.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2873) [If we call ivarDescription on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2874) [our screenshot's view, we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2877) [see by looking closely, that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2879) [see by looking closely, that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2879) [cropEnabled ivar is currently](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2882) [set to no.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2886) [So, we have a good place to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2887) [start investigating this bug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2889) [&gt;&gt; That's great.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2891) [Using dump and ivarDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2893) [are great ways to diagnose](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2895) [problems with your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2897) [Another wonderful debugging tip](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2900) [and trick that we have for you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2902) [is breakpoints.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2903) [Breakpoints let you pause the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2905) [program at arbitrary states of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2907) [execution, and run commands.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2908) [And, using the LLDB command](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2912) [line, or the Xcode UI, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2914) [even add conditions before these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2917) [breakpoints are run, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2919) [commands to run every time the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2920) [breakpoint is hit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2922) [Breakpoints are an essential](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2924) [part of your debugging workflow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2926) [And, you can use the expression](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2928) [command, and dump, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2929) [ivarDescription, with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2931) [breakpoints that you set up in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2932) [Xcode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2934) [I really encourage you to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2934) [breakpoints next time you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2936) [debugging an issue with your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2938) [app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2940) [But, sometimes we don't have an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2941) [issue with views or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2942) [viewControllers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2943) [We don't have an issue with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2945) [state, instead we have a really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2946) [hairy memory management issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2949) [Ben, are there any tools we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2952) [use for this?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2953) [&gt;&gt; Well, I'm glad you asked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2955) [Peter, because yes, there is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2956) [another great tool built into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2957) [Xcode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2959) [The Xcode memory debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2960) [This tool will help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2962) [visualize exactly how your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2964) [application is using memory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2966) [Peter and I were debugging an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2969) [issue the other day, where we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2970) [had a leaking viewController.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2971) [And, we could see that here that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2973) [it's being held onto by a block.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2975) [By enabling Malloc stack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2977) [logging, we were able to see the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2979) [full backtrace of exactly when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2980) [this block was allocated.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2982) [By zooming in, we can see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2984) [this block was actually created](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2987) [by that viewController.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2989) [And so, that block is holding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2991) [onto that viewController.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2992) [But that viewController is also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2994) [holding onto the block.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2995) [And, there's our retain cycle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2997) [&gt;&gt; Wow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2999) [Great! The Xcode memory graph](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3000) [debugger is such a great tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3001) [for diagnosing issues like this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3003) [in your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3005) [For even more, check out the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3007) [Debugging with Xcode 9 talk from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3008) [2017.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3010) [So, that's how you can debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3012) [your app like a pro.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3014) [Make sure to think like a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3018) [detective whenever you encounter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3020) [problems with your program.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3022) [Use the Xcode view debugger, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3025) [memory graph debugger to dive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3027) [deep on view- and memory-related](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3029) [issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3031) [And, use LLDB's expression](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3033) [command with dump, and all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3036) [other great debugging methods we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3039) [talked about here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3040) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3044) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3045) [&gt;&gt; So, we've covered six really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3052) [exciting topics this morning,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3054) [this afternoon.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3056) [But, we've barely scratched the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3056) [surface.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3059) [surface.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3059) [We encourage you to go out and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3060) [check out the talks that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3062) [referenced throughout this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3063) [presentation, and add even more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3063) [delight to your applications.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3065) [&gt;&gt; For more information, check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3068) [out our page on the developer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3070) [portal, and thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3071) [We hope you had a great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3073) [conference.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3074) [&gt;&gt; Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3074)