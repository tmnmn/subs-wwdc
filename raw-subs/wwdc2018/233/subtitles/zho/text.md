# Adding Delight to your iOS App

## Summary
iOS contains powerful technologies you can use to make your app truly delightful. Learn how to take your app to the next level with easy-to-implement features such as Handoff and External Display support. Preserve that feeling of magic in your app with pro-tips that combine animations, gestures and layout, while keeping your scrolling smooth, and your code scalable. Dive into the anatomy of a launch to get your app responsive quickly, and learn some great debugging tricks from the pros!

## Info
* Frameworks
* WWDC 2018 - Session 233 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/

## Text
 [（为你的iOS app增添光彩
使其变得奇妙的六个专业技巧）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=17) [嘿 伙计们！](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=20) [下午好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=21) [（演讲233）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=22) [欢迎来到
“为你的iOS app增添光彩”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=27) [我叫Ben](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=31) [我叫Peter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=32) [我们将向你展示六个专业技巧
来让你的app变得奇妙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=34) [我们将从外部显示器支持开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=38) [将你的app体验带到大屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=41) [接下来我们将为你介绍一种
全新的编程模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=46) [它被称为布局驱动UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=50) [然后我们将向你展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=52) [如何通过极速启动让你的客户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=53) [尽可能快地获得愉快体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=56) [我们将重点关注平滑滚动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=60) [并让用户体验感觉良好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=62) [连贯性是iOS上最神奇的体验之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=65) [我们将向你展示在你的app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=68) [实现接力是多么容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=71) [最后 我们将教你一些
超高级的调试技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=73) [并像专业人员一样进行调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=77) [我们有很多内容要涵盖
所以让我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=80) [iOS设备因其令人惊叹的
集成显示屏而声名远扬](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=88) [而你可以通过添加
对外部显示器的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=95) [来进一步提升app的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=98) [为了演示这一点
我们构建了一个演示app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=103) [内置于iOS中的屏幕镜像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=107) [它能够将整个系统UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=110) [复制到外部连接显示器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=112) [这是演示app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=116) [如你所见
这是一个简单的照片查看器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=117) [当你点击照片缩略图时
照片会滑入并全屏显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=120) [这整个体验都会复制到外部显示器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=125) [为了充分利用外部显示器的尺寸
我们可以将iPhone旋转为横向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=131) [从而填充它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=135) [这很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=139) [我们不需要做任何工作
就能够获得这种体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=140) [但我们可以做得更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=144) [还有一些内置于iOS中的API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=148) [允许你创建一个完全自定义的
第二用户界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=151) [并显示在此外接显示器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=155) [让我们来看看
这样做的几个app示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=159) [Keynote就是一个很好的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=165) [你可以在外部显示器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=168) [显示当前手头上的幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=170) [但在iPhone显示屏上
你可以看到演示笔记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=173) [和下一张幻灯片
这些是任何演讲必不可少的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=177) [和下一张幻灯片
这些是任何演讲必不可少的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=177) [又或者你有一个游戏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=182) [但通常情况下 它会有覆盖控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=185) [现在你可以创建一个
完全自定义的界面来控制你的游戏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=188) [并将其放在iOS设备的显示屏上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=193) [从而将完整流畅的
身临其境的游戏体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=196) [带到外部显示器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=201) [在为外部显示器设计app时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=205) [你应该考虑一些关键的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=209) [除了明显的尺寸差异外
你的iPhone是私人的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=213) [所以你应该考虑作为私有信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=219) [显示在屏幕上的那类信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=221) [而外部显示器通常位于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=225) [很多人可以看到它的环境中
例如客厅里的电视](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=228) [或会议厅的投影系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=234) [因此你应该假设在此显示屏上
显示的信息是公开的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=237) [因此你应该假设在此显示屏上
显示的信息是公开的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=237) [此外 iPhone和iPad的
内置显示屏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=243) [是可交互的
而外部显示器却不是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=245) [因此你应该避免在外部显示器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=250) [显示UI元素或其它可交互控件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=253) [所以让我们将这种想法
app到我们的演示app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=258) [并看看我们能做出什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=261) [这是我们针对外部显示器的优化版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=264) [如你所见 现在我们能够
在外部显示器上显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=268) [所选照片的完整尺寸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=273) [而在集成显示屏上
我们只显示缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=275) [和一个新的选中标志](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=278) [它显示了当前正在全屏显示的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=280) [虽然简单 但这是对该设计的
一种非常强大的用法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=285) [为了向你展示
我们如何在演示app中构建它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=290) [我们将讨论三个主题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=293) [连接、行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=296) [和连接转换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=298) [我们先从连接开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=301) [你如何知道是否连接了外接显示器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=303) [UIScreen有一个类变量
即screens](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=308) [其中包含所有已连接的显示器列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=311) [包括内置于iPhone的显示设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=313) [因此如果这个数组中的元素不止一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=316) [你就知道你连接了一个外部显示器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=320) [此外 由于外部显示器可以
随意连接和断开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=324) [UIKit会发布一些通知
以帮助你了解何时发生这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=330) [因此你应该监听UIScreen.didConnect
Notification](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=335) [和UIScreen.didDisconnect
Notification](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=339) [然后相应地调出或移除你的用户界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=342) [Peter 你能告诉我们的开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=346) [设置第二用户界面有多容易吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=348) [Ben 我很乐意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=350) [让我们看看UIScreen的
连接回调代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=352) [我们在这里将一个局部变量
设为屏幕数组中的最后一个屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=357) [我们在这里将一个局部变量
设为屏幕数组中的最后一个屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=357) [我们知道这是外部屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=362) [因为我们当前在
didConnectNotification回调中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=364) [接下来我们将创建一个新的UIWindow
用来显示在此外部显示器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=368) [并且我们将其screen属性
设置为该屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=373) [接下来我们要确保配置此窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=377) [我们将其归因到一个函数中
但我们在这里所做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=380) [创建一个根视图控制器
并将其绑定到窗口上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=383) [这和我们为板载显示器所做的一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=386) [最后我们要将此窗口标记为非隐藏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=389) [来将其显示在外部屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=393) [所以这就是连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=396) [现在我们来看看断开连接
这甚至更简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=397) [这里我们位于UIScreen.didDisconnect
Notification处理程序中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=401) [我们在这里要做的只是隐藏窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=406) [并将其局部引用设为nil
以释放任何资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=408) [就这么多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=412) [我们已经在app中实现了
屏幕连接和断开连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=413) [哇 Peter 这真容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=417) [接下来你要考虑的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=420) [是在连接上外部显示器时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=422) [更改app的默认行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=425) [让我们看看演示app中的
一些代码示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=429) [这是我们点击集合视图中的照片时
所调用的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=433) [当我们处于单一显示模式时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=438) [我们创建一个photoViewController
并将其压入我们的导航栈中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=440) [但当我们连接了外部显示器时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=445) [我们已经在第二个UI中
全屏显示了photoViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=448) [因此我们只是告诉它呈现那张照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=450) [非常容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=455) [在为外部显示器设计app时
应该考虑的第三件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=458) [是你应该使用优雅的过渡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=463) [来处理连接更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=465) [让我们回到演示app来说明这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=468) [这里你可以看到我们的演示app
正在显示完整尺寸的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=472) [而且我们还没有连接外部显示器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=477) [请看当我们连接时会发生什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=480) [这里所发生的事情是我们弹出了
viewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=486) [返回缩略图视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=488) [并同时在外部显示器上以全尺寸
显示刚才选中的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=492) [正是这些优雅的过渡
有效地保留了上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=497) [并帮助你的用户了解
他们在你的app流程中的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=503) [这就是外部显示器支持
它很容易设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=508) [只需在设计app时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=512) [考虑不同的显示上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=514) [并确保能够优雅地处理连接更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=516) [若想了解有关此内容的更多信息
请查看2011年WWDC的该演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=520) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=525) [（布局驱动UI）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=526) [布局驱动UI是一种强大的
app开发方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=531) [它使你的app便于添加功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=534) [并且更容易调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=538) [并且更容易调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=538) [布局驱动UI有助于我们解决iOS
app中大部分问题的首要原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=541) [即管理UI复杂性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=545) [我确信你曾遇到过这些问题
我知道我遇到过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=550) [你添加了一些代码和手势回调](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=554) [你甚至在通知回调中
添加了更多UI更新代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=557) [当UI控件被触发并获取值时
甚至更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=560) [突然间 你的app处于这种
奇怪且难以理解的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=564) [你必须沿着这些奇怪的顺序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=570) [才能重现这些不寻常的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=572) [当你向app添加更多功能时
问题会越来越严重](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=574) [如果我们改为遵循一个简单的配方
并将这些UI更新放到布局中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=580) [我们就可以摆脱这些漏洞
并使添加功能更容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=587) [让我们来看看为你的app
添加布局驱动UI的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=591) [你需要做的第一件事是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=597) [你需要识别并跟踪
影响UI的所有状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=599) [你需要识别并跟踪
影响UI的所有状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=599) [然后 每当状态发生变化时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=605) [你应该通过调用setNeedsLayout
来脏化布局系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=608) [最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=612) [你需要在layoutSubviews中
使用此状态来更新UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=614) [就是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=619) [我喜欢这个配方就是因为它的易用性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=620) [如果我们将布局驱动UI
全面应用于我们的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=625) [同时考虑iOS app的
三个核心组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=630) [即布局、动画和手势
你会发现我们对这三者的实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=634) [能以一种非常棒的方式和谐地工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=639) [让我们从布局开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=645) [布局是你在屏幕上定位](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=649) [app内容的过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=652) [但我们也建议你在布局中
执行所有其它UI更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=655) [但我们也建议你在布局中
执行所有其它UI更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=655) [看一个我们写的简单示例app
以突出显示这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=660) [Ben 你能带我们
看看这个app吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=664) [当然 Peter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=667) [这是一个非常简单的示例app
中间有个很酷的家伙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=669) [当我们感觉很酷时
它会显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=673) [否则它会隐藏起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=674) [但我们现在感觉很酷 Peter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=677) [所以让我把它显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=679) [很好 虽然这是一个简单的例子
但演示它非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=681) [以便我们可以理解
布局驱动UI的工作原理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=686) [让我们来看看这个app的骨架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=690) [以及Ben之前向我们展示的
布局驱动UI配方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=694) [一管理视图 在coolView中
托管着这个酷家伙的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=698) [这是我预先写好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=702) [那么 Ben 我们配方的
第一步是什么？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=705) [我们需要识别并跟踪
影响我们的UI的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=708) [记住Ben说的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=713) [当我们感觉很酷时
酷家伙就出现在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=715) [否则它就不在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=718) [所以我猜我们会有一个
名为feelingCool的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=720) [好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=723) [Ben 配方的第二步是什么？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=724) [现在 每当这种状态改变时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=727) [我们需要通过调用setNeedsLayout
来脏化布局系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=729) [但我们需要确保每次状态发生变化时
都会进行该操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=733) [此状态可能会在我们app中的
各个位置发生改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=737) [那么 Peter
我们怎样才能确保当变化发生时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=741) [我们总能脏化布局系统呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=744) [我很高兴你问这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=745) [因为我觉得我对此有个好主意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=746) [我们可以使用一个名为
Swift属性观察器的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=749) [它让我们能够在属性被设置
之前或之后运行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=753) [因此我们可以使用
didSet属性观察器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=757) [来调用
setNeedsLayout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=760) [这是在你的app中使用
Swift属性观察器的绝好时机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=762) [好的 我们差不多完成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=767) [Ben 配方的最后一步是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=769) [Peter 通过使用该状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=771) [我们需要在layoutSubviews中
更新我们的UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=773) [好的 这很简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=777) [覆盖layoutSubviews
并基于feelingCool值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=779) [覆盖layoutSubviews
并基于feelingCool值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=779) [更新酷家伙视图的
isHidden属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=783) [就是这样 这就是为你的app添加
布局驱动UI所需要做的全部工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=787) [这不仅对这个简单的例子非常有效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=791) [它也适用于一些更早
且更复杂的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=795) [Ben和我昨晚熬夜玩了
这个新的macOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=798) [《万智牌》卡牌游戏
它席卷了整个Apple园区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=802) [我们写了有趣的卡堆生成器app
来帮助我们赢得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=807) [下周末的比赛 我们真打算这么干](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=810) [它允许你拿起并拖动这些卡片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=812) [并且你可以将它们扔进这个卡堆区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=815) [它非常迅速、有趣和流畅
我们可以同时拿两张卡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=817) [我认为我们可以通过该app
真正向你展示布局驱动UI如何工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=822) [而且很重要的是
我们可以在下周末击败Ben的同事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=827) [所以让我们来看看iOS app的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=831) [另外两个核心组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=834) [以及我们如何将布局驱动UI
应用于它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=835) [先从动画开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=838) [先从动画开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=838) [动画是任何卓越iOS体验的标志](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=841) [用户界面的逼真动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=846) [真正让app看起来像活的一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=849) [UIKit提供了一些很棒的API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=852) [来帮助你创建这些赏心悦目的动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=854) [UIViewPropertyAnimator API
是一个非常强大的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=858) [并且去年它增加了大量新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=863) [若想了解如何使用其所有信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=866) [请观看2017年WWDC中的演讲
“使用UIKit实现高级动画”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=868) [除此之外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=874) [久经考验的UIView闭包API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=876) [也是制作这些动画的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=878) [太棒了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=882) [我们可以将UIViewAnimations
用于我们的布局驱动UI app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=883) [要记住的一件事是我们总是想要使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=889) [beginFromCurrentState动画选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=892) [这告诉UIKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=895) [在播放动画时
获取视图的当前屏幕位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=897) [在播放动画时
获取视图的当前屏幕位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=897) [即使是在动画运行中期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=900) [所以这让我们实现了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=904) [这些非常精彩的和可中断的互动动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=905) [让我们来看看macOS上的
《万智牌》卡牌游戏app中的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=909) [这里有一个变量来跟踪
我们卡堆中的牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=915) [通过使用我们之前讨论过的
Swift属性观察器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=919) [每当其发生变化时 我们可以调用
setNeedsLayout()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=923) [来脏化布局系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=926) [然后当我们想要在卡堆中放一张牌时
我们所要做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=929) [将该卡添加到此数组中
这将脏化我们的布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=934) [然后在动画块内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=938) [设置这个beginFromCurrentState选项
并调用layoutIfNeeded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=940) [这将触发对layoutSubviews
中的代码调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=946) [它会移动我们的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=949) [播放适当的动画以及进行状态转换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=951) [我想在这里特别强调的
关于这其中最棒的一点是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=954) [我们没有为这些动画
添加任何特殊情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=958) [我们没有为这些动画
添加任何特殊情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=958) [我们只是通过在动画块内部进行布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=962) [而轻易得到这个动画布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=965) [这真的非常棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=969) [这就是我们如何将动画
添加到布局驱动UI app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=971) [最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=976) [我们来谈谈iOS app的
第三个核心方面 即手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=977) [当然](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=981) [不谈论UIGestureRecognizer
我们就无法谈论手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=983) [它是UIKit中用于为你的app
添加手势交互的强大API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=987) [UIKit提供了许多
UIGestureRecognizer的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=993) [很棒的具体子类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=996) [其涵盖从拖动到捏合到滑动
到旋转等所有内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=998) [你可以使用它们创建所需的交互类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1002) [它们也是高度可定制的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1005) [如果你想要一些非常疯狂的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1008) [你也可以自己继承
UIGestureRecognizer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1011) [当查看内置的
UIKitGestureRecognizer时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1016) [了解离散和连续手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1019) [了解离散和连续手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1019) [之间的差异非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1021) [离散手势告诉你某个事件发生了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1025) [它们从Possible状态开始
然后不经过其它过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1029) [它们也不收200美元](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1033) [而是立即进入
Recognized状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1035) [这对你的app中的
一次性互动非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1038) [但不会告诉你交互过程中的各个阶段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1042) [另一种类型的手势是连续手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1047) [它们为你提供更高级别的保真度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1050) [与离散手势一样
它们也从Possible状态开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1054) [但随着它们开始被认出
它们会转移到Began状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1057) [在进行跟踪时
它们进入Changed状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1062) [当手势四处移动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1065) [你会接收到连续的事件流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1068) [最后 当手势完成后
它会转移到Ended状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1071) [我们最喜欢的连续手势之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1077) [我们最喜欢的连续手势之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1077) [是UIPanGestureRecognizer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1080) [而且有两个很棒的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1082) [可以帮助你充分利用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1085) [translationInView
会告诉你 相对于你的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1088) [你的手势跟踪的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1091) [而velocityInView
会告诉你手势的移动速度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1094) [这对于在手势和后续动画之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1098) [切换速度非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1102) [若想了解如何使用它们构建
真正优秀的手势交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1105) [请查看2014年WWDC中的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1109) [构建可中断和响应式交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1112) [我也喜欢
UIPanGestureRecognizer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1116) [我们用它构建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1119) [你之前看到的卡片拖动行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1120) [让我们看看我们是如何
使用布局驱动UI做到这一点的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1124) [我们这里也有一个局部变量
用于跟踪已被应用手势的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1129) [每张卡片的偏移量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1133) [注意每当此变量发生变化时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1137) [注意每当此变量发生变化时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1137) [我们都使用Swift的属性观察器
触发setNeedsLayout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1140) [接下来 在我们的
PanGestureRecognizer的回调函数中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1146) [我们将从手势中获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1150) [当前的变化和视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1152) [并将此手势与我们的一张卡相关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1154) [然后我们在该字典中
增加此卡的偏移量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1158) [最后 在layoutSubviews中
我们将根据卡片在此字典中的偏移量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1165) [更新它们的视图的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1169) [再次注意 我们并没有做
任何特别的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1176) [除了传统的布局驱动UI事务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1181) [我们只是使用了这个状态
它碰巧是由手势驱动的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1184) [并且在layoutSubviews中响应它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1188) [事实上 如果你在整个app中
遵循此模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1191) [你会发现它让很多这类交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1195) [变得更容易使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1197) [这就是布局驱动UI
请记住该配方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1200) [查找并跟踪影响UI的所有状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1204) [并使用Swift属性观察器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1208) [来在此状态发生变化时
触发setNeedsLayout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1210) [最后 在layoutSubviews的实现中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1214) [确保根据你所跟踪的状态
来更新你的视图状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1217) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1223) [iOS体验的核心就是强响应性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1229) [你希望你的用户可以尽可能快地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1234) [获得愉悦的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1238) [在点击你的图标并获得这种
愉悦体验之间还差一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1240) [而这一步就是你的启动时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1246) [为了帮助你优化这点
我们将向你展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1252) [构成启动内部过程的五个高级组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1256) [构成启动内部过程的五个高级组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1256) [从第一个开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1262) [即进程分叉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1264) [Peter 在启动阶段
我们能做些什么呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1267) [至于进程分叉 它真的很复杂](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1270) [你需要阅读
分叉和执行的帮助页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1273) [并熟悉POSIX基础知识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1276) [不 我只是在开玩笑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1280) [iOS将为你处理进程分叉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1281) [我们为你处理了第一步
现在来看看第二步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1285) [动态链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1291) [在此阶段 我们分配内存以开始
执行你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1294) [我们链接库和框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1299) [我们初始化Swift、Objective-C
和Foundation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1302) [我们也进行静态对象初始化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1306) [通常我们会看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1310) [它可能占app典型启动时间的
40%到50%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1311) [要记住的一件重要的事情是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1317) [此时你的代码还没有开始运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1318) [此时你的代码还没有开始运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1318) [因此了解如何优化它至关重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1322) [Peter 你对开发者
有何好建议吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1326) [我很高兴你问这个问题 Ben](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1328) [在优化app启动的链接阶段时
请务必要谨慎](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1332) [因为它占用了大量的启动时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1336) [我给你的第一条建议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1341) [是尽可能避免代码重复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1343) [如果你有多余的函数、对象或结构
请从你的app中删除它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1346) [不要重复自己](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1352) [接下来 你最好限制使用第三方库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1355) [iOS自己的库会被缓存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1360) [并且如果另一个app正在使用它们
则它可能已处于活动内存中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1362) [但第三方库不会被缓存](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1368) [即使其它app使用
与你相同版本的库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1371) [如果你的app也使用它
我们仍然需要重新加载该框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1375) [因此你应该尽可能多地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1378) [因此你应该尽可能多地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1378) [限制使用这些第三方库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1381) [最后 你要避免使用静态初始化器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1383) [避免在诸如+initialize
和+load等的方法中有任何行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1388) [因为它们必须在你的app
可以执行任何有意义的工作之前运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1393) [若想了解有关启动时间
这一重要部分的更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1398) [请观看2017年WWDC中的演讲
app启动时间：过去、现在和未来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1402) [启动的下一阶段是UI构建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1408) [此时你正在准备UI
并构建viewControllers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1412) [系统会进行状态恢复
并载入你的首选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1418) [你也会加载为了让你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1423) [变得具有响应性所需的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1426) [Peter 我们可以在该启动阶段
做些什么来优化呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1429) [你需要尽可能快地优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1433) [app中的UI构建阶段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1436) [这意味着你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1439) [这意味着你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1439) [从UI app激活方法中尽快返回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1442) [即WillFinishLaunching](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1445) [didFinishLaunching
和didBecomeActive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1447) [因为UIKit只有
在你从这些函数返回之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1450) [才将你的app标记为活跃状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1453) [接下来 你需要在app启动期间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1457) [避免任何文件系统写入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1461) [因为它们是阻塞的
并需要进行系统调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1463) [同样的 你也需要在app启动期间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1466) [避免执行非常大的读取操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1470) [相反 你应该只读入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1473) [你现在绝对需要的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1475) [最后我建议你检查数据库的健康状况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1479) [保持整洁总是一个好主意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1482) [如果你使用的是
像Core Data这样的库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1485) [考虑优化你的模式以使其尽可能快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1488) [而如果你使用SQLite
或类似技术来实现自己的解决方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1492) [考虑定期清空数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1497) [考虑定期清空数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1497) [例如在每次你的app更新时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1500) [谢谢 Peter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1503) [启动的下一阶段是
我们创建你的第一帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1506) [此时Core Animation
正在进行必要的渲染](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1511) [来准备好那个帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1514) [它会进行文字绘图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1517) [并加载和解压缩任何需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1518) [在你的UI中显示的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1520) [Peter 你对启动的这个阶段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1524) [有更多的高见吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1526) [当然有 在准备第一帧时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1528) [你务必要谨慎](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1531) [并只准备你在启动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1534) [绝对需要的用户界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1537) [如果你的用户尚未导航到
app的特定部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1538) [那就不要加载它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1543) [相反 你应该将加载操作
延迟到绝对必要的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1544) [此外 你应该避免隐藏不应该显示的
视图和图层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1548) [当我们首次导航到你的app时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1553) [即使你隐藏了视图和图层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1556) [它们也需要成本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1558) [所以只引入首帧中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1559) [所以只引入首帧中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1559) [必要的视图和图层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1561) [启动的最后阶段就是我们所说的
扩展启动操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1565) [这些是你在启动路径中
可能推迟的任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1572) [从而帮助你更快地获得响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1574) [虽然你的app可能会
在此时做出响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1579) [但它还无法使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1582) [这个阶段的核心在于
优先考虑下一步该做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1585) [引入当前必须显示在屏幕上的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1589) [并且如果要从远程服务器加载内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1593) [请务必考虑你可能处于
不稳定的网络状况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1596) [必要时可以显示占位符UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1600) [所以这些就是构成启动步骤的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1606) [五个高级组件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1608) [我们今天还为你准备了一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1612) [ABM](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1615) [A代表总是 B代表进行
M代表测量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1618) [A代表总是 B代表进行
M代表测量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1618) [只有快的app才能享受咖啡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1621) [你必须了解启动时间花费最多的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1624) [因此使用Time Profiler定期测量它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1628) [每次更改启动路径中的代码时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1632) [你都需要重新测量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1635) [并取统计平均值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1637) [不要依赖单次测试
来检查你的启动时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1639) [这就是极速启动部分的内容
让响应变得快速](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1643) [仅使用你需要的内容
并测量 测量 再测量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1647) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1651) [（平滑滚动）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1654) [滚动是iOS用户体验的关键部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1659) [也是你app中的大部分体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1664) [iPhone和iPad
是神奇的玻璃板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1668) [它们可以变成你的app
想要它们变成的任何东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1672) [所以你必须努力保持这种
你的app内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1677) [所以你必须努力保持这种
你的app内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1677) [在这块神奇的玻璃板上滑动的错觉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1680) [在Apple 我们有一句老话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1685) [你的app应该像黄油一样平滑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1687) [但有时候app会拖沓和卡顿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1691) [这使它感觉不像黄油 而像是花生酱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1695) [而且你应该遇到过这种情况
你的app感觉不连贯或卡顿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1700) [Ben app行为缓慢
的原因有哪些呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1704) [Peter
你所描述的这种缓慢行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1709) [其实是由于我们丢帧了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1712) [所以我们需要理解
为什么会发生这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1715) [这可能发生在两个关键地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1717) [首先 你可能做了太多的计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1720) [其次 你可能做了太多
复杂的图形合成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1724) [让我们依次看一下这些情况
先从计算开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1730) [你怎么知道是否做了太多的计算呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1734) [内置于Instruments中的
Time Profiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1738) [内置于Instruments中的
Time Profiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1738) [是此目的的终极工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1741) [它可以为你提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1743) [执行每个代码行所需的CPU时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1747) [这是一个非常强大的工具
我们鼓励你去看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1750) [在2016年WWDC中的演讲
“使用Instrument中的Time Profiler”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1753) [一旦你使用
Time Profiler工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1758) [发现了这些热点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1761) [我们为你提供了一些很棒的优化技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1763) [首先是使用UICollectionView
和UITableView预取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1767) [这些API会告诉你用户何时
针对某些单元格进行滚动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1772) [并且为你提供预加载该数据的机会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1776) [2016年有两位非常英俊的主持人
就此发表了精彩的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1781) [我非常鼓励你观看它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1785) [我给你的下一个技巧是
将尽可能多的工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1789) [移出主队列并放入后台队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1793) [腾出主队列以便更新UI
并处理用户输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1797) [腾出主队列以便更新UI
并处理用户输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1797) [Ben 我们可以从主队列
移出哪类工作呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1802) [你期待的可能是一些平常的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1806) [比如网络和文件系统访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1808) [它们永远不应该在主线程上运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1811) [但你可能没想到其它一些东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1814) [比如图像绘制和文本大小调整](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1816) [UIGraphicsImageRenderer
及其分布式字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1818) [都具有可在后台线程上
安全使用的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1822) [这正可以帮助你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1824) [将一些复杂计算移出主队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1827) [哇 Ben 这些都是很棒的技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1833) [我从未想过要在主队列之外做这些事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1834) [假设我已经运行了
Time Profiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1838) [我也使用了预取
就像那些家伙告诉我的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1841) [并且我已将尽可能多的工作
移出了主队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1844) [但我的app仍然很慢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1847) [这肯定不是我的问题
对吧 Ben](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1849) [好吧 Peter
我们可能还没有走出困境](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1852) [虽然我们可能已经优化了计算](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1856) [我们仍然可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1859) [我们仍然可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1859) [遇到图形系统的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1861) [幸运的是 这里有另一个很棒的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1865) [Core Animation Instrument
是一个非常强大的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1869) [可以用来准确了解
你的帧速率正做的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1872) [同时它还可以查看你的GPU利用率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1875) [它是另一个非常强大的工具
若想了解如何使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1879) [请查看2014年WWDC中的演讲
“iOS app中的高级图形和动画”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1884) [一旦确定你的app是图形约束型的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1890) [你就可以调查一些很易于发现的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1894) [你有一个图形约束型app
通常是由于过度使用以下两者之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1898) [即视觉效果 或遮罩和剪裁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1903) [视觉效果 如毛玻璃效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1907) [它们的代价昂贵
因此你应该在app中适当使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1910) [你也应该避免做在模糊效果上
继续模糊这样的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1914) [因为这导致GPU在高速模式下工作
从而拖慢你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1919) [因为这导致GPU在高速模式下工作
从而拖慢你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1919) [此外 你应该尽可能避免遮罩和剪裁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1925) [如果你可以在视图顶部
放置不透明内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1929) [即可达到相同的视觉效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1934) [那么我鼓励你这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1937) [而不是使用UIViewer CALayer的
遮罩视图或遮罩属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1939) [这就是我们如何优化平滑滚动的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1945) [确保在你的app上
运行Time Profiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1949) [和Core Animation
Instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1951) [使用预取并尽可能多地
从主队列中移出工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1955) [并节制地使用视觉效果和遮罩及剪裁](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1960) [有关分析的更多信息 请查看
2015年WWDC中的精彩演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1965) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1971) [（保持连贯性）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1972) [连贯性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1976) [是Apple平台上
最神奇的体验之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1977) [是Apple平台上
最神奇的体验之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1977) [而接力是真正让用户满意的绝佳方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1982) [能够从一台设备获取任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1987) [并将其无缝转移到另一台设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1991) [绝对是一次非常棒的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1995) [接力适用于iOS
macOS和watchOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=1999) [它不需要互联网连接
因为它使用点对点连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2003) [而对于你们来说最重要的是
它设置起来非常容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2008) [那么你应该如何看待在app中
使用接力呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2014) [让我们来看一些我们在
Apple app中应用它的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2018) [假设我从我的英俊搭档那里
得到一条消息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2023) [我想在我的iPhone X上
用一个幽默表情回复他](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2027) [我可以用iOS上的
App Switcher](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2032) [直接回到该谈话中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2034) [或者如果我在Mac上的
Pages中编辑文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2038) [或者如果我在Mac上的
Pages中编辑文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2038) [而现在我必须离开电脑
所以我想把它传到我的iPad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2042) [我可以通过点击Dock中的图标
来做到这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2046) [或者如果我随意在手表上浏览照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2050) [我找到了之前的一张WWDC的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2054) [而我想看看那张专辑中的所有照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2056) [我可以在iPhone上
直接回到该照片库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2059) [而无需搜索那张照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2062) [接力非常强大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2066) [它可以在设备之间传递内容时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2068) [为你的用户节省大量时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2070) [我们将向你展示使用它是多么容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2074) [它完全建立在
NSUserActivity API之上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2076) [NSUserActivity
表示你当前所处的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2082) [或正在进行的活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2086) [在这个例子中
我们正在撰写电子邮件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2087) [创建此活动时 附近所有登陆
同一个iCloud账户的设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2092) [都会显示接力可用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2097) [都会显示接力可用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2097) [在Mac上
你将在Dock中看到一个图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2102) [当你单击此邮件图标时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2106) [该活动将转移到Mac](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2109) [而且Mail将会启动
并从你中断的位置继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2113) [让我们看一下设置它所需的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2118) [在源设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2124) [首先要创建具有给定类型的
NSUserActivity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2126) [此类型代表了你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2130) [当前正在进行的一种活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2132) [然后设置标题并将
isEligibleForHandoff设置为true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2136) [接着你需要填充
userInfo字典](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2140) [你需要填入为了继续此活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2144) [所需的所有信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2147) [在这个例子中 我们用的是一个视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2150) [并且我们填入视频ID
和当前播放时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2153) [最后 你需要将此活动设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2158) [最后 你需要将此活动设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2158) [viewController的
userActivity属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2160) [每当显示该
viewController时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2163) [这都会使它成为当前活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2166) [这就是你需要在源设备上
做的所有事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2169) [在后续设备上
首先 你的app需要声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2172) [它能够支持你创建的该活动类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2177) [然后你需要实现两个
UIApplicationDelegate回调](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2180) [第一个是application(_:willContinue
UserActivityWithType:)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2184) [只要你点击或点按图标以启动接力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2188) [就会调用此函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2191) [此时 我们还没有准备好
NSUserActivity对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2194) [但你知道将要继续的活动类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2198) [因此你就可以先开始准备UI了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2201) [很快 你将收到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2204) [application(_:continue:
:restorationHandler:)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2206) [其将包含完全重建的
NSUserActivity对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2209) [此后你就可以设置好并在该设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2214) [继续原先的体验了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2218) [若信息多于userInfo字典中
能够存储的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2220) [你可以使用NSUserActivity的
一个强大功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2224) [它被称为延续流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2228) [你所要做的就是将
supportsContinuationStreams属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2230) [设为true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2234) [然后在后续设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2236) [你将调用
NSUserActivity上的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2239) [getContinuationStreams方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2242) [它将为你提供输入和输出流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2244) [在源设备上
NSUserActivity的委托方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2248) [将收到一个回调
并也为其提供相应的输入和输出流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2252) [通过这些管道 你就可以在源设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2257) [和后续设备之间进行双向通信](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2261) [但你最好尽快完成这个过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2265) [因为用户可能正在离开
并断开两个设备的连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2268) [关于流的更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2272) [请查看developer.apple.com上的
“流编程指南”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2274) [这非常适合传输某些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2278) [这非常适合传输某些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2278) [不适合放入userInfo字典
的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2280) [比如图片或视频内容
就像我们刚才的电子邮件接力示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2283) [但对于基于文档的app
接力过程更加容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2288) [因为你自动获得了很多这种行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2293) [UIDocument和NSDocument
会自动创建NSUserActivity对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2296) [以表示当前正在编辑的文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2300) [这适用于存储在
iCloud中的所有文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2305) [你在app中所要做的就是
配置相应的info.plist](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2310) [除了app到app接力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2316) [我们还支持app到网页浏览器接力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2318) [如果你拥有出色的网页体验
其可以与原生app体验并驾齐驱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2323) [而且后续设备未安装原生app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2328) [你可以接力到Safari
并在网络浏览器中继续该活动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2332) [接力还支持网页浏览器
到app的接力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2338) [接力还支持网页浏览器
到app的接力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2338) [你需要在网络服务器上配置
已批准的app ID列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2343) [然后你需要在iOS app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2347) [添加相应的域权利](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2350) [接下来用户可以无缝地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2352) [从你的网页体验
接力到iOS上的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2355) [关于这点的更多信息
请查看2014年关于接力的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2358) [这就是接力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2365) [走出去并在你的app中实现它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2367) [从而真正让你的用户满意
另外作为额外奖励](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2369) [NSUserActivity API
被用于整个系统体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2373) [比如类似Spotlight搜索
和新Siri快捷方式这样的功能中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2377) [有关此内容的更多信息
请查看以前WWDC中的这些演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2381) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2385) [你写出了很棒的app和体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2396) [但你有时会遇到需要调查的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2400) [为此我们将教你一些
超高级的调试技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2405) [但首先要提醒一句](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2410) [在我们给你这个红药丸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2414) [并告诉你兔子洞有多深之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2417) [我想告诉你我们在这部分
向你展示的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2419) [虽然非常适合调试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2422) [但不得提交到App Store](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2424) [如果你这样做 你的申请将被拒绝](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2427) [你将度过糟糕的一天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2430) [现在有了这个警告 让我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2432) [首先我们将从侦探的心态开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2435) [你该如何处理程序中发现的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2438) [接下来 我们将与你讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2443) [如何调试视图和视图控制器中的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2444) [我们将教你LLDB](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2448) [以及如何使用它
来识别app中的状态问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2450) [最后 我们将讨论一些技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2454) [用于处理你可能遇到的一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2456) [让你感觉糟糕的重大内存问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2459) [让你感觉糟糕的重大内存问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2459) [让我们从侦探心态开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2462) [当你查看程序中的问题时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2465) [你需要确保验证你的假设](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2469) [你期待你的程序做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2471) [然后验证它实际上正是这样做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2474) [当你开始调试app中的问题时
这可能是一个很好的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2477) [一旦你非常确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2481) [你的哪个假设被违反了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2484) [你可以从寻找线索开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2485) [你将使用我们在本节中
向你展示的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2489) [来仔细检查你的对象和结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2494) [然后你需要通过更改app中的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2496) [来测试你的预感
并验证你是否发现了问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2499) [让我们从一个示例漏洞开始
这可是一个真正的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2504) [作为Apple员工
我得到的最棒特权之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2509) [就是可以使用截屏编辑器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2510) [最近我们正在调试一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2514) [即我的截屏笔工具丢失了
这非常糟糕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2517) [即我的截屏笔工具丢失了
这非常糟糕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2517) [Ben 有什么工具可以用来
帮助诊断这个问题吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2523) [当然有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2527) [Xcode中
有一个内置的视图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2528) [只需单击底部工具栏中的此图标
即可启动它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2532) [Xcode会向你展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2536) [整个视图层次结构的3D表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2539) [正如你在这里看到的
我们的铅笔控件仍然在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2542) [但是它们被前面的全屏视图遮挡了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2546) [因此我们需查看
我们构建这个UI的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2550) [检查顺序出了什么问题
我这样认为 Peter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2552) [这很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2555) [Xcode视图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2556) [是调试app中视图问题的绝佳工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2558) [还有更多工具可以用来
帮助解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2562) [UIView recursiveDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2568) [UIView _parentDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2570) [以及类方法UIViewController
_printHierarchy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2573) [是用于在app中调试视图
和视图控制器问题的绝佳工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2576) [是用于在app中调试视图
和视图控制器问题的绝佳工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2576) [同样 它们虽然很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2581) [但你无法将其提交到
App Store中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2583) [重要的是要注意它们是
Objective-C选择器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2587) [因此在使用它们之前
你需要使用此命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2591) [将调试器设为
Objective-C模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2593) [我们将逐步介绍每种调试方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2598) [以及它们如何帮助你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2602) [先从UIView
recursiveDescription开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2603) [UIView recursiveDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2608) [将打印出接收者的视图层次结构
即子视图层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2611) [以及一些相关的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2616) [以帮助你了解布局属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2618) [让我们来看一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2621) [我们的截屏UI中
还有另一个缺少视图的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2623) [我们将在viewController的视图上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2627) [调用recursiveDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2629) [这看起来像是一面调试文本墙
因为它的确是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2633) [但我们知道我们在寻找什么
我们的截屏视图就在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2638) [但我们知道我们在寻找什么
我们的截屏视图就在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2638) [我们可以看到它 而在审查中
我们看到它目前是隐藏的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2642) [所以我们需要看看我们在这个视图上
设置隐藏属性的所有地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2648) [并搞清楚为什么它没有显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2651) [除了recursiveDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2656) [UIView还有parentDescription
它将向上查看父视图的视图层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2658) [直到它到达一个值为nil的父视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2662) [它将打印相同类型的调试信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2667) [recursiveDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2672) [和parentDescription
非常适合处理UIView问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2673) [但有时候你遇到的是
UIViewController的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2676) [为此你可以使用一个很棒的类方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2680) [即UIViewController
printHierarchy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2683) [最近我们的截屏编辑器中
出现了一个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2686) [我们的一个viewController无法收到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2689) [viewDidAppear消息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2692) [所以它没有适当地设置其状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2694) [通过运行UIViewController
printHierarchy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2697) [我们可以获得来自以下对象的输出
即所有正在呈现的viewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2700) [我们提供的viewController
我们的parentViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2703) [和childViewController
甚至我们的presentationController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2708) [这简直是是控制器大荟萃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2712) [所以让我们在截屏UI中
运行printHierarchy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2714) [这里我们可以看到
我们的viewController层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2719) [而当我们检查发生问题的
viewController时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2722) [我们可以看到
它卡在了appearing状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2725) [所以我们错过了回调
因此我们需要查看app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2729) [调用此回调的位置
然后我们发现了问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2732) [太棒了 通过使用这些方法
你可以识别视图和视图控制器问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2737) [但有时你的app存在更基本的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2743) [为此我们可以使用一些
我们为你准备的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2747) [很棒的状态调试技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2750) [LLDB的表达式命令可以让你
在调试器中运行任意代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2751) [想想这点 你在代码编辑器中
可以运行的任何代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2757) [想想这点 你在代码编辑器中
可以运行的任何代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2757) [现在都可以在调试器中直接编写
并在程序运行时运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2761) [这对调试非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2766) [你可以调用结构上的函数
获取对象的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2769) [并更好地诊断你的程序正在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2773) [有关调试的更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2777) [请观看2012年的精彩演讲
“如何使用LLDB进行调试”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2779) [以及2014年的演讲
“如何使用Swift进行调试”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2783) [你可以在LLDB中使用表达式命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2787) [运行一些我们将教你的很棒的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2791) [第一个是dump](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2794) [dump将打印
所有Swift对象和结构属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2801) [我们来看看我们的一些自定义UI中
遇到的另一个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2808) [我们有包含些子视图的视图
包括标签和一个imageView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2813) [而现在我们的一个标签丢失了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2819) [而现在我们的一个标签丢失了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2819) [因此我们将在父视图上运行dump](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2822) [并看看这里发生了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2824) [我们发现了丢失的标签 它就在这里
但是如果我们看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2827) [位于它旁边的imageView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2833) [我们注意到这两者的frame属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2835) [都具有相同的源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2839) [所以这里可能发生的是
标签被imageView阻挡了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2842) [因此我想我们需要再次查看
我们的布局代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2847) [除了对Swift对象的
dump函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2851) [如果你还有一些
Objective-C代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2855) [NSObject也有
ivarDescription方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2858) [这将打印出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2862) [Objective-C对象的
所有实例变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2863) [我们的截屏代码中还有另一个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2868) [我们的裁剪处理功能
出于某些原因无法工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2871) [如果我们在截屏的视图中调用
ivarDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2875) [我们仔细观察可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2879) [我们仔细观察可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2879) [cropEnabled ivar
目前设置为NO](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2882) [因此我们知道从哪开始研究这个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2887) [这很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2891) [使用dump
和ivarDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2893) [是诊断app问题的好方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2895) [我们为你准备的另一个很棒的
调试技巧和窍门是断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2900) [断点可以让你在任意执行状态下
暂停程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2905) [并运行命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2910) [并且通过使用
LLDB命令行或Xcode UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2912) [你甚至可以在运行这些断点之前
添加条件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2917) [并且设置每次命中断点时
所要运行的命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2920) [断点是调试工作流程的重要组成部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2924) [你可以在Xcode中设置的断点中
使用表达式命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2928) [dump
和ivarDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2932) [我真的鼓励你下次调试app问题时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2934) [能够使用断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2937) [但有时我们的view
或viewController没有问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2941) [我们的状态也没有问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2945) [我们遇到的是一个非常棘手的
内存管理问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2948) [Ben 为此我们有何工具使用吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2952) [我很高兴你问这个问题 Peter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2955) [因为Xcode中
的确还有另一个很棒的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2956) [即Xcode内存调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2960) [此工具将帮助你可视化
app使用内存的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2963) [Peter和我
前几天在调试一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2969) [我们有一个泄漏的
viewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2971) [这里我们可以看到
它正被一个块所持有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2973) [通过启用Malloc堆栈日志记录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2977) [我们能够看到分配此块时的完整回溯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2979) [通过放大 我们可以看到这个块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2986) [实际上由该
viewController创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2987) [因此那个块持有着
viewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2991) [但该viewController
也持有该块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2994) [这就是一个持有循环](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2997) [哇 太棒了
Xcode内存图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2999) [哇 太棒了
Xcode内存图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=2999) [是一款非常棒的工具
它可以在你的app中诊断此类问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3002) [欲了解更多 查看2017年的演讲
“使用Xcode 9进行调试”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3007) [以上就是如何像专业人士一样
调试你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3013) [每当你遇到程序问题时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3018) [记住一定要像侦探一样思考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3021) [使用Xcode视图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3025) [和内存图调试器深入研究
视图和内存相关的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3027) [并使用LLDB的
表达式命令与dump](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3033) [以及我们在这里谈到的
所有其它优秀的调试方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3038) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3044) [今天早上我们讨论了
六个非常激动人心的话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3052) [甚至今天下午](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3056) [但这些仍只是一些皮毛](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3058) [但这些仍只是一些皮毛](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3058) [我们鼓励你查看我们在整个演讲中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3060) [所引用的那些演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3063) [并为你的app增添更多光彩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3064) [更多相关信息
请查看开发者门户上的页面 谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3068) [我们希望你们享受这次大会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3073) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/233/?time=3074)