# Automating App Store Connect

## Summary
The new App Store Connect API provides a familiar and highly readable REST API designed to facilitate the automation of many tasks you would typically perform through the Apple Developer website and the App Store Connect browser interfaces. Learn how this API allows you to manage your apps and testers for TestFlight, create code signing resources, download reports, and even manage your organization. See how this API leverages JWT authentication and a JSON payload for all transactions to make this new service easy to integrate with your existing automated workflows.

## Info
* App Store and Distribution
* WWDC 2018 - Session 303 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/

## Text
 [（自动化App Store Connect演讲303）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=16) [下午好 我是Geoff Coffey
App Store Connect的工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=34) [我今天要跟大家谈谈自动化
App Store Connect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=38) [老实说我现在非常激动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=42) [想到今天要跟大家分享的内容
就无比激动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=44) [让我们首先谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=46) [我们在自动App Store Connect的进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=48) [我知道你们都了解
也都能使用Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=51) [把你所创建的app上传到
App Store Connect中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=54) [并下载崩溃报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=56) [我们有一个 Transporter 工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=58) [我们有一个 Transporter 工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=58) [可以帮助你自动上传
metadata.xml文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=60) [也会自动上传你所创建的构建版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=63) [我们还有Reporter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=66) [它是一个命令行工具
可以下载你的销售和财务报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=67) [这些工具都很棒
你们中一定有很多人都使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=71) [但我听你们说你们想要更多功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=74) [你希望能查看App Store Connect中的更多区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=76) [并希望集成更多不同的工作流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=79) [我们真的非常高兴引入了一个新的
App Store Connect API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=82) [我们自己也感到非常激动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=93) [这是一个App Store
Connect的标准REST API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=95) [如果你问我 这是它最棒的一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=100) [它是一个库存标准的
REST API附带JSON响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=102) [所以你们一定会感到很熟悉
可以立即上手使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=106) [那也意味着
你可以从任意平台使用这个API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=109) [它几乎支持任何一种编码语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=112) [你可以使用
你当前很可能正在使用的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=114) [当然了 这个API需要保持安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=118) [当然了 这个API需要保持安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=118) [因此我们使用了工业级的JSON
网络令牌进行验证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=120) [那仅仅意味着
你不需要传递用户名和密码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=125) [而且你不需要把代码
绑定到你团队中的任意人员身上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=128) [但你仍然可以控制谁可以获取
你的数据以及他们能做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=132) [从简单易用方面考虑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=138) [我们十分关注这个API的一致性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=139) [我们有一个独立、统一
的REST源模型 那就意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=143) [你可以把你所了解到的东西
放到API中的任意一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=147) [并把它用到其它部分中去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=150) [我们还以一种简单的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=152) [在API自身嵌入了可暴露性
比如当我们给你返回JSON数据时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=155) [它的格式和缩进会非常整齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=158) [所以如果需要
你可以把它嵌入控制台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=160) [并在屏幕上读取它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=162) [并且我们在那些响应中
包含了相关信息的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=164) [用于帮助你们了解
各部分之间的协调性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=168) [当然了
这个API配备你所需要的全部文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=171) [如果你还没有看到文档
你现已使用的文档平台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=174) [developer.apple.com中的
Xcode部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=177) [developer.apple.com中的
Xcode部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=177) [今年进行了扩展 其中就包含了
Apple的REST API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=180) [因此与你所熟悉的框架文档格式相同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=184) [同样适用于App Store Connect API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=188) [我们开始关注App Store Connect中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=192) [还没有自动化的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=196) [你得时不时地关注一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=199) [尤其是我们已经开始进行
你在这里看到的这四个区域了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=201) [让我们看看都包含什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=204) [首先我们有TestFlight的
全部功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=207) [你可以管理测试人员和团队
你可以提交代码用于审阅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=209) [并且如果你观看了昨天的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=213) [“App Store Connect新特性”演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=214) [你就知道我们刚发布了
一个新的公共链接功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=216) [有助于收集测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=219) [这个功能要和API一起使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=220) [你可以用API来管理你的公共链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=223) [你可以同时使用公共连接和API
运行你的beta测试程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=226) [你可以随心所欲选择一种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=229) [在用户和职能方面
你可以添加和移除用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=232) [并保持你用户的权限
与实际团队中的权限同步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=235) [正如我们昨天所发布的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=240) [这包括完整、统一的用户基础](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=241) [在开发者网站上
和App Store Connect中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=244) [所以你拥有一套用户和一套职能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=247) [我们有配置API
你可以添加开发设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=256) [和批量注册ID
并管理你的证书和档案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=259) [然后我们还有报告API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=263) [你可以下载销售和财务报告文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=265) [如果你用过Reporter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=268) [那么你一定会对这个API感到熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=270) [因为你发送给Reporter的参数
与你发送给API的参数非常相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=272) [因此在这两者之间切换
就很容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=275) [我说过一共有四件事 那么最后一件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=278) [其实并不是API自身的一部分
但我想把它提出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=281) [因为它对于我们的自动化来说
非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=283) [我们已在 Transporter 工具中
做了重要修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=286) [用于帮助你们更好地使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=288) [首先 Linux将开始支持
Transporter 工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=290) [同时你能把在新API上
使用的API令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=294) [发送给 Transporter 工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=296) [发送给 Transporter 工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=296) [那么 Transporter 工具可以用它们进行认证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=300) [它只是把进程变得更简单了
便于你进行管理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=302) [我们还有很多内容要讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=307) [今天我们要加快进度了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=308) [我很抱歉 但我们还有很多内容要讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=310) [我们要谈谈
用API获取数据和修改数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=312) [我们要谈谈关系
就是API的不同部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=315) [是如何协同合作的
以及你要如何使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=317) [我们要谈谈如何处理报错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=320) [如何获取API并验证请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=322) [然后我们会展示一些最佳范例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=325) [你们准备好了吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=328) [正如我所说的
我们要从获取数据开始讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=334) [那意味着我们要从这里开始
api.appstoreconnect.apple.com](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=336) [这是API的大本营
从这里我们想要构建一个URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=341) [首先我们要添加一个版本号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=346) [现在所有API终端都有一个版本号
目前它一直是v1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=348) [但不可避免 随App Store
Connect的扩张和变更](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=352) [我们要对API进行修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=356) [那可能会导致你的代码停止运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=358) [那可能会导致你的代码停止运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=358) [如果发生了这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=360) [我们会修改这个版本号
老版本仍然继续工作一段时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=361) [因此你就有时间进行调整
从而适应我们的修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=364) [在这个版本之后 我们会添加
一个叫做源类型名称的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=368) [这在API中是一个极其重要的概念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=373) [源就像是API的基本单位](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=375) [从概念上讲
你几乎可以把API看作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=379) [你正在操作的源的一个大集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=381) [在API中我们有一大群源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=385) [其中大部分都映射为你在
App Store Connect中所熟悉的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=388) [今天我们不会都谈到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=390) [我们只重点谈其中一些
我们从用户开始讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=392) [我们有一个完整的API URL：](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=397) [api.appstoreconnect.apple.com
/v1/users](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=399) [这个URL代表你团队中的全部用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=405) [当然 你可以获取这个URL
并返回一个JSON对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=408) [对此你首先要注意到的是
它有一个数据属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=413) [任何时候当我们成功发送给你一个
带有数据的响应时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=417) [任何时候当我们成功发送给你一个
带有数据的响应时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=417) [都包含这个数据属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=420) [在本例中 它是一个用户源的数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=422) [现在你在屏幕上只能看到一个用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=426) [但如果屏幕再高点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=428) [你就可以在这个数组中看到
你团队中的全部用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=430) [现在我想谈谈
我们返回给你的某些数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=434) [带有每一个这样的源响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=437) [每个源都有一个类型
我只想告诉你类型是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=440) [并且一个ID会唯一识别这个源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=443) [在整个App Store Connect中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=446) [然后我们有属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=448) [这很可能是你最感兴趣的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=450) [对于用户 它就是像姓、名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=452) [和邮箱地址一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=455) [这些参数的值通常是简单的类型
比如字符串、数字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=457) [日期和时间或布尔值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=462) [但有时它们也可以是复杂的类型
比如数组和对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=463) [参数之后 我们有关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=468) [现在我们先跳过这个话题
我们稍后再返回来谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=470) [然后我们有链接
特别是一个我们叫做源自链接的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=473) [现在这个URL唯一识别
这个特定的源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=478) [现在这个URL唯一识别
这个特定的源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=478) [在这种情况下
第一个用户在这个结果中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=482) [我们返回给你的每一个源
都包含这个源自链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=484) [它看起来总是这个样子的：
api.appstoreconnect.apple.com](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=489) [然后版本号是v1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=493) [然后源类型是用户
然后是那个源的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=495) [你可以获取它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=500) [并获得返回的数据
跟我们刚才所看到的几乎一模一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=501) [这里的唯一不同点就是
我们刚才只看到了这个用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=505) [而不是你团队中的全部用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=508) [所以这是获取数据的两种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=512) [你可以获取源列表或某一个源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=514) [但当然了 你也希望能修改数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=517) [为此我们要使用通用的REST惯例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=520) [那么你们中的很多人
对这个也会感到很熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=523) [你们已经了解如何获取源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=526) [要创建一个新的源
你要使用http POST方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=529) [要修改源 你要使用PATCH](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=533) [要删除一个源
你要使用DELETE方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=535) [那么让我们来试试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=539) [那么让我们来试试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=539) [假如我们想向你的团队中
添加一个新用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=540) [现在我们不能直接添加用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=543) [就像App Store Connect自身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=546) [你必须邀请用户到你的团队
然后他们可以接受那个邀请](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=548) [那么我们要创建一个用户邀请源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=553) [看似如此 我们用一个POST
因为我们正在创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=557) [而URL是用户邀请源URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=561) [然后我们需要发送这个用户的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=565) [现在这个数据看来
跟你刚才看到的很相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=568) [就是我们之前获取用户时的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=570) [但我想指出其中一个重要的不同点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=572) [我们有一个类型是用户邀请
但我们没有ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=575) [Apple会给你所创建的每一个源
分配一个ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=579) [因此你不需要在POST中包含它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=583) [我们还丢掉了链接
因为创建过程不需要它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=585) [并且我们还丢掉了关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=589) [因为它在本例中并不相关](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=590) [如果我们运行这个请求
我们就会得到一个响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=593) [特别是这是一个
201 CREATED响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=596) [这只是一个标准的REST行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=600) [用于告诉你们源已成功创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=601) [我们还包含了完整的源信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=605) [在响应数据中 这个信息很重要
有两点原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=608) [第一 它给你提供了
所创建的源ID和源自链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=611) [你很可能稍后会用到它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=615) [因此你可以再返回来操作这个源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=618) [同时如果你看一下属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=622) [你可能看到这个响应中的属性
是你并没有包含在你的POST中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=624) [比如 对于用户邀请来说
Apple会给你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=629) [创建的每一个用户邀请
分配一个到期日](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=633) [现在你没有设置它
因此在POST中就不会包含它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=635) [这就是为什么这个响应数据
对你来说非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=638) [它给你展示了
源被创建以后的所有相关信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=641) [以及适用于这个源的全部规则](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=645) [现在如果这个用户接受
那么他将成为我们团队中的一个用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=649) [假如我们稍后要返回
并以某种方式进行修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=652) [比如 你可以从这里的属性中看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=656) [这个用户有开发者职能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=658) [那么让我们修改一下
让他有开发者和营销人员职能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=660) [我们正在修改一个现有的源
所以我们要执行PATCH请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=664) [这次的URL是
我们要修改用户的源自链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=668) [如果你看一下属性
我们只包含了职能属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=673) [这个请求的意思是修改这个用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=677) [这样他就有开发者和营销人员的职能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=679) [我们并不想修改这个用户的其它信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=683) [所以我们就不需要包含其它属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=685) [如果我们运行这个请求
我们再次获得了一个成功响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=688) [并且我们获得了完整的源陈述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=692) [该源包含我们所进行的修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=694) [对于源来说 你最不想做的事
很可能就是删除它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=698) [这是其中最简单的操作了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=701) [我们只需要对源自链接执行
DELETE请求即可](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=703) [然后就会获得
204 NO CONTENT响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=706) [如果你熟悉REST](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=709) [你就会知道编号200系列的
任意状态代码都意味着成功](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=710) [所以API就是在告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=714) [用户已经被成功删除了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=716) [这次我们不需要包含任意额外数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=718) [这次我们不需要包含任意额外数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=718) [所以我们使用成功响应的
NO CONTENT版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=721) [在我们进入下一章节之前
我想邀请我的同事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=727) [Sehoon Shon上台
给大家演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=729) [如何在现实场景中使用
这些源的一些示例 Sehoon](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=731) [大家好 谢谢Geoff](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=741) [大家好
我叫Sehoon Shon](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=744) [我是TestFlight团队的
软件工程师 今天我来此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=746) [给大家做一个
App Store Connect API的现场演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=748) [我们会用一个实例来了解
我们如何在用户源中实施这个API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=753) [假如我们团队中的某个人
离开了我们公司](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=758) [我想找到这个用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=760) [并把这个用户
从 App Store Connect 团队中删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=762) [让我们看一个演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=765) [我们首先要获取团队的全部用户列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=782) [通过向用户源发送GET请求实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=785) [即GET v1/users](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=788) [这将返回我们团队中全部可用的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=790) [现在让我们尝试查找我们要找的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=795) [我们可以通过使用筛选参数
来搜索用户的邮箱地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=797) [那么这个邮箱地址的筛选参数
需要指定我们要查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=801) [匹配JohnAppleseed@mac.com的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=804) [那么让我们发送这个请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=808) [我们获得了一个响应 其中是邮箱为
John Appleseed用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=810) [现在让我们使用这个用户的ID
获取这个用户的实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=816) [即users/ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=822) [这应该会返回用户的实例
并附带匹配ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=826) [我们获得了一个用户名为
John Appleseed响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=831) [因此我们找到了想要查找的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=835) [让我们尝试移除这个用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=837) [通过向这个用户的自链接
发送DELETE请求实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=839) [通过向这个用户的自链接
发送DELETE请求实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=839) [我们会用DELETE替换GET](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=843) [这应该会移除所匹配ID的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=847) [我们就得到了204 意味着
删除成功并且NO CONTENT](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=853) [因为用户的相关内容已经不存在了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=857) [最后 让我们确认一下
用户确实被删除了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=860) [通过向自链接
再次发送GET请求实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=864) [得到了404 NOT FOUND](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=867) [看来用户确实被移除了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=869) [在这个演示中
我们了解了如何获取用户集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=874) [如何查找用户实例
如何通过使用筛选器搜索用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=877) [以及如何通过发送
DELETE请求移除用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=882) [这也就总结了
如何结合用户源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=885) [使用app源连接API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=889) [我把舞台交还给Geoff
谢谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=890) [谢谢Sehoon](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=899) [谢谢Sehoon](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=899) [现在你们了解了如何创建
读取、更新和删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=902) [全部这些不同的源了 感觉像是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=906) [全部内容就这些了
这是你能实现的所有功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=909) [但这并不是全部
我们还要提一下关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=911) [有时候你并不是对单一源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=916) [最感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=918) [而是对它们之间的连接感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=919) [给大家个例子 一定会有帮助
一个叫Beta小组的源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=921) [表示你在TestFlight中的
全部组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=925) [我们还有一个源
叫做Beta测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=928) [它表示可以测试
你的app的所有人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=930) [正如你所了解的
你可以把这些测试人员放到小组中去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=933) [我们如何在API中
实现这样的操作呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=937) [我们首先要从获取
Beta小组开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=941) [执行一个GET v1/beta Groups
然后会返回一个数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=943) [若我们看下第一个小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=948) [特别是关系部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=949) [我们可以看到这个小组有三个关系：](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=952) [app、beta测试人员和构建版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=954) [今天只谈Beta测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=957) [所以我们要打开它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=959) [所以我们要打开它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=959) [我们再次看到了另一个链接部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=961) [这些是与这个beta测试人员关系
相关联的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=964) [在列表中的第一个小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=967) [数组中的每一个小组
都会有这样的一个部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=969) [这里有两个链接
第一个我们叫做关系自链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=973) [它是一个URL 表示关系自身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=978) [我们用这个URL来操作这个关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=982) [现在让我来解释一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=987) [我们刚才说想在这个小组中
添加测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=989) [明确下 测试人员
已在TestFlight中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=992) [该组已在TestFlight中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=994) [我们希望把这些现有测试人员
放到这个现有小组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=996) [这个操作以我们现在所掌握的技术
是不可能实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1001) [如果你仔细想一下的话 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1004) [就像我们并不创建或编辑
或删除测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1006) [并且我们也不会真正编辑这个小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1009) [至少不会编辑小组的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1011) [那么从概念上说
你可能会说我们要创建新连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1013) [在这个小组及其相关
beta测试人员之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1017) [在这个小组及其相关
beta测试人员之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1017) [这就需要用到关系自链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1020) [看起来是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1023) [我们对关系自链接
执行一个POST请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1024) [若你看一下我们所发送的数据
它是两名测试人员的类型和ID对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1028) [在本例中是指我们要添加到
这个小组中的两名测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1031) [那么这个请求的意思是
把这两名测试人员放到这个小组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1035) [我们无需包含更多测试人员的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1038) [因为测试人员已存在于
TestFlight中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1040) [如果我们运行它 我们就再次获得
204 NO CONTENT响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1042) [也就是API在告诉你
测试人员已经被添加到小组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1046) [你们中有些人会想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1050) [“如果我想把测试人员
从小组中移出来要怎么做呢？”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1051) [答案是以完全相同的方式来实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1053) [要用到同一个URL
要用到同样的数据格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1055) [你只需要用DELETE方法
替换POST方法即可](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1058) [再看一下Beta小组
看第二个链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1063) [我们把它叫做相关链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1067) [这个URL表示实际的相关数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1071) [在本例中是指这个小组中的测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1074) [如果我们执行并获取这个数据
就会获得一个beta测试人员数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1076) [这里的格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1080) [与对v1/betaTesters
执行Get时所得到的格式一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1081) [唯一不同是我们获得的是
这个小组中的测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1085) [而非TestFlight中的
全部测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1088) [我想在这里暂停一下
确保我的意思表达清楚了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1092) [我们得到了该小组的测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1095) [当我说“该小组”时 我是指标识符
包含在那个URL中的小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1096) [这个URL会获取
一个小组中的测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1101) [如果我想批量获取
不同小组中的测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1103) [可以使用这个机制
我得批量执行不同请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1106) [有时候会有些不方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1109) [所以我们还有一种方式获得相关数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1111) [这种方式叫做包含参数
看起来是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1113) [我们对v1/betaGroups
执行GET方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1116) [然后我们添加这个查询参数：
include=betaTesters](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1119) [这就告诉API
当返回beta小组时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1123) [同时也包含每个小组中
相关测试人员的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1126) [它看起来是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1133) [我们获得了beta测试人员数组…
抱歉 应该是beta小组的数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1134) [如果你查看一下第一个小组中
beta测试人员的关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1138) [如果你查看一下第一个小组中
beta测试人员的关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1138) [你就会看到一个叫做数据的新部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1140) [包含这个小组中
所有测试人员的类型和ID对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1144) [现在如果你可以看到这里的整个响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1148) [你会在每一个beta测试人员
关系内部看到一个这样的数据部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1150) [在这个数组中的每个小组的内部
对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1154) [这只是包含类型和ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1158) [我相信你一定在想
实际的测试人员信息在哪儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1159) [如果我们一直向下
滚动到这个响应的最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1162) [我们还会看到一个叫做包含的新部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1165) [这是一个beta测试人员的数组
附带完整的测试人员信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1168) [再通俗一点说
包含部分拥有完整的源呈现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1172) [你通过关系所包含的
每一个源的完整呈现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1176) [然后我们按照类型和ID进行匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1181) [从而了解哪个测试人员
属于哪个小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1183) [你可能在想我们为何要这么做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1188) [我们有数据部分
其中包括我们的全部小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1189) [我们还有包含部分
其中包括包含在内的全部测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1192) [这么做是出于很重要的原因
屏幕上有这个测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1195) [John Appleseed
可能属于多个小组 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1197) [John Appleseed
可能属于多个小组 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1197) [我们构建这个的方式是让
John Appleseed数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1201) [在每次响应中只出现一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1204) [无论他出现在多少个小组中
明白了吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1205) [好的 Sehoon现在要回到台上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1211) [给大家演示一些
与关系相关的现实示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1213) [Sehoon](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1216) [谢谢Geoff](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1223) [对于这部分的演示
让我们看看TestFlight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1226) [了解如何创建新的beta小组
和添加外部测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1229) [并了解一下测试人员
和小组之间的关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1232) [让我们看演示吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1235) [我们从创建新的beta小组开始
通过公布到beta小组终端实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1246) [即v1/betaGroups](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1250) [当我们创建源时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1254) [我们还需要提供有效负载
看起来是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1255) [我们的数据包含beta小组的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1258) [我们的数据包含beta小组的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1258) [和一系列属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1260) [因为名称是唯一需要填写的字段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1261) [当我们创建小组时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1263) [让我们给它取个名字
我们就叫它测试小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1265) [我现在要发送请求了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1270) [我们得到409 CONFLICT
响应 让我们看看详细信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1273) [“在本次请求中
你必须给关联app提供一个值”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1278) [在TestFlight中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1282) [你不能创建
不属于任何app的beta小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1283) [因此当我们创建beta小组时
必须关联某一个app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1287) [我们该如何做呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1291) [我们可以在有效负载中包含关系…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1292) [就像这样 我们现在某个app中的
有效负载中有了关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1296) [附带app的数据类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1298) [并且ID识别了beta小组
应该链接到哪个app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1302) [这就会创建名为
测试小组的beta小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1306) [并按照ID链接到某app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1309) [让我们重新发送这个请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1312) [得到了201 CREATED响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1314) [在响应中 我们有所生成的ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1317) [让我们复制这个ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1319) [让我们复制这个ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1319) [我们刚创建了名为测试小组的小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1324) [但若你不喜欢我们刚创建的小组
的名称怎么办呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1326) [我们可以修改现有小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1329) [通过向这个小组的自链接
发送PATCH请求实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1331) [我们要发送PATCH
然后beta小组/ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1335) [我们还需提供有效负载
看起来是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1341) [看来更像posting的有效负载
但我们还需要提供ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1345) [以确保我们修改的是正确数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1350) [让我们粘贴beta小组的ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1354) [我们唯一需要修改的信息就是名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1356) [让我们把它重命名为WWDC小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1359) [我要发送请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1364) [现在我们得到了一个200响应
看来名称已经更新了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1366) [现在我们有了想要的小组
让我们开始添加一些外部测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1370) [要创建测试人员 得向beta
测试人员终端发送POST请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1375) [即v1/betaTesters](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1380) [我们还需要提供这样的有效负载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1385) [它的类型是beta测试人员
它还有一系列的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1389) [我们要创建一名为
Kate Bell的测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1392) [同时有一个关系是属于beta小组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1395) [这将创建beta测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1399) [同时也会分配到beta小组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1400) [那么如果你粘贴
我们刚创建的beta小组的ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1404) [这会把测试人员分配到
WWDC小组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1407) [得到201 CREATED响应
看来测试人员已被创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1412) [同时也被分配到了小组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1416) [既然我们已在此
让我们再添加一名测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1419) [我们需要做的是替换这个属性部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1421) [替换为另一个人的名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1425) [这将会在同一个小组中创建
名为John Appleseed的测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1428) [我们再次获得了
201 CREATED响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1434) [我们刚向小组中添加了两名测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1438) [我们刚向小组中添加了两名测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1438) [现在让我们确认这两名测试人员
确实添加到了小组内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1440) [通过发送GET请求实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1444) [我们要发送到beta小组
和beta测试人员之间的相关链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1447) [这个链接/小组ID/betaTesters](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1451) [这将返回分配给beta小组
的全部beta测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1457) [并附带指定ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1461) [你可以看到我们刚才添加的
John Appleseed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1464) [这个响应包含许多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1469) [包括属性列表以及关系列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1471) [但如果你只关心 比如
测试人员的邮箱地址应该怎么办呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1474) [我们可以通过使用一个叫做
字段的特殊参数来削减响应内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1478) [这将允许我们削减内容主体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1482) [我们可以只查看我们想要看到的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1485) [如果你执行beta测试人员的
字段等于邮箱地址…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1488) [正如你所看到的
现在响应中只包含用户的邮箱地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1495) [没有其它内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1498) [我们在这个beta小组中
添加了两名测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1500) [在这个演示中 我们了解了如何创建
beta小组和beta测试人员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1510) [也了解了测试人员和小组间的关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1514) [这就总结了演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1517) [如何通过TestFlight
使用App Store Connect API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1518) [我要把舞台交还给Geoff 谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1521) [再次感谢Sehoon 非常棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1529) [那么…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1532) [这就是获取数据、修改数据和关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1534) [这就是API的基本功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1537) [但正如你在Sehoon的
演示中所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1540) [有时候你会犯错误
导致我们不能处理你的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1542) [我们现在要谈点别的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1546) [谈谈API如何把这些报错传回给你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1547) [任何时候当请求失败时
你都会得到一个这样的响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1552) [现在要注意的第一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1556) [就是我们会发送一个
适当的HTTP响应状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1558) [就是我们会发送一个
适当的HTTP响应状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1558) [表明发生了什么错误
通常是400系列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1561) [一般来说你只需要得到这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1565) [大部分REST客户端函数库都有
Did Succeed或It Is Success函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1566) [你可以调用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1570) [它会准确地告诉你请求是否成功](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1571) [但若你想了解更多关于报错的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1575) [你可以分析一下响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1577) [请求失败后 不会看到那个
总能看到的数据属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1579) [而会看到一个报错的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1582) [它是报错对象的一个数组
因此可能会有多个报错对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1585) [每一个都代表
你所发送请求的某个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1589) [每个报错对象
都有一个ID 可以唯一识别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1593) [这个特定的报错
在这个特定的响应中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1595) [你可能会把它存起来
如果你认为这是我们这端的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1598) [请把它发送给我们
它会帮助我们进行追踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1601) [对你来说更有用的是标题和详情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1604) [这两者给你提供了一个英文语言解释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1607) [关于发生了什么错误
从这个标题中 我可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1610) [参数出了一些问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1613) [从详情中我了解到
我通过邮箱地址进行筛选](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1614) [然后立即看到了
邮箱地址拼写不正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1618) [然后立即看到了
邮箱地址拼写不正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1618) [这些都是很棒的值
你可以记录下来并在解决问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1621) [和学习API过程中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1624) [但你一定不想在代码中用到它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1626) [你不想用这些来中断你的编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1628) [我并不能做出任何承诺说未经允许](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1631) [我们不会修改这些信息中的文字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1633) [对于程序性报错处理
你得使用代码属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1637) [这是一个稳定的机器可读字符串
表示发生了哪些错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1641) [它有一个分层的值
在特定等级之间用点隔开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1645) [那么在本例中
我可以看到我有一个参数报错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1649) [通常更具体地说
其中一个参数是无效的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1652) [现在这些代码可以变得很长、很精确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1656) [有时候你并不关心精确度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1659) [事实上你通常不会这样做
所以我们这样构建它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1661) [从而你可以在代码中执行前缀匹配
可以是模糊匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1664) [或是精确匹配 取决于你自己的用例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1667) [但如果你需要精确匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1671) [比如 你可以报告返回你自己的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1673) [并附带发生了哪些错误的清晰说明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1675) [我们尽量给你们足够的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1677) [我们还通过源参数来提供帮助](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1680) [无论何时只要可能
我们都会在请求中追踪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1683) [导致问题发生的报错所在的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1687) [在这里我可以看到
筛选器括号邮箱地址参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1688) [就是它产生了这个报错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1691) [源可以是这样的一个参数
或者也可以是一个JSON指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1693) [在你发送给我们的JSON数据中
指出问题所发生的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1697) [这就是你所要了解的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1703) [关于App Store Connect API
除了如何获取App Store Connect API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1705) [和成功发送请求外的全部信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1709) [Julie Richards
将上台帮助你们了解这两块内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1710) [Julie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1715) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1722) [大家好 我是Julie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1725) [我是App Store Connect团队
的工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1727) [今天我在这里要跟大家谈谈
权限和验证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1730) [在这点上 你们已经看到了许多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1734) [可用的终端的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1739) [可用的终端的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1739) [当你准备好测试你的某些新功能时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1740) [你首先可能会发送一个
这样的简单GET请求：](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1744) [然而 如果你只是要
curl这个终端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1748) [或把它键入到你的浏览器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1752) [你最终将得到一个这样的响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1754) [正如Geoff所提到的
我们仍缺少一个非常重要的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1758) [那就是验证证书](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1763) [现在这个步骤很有必要 原因有两点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1767) [第一 验证证书
可以给你的请求提供情境](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1771) [毕竟你并不想要全部app
你只想要你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1776) [最重要的是这些证书
可以保证API的安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1780) [并确保除你之外
没有别人能获取你的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1785) [要在你的请求中添加这些证书](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1790) [你首先需要创建一个API钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1794) [然后你要使用那个钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1797) [生成令牌
然后在每次请求时都要发送那些令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1799) [生成令牌
然后在每次请求时都要发送那些令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1799) [让我们从API钥匙开始说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1805) [每个钥匙实际上是一个
公共钥匙和私人密钥对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1809) [私人密钥属于你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1814) [用于向令牌中添加唯一署名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1817) [公共钥匙将用于
由Apple认证署名并确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1822) [它是由相关联的私人密钥所签署](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1827) [要创建一个钥匙 你需登录
App Store Connect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1833) [并导航到一个新的API钥匙标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1838) [你的管理员用户
可以管理你团队中的API钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1842) [你可以创建新钥匙 若有些钥匙
不再需要你可以撤销它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1847) [每个钥匙都需要被分配
一个权限等级 这将决定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1853) [钥匙可以用于哪种API服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1859) [钥匙可以用于哪种API服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1859) [一旦创建 新钥匙会出现在此列表中
并且私人密钥文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1863) [这是属于你的部分 也可以下载了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1868) [有一个重点需要注意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1873) [每个私人密钥只能下载一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1875) [因为Apple不会存储这些钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1879) [事实上 你的钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1883) [甚至在你决定下载它之前还没有生成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1886) [因此你可以认为
这些钥匙跟真正的钥匙一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1890) [它们属于你
而且你必须管理和保护它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1893) [同样跟实际的钥匙一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1899) [这些钥匙不会过期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1902) [因此如果钥匙丢了或被盗了
它将继续拥有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1904) [对数据的权限 除非通过
App Store Connect撤销钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1908) [为此 保证钥匙的安全
和稳妥非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1913) [一旦你获得了私人密钥文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1919) [一旦你获得了私人密钥文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1919) [你就可以立即开始生成
JSON网络令牌了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1922) [现在每一个令牌都需要包含一些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1925) [首先 你需要添加发行者ID
也就是你的账户标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1930) [你可以从新页面的顶部找到这个ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1935) [你还需要添加钥匙的ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1941) [你也可以从这个新页面上
找到这个ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1945) [它只针对你所使用的钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1950) [每个令牌还将需要一个到期时间戳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1956) [正如我之前所提到的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1959) [你的钥匙不会过期
但这些令牌至多只能使用20分钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1961) [最后这两个信息都是常量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1967) [我的意思是在全部令牌
和全部App Store Connect API中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1972) [它们会保持一样的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1975) [第一个是令牌的观众
永远是App Store Connect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1979) [第一个是令牌的观众
永远是App Store Connect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1979) [最后 你需要分配或添加算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1985) [用于签署令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1991) [为此我们选择使用ES256](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1993) [现在这个算法相对应的是一个
由JWT支持的算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=1997) [这是我们选择让你们使用的一个算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2001) [但不用担心 你不需要实施这个算法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2003) [很幸运的是 JWT提供多个函数库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2008) [事实上涵盖了任何一种语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2012) [使得创建和签署这些令牌
变得尽可能简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2014) [我后面的这个例子是用Ruby写的
正如你所看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2019) [我要做的就是传递私人密钥的同时
也传递这些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2024) [这个编码方法会返回给我
一个完整的、已签署的令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2028) [然后你就可以把那个令牌
添加到我的请求中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2033) [只需要把它放在一个验证标题内即可](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2037) [只需要把它放在一个验证标题内即可](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2037) [现在我们了解了如何创建这些钥匙
以及如何使用这些钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2043) [向我们的请求中添加令牌
让我们继续 尝试一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2049) [好的 这是那个新API钥匙的页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2063) [我还没有钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2066) [那么我要继续并创建一个钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2068) [我把它命名为演示
并且我得分配一个权限等级](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2071) [在这里 如果我要选择 比如财务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2075) [我就会得到拥有诸如财务报告
或销售报告这样权限的钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2078) [但它不会有诸如beta测试人员
或创建者这样的权限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2083) [我可以添加权限等级或选择管理员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2088) [那样我就得到一个
能获取全部API权限的钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2092) [所以我坚持分配给它一个管理员权限
当我生成我的钥匙时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2095) [我可以看到
我的私人密钥已经可以下载了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2099) [我可以看到
我的私人密钥已经可以下载了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2099) [正如我刚才提到的那样
我的私人密钥只能下载一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2104) [如果我丢了钥匙或意外删除了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2109) [我不能再从这里重新下载它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2111) [那么为此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2113) [我一定要确保
我现已准备好下载它了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2115) [我准备好了 那么让我们继续并下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2119) [现在我的下载文件夹中已经有了
我的私人密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2123) [我可以拉动我们刚才看到的那个脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2126) [我需要复制发行者ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2129) [这是在你的API钥匙中
共享的一个ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2137) [并且我还需要复制
我刚才下载的私人密钥ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2141) [一旦搞好这些ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2149) [就会从我的下载文件夹中
加载我的私人密钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2151) [我要生成一个新令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2155) [如果我拉起终端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2158) [如果我拉起终端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2158) [我可以curl那个app终端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2162) [正如我们预计的那样
我们得到了那个401响应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2166) [因此让我们调用我的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2170) [我得到了一个新令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2178) [因此我可以把那个令牌
添加到我的请求中…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2180) [通过把它放在一个验证标题中
确定我拼写无误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2189) [然后我得到了app列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2198) [正如你所看到的
仅仅通过几个简单的步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2205) [我就能获取API的权限
并开始返回真实数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2209) [谢谢 舞台交给Geoff](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2214) [好的 谢谢Julie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2222) [很酷 对吗？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2224) [这就是权限和验证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2226) [现在还剩下几分钟时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2228) [我想谈谈API的一些最佳使用范例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2230) [我们要从那些钥匙说起
正如Julie所说的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2234) [那些钥匙属于你
保护它们是你的职责](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2237) [无论是谁 只要拥有钥匙
就能获取你的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2240) [因此理想地说 你要把钥匙
放在一个安全的钥匙商店中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2243) [你的代码要在外面进行查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2247) [并在存储器中使用 永远不要把它们
存在任何地方 如数据库或磁盘](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2249) [如果你必须把钥匙存储在磁盘上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2253) [请确保你非常认真地检查了
文件系统的权限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2255) [当然 如果你有任何理由认为
钥匙被盗用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2259) [请立即登录App Store Connect
并撤销那个钥匙](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2261) [我还想谈谈你从钥匙中创建的令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2267) [现在没有任何理由](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2270) [要求你在每次请求时
发送一个不同的令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2273) [事实上 你会在代码中和我们这端
获得更好的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2274) [如果你不断重复使用那些令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2277) [如果你不断重复使用那些令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2277) [通常这是一件很简单的事 对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2280) [你只需要在脚本顶部生成一个令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2282) [在每次请求时发送令牌 直到完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2284) [我们可以让你控制到期时间
因为你是最了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2287) [它应该持续多久的人
这些时间足够完成那个进程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2291) [并且不会比所需要的时间长太多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2294) [当然 有些进程的执行
可能会超过20分钟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2297) [或需要连续不断地运行
如果是这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2300) [你在编码结构上要有一点不一样了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2302) [也许你会生成一个20分钟的令牌
并根据需要使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2305) [然后把它丢掉并在旧令牌到期之前
分配一个新令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2308) [比如 每18分钟换一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2311) [那样你会最大程度上重复使用令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2313) [从而获得最佳性能
并且你永远不会发送过期令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2315) [接下来我要谈的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2320) [响应中所包含的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2322) [今天我们谈到了这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2324) [作为自文档的一种漂亮的形式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2325) [一种可以让你查看数据并了解
还有什么其它可用东西的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2328) [但这并不是唯一原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2331) [实际上你的代码可以使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2332) [当你执行多步骤进程时
无论何时只要有可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2336) [请把我提供的链接从响应中拿出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2339) [请把我提供的链接从响应中拿出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2339) [并把它用在进程的下一个部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2341) [这有两个好处 一是它会让你的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2344) [对于API的不同部分变得更加通用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2347) [二是当v2 API
不可避免地出现时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2350) [会减少你调整和修改代码的工作量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2353) [最后我想谈谈文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2358) [我们今天提到过这个API的一致性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2362) [我们非常关心这个问题
因此任何时候如果一个源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2364) [可以做些什么
它将会以与其它源同样的方式来做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2367) [但是 当然了
并不是每个源都能实现一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2371) [你已看到一个例子
就是用户的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2374) [我们必须创建一个邀请
没有API能创建用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2376) [因此文档是你了解这些信息的资源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2379) [它会告诉你源可以做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2381) [有哪些可用的操作
它支持哪些参数等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2384) [这就是App Store Connect API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2389) [它是一致的标准REST API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2391) [我们对此感到非常激动
关于这个API我很喜欢的一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2394) [就是我们对它的设计非常灵活](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2398) [就是我们对它的设计非常灵活](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2398) [你可以把App Store Connect
以你需要的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2400) [放到你的工作流程中
并使用你最喜欢的工具](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2404) [我们真的非常期待你们的成果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2407) [这个夏天所有app开发者都能用到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2410) [我知道你们大家一定会有问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2413) [请到我们的App Store Connect
实验室面谈 现在就可以来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2415) [演讲结束后 我就会去那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2418) [我们可以回答你们的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2420) [我们明天下午1点也有一个实验室](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2421) [请大家同时了解一下
“App Store Connect新特性”的演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2424) [如果你昨天没去参加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2426) [它讲了更多关于API
和App Store Connect的相关信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2428) [请收藏这个链接
我们很快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2431) [会在这里发布文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2434) [谢谢大家 稍后在实验室见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/303/?time=2436)