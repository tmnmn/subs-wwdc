# Strategies for Securing Web Content

## Summary
Whether you use web content in your app via an embedded WebKit view, deliver pure web apps, or create web content to be embedded by others, it's important to ensure that you are using the most current web security standards. Learn techniques like such as special cookie attributes and HTTP response headers designed to secure your web content against the latest threats that include cross-site scripting, cross-site request forgeries, and speculative execution attacks, commonly known as Spectre.

## Info
* Frameworks
* WWDC 2018 - Session 207 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=7) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=21) [&gt;&gt; Hello everyone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=27) [My name is John Wilander.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=29) [I am an engineer on the Safari](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=30) [and WebKit team and I'm here to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=32) [present to you today how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=35) [secure web content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=37) [Or, as I like to call it, take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=38) [the Swede's advice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=42) [So, you might be asking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=45) [yourself, web content, that's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=46) [pretty broad term.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=48) [Is this session really for me?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=50) [Yes, it is for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=52) [To start off, apps use tons of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=54) [web content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=57) [It may be used for ads, login](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=58) [It may be used for ads, login](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=58) [flows, splash screens.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=60) [You might be using Safari View](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=63) [Controller to-- for parts of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=64) [your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=65) [You might have whole parts of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=66) [your UI rendered in a web view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=68) [You might also have companion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=71) [web apps that are supposed to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=72) [rendered in a web browser and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=74) [that are sharing content or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=76) [providing a joint experience](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=78) [across apps and web apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=80) [So, really, yes, the session is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=82) [for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=84) [And security is important.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=85) [You want to stay in business?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=87) [You want to provide the best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=89) [customer experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=90) [You want to be ahead of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=91) [competition.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=92) [You want to get this right so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=93) [that when they don't they are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=95) [the ones to fall, you stay in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=97) [the market.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=98) [OK. What are we going to cover](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=100) [today?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=101) [We're going to have a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=102) [first securing your transports.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=105) [This is just a brief mentioning](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=107) [from me about basics that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=109) [need to do before we do the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=111) [rest.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=113) [If you don't secure your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=114) [transports, most other bets are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=115) [off.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=116) [Then we'll go into a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=117) [cross-origin lockdown.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=119) [cross-origin lockdown.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=119) [This is basically me showing you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=121) [a bunch of technologies that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=123) [available to you in WebKit and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=125) [in browser engines across the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=127) [line that can help you get into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=129) [more secure defaults for your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=132) [web content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=134) [We would like to opt in for you,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=136) [but we can't test your sites for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=137) [you or your web content for you,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=139) [so we need you to opt in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=141) [And then, as a motivation, if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=143) [you feel, well, why should I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=145) [care about these security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=147) [mechanisms, I'll actually show](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=148) [you some attack scenarios and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=150) [map them back to the security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=152) [technologies so that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=154) [understand where they come into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=156) [play and how they can defend](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=157) [your web content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=159) [So, let's head right in to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=161) [securing your transports.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=162) [This one should be familiar to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=165) [you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=166) [So, this is about moving to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=167) [HTTPS and WSS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=169) [WSS is for web sockets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=172) [Now, just the fact that HTTP and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=175) [WS, the plain text equivalents,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=178) [WS, the plain text equivalents,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=178) [still exist is not an excuse to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=180) [keep using them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=182) [You need to move to secure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=184) [transports because that's what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=185) [going to ensure that the content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=188) [that you are rendering in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=189) [browser or in your app comes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=191) [from the server you expect it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=193) [come from and no one has fiddled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=195) [around with the content in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=197) [transport.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=199) [So, moving to HTTPS for your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=200) [main content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=202) [There are a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=203) [technologies that can help you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=204) [get there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=206) [First on your to-do list--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=207) [except for just moving to HTTPS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=209) [in general-- is strict transport](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=211) [security or HSTS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=213) [This is an HTTP response header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=215) [you can send to the rendering](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=219) [engine, such as WebKit, and tell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=220) [it, hey, my domain should always](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=223) [be loaded over HTTPS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=225) [If there's ever an HTTP request](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=227) [from me, just automatically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=230) [upgrade it for me to HTTPS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=232) [Never making plain text](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=234) [connections to my server,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=236) [please.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=237) [And this is also a thing you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=239) [And this is also a thing you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=239) [tell the rendering engine for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=240) [how long it should remember](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=242) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=243) [So, typically at least half a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=244) [year ahead in time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=245) [Now, you might also be loading](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=248) [content off of other servers,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=249) [servers that are not under your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=251) [control, not your domain name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=252) [There's also a header you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=255) [send to the browser engine](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=256) [called upgrade insecure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=258) [requests, also an HTTP response](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=259) [header, which tells the browser,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=263) [hey, go ahead and upgrade all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=265) [those other links to content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=267) [too, even if it's not from my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=268) [server and even if they have not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=271) [set strict transport security.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=273) [So, those two things that will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=276) [automatically upgrade to secure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=278) [transports.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=280) [Another thing you need to do is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=282) [make sure that you mark your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=283) [cookies secure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=285) [This is an attribute you add in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=286) [your set cookie header,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=288) [semi-colon secure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=289) [This means that you're telling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=292) [the network stack this cookie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=294) [should only ever be sent over a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=296) [secure transport.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=298) [If there for some reason is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=300) [plain text request for my server](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=301) [or to my server, don't send the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=303) [cookie.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=305) [And, since you should be using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=306) [secure transports, all of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=308) [cookies should be marked secure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=310) [Final-- finally on your to-do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=312) [list here for secure transports](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=314) [is specific for apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=316) [You might have heard about app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=318) [transport security or ATS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=319) [It is the default behavior for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=321) [iOS apps, meaning that they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=324) [should be using only secure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=326) [transports for network traffic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=327) [Now, there is an opt out you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=330) [have in your info p list to say,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=332) [hey, you know, for web content,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=333) [I'd still like to do insecure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=335) [requests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=337) [Don't do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=338) [You should be saying no in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=340) [info p list and specifically for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=342) [arbitrary web content loads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=344) [OK. Now we've secured the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=346) [transport.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=348) [Let's move on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=349) [We're now going to look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=350) [cross-origin lockdown.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=351) [The reason why I call it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=353) [lockdown is this is really you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=354) [opting into saner, safer, more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=357) [opting into saner, safer, more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=357) [secure defaults for your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=360) [content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=362) [We're locking it down to more or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=363) [less what it should have been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=365) [all along and then you open up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=366) [the specific things you want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=368) [do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=370) [So, let's move in and look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=371) [what are cross-origin loads](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=373) [anyway.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=375) [What are we going to lock down?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=376) [Well, web technologies have this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=378) [powerful feature where you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=380) [weave together content from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=382) [different servers and different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=384) [origins.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=385) [Different domain names, if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=387) [so will.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=388) [An example of this is images.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=390) [You can load images from any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=392) [server on the web into your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=394) [content and that's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=396) [cross-origin load.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=397) [You can also load scripts from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=399) [other servers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=401) [Interestingly, those scripts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=402) [actually execute with the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=404) [powers and privileges as your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=406) [own scripts, so you need to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=408) [really careful what scripts you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=410) [load off of other servers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=412) [They more or less own your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=414) [content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=416) [They are executing with the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=417) [powers as you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=418) [And, as a third example,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=420) [iframes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=421) [You can embed full pages from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=422) [other servers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=425) [Cross-origin, meaning from a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=426) [different domain name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=428) [These are three examples of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=429) [cross-origin loads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=431) [Now, we've had a security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=433) [mechanisms-- security mechanism](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=435) [on the web for over 20 years](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=438) [that has provided basic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=440) [protection for these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=441) [cross-origin loads and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=442) [called the same-origin policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=444) [And it differentiates-- here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=447) [you've got these examples with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=448) [real domain names.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=450) [So, you've got the example for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=451) [loading the image, you've got a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=453) [CDN where you loaded the script,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=457) [and you may have a social](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=459) [widget, an iframe, coming from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=461) [social.example here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=462) [And, just to mention, when I say](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=464) [.example it's just me being sure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=466) [that I'm not talking about real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=469) [websites here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=470) [If it's easier for you, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=471) [think of it as .com or .org.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=472) [Anyway, these are the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=475) [cross-origin loads and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=476) [same-origin policy keeps track](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=478) [same-origin policy keeps track](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=478) [of where did I load this image](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=481) [from or where did I load this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=482) [script from, where did I load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=484) [this iframe from, so that it can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=485) [provide basic protection.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=487) [That basic protection means that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=489) [your page in this example cannot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=492) [reach into that iframe from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=494) [social.example and read its](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=496) [bytes, read its contents, or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=499) [write to its contents.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=501) [The same-origin policy is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=502) [guarding, saying this part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=504) [the page actually came from a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=505) [different server, you're not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=507) [allowed to just go straight in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=508) [there and change things or read](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=509) [what the user happened to enter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=511) [into that form, for instance.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=513) [An easier way to think of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=515) [same-origin policy is just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=517) [matching two pages, two tabs in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=519) [a browser.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=521) [One tab shouldn't be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=522) [just go into another tab and see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=523) [what the user's doing over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=525) [there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=526) [It's the same-origin policy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=527) [effectively doing its job there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=529) [too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=533) [So, the lockdown.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=534) [How do we lock this down](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=535) [properly?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=537) [We've got the same-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=538) [policy, but it's not good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=539) [policy, but it's not good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=539) [enough.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=540) [So, you need to opt in to some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=541) [more defaults.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=543) [Starting out with subresource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=545) [integrity-- I'll go through them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=547) [and I'll mention them here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=548) [This is just a simple change in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=550) [the markup for your script tags.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=552) [The second part is content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=555) [security policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=556) [This is providing a full-on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=557) [security policy for your whole](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=559) [page where you can say, hey, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=560) [only want to load scripts from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=562) [over here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=563) [I don't want to have any frames](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=564) [from other servers, and so on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=565) [We'll look at that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=567) [And the third category here are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=569) [simple server configurations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=570) [These are HTTP response headers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=572) [that you send out telling the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=575) [browser engine, hey, I want more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=576) [secure defaults, I don't want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=578) [these old legacy APIs that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=580) [you've been supporting because I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=582) [don't need them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=583) [Please help me here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=584) [So, let's dive into it and look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=585) [at subresource integrity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=587) [Now, this is a perfectly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=590) [plausible way of loading that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=592) [framework from the CDN, your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=594) [content delivery network.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=596) [And that script tag is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=598) [And that script tag is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=598) [just contain the URL to fetch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=601) [that script, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=603) [As I mentioned, you're now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=605) [relying on that CDN to provide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=606) [you with the right script that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=609) [going to make your web content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=610) [work the way it's supposed to.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=612) [But actually, if they decide to,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=614) [you know, bump the version or if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=616) [something goes wrong on that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=617) [server, they're serving you--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=619) [they're sending you the wrong](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=620) [script, your web content may be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=621) [crippled.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=623) [It may-- something may go wrong.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=624) [It might not work the way it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=625) [supposed to.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=626) [You know what script you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=628) [expecting, but what you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=629) [sending out when you're just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=631) [sending a script tag like this--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=632) [looking like this-- is just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=635) [telling the browser whatever you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=636) [get back in JavaScript, execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=639) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=642) [A much better way is to say, no,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=643) [I want to make sure it's the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=645) [script I expect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=646) [And-- but you can use the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=648) [integrity attribute in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=649) [script tags.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=651) [In there you provide a check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=653) [sum, in this case with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=654) [algorithm sha256, saying this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=656) [the check sum of the script I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=659) [the check sum of the script I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=659) [expect to get from my CDN, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=661) [only if I get something that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=664) [matches this check sum, then you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=665) [execute it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=667) [So, the browser engine will go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=669) [through and make sure to compare](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=671) [that check sum before executing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=673) [the code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=675) [Well, what happens if it doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=677) [match?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=678) [What if they bumped the version](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=679) [or something went wrong and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=681) [got the wrong script?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=682) [Now my web content doesn't work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=684) [anymore.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=685) [Well, you add a check.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=686) [In this case, you've loaded or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=688) [tried to load a framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=689) [You checked did the framework](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=691) [load OK, do I have that object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=693) [in my dom now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=695) [If not, go load it from my own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=696) [server which I am in control of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=699) [and I don't make changes to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=701) [willy-nilly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=703) [That may reduce performance, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=704) [at least you have a still](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=707) [functioning web content or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=709) [website.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=710) [OK. That's sub-resource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=711) [integrity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=713) [Let's move on to content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=714) [security policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=715) [I mentioned this is like setting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=717) [a policy for your page, like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=719) [a policy for your page, like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=719) [what should be allowed here, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=720) [I actually think of it as an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=722) [architecture policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=723) [If you're a software engineer,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=725) [you want to keep track of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=727) [dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=728) [What am I allowed to do here?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=729) [Who-- what can I load and what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=730) [can't I load?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=732) [So, this is again an HTTP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=734) [response header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=736) [So, when you're sending out a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=738) [page from your server, you add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=739) [this header to the response,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=741) [saying, hey, I'm going to run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=743) [with a content security policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=744) [I'm going to be in control of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=746) [the content on my page.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=748) [Then you start out by saying the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=750) [default source for loading any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=752) [kind of content from remote](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=755) [servers is myself.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=756) [Only load from my server by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=759) [default.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=761) [Now you've locked it down](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=762) [completely and if there is any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=764) [kind of content load in the page](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=766) [trying to pull something in from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=768) [a server that's not yours, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=769) [will just be denied because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=771) [WebKit will deny that because it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=773) [doesn't match the policy you've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=776) [set.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=778) [And, as you see, I made a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=779) [And, as you see, I made a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=779) [comment there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=780) [No inline.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=781) [That is also part of the default](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=782) [behavior.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=783) [Once you set it this way, you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=784) [also saying no inline scripting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=786) [Only load scripts from files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=788) [That's why I keep thinking of it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=791) [as an architecture policy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=792) [because you're separating logic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=794) [into files, separating from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=795) [markup, and separating from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=797) [styling, which are also in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=801) [files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=803) [CSS files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=804) [OK. Now, you wanted to load that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=806) [script from cdn.example and if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=809) [you just go with a default](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=811) [source self, then that's going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=813) [to be locked down.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=815) [Right? You can't do remote](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=815) [script loading.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=817) [Well, there's a whitelisting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=818) [mechanism in the content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=819) [security policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=821) [You just say script source, hey,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=822) [let's open up for cdn.example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=824) [because I actually want to load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=827) [script from there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=828) [Now you can load from your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=829) [server and cdn.example, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=831) [nowhere else.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=833) [Well, you might want to have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=835) [that social media plugin, little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=837) [that social media plugin, little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=837) [widget in there in an iframe,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=840) [well, you can add a frame source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=842) [directive saying I want to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=844) [able to load iframes from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=845) [social.example, but no one else](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=847) [gets to have an iframe on my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=850) [page.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=851) [Again, you're in control of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=852) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=853) [And there's even a directive for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=854) [the reverse case when your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=856) [content is being loaded in an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=858) [iframe on someone else's page.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=860) [In this example, news.example is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=862) [loading your content in an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=864) [iframe.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=866) [You can send out the directive--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=867) [the last directive here in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=869) [content security policy frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=870) [ancestors.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=872) [This is telling the browser,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=874) [hey, check whosever framing me](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=875) [and all the way up to the top](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=878) [page and they all have to be on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=880) [my list of what I allow.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=882) [So, in this case, your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=885) [content has said news.example, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=886) [have a business deal with them,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=888) [they're allowed to have my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=890) [content in an iframe.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=891) [OK. That's quite a lot, so let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=894) [just review this line by line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=895) [quickly so we know what it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=898) [saying.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=899) [Content security policy, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=900) [start out default source self.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=902) [Lock everything down.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=904) [Everything that's going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=905) [loaded with a source attribute,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=906) [like loaded from a server, needs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=908) [to be from my origin, my domain.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=910) [Then you open up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=913) [For script, you add what domain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=915) [names do I allow scripts from.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=917) [You say where do I allow myself](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=920) [to load frames from.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=923) [You whitelist them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=925) [And, finally, if you're ever](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=926) [going to be in an iframe](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=928) [yourself under someone else's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=930) [page, you put them in that white](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=932) [list for frame ancestors.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=933) [OK. That's the content security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=936) [policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=938) [It has more knobs to turn and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=939) [we'll also see in a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=942) [the attack scenarios a few](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=944) [flavors of these things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=946) [Moving on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=948) [We're going to have a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=949) [cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=950) [Cookies are-- they actually were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=951) [called magic cookies in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=953) [beginning of the web, and they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=956) [really are magic in that we use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=958) [really are magic in that we use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=958) [them for so many things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=960) [And perhaps the most sensitive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=962) [thing is they authenticate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=963) [users.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=965) [Once you have logged in with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=966) [your credentials, you get a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=968) [cookie that holds your session](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=969) [and that cookie, if it's moved](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=971) [or its stolen and moved to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=973) [another browser engine in many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=975) [cases can impersonate that user.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=977) [So, you really need to protect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=979) [your cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=981) [As I already mentioned, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=982) [should mark them all secure so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=983) [that they never leak in plain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=985) [text requests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=986) [But there are more things to do,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=988) [right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=989) [So, looking at Http Only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=990) [cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=993) [This is fairly old technology.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=994) [I would guess this has been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=997) [around for at least 15 years,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=998) [the ability to say HTTP only.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1000) [You might be familiar with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1002) [web API document.cookie.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1005) [This is a way for JavaScript to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1007) [read and write cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1010) [JavaScript is powerful.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1013) [And, as I mentioned, if you load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1015) [JavaScript from other servers,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1016) [they have access to all of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1018) [user's cookies through this API.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1019) [user's cookies through this API.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1019) [You should not be offering them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1023) [that much power.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1025) [Instead, you should protect your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1026) [cookies, especially your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1027) [authentication cookies that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1028) [effectively a way to log in as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1030) [user by marking them Http Only.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1032) [This means that-- this cookie--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1036) [and this is the set cookie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1038) [header you are seeing here where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1039) [we are sending HTTP only, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1041) [means don't expose this cookie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1043) [in the document.cookie API.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1045) [So, JavaScript can now not see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1047) [this cookie and of course not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1050) [fiddle with it, steal it, or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1051) [manipulate it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1053) [So, this is something you should](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1054) [be doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1056) [We also have another thing, new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1058) [technology as of the betas,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1060) [SameSite cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1062) [Again, you are setting this on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1064) [the set cookie header that you--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1065) [when you're setting the cookie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1067) [in the browser.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1069) [See here I've got the same site](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1070) [attribute equals strict.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1072) [There's also a lax version of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1074) [this, but what this is basically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1076) [saying is this particular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1078) [saying is this particular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1078) [cookie, only send it when I am](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1080) [the page owner, when I am the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1082) [main page, not when I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1084) [embedded.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1086) [When I own the whole user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1087) [experience, I have the whole web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1088) [view, then send this cookie.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1090) [So, in the embedded case, if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1093) [your web content is being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1096) [embedded by someone you don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1098) [trust, the SameSite cookie will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1099) [not be sent and your server can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1101) [detect this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1104) [Aha! I didn't get that SameSite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1105) [cookie, so either this user is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1107) [not logged in or I'm being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1109) [embedded and I'm not going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1111) [allow this thing to happen were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1112) [that, for instance, a sensitive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1114) [transaction.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1116) [So, that's getting in control of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1117) [being embedded.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1120) [SameSite cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1121) [OK. Cross-origin lockdown.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1123) [We're now going to look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1126) [really brand new technology.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1127) [WebKit is first implementing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1129) [these two new response headers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1131) [and they're all about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1134) [restricting who gets to load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1135) [your resources.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1137) [Cross-origin resource policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1138) [Cross-origin resource policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1138) [We've already mentioned these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1142) [two types of content that are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1143) [allowed to be loaded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1145) [cross-origin, images, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1146) [scripts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1148) [And they've been around since](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1149) [the origins of the web and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1151) [therefore there has never really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1153) [been a mechanism to say, hey, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1154) [actually don't want any other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1157) [sites to load my scripts or load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1158) [my images.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1160) [Could I just only load them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1162) [myself please?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1164) [No, we've had this thing on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1165) [web where anyone can load images](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1167) [and scripts from any server.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1168) [And now we're providing you with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1171) [a control to tell the browser,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1173) [hey, I don't want that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1175) [And it's called the cross-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1176) [resource policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1178) [In this particular example here,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1179) [I'm giving it the directive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1181) [same, meaning only my own site](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1183) [can load this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1186) [Only when my domain name is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1187) [main page domain and I'm pulling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1189) [in this image, then load the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1192) [image into the web content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1194) [process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1195) [Same thing for script here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1196) [So, when someone else comes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1198) [along and tries to cross-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1199) [along and tries to cross-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1199) [load your image or your script](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1201) [and you're sending this response](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1204) [header, those things won't be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1205) [loaded.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1207) [So, that puts you in control.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1209) [And this is new technology.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1210) [Finally, in the cross-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1212) [lockdown, we've got the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1214) [cross-origin window policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1215) [Now we're really getting into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1218) [the weeds of old web APIs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1219) [You might be familiar with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1222) [ability to open someone else's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1224) [page-- or for that matter your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1227) [own page-- in a new window.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1228) [Not like a regular link](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1231) [navigation you click and you may](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1232) [open a new tab or navigate in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1234) [the same tab, instead you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1236) [opening a full-on new window.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1238) [Back in the days, we even saw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1240) [this in a form of ugly pop-overs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1242) [or pop-ups and those kind of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1244) [things, but it's the old API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1246) [window.open.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1250) [And it has some weird things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1251) [going on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1253) [So, if your content is opened by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1254) [someone else, it looks to you as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1256) [someone else, it looks to you as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1256) [if, whoa, the user just went to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1260) [my site, I got my SameSite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1261) [cookie, everything looks fine,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1263) [but the opener maintains a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1265) [handle and kind of owns your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1267) [window and has certain APIs to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1270) [control that window that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1273) [opener can even navigate your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1275) [window outside of your control.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1276) [And with the new response header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1280) [cross-origin window policy, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1282) [finally get to say no to this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1284) [Most sites are not in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1287) [practice of using this API and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1290) [this kind of communication where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1292) [the opener owns the window.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1293) [Like, it's a very rare thing to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1295) [see on the web, but it's there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1296) [and it works that way by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1298) [default.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1299) [By sending this header, in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1300) [case deny, you're saying that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1302) [handle should not be there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1304) [It's OK to open me, but you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1307) [don't get to control me from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1309) [that point.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1310) [There is also a way added in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1311) [this-- I'm not showing it here--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1314) [but you can say allow post](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1315) [message.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1317) [You might want to be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1318) [talk between these two windows](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1319) [talk between these two windows](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1319) [without giving the opener](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1321) [control of your window and then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1322) [you can say allow post message.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1324) [OK. That's also new technology](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1327) [and now we've gone through the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1328) [cross-origin lockdown.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1330) [As you can see, that's not too](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1332) [hard.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1335) [It's a set of response headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1335) [It's the content security policy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1338) [where you whitelist things, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1339) [it's the integrity attribute for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1342) [script tags that's more or less](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1344) [what we're talking about here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1346) [I'll give you some motivation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1347) [We're going to look at some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1349) [attack scenarios.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1349) [What are you defending against](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1350) [and how to these security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1352) [technologies fit in with these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1354) [attacks?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1356) [We're going to look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1357) [cross-origin attacks,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1358) [speculative execution attacks--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1359) [some people may have heard about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1361) [Spectre-- and we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1363) [look at window control attacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1365) [Let's dive into the cross-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1367) [ones.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1368) [We're going to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1370) [cross-site scripting, when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1371) [something goes bad with your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1372) [CDN.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1373) [And that one you kind of could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1373) [tell that I was going for,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1375) [right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1376) [And cross-site request](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1377) [forgeries.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1378) [Cross-site scripting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1380) [Imagine you have built a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1381) [messaging app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1382) [You have it as a native app with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1384) [a web view for rich formatting,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1386) [for instance, and you may have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1388) [companion web app that one can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1389) [go or your users can go to in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1391) [regular web browser, and you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1393) [send messages to each other and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1395) [maybe with very rich formatting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1396) [Most of your users are, of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1399) [course, nice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1400) [Nice people sending each other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1402) [nice messages.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1403) [Some of them are angry sending](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1404) [angry messages, but every now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1406) [and then comes along a malicious](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1408) [user who might send a message](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1409) [looking like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1412) [It starts out nice, hello, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1414) [then it contains markup.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1416) [Now, if you have made a mistake](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1418) [somewhere in the chain, in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1420) [native apps web view or on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1422) [website, where this will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1423) [actually be interpreted as real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1426) [markup instead of a message,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1428) [suddenly the attacker, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1430) [malicious user here, is able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1432) [run scripts in the recipient's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1434) [browser engine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1438) [In this case, trying to steal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1439) [In this case, trying to steal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1439) [the cookies of that user.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1441) [But remember, the scripts are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1442) [running with full power.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1444) [They can take over your whole](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1445) [UI, make requests on your-- on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1447) [the victim user's behalf.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1449) [Cross-site scripting, which this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1451) [is an example of, is a bad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1453) [thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1455) [You don't want it to happen to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1455) [you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1456) [Luckily, you have marked your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1457) [authentication cookies Http](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1459) [Only, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1461) [So, ha, they're not available to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1462) [that malicious script.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1465) [Now, Http Only cookies don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1467) [protect you against cross-site](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1469) [scripting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1470) [That script is still running.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1471) [Http Only cookies protect your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1473) [cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1475) [So, you need to do something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1477) [more and what did you do?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1478) [Content security policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1480) [You started out with default](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1482) [source self, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1484) [Saying, eh, only I get to run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1486) [script on my page please.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1488) [And that means by default no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1490) [inline scripting and that whole](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1492) [class of bugs just goes away.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1495) [Now there is no way to inject](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1498) [Now there is no way to inject](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1498) [script into your web pages and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1500) [make them execute because you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1503) [set the policy for the page.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1504) [OK. What could happen if your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1508) [CDN gets compromised?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1510) [This is bad and let's just hope](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1512) [it doesn't happen, but it can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1514) [happen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1516) [So, you're loading the framework](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1517) [off of that CDN and you really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1519) [rely on this because it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1522) [executing with the same powers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1524) [as your own scripts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1525) [Now, what if they've been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1528) [compromised and are redirecting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1530) [that script request to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1531) [evil.example, loading attack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1533) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1535) [Now suddenly you thought you got](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1536) [a framework-- maybe they were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1538) [nice enough to bundle in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1540) [framework, but they're also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1541) [doing some nasty things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1542) [So, what did you do?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1544) [Well, you whitelisted script](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1547) [source in your content security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1549) [policy, so the browser will just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1550) [refuse to execute any code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1553) [coming from evil.example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1555) [OK. Oh, now the attacker needs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1558) [OK. Oh, now the attacker needs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1558) [to be a little bit more sneaky.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1561) [He or she is probably going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1563) [change the script on the CDN](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1565) [server instead of redirecting it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1567) [to the evil.example server.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1568) [So-- and it's on your white](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1571) [list, so you're going to load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1572) [and execute that script.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1574) [But, you've got subresource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1576) [integrity to save you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1579) [You are in control of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1581) [integrity of that script coming](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1582) [from a server that you don't own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1584) [and if it doesn't match the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1586) [check sum, you're going to load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1588) [it off of your own server](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1589) [instead.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1590) [So, that attack is also foiled.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1592) [OK. That's compromised CDN.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1595) [Final of the cross-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1597) [attack, the cross-site request](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1599) [forgeries.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1601) [This really ties into the last](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1603) [word, forgeries.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1605) [These are-- this is the attacker](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1606) [trying to forge a request to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1608) [look like something one of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1610) [users is trying to do, where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1612) [they're actually not.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1615) [So, we're back at the messaging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1619) [So, we're back at the messaging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1619) [app and you have this forum](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1621) [where the user is supposed to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1624) [able to send messages.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1625) [And, frankly, when it comes down](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1626) [to it, it's going to be HTTP](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1628) [requests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1629) [Probably in HTTP post when that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1630) [message comes into the server](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1632) [and look at the cookies,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1634) [everything looks good, and then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1635) [you'll send that message off to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1636) [its recipient, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1638) [Well, now comes along the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1640) [malicious attacker that of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1641) [course has phished one of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1644) [users, meaning sent a link and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1646) [lured that user onto the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1649) [attacker's site, evil.example,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1651) [and is showing some really,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1654) [really fascinating stats on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1656) [cats.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1658) [That makes the victim stay](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1659) [around for a little while at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1661) [least.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1662) [I mean you've got to check these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1662) [stats out.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1663) [What the victim user doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1665) [realize is that there's a hidden](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1667) [resource load with your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1669) [content sending a message on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1671) [victim user's behalf-- which of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1675) [course automatically adds the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1677) [cookies, that's just how the web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1679) [cookies, that's just how the web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1679) [works, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1681) [If a request goes out on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1681) [wire, cookies are added, and to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1682) [your servers this looks like I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1684) [guess this user wants to send](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1687) [this message.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1688) [That could be spam, that could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1690) [be sending links for malicious](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1691) [software.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1694) [It could be breaking up with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1695) [partner-- ah, OK, they won't go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1696) [that far, but malicious](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1698) [software, we'll stay there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1700) [So, you don't want this to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1702) [happen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1705) [Luckily, you have used same-site](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1705) [cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1710) [They will not be sent in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1711) [embedded case, which means that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1713) [your server will detect I'm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1714) [being embedded here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1717) [I don't allow the user to send](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1719) [messages from an iframe under](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1722) [some other page.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1724) [I need to own the UI when I do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1725) [this sensitive thing, such as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1727) [sending messages, I'm just going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1729) [to deny this request.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1731) [This, again, puts you in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1733) [control.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1734) [OK. We have now covered](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1736) [cross-origin attacks and looked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1738) [at how some of those security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1739) [at how some of those security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1739) [mechanisms help us.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1741) [We're going to move on to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1743) [something that's really exotic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1744) [and new; Spectre attacks or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1746) [speculative execution attacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1748) [What I'm going to cover here is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1751) [what speculative execution is,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1756) [how it can be turned into an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1759) [attack, and then we'll look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1760) [how to defend against it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1762) [So, now we're deep down in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1765) [CPU.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1767) [It's executing code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1768) [It has reached a conditional.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1771) [It's going to do something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1774) [conditionally.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1775) [It's asking itself, hey, I've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1776) [got an array index here, x.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1778) [Is this index OK?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1781) [Is this in bounds or out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1783) [bounds for my array read?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1785) [Because if it's out of bounds, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1787) [should do some error handling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1790) [here, but if it's in bound I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1791) [should go ahead and load that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1793) [data in the array.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1794) [Now, modern CPUs learn over time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1797) [Now, modern CPUs learn over time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1797) [if they see the same code path](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1800) [over and over again that, hey, x](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1802) [is always in bound.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1805) [It's always OK to load this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1807) [array.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1809) [Why don't I go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1810) [speculatively do that, before I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1811) [know whether it's OK or not?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1814) [And this is how it works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1816) [It does this code-- takes this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1818) [code path speculatively, loads](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1820) [that data, and then when the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1822) [final answer comes in, in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1825) [case, oops, no, this is one of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1826) [the rare cases where x was not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1828) [OK, you shouldn't have been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1830) [loading that data, it backs it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1831) [out and takes the right code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1833) [path.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1837) [How is this OK?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1838) [Well, it's OK because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1839) [speculative path is not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1841) [committed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1842) [It is only done in advance so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1843) [that we can take advantage of,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1845) [oh, I'm already done with all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1846) [that work when the final answer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1848) [to the original question comes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1850) [in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1852) [And that's speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1852) [execution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1853) [How can this be turned into an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1855) [attack?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1857) [It turns out that cache effects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1858) [It turns out that cache effects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1858) [that are a result of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1861) [speculative execution can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1862) [monitored by malicious code and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1864) [then they can leak that data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1867) [read that was never supposed to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1870) [happen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1871) [It was out of bounds, that load](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1873) [should have not happened, but it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1874) [effects caches and by measuring](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1876) [caches the-- an attacker can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1878) [leak that data that was not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1881) [supposed to be loaded.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1882) [OK. How does this map to web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1885) [content?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1886) [Remember the same-origin policy?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1888) [This thing that has been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1890) [protecting us for 20 years that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1891) [makes sure that the main frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1894) [from one origin cannot reach](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1896) [into and read the bytes of some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1898) [other frame, maybe your embedded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1899) [content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1901) [With speculative execution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1903) [attacks, we can no longer rely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1904) [on the same-origin policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1906) [There is now an ability-- if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1908) [can run scripts and you're in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1910) [the same process, the same web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1911) [content process as some other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1913) [content, you can read that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1915) [content through speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1917) [execution attacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1919) [execution attacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1919) [OK. This is a big challenge for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1921) [the web.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1923) [I can tell you, I've been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1924) [sitting in meetings with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1925) [other browser vendors.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1927) [We are working super hard to try](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1928) [to fix this by default for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1930) [web, but we need your help.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1932) [If you can opt into a bunch of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1935) [things-- we've already looked at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1937) [the defense mechanisms, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1939) [If you can opt into these, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1940) [can help us by telling us, hey,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1942) [I have sensitive content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1944) [I'm willing to have better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1946) [defaults.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1947) [You don't have to support these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1948) [legacy APIs for me.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1949) [Then we can be much more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1951) [aggressive in fighting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1952) [speculative execution attacks on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1954) [your behalf.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1955) [So, let's look at how this maps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1957) [The basic thing you're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1959) [try to do here to fight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1961) [speculative execution attacks is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1962) [making sure your web content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1964) [never ends up in the same web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1967) [content process as a frame from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1969) [evil.example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1971) [If they have a frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1973) [evil.example, they can execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1974) [code in your-- in the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1976) [process that your web content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1978) [process that your web content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1978) [resides in and read your bytes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1980) [So, how do we make sure this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1983) [never happens?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1984) [OK. We've got these things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1986) [First, WKWebView.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1987) [Now we're looking at apps using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1990) [WebKit as a framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1991) [I'm looking here at Safari,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1993) [which is an example of an app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1996) [that has been using WKWebView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=1998) [and we sometimes refer to it as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2000) [Modern WebKit, has been using it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2002) [for many, many years.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2004) [And it provides excellent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2005) [advantages.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2008) [For instance, these three tabs,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2010) [the evil.example, your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2012) [content, and webkit.org are all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2014) [rendered in separate web content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2016) [processes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2018) [Further, WKWebView provides you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2020) [with a separate process for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2023) [networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2024) [This is where cookies get added](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2025) [and HTTP headers are parsed and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2027) [et cetera.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2031) [Now, speculative execution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2034) [attacks all rely on being in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2036) [same web content process and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2038) [same web content process and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2038) [doing the speculation thing to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2040) [try to read things that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2042) [attacker wasn't supposed to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2044) [able to read.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2046) [Well, if you have separated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2047) [things into different processes,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2048) [this attack doesn't work, right?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2050) [You cannot do speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2052) [execution attacks across process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2054) [boundaries, so this is already a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2056) [defense here and of course](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2058) [that's super important that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2060) [web content process cannot reach](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2062) [into the network process and do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2064) [speculative execution attacks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2066) [there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2068) [But if you are still using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2070) [UIWebView, which, by the way, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2072) [are deprecating as of the betas,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2074) [you're not in a very good place.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2077) [Now, if you have evil.example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2080) [and you have your web content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2083) [and you've got the network stack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2085) [and then you put this all in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2087) [your app, from the view of a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2088) [speculative execution attack,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2091) [this all blends together.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2094) [It's all the same process space.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2096) [There are no guards for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2099) [There are no guards for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2099) [speculative execution attack in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2100) [this scenario.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2102) [You need to get off of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2104) [UIWebView.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2105) [If you move to WKWebView, you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2107) [instead get this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2110) [Out of process, separated,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2112) [badness happening in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2115) [evil.example content process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2116) [cannot affect the rest.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2118) [OK. We've moved to WKWebView.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2121) [Let's look at how content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2123) [security policy can help you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2124) [You might have an embedded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2127) [social widget from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2128) [social.example, but then you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2129) [might have an injection attack,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2133) [maybe it's the messaging thing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2134) [again where someone can send](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2136) [markup in a message and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2137) [accidentally render it and they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2138) [pull in an iframe from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2140) [evil.example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2141) [Well, you may also have an ad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2143) [there that you want to have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2145) [there and then the ad network](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2147) [gets compromised and redirects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2148) [to evil.example and then pulls](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2150) [in an iframe.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2151) [And, remember, you never want to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2152) [be in a web content process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2153) [together with a frame from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2155) [evil.example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2157) [So, what have you done?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2159) [So, what have you done?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2159) [You have deployed content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2161) [security policy and you've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2162) [specified from where you allow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2165) [frames and please don't allow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2167) [evil.example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2170) [This is how you protect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2172) [accidentally getting a frame in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2174) [your process from evil.example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2176) [So, the reverse.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2180) [Can evil.example pull your web](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2182) [content into the evil process?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2184) [Of course.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2187) [So, how do you protect against](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2189) [that?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2190) [We are back at the content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2191) [security policy and now we see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2192) [frame ancestors.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2194) [And this is what I referred to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2196) [earlier with a slightly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2197) [different flavor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2198) [You can actually say none and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2200) [this means never iframe me.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2201) [This content should never be in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2205) [an iframe from someone else.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2207) [This is my content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2209) [Only I get to render this thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2210) [So, this-- if you place this,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2212) [that-- the evil.example page](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2215) [cannot pull in your content in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2217) [cannot pull in your content in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2217) [an iframe.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2220) [And, of course, we do that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2221) [blocking in the network process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2223) [That's important, right, because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2225) [a speculative execution attack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2227) [can only happen in the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2228) [process space, so we cut it off](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2230) [before it enters where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2232) [evil.example can execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2233) [JavaScript.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2235) [OK. HttpOnly cookies, do they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2237) [really map to speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2239) [execution attacks?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2241) [Yes, they do.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2242) [They're even more important here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2243) [than to try to fight cross-site](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2245) [scripting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2247) [Why? Well, remember that old API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2248) [document.cookie is the way to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2251) [look at cookies from JavaScript?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2253) [Now that we don't-- we can't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2256) [rely on the same-origin policy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2257) [anymore, evil.example can reach](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2258) [into an iframe from your content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2261) [and actually read the cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2263) [Super bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2265) [But if you mark them HttpOnly,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2267) [WebKit will make sure to keep](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2269) [them in the network process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2271) [We don't need to move them into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2273) [the web content process because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2274) [they never need to be exposed in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2275) [the document.cookie API.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2277) [So, this automatically protects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2279) [So, this automatically protects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2279) [the cookies against speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2280) [execution attacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2282) [SameSite cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2284) [This is basically giving your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2286) [server control of the embedded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2287) [case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2289) [Again, evil.example has decide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2290) [to try to pull off a speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2292) [execution attack against your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2294) [content.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2295) [Loaded an iframe with your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2296) [content, but the SameSite cookie](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2297) [doesn't get sent, so your server](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2300) [will know that, hey, I'm being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2302) [embedded here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2303) [I'm not going to allow this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2304) [So, you're going to deny this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2305) [whole resource load.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2307) [Server side.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2309) [And that way not end up in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2311) [evil.example's process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2313) [Finally, to fight these attacks,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2315) [cross-origin resource policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2318) [Now, this was the new header I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2321) [told you about where you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2322) [tell the web browser engine](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2324) [that, hey, images, scripts, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2326) [other things from my server,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2328) [only I get to load them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2330) [So, if you say-- send this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2332) [header for your images and your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2333) [scripts on your server, we will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2335) [make sure to block them from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2337) [being loaded by evil.example and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2339) [being loaded by evil.example and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2339) [we'll do that block in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2341) [network process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2342) [Again, giving you that process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2344) [separation so that a speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2346) [execution attack cannot read](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2348) [your bytes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2349) [OK. We have the final attack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2352) [category to have a look at and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2354) [this is a pretty brief one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2356) [Window control attacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2357) [So, we're going to look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2360) [malicious window navigation,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2361) [sometimes referred to as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2363) [tabnapping, and then the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2364) [defense.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2366) [Again, we're back here at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2368) [evil.example and instead of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2369) [embedding your content, thus the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2371) [window.open opens your content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2373) [in a new window and you don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2376) [get to know.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2377) [You don't get to decide, yeah,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2378) [OK, someone opened my web page.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2379) [And the SameSite cookie may be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2382) [sent here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2384) [You might think everything's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2384) [good, but evil.example could](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2386) [wait until your user loses focus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2389) [of that page of yours and then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2392) [use the handle to navigate it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2394) [a fraud page that looks like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2397) [a fraud page that looks like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2397) [your page and asks the user to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2400) [please log in again, of course](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2402) [stealing the credentials and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2404) [sending them off to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2405) [attacker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2407) [This is one of the things that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2408) [can happen if you leave the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2409) [control up to the opener.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2410) [Instead, you deploy the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2413) [cross-origin window policy, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2414) [deny this thing, and there will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2416) [be no handler for the attacker](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2419) [page to navigate your window](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2421) [with.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2423) [So, that's the final defense in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2424) [attack.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2427) [It's time to take action.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2428) [We're going to review what we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2431) [been looking at here, just so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2432) [that you know what you need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2434) [go back to your office or your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2435) [home and start working on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2437) [First, we have to secure these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2440) [transports.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2442) [Move to HTTPS and WSS.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2444) [You should have secure cookies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2447) [You should also mark them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2449) [HttpOnly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2451) [If you take the Swede's advice,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2452) [just make all of your cookies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2454) [HttpOnly and secure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2455) [And you need to migrate off of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2457) [UIWebView to WKWebview.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2459) [UIWebView to WKWebview.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2459) [These are the basics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2462) [Then we have the defense](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2463) [mechanisms we've been going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2465) [through.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2466) [Content security policy will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2467) [help you here with cross-site](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2469) [scripting and speculative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2471) [execution attacks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2473) [HttpOnly cookies will provide](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2476) [you with some kind of protection](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2477) [against cross-site scripting,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2479) [meaning the scripts can't steal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2480) [the cookies, but it will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2482) [definitely help you against](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2484) [speculative execution attacks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2486) [because HttpOnly cookies are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2487) [kept in the network process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2489) [Subresource integrity.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2493) [This is the way you fight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2494) [against a compromised CDN.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2496) [Someone's executing code on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2498) [page that you never wanted to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2500) [there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2502) [SameSite cookies, this is a way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2504) [to fight forged requests done](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2507) [invisibly by some phishing page](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2509) [to your server.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2512) [You will know that because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2512) [SameSite cookie won't be sent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2514) [when you're embedded and so you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2516) [don't accept the request.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2517) [It also happens against](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2520) [speculative execution attacks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2521) [because if an evil page is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2523) [trying to pull in your resources](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2524) [to be able to leverage an attack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2526) [against them, again, SameSite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2528) [cookies won't be sent and you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2530) [can deny the load.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2531) [Then we get into these new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2533) [technologies, the cross-origin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2535) [resource policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2537) [This is the way you can say that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2538) [images, scripts, and other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2540) [cross-origin loads, deny them, I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2543) [only want to load this on my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2545) [page.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2547) [And, finally, controlling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2548) [windows is making sure that that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2549) [handle goes away if someone else](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2552) [opens your web content in their](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2554) [own window.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2556) [These are fairly easy to adopt,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2560) [especially for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2562) [You know your sites, you know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2564) [your web content, you know your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2565) [apps, you know how they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2567) [supposed to work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2568) [If we would just turn this on by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2569) [default for all of you, it would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2570) [probably break a few things, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2571) [you need to opt into this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2573) [And by opting in means you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2576) [should check that the security](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2578) [works-- you can try to pull off](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2579) [works-- you can try to pull off](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2579) [an attack against your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2581) [content, make sure that, yeah,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2582) [my content security policy is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2583) [defending me, good, and of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2585) [course test that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2586) [functionality that should be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2587) [there is there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2588) [We have a blog.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2591) [The WebKit project is an open](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2592) [source project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2594) [We have a blog where we talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2595) [about these technologies and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2596) [other things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2597) [This is where we'll update you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2598) [on those two last response](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2600) [headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2602) [The cross-origin resource policy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2602) [and the cross-origin window](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2604) [policy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2605) [Because we're still discussing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2606) [those with the other browser](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2608) [vendors, trying to make sure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2609) [that they're standard so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2610) [the same response headers work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2612) [across all the browsers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2614) [And so there might be slight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2616) [name changes or added attributes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2617) [that we still don't have here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2620) [Also, it's so brand new that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2622) [actually won't have access to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2624) [this until seed two or the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2626) [public seed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2628) [We don't have full support for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2629) [these in the developer seed yet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2631) [Quick shout out to these other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2635) [sessions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2636) [Please come see us, including](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2637) [me, at the Safari, WebKit, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2638) [me, at the Safari, WebKit, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2638) [Password AutoFill Lab tomorrow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2640) [at 2:00.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2641) [You can come there and discuss](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2642) [with me or my co-workers how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2644) [deploy these technologies and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2646) [make them work the best for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2647) [And there's also a session on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2649) [Friday that's more general on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2651) [what's new in Safari and WebKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2653) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2656) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/207/?time=2657)