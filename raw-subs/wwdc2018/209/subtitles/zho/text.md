# What's New in Cocoa for macOS

## Summary
Gain insights into the latest in Cocoa frameworks for macOS. Hear about Dark Mode, control tinting, contextual workflows for Touch Bar and Finder, and other improvements in AppKit, Foundation, and related areas. Get an overview and guide to the sessions that we have this year covering advancements in Cocoa.

## Info
* Developer Tools
* WWDC 2018 - Session 209 - macOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=7) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=21) [&gt;&gt; 下午好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=29) [我的名字是 Ali Ozer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=30) [我和我的同事们 Chris](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=31) [Dreessen 和 Jesse Donaldson](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=33) [将要一起为大家介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=35) [macOS Mojave Cocoa 的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=36) [如大家昨日所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=40) [今年我们在 AppKit 新增了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=42) [一些惊人的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=43) [我们将会谈到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=44) [如下的几个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=45) [我们将会讨论到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=48) [我们一直在做的 API 改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=49) [令人惊艳的新的黑暗模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=51) [以及相关的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=52) [在 layer backing 做出的一些改动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=54) [以及定制的快捷操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=56) [那么 让我们就进入这些内容的讲解吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=58) [现在 正如你们知道的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=60) [我们对我们的 API 感到自豪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=61) [而且我们的目标一直是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=64) [希望 API 可以是有效的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=65) [连续的和强大的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=67) [依据这个理念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=69) [我们一直在改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=70) [提高 Objective-C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=72) [和 API 的 Swift exposure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=74) [而且 这不仅仅存在于 AppKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=76) [或者 Foundation 其他的体系中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=78) [包括 UIKit 中也存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=80) [以及你们今天早上可能也听到过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=81) [Cocoa Touch 有什么新的改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=83) [现在 我们正在做的 API 的改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=86) [在 Objective-C 是完全源头可兼容的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=88) [而且我们也期待 到我们 GM SDK 的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=90) [它们在 Swift 会是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=92) [100% 可移动的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=94) [那么 基于以上 让我们看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=97) [在此次的发布中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=98) [API 的一些改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=99) [首先我要说一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=101) [字符串种类的一些更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=104) [在上一个发布中 我们介绍了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=108) [字符串枚举种类作为一种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=109) [去一起搜集成群相关的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=111) [字符串常数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=112) [这些帮助 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=114) [在这些种类中更加清晰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=115) [以下是一些例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=118) [以下是一些例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=118) [第一个是 NS STRING ENUM](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=120) [这被用于字符串枚举](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=123) [枚举中 我们提供框架之外的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=125) [同时框架也无法进行扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=127) [因此是固定的一套值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=129) [旁边的这个 NS EXTENSIBLE](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=132) [STRING ENUM 是被用于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=134) [declare 字符串枚举](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=137) [此处我们可以提供一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=139) [box 之外的值 但其他的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=140) [框架和 App 也可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=142) [加入到这组设定中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=143) [那么这里我们做了两个改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=146) [第一个是简单的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=148) [我们很简单地用它们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=150) [类型变体取代了 NS STRING ENUM 和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=151) [NS STRING EXTENSIBLE ENUM](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=154) [这是一个很有效的误操作变更](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=156) [这些更加常见的种类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=158) [的相同声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=159) [因此 你的代码 调用站点或者任何东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=161) [都不需要改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=163) [下一个是 NSImageName](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=164) [经历了更大一些的改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=166) [一个更加显著的改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=169) [与字符串枚举不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=170) [它被声明是 NS SWIFT BRIDGED](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=172) [TYPEDEF 实际上是一个定义类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=174) [现在 这就是 Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=176) [显示出来的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=178) [在 Swift 4 中 NSImage.Name 作为结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=180) [出现 这个结构就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=183) [你声明字符串枚举的形式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=185) [在 Swift 4.2 中 它作为一个 TypeAlias](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=187) [一个简单的 古老的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=189) [普通 TypeAlias 更加简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=192) [因此 问题就是 为什么我们要如此做呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=196) [让我们来看看一个调用站点的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=198) [这里在 Swift 4 中 就是你如何提取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=202) [一个字符串 使用命名方式在其中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=204) [创建一个 NSImage 的操作方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=206) [在这里你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=209) [你会提取这个字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=211) [我们正将它转换成 一个 NSImage.Name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=212) [再变成 named 在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=214) [我们调用 NSImage named 之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=216) [由于这里不得不重复 NSImage.Name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=217) [这种操作并没有特别流线型的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=218) [现在 由于 Swift 4.2 中的改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=222) [这就是我们需要写入的所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=225) [你无需一定要转换为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=226) [NSImage name 这种操作会更顺畅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=227) [更清晰一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=229) [也会更少冗杂](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=230) [因此我们相信这种定义类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=232) [方式对于传递值更为合适](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=233) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=236) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=236) [是的 我们也听到你们有些人说起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=241) [所以 我们相信这种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=244) [对于传递值 比如 resource names 或者标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=245) [更加合适](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=248) [基本上而言 值并不会被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=249) [框架所体现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=251) [它们只是被用于一个传递的样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=253) [图片名称 颜色名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=255) [以及窗口框自动保存的名称等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=256) [以及窗口框自动保存的名称的种类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=258) [现在 需要注意的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=261) [即使是使用这种新方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=263) [你们依然拥有特定的 API 所具有的好处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=265) [这是对 NSImage 命名方式的声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=267) [你还要注意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=270) [这里讲的还是 NSImage.Name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=271) [与字符串截然相反](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=273) [所以 我们仍然会遇到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=274) [现在 这就是所有种类的清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=276) [我们对 NSAppKit 也进行了这种操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=277) [结果证明许多种类都能从中获益](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=279) [而且不仅仅是这一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=285) [更是这一套](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=286) [因此 许多种类在这个样式里面都发生了改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=287) [接下来 我要讲一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=292) [一般的前缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=294) [如你们在过去几年中所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=296) [随着时间流逝](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=297) [我们已经逐步从多年前使用的一般后缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=298) [我们已经逐步从多年前使用的一般后缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=298) [使用的一般后缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=300) [转移到 Objective-C 中的一般前缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=302) [使用一般前缀可以使得名字成组合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=305) [使得名字成组合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=307) [也会更容易被发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=308) [并在 Swift 中遇到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=310) [那么 让我们来看下面这个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=313) [这是 NSLineJoinStyle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=316) [出现在 10.13 SDK](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=318) [这是它在 10.14 中显示的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=321) [你会发现枚举的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=324) [比如说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=325) [MiterLineJoinStyle 现在已经变成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=326) [LineJoinStyleMiter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=328) [所以 因为一个一般前缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=330) [Swift 的显示从](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=333) [miterLineJoinStyle 变成了只有 miter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=335) [因此 你可以看到 你不必](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=338) [再重复输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=340) [在调用站点体现得更为明显](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=341) [更加清晰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=343) [体验这么好 此处需要一个笑脸的表情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=344) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=347) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=349) [同时 我们对很多之前没有进行过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=351) [这种改变的其他种类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=353) [也应用了此改变的特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=354) [以下是这些种类的清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=356) [接下来 我想说的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=360) [形式化的协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=361) [在过去的时间里 我们用的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=363) [非正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=364) [主要就是 NSObject 上面的种类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=366) [将相关的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=368) [组合在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=369) [那时起 我们还增加了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=370) [一些功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=371) [比如协议上的可选方法等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=373) [我们也在可能的时候 将其转换成正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=374) [下面 我将要给你们展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=377) [我们操作的其中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=379) [一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=380) [这就是这个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=383) [validateMenuItem 它曾是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=384) [非正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=386) [在 10.13 中的一个分类对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=388) [现在 它是一个正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=391) [称为 NSMenuItemValidation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=392) [其中包含着方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=394) [Swift 的显示从](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=395) [一个扩展 NSObject 变成一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=397) [正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=399) [当然就是 Swift 4.2 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=401) [NSMenuItemValidation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=402) [当然了 这里的好处就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=403) [执行菜单项目验证的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=404) [现在有了一种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=406) [可以正式声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=408) [它们是遵照这个协议来进行操作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=409) [我想再说一遍 我们很喜欢这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=412) [对许多其他的 API 我们也做了这样的 改造](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=413) [那么 这就是我们在 AppKit 中加入的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=415) [正式协议的全部清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=417) [你会发现诸如颜色改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=420) [字体改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=421) [NSEditor NSEditorRegistration](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=422) [将相关绑定的方法等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=425) [组合在一起](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=426) [这就是新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=427) [正式协议的清单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=429) [接下来 我想要说一说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=432) [直接的实例变量访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=433) [目前 我们的 API 几乎所有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=435) [实例变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=439) [都是私密的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=441) [但是 我们已经说过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=442) [他们已经以某一种方式被声明](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=444) [尤其是在一些比较老的 AppKit 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=445) [子类被允许](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=447) [接触到实例变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=449) [直接获取到这些实例变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=451) [现在 你们中的一些人甚至](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=453) [没有意识到这个 所以请不要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=454) [直接找到然后开始使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=456) [因为这可能是之前旧的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=457) [我敢肯定这些代码你都没有写过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=459) [可能是直接从前人那里获得的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=460) [这些代码可能会直接使用实例变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=462) [所以 现在来讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=464) [我们将会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=466) [对此操作明显地表达不赞成 并在之后弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=467) [现在 如果你直接通过代码获取到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=471) [实例变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=472) [会收到一个警告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=473) [我们的想法是在未来的更新中 要切断这种操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=475) [所以 如果你遇到了这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=477) [请不要理它 直接删除这些使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=479) [请不要理它 直接删除这些使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=479) [改进的方式也非常直接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=482) [与直接获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=485) [实例变量不同的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=486) [你可以继续调用那些已经](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=487) [有获得者或者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=488) [访问过的属性 或者其他可能的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=490) [或许 你有要获取这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=491) [实例变量的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=494) [你也没有看到任何一个可以获取的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=495) [你或许可以告诉我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=496) [现在 说起弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=498) [我们还正在做另一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=500) [叫作正式软弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=503) [这么多年来 我们已经弃用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=505) [许多 API 的也使用更好的代替了它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=506) [当弃用不紧急的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=510) [我们通常](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=512) [会走非正式弃用的流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=513) [我们会告知](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=515) [API 要弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=516) [我们发布通知 对其进行标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=518) [等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=519) [在最终标记弃用之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=521) [通常这种操作可以减少破坏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=522) [但是 我们有一种方式 要正式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=524) [对 API 进行弃用标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=526) [我给大家举个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=528) [这里我们有一个符号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=530) [NSBoxOldStyle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=531) [即将变成需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=534) [被弃用的名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=535) [你会发现我们已经](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=537) [将其标记为弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=538) [它的版本号已经变成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=540) [API 即将弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=541) [此举就是为了告诉编译器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=544) [不要产生一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=547) [弃用警告或者错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=549) [然而我们的目的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=551) [如果你 Xcode 或新代码中 或者获取文件中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=552) [尝试使用这个符号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=554) [你会收到一个警告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=556) [警告此符号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=558) [已弃用 并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=559) [指向新的代替的符号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=560) [当然了 同样也是在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=562) [Swift 中碰上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=563) [你要看这里 要提示的一点是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=564) [版本号 100,000](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=568) [这不是一个提前的宣布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=569) [或者是未来的 SDK 的泄露](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=570) [它只是一个占位符编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=572) [我们目前用它来显示这个功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=574) [现在 我们在一些其他的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=580) [案例中也使用正式的软弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=581) [更早之前我给你们展示过这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=583) [并且 我告诉过你们我们重新命名了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=586) [MiterLineJoinStyle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=587) [变成 LineJoinStyleMiter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=589) [我还说了 Objective-C 源代码是 100%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=590) [兼容的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=593) [那么你可能会想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=594) [对于你重新命名的旧的符号](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=596) [进行了什么操作呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=597) [事实上 我们将那个你看到的旧富豪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=598) [事实上 我们将那个你看到的旧富豪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=598) [使用了这个新的版本号标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=600) [API TO BE DEPRECATED](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=602) [因此 我们宣布其已被弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=604) [标记是 API TO BE DEPRECATED](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=607) [意为着任何试图使用它的操作都会被警告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=608) [但已存在的使用会被保留 因为我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=611) [不想真正的破坏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=614) [在 Objective-C 源代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=616) [这个符号的使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=617) [现在 有许多符号等待着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=621) [被进行这种操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=622) [因此许多会被标记为 API TO BE DEPRECATED](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=625) [数目很多是因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=629) [我们使用一般前缀取代一般](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=631) [后缀的命名 还有一些是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=633) [其他的符号 我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=635) [不再强调弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=636) [因为我们要引入新的来取代它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=638) [尤其是支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=639) [黑暗模式的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=640) [你们在今天的晚些时候会听到有关这一方面的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=642) [最后一个我想说的话题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=644) [安全编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=646) [你们可能有所了解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=649) [我们在 10.8 and iOS 6 引入了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=650) [完全编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=653) [当你压缩的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=656) [基本上会允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=659) [基本上会允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=659) [确认什么样的类是你需要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=660) [这样 如果在压缩文件中没有遇到这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=661) [就会成为一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=664) [明显的错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=665) [现在我们处理安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=668) [编码的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=669) [是将其作为可选功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=673) [但是 我们新的 API 既允许](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=674) [安全编码作为默认动作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=676) [也允许其作为备选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=678) [同时还可支持错误返回提示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=680) [我们的压缩和解压](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=683) [API 会有一些例外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=684) [但是当然我们更偏向于错误返回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=685) [并且 新 API 激活的错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=687) [返回动作是默认的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=689) [因此 我将给你展示 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=692) [NSKeyedUnarchiver](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=694) [因为这是其中最有意思的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=695) [这是一个 NSKeyedUnarchiver](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=697) [其中一个新的方法在里面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=698) [它简单地创建了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=699) [keyedUnarchiver 非常安全地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=700) [并且用一种方式返回错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=703) [其他两个新的方法 就是这些简便的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=705) [unarchivedObject(ofClasses from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=709) [和 unarchivedObject(ofClass from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=711) [这些基本上解压了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=714) [单一个目标并返回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=716) [操作很安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=717) [并且如果遇到问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=719) [并且如果遇到问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=719) [会返回错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=721) [现在 说一下这里的第二个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=722) [这是一种装饰](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=724) [就如张扬美丽的孔雀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=726) [所有的装饰帮助](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=728) [Swift 更好地推断返回种类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=732) [这当然也是 Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=733) [擅长的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=734) [现在 要注意一下 在今年的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=736) [SDK 中被抛弃的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=738) [在 10.13 和 iOS 11 中仍可使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=740) [所以 你可以开始会用他们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=744) [即使是通过那些调度目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=745) [这些方法 取代了这里这一页的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=748) [现在 你要注意这些是在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=752) [10.14 和 iOS 12 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=754) [被弃用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=756) [因为这些不是源编码的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=758) [我们会立刻弃用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=760) [而不是通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=762) [正式软弃用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=763) [因为我们真心希望能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=764) [鼓励你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=765) [转换到安全编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=767) [如果你还没有开始的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=768) [现在 关于安全编码另一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=771) [是一个新的值转换器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=773) [你可能知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=776) [NSValueTransformer 是一个类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=776) [用于自动将值做转换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=778) [从一个转换成为另一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=779) [从一个转换成为另一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=779) [这里的两个 valueTransformers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=782) [unarchiveFromData 和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=783) [keyedUnarchivedFromData](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=785) [第一个进行无密码压缩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=787) [第二个进行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=789) [有密码压缩 但并不安全](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=790) [因此 这些方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=792) [并不是我们所喜欢的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=794) [所以我们要弃用这两个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=796) [然后使用这个新的安全的 Unarchive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=797) [FromDataTransformerName 来替代它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=799) [从而可以安全地解压](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=801) [因此 我们也希望你们能尽快转换为这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=803) [现在 在安全编码的前线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=805) [我们已经前进了不少 而且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=808) [在许多 Appkit 类中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=809) [新添加了安全编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=810) [要注意这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=813) [NSAppearance 最近已经](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=816) [越来越明显地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=818) [成为你的朋友](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=819) [在之后我们在 AppKit 中添加黑暗模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=820) [及其他功能的演讲中也会遇到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=822) [我们也在一些基础的 API 中加入了安全编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=824) [这些 API 中此前都是没有安全编码的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=826) [下面这个就是列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=828) [还有另外一个关于安全编码的提醒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=831) [我们周四上午会有一个会议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=833) [名为 你可以信任数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=835) [会上我们会讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=838) [编程 压缩和解压缩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=840) [以一种稳健又安全的形式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=841) [我邀请你们去参加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=843) [在周四早上九点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=845) [现在 演讲下面的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=847) [将是关于 AppKit 的新功能以及相关的领域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=849) [因此 接下来我要请 Chris 上台给大家做讲解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=853) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=855) [&gt;&gt; 多谢 Ali](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=861) [黑暗模式是 macOS 10.14 版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=862) [推出的最令人惊喜的功能之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=865) [我估计大家昨天都已经一睹为快了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=866) [可能你们其中的一些人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=867) [现在正运行着这个模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=868) [不过我们还是来一起看一看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=869) [我们提供了这些出色的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=872) [新系统图案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=874) [这使得我们系统的 UI 看起来很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=876) [这也会使你的 App 获得良好的视觉观感](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=877) [也能保证你自创的用户内容有良好的视觉体现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=879) [我们想要知道的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=881) [要兼容采用这个模式 都需要做什么呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=882) [第一步其实是特别简单的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=885) [我们需要重新编译](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=887) [macOS 10.14 SDK](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=889) [这个挺简单的吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=891) [其实做这一步对于我们来说就够了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=892) [但是大多数人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=893) [还是需要继续操作 再多做几步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=894) [才能让自己的 App 变得更加美观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=895) [下一步我们要操作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=898) [就是需要在我们硬编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=899) [就是需要在我们硬编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=899) [颜色数值的存储地址检索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=901) [我们的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=903) [然后我们将它替换成一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=904) [对外观敏感的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=905) [对于大多数的系统 UI 元素而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=908) [AppKit 其实提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=910) [多种动态的系统颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=912) [可以和现有的外观互动 而且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=914) [不论你想要使用什么样的 UI 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=916) [视觉效果都会不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=918) [并且 为了充实原有的系统颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=919) [我们在 macOS 10.14 中加入了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=920) [更多上述的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=922) [当然 有些情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=924) [你的操作对象不是系统 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=925) [元素 而是想要去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=926) [调整一些文档模式的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=928) [使它们能在黑暗模式中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=929) [表现得更加美观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=930) [现在你可以在素材目录中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=931) [整理你可以使用的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=932) [当你使用 Xcode 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=935) [颜色编辑器时 你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=937) [自行配置和想要设置颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=939) [相对应的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=940) [只需要使用在右方的工具栏就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=942) [在这里 我们已经为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=945) [日光外观模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=946) [黑暗外观模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=947) [以及备用外观模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=949) [都选择好了颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=950) [同颜色设置一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=952) [接下来 让我们一起浏览一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=956) [我们的 UI 系统 也找找我们可以应用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=957) [模板图像的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=959) [模板图像的奇妙之处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=960) [在于不论我们使用何种外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=961) [我们选择的模板图片都能自动匹配出正确的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=964) [例如 你可能在自己的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=966) [加入了一些深灰色的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=967) [或者纯黑色的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=970) [这些元素在日间模式下看起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=971) [自然没有问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=972) [但是在黑暗模式下就出问题了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=974) [因此呢 这时你就可以用编程方式使用模板图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=976) [你也可以在资源目录里面自己设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=979) [不过 你不需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=982) [在创建你的黑暗模式 UI 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=983) [把自己的思路限制在模板图片上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=984) [你也可以指定颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=986) [哦 对不起 是指定图片 指定在黑暗模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=988) [显示不同的图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=990) [比如 我们的 Planet App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=990) [我们需要在黑暗外观模式的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=992) [使北美这块区域更多呈现出夜晚的效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=993) [但是在其它外观情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=995) [则需要使用日光](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=996) [外观模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=997) [这里不得不提黑暗模式的最妙之处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1000) [就在于我们对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1003) [桌面图片的处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1005) [大家可以通过我接下来的演示 更好地理解我说的这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1007) [如果你只是粗略地看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1009) [系统偏好 UI 窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1010) [似乎看起来只是一个暗灰色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1012) [但是其实我们的系统偏好 UI 窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1014) [比第一眼看上去要复杂多了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1015) [我们来看一下这个窗口的后面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1016) [我们能够看到这极美的沙丘](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1018) [而且还有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1019) [而且还有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1019) [很多蓝色 很多光线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1020) [很多深灰色在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1022) [如果我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1023) [要为这个长方形区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1024) [选择一个平均的蒙板颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1025) [我们使用的是这个漂亮的深蓝色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1027) [所以 当我们创建 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1030) [然后再加回这个灰色颜色时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1031) [它不是纯灰色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1033) [我们还在里面保留了那个深蓝色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1034) [这个甚至在我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1036) [再在窗口加回单个的控制器时 还会扩散开来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1038) [他们都从桌面图片中获得了这个很棒的特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1040) [比如我们这次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1043) [想要使用另外一个桌面图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1044) [比方说这个花朵背景的桌面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1045) [看到了吧 我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1048) [的背景图片中有了更多亮紫色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1049) [亮绿色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1051) [这个也影响了系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1052) [的偏好显示窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1053) [同理 如果我们在这里使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1055) [一个红色的花朵做背景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1056) [大家也就能看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1058) [系统偏好窗口从](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1059) [这个桌面图片中获取了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1061) [这样的暖色调](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1062) [并将这种暖色调适用到所有的 UI 元素之中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1064) [你们肯定会自然想到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1067) [要实现这个功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1069) [听起来是要有很多动态的工作要做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1070) [才能确定窗口在哪里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1072) [平均的色彩是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1073) [然后再把这一切同步起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1075) [其实 大家不要觉得这个工作量很大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1077) [而产生畏难情绪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1079) [而产生畏难情绪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1079) [AppKit 能够帮你搞定这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1081) [这里有很多大家都特别熟悉的类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1084) [能够帮助](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1085) [我们把这些任务都](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1086) [自动完成好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1087) [就是 Window](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1089) [ScrollView TableView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1090) [和 CollectionView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1091) [它们在黑暗模式下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1092) [不需要任何调整都能看起来很美观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1094) [当然了 如果你想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1096) [亲自上手 你也可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1096) [对它们进行微调](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1098) [这些类都有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1100) [一个背景色属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1101) [有四个特别的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1103) [NS 颜色是我想要多解释几句的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1104) [控制背景颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1106) [窗口背景颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1107) [页面下颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1109) [以及文本背景颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1110) [这四个 NS 颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1111) [在调用这些类的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1112) [都会有一些桌面图片元素的注入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1114) [都会随同你想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1116) [创建的 UI 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1117) [相对应地看起来有些不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1118) [另一个我特别想要提到的类是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1121) [NSBox 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1124) [当你想要配置成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1125) [用户个性风格的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1127) [你可以使用填充颜色属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1129) [来选择一个特殊的 NS 颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1130) [或者其它的 NS 颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1131) [这一点意义非常重大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1133) [你可以使用 NSBox 来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1135) [给你的 UI 的某一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1136) [加上颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1137) [而其它特殊情况下 这些类表现会更不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1139) [而其它特殊情况下 这些类表现会更不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1139) [大家如果想要知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1142) [更多细节的话 我想介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1144) [另一个 AppKit 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1145) [这就是 NSVisualEffectView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1147) [另外 NSVisualEffectView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1149) [拥有材料属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1151) [能够使你决定你使用的视觉效果如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1153) [处理其后的背景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1155) [如何进行配色操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1156) [我们需要多讲几句](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1159) [才能让大家明白](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1160) [在你的 UI 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1161) [VisualEffectView 是如何运作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1163) [在 macOS 10.14 中 我们做了更多的补充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1164) [所以 不论你要创建哪一种 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1167) [我们都有适合你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1170) [应用场景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1171) [在过去的 OS 版本里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1173) [大家都知道我们直接把一些材料属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1174) [标记为 light 或者 dark](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1176) [大家在新版本中都可以不使用这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1178) [这些和许多新的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1180) [都不是特别适配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1181) [这就引出了我下一个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1183) [就是我们所说的强化色彩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1186) [我们来看看屏幕上的这些 UI 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1188) [这个视觉色彩确实很惊艳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1191) [这些元素看起来很棒对吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1193) [在 macOS 10.14 我们还](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1196) [添加了更多的强化颜色供用户来进行选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1200) [这些强化色彩](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1202) [看起来确实很惊艳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1203) [如果你要定制自己的 UI 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1204) [好吧 我先暂停下 大家先鼓掌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1206) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1208) [感谢强化颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1213) [所以 如果你要创建自己的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1214) [UI 元素的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1216) [你需要自己创建一个主题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1217) [再把这些颜色融合进去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1218) [如果你之前这样操作过的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1220) [你可能已经使用过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1221) [NSColor.currentControlTint 方法了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1223) [它会返回一个枚举结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1225) [说明系统的模式是 aqua 还是 graphite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1227) [现在我们相比过去加入了更多的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1229) [那个枚举结果自然就不够用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1231) [因此在 macOS 10.14 我们请大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1234) [切换到 NSColor 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1236) [controlAccentColor 这个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1237) [NSColor 还能帮助你处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1241) [强化颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1244) [NSColor 还能够帮你做很多其他的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1245) [如果你要创建一个 UI 元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1247) [很常见的一个特征就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1248) [你需要调整](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1250) [UI 元素的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1251) [来反映用户的互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1253) [在这一点上 NSColor 引进了一种新的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1255) [就是 withSystemEffect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1256) [我们也预先定义了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1259) [我们也预先定义了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1259) [关于互动的系统效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1260) [例如按压状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1261) [和停用状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1262) [我们需要继续进行操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1264) [给底色加上一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1265) [适合现在外观的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1267) [以及现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1268) [操作面板中的互动元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1270) [这样的话 能节省你很多的功夫](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1272) [你不需要再](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1273) [为这些状态开发一个配方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1274) [来进行颜色的调整](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1277) [尤其是你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1278) [针对不同的互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1279) [来适配数量超级多的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1280) [硬编译的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1282) [大家都可以试试这个绝妙的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1284) [我们来继续聊一聊颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1286) [macOS 10.14 有一个新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1290) [功能特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1291) [我们称其为内容着色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1294) [大家看一下我这里的模拟](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1295) [App 可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1296) [这个 App 绝大部分都是用户内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1298) [大部分都是文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1300) [有几个元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1301) [是我希望大家能够格外注意的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1302) [这些就是用户可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1305) [点击 然后开展更多操作的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1307) [在过去 我们不想使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1309) [常规的按钮图形](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1310) [因为我们觉得这样可能会冲淡内容的地位](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1312) [但是在 macOS 10.14 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1314) [我们可以允许你给无边框的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1316) [着色 然后给调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1317) [这些图像出现时着色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1319) [这些图像出现时着色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1319) [这样用户就能辨别出 哪些是可以点击可以进行互动的了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1320) [这就变得很容易了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1323) [NSButton 和 NSImageView 这两个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1326) [都有一个新的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1328) [叫做 contentTintColor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1329) [你可以把它设置成任何想要的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1330) [比如我之前提到过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1331) [那些动态颜色 就是很好的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1333) [你也能够在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1335) [Interface Builder 里面进行设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1336) [对于配置按钮来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1337) [UI 外观大致就是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1339) [对于配置图片试图而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1340) [也基本是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1341) [配色选项在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1343) [右边的工具栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1345) [我们已经讲了很多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1348) [macOS 10.14 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1349) [关于外观的很多很棒的特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1351) [我们也有更多的会议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1353) [大家在 WWDC App 里可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1355) [我们最新的讲解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1356) [都是很不错的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1357) [接下来 我来讲讲下一个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1360) [我们要讲 Cocoa](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1362) [就必须要谈谈 layer backing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1364) [我希望大家都能记住](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1367) [在 macOS 10.14 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1369) [当你要和新 SDK 连接时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1371) [AppKit 再也不会调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1372) [打开窗口的后备存储器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1374) [而是直接提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1376) [内容到窗口的服务器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1378) [它们使用核心动画图层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1379) [它们使用核心动画图层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1379) [可能比较熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1382) [iOS 开发的大家都会觉得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1383) [这个听起来似曾相识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1384) [但是大家还是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1386) [仔细看看这到底有什么不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1387) [比如我们在 UIKit 有一个这样的树形视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1389) [图像和图层的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1391) [关系其实是很简单的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1392) [每个图像都有一个图层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1395) [而且 图像间的父/子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1397) [关系也会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1398) [体现在图层树形视图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1400) [但是在 AppKit 中 我们创建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1402) [图层树状视图 其实只是一个过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1404) [只是处理视图层次的一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1406) [附带产物](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1408) [这样的话 我们就可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1409) [在一些情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1411) [使用一个图层来处理多个视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1413) [这一点很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1415) [因为这样可以减少系统内存消耗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1417) [GPU 内存消耗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1418) [也能减少窗口服务器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1419) [在显示屏幕时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1421) [要处理的请求压力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1423) [这里我也想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1425) [特别指出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1426) [刚才我提到的这个特性是动态的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1428) [基于视图层次配置的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1429) [所以 它可以进行实时变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1431) [因此 现在你就不能在图像间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1433) [图层间一直使用一种固定的父/子关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1436) [这和过去的 iOS 是不一样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1438) [从编程角度来看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1443) [现在你不需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1445) [来使用图层了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1449) [当你在 macOS 10.14 操作时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1452) [AppKit 可以帮你搞定这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1453) [如果你要配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1456) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1460) [事实上 我们并不鼓励](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1465) [大家使用这个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1467) [如果你把它设置成 ture](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1468) [我们就必须保证每个图像都](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1470) [能有自己的图层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1472) [这样的话我们就没办法开展想要的优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1473) [开展想要的优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1474) [也就是把多个图像放在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1475) [一个图层中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1477) [如果你要配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1479) [旧版的 OS 的话 你可能还要用到这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1480) [但是大部分情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1481) [你可以直接忽略它 不会有什么问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1482) [我也想要谈谈大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1485) [在 NSView UI 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1486) [使用 CALayers 创建的其他样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1488) [最简单的创建 CALayer 的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1491) [就是在 CALayer 类中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1493) [重写这个创建方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1494) [或者调用一个委托方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1497) [这个行得通](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1499) [这个行得通](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1499) [NSView 会给你提供很多功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1500) [你不需要每一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1503) [再耗费自己的精力去做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1504) [如果你调用 NSView 的创建方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1505) [它就会自动运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1508) [搞定很多事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1509) [保证外观能够很好地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1511) [适配动态颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1512) [也会帮你管理好后备存储器的分辨率](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1513) [而且 这个和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1515) [执行图层方法是一样简便的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1517) [所以 我建议大家能够在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1518) [图像层面来进行重写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1519) [而不是在图层层面进行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1521) [在一些情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1523) [当你在执行 CALayer 的显示模式时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1525) [你正在直接更新图层的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1527) [这样做可能使你觉得更加高效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1529) [或者是这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1531) [能够帮你更好地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1532) [实现自己的构想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1533) [你仍然可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1535) [NSView API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1537) [只要使用代理更新图层方法即可](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1539) [这个和使用 NSView drawRect 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1540) [得到的效果是一样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1542) [另外 你也可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1544) [在 NSView 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1546) [同步执行图层更新和调用绘画方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1548) [如果你这样操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1550) [当你的图像只有一个图层的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1552) [我们就会使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1553) [可选图层版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1554) [如果你的图像正在和其它合并](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1556) [以节省内存的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1557) [我们就会使用 drawRect 版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1558) [我们就会使用 drawRect 版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1558) [对于 printing 而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1560) [我们也应用了这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1561) [所以 执行这两点是完全行得通的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1562) [如果你的一个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1565) [是使用 CG drawing API 无法实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1566) [AppKit drawing API 也无法实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1567) [你需要做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1569) [除了要使用更新图层方法外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1571) [还要调用代理 wantsUpdateLayer 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1572) [如果你返回 ture 的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1573) [我们就能够知道你需要一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1576) [显式图层来实现你想要的展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1578) [另一个能够将 AppKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1582) [和其它核心动画特性发挥到极致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1584) [的方法是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1586) [使用 NSViews 中特别简单的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1587) [词汇创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1589) [你自己的 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1590) [NSImageView NSBox 以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1593) [NSTextField 都是特别好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1595) [创建模块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1596) [可以用来创建复杂的 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1598) [不论你使用何种技术来展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1599) [它们都能适配正确的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1602) [另外 因为我们对 layer backing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1605) [做了一些改动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1606) [有一些图案是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1608) [不再和 macOS 10.14 适配的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1609) [例如你使用 NSView lockFocus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1611) [和 unlockFocus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1613) [或者试图直接使用窗口的图像内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1615) [实际上有更好的实现方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1616) [实际上有更好的实现方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1616) [你只需要子类 NSView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1620) [并执行 drawRect 就行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1621) [这些方法之前都有些繁琐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1622) [所以 你其实能够省去一些麻烦](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1624) [其次 我还想要说一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1628) [这个其实是用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1629) [Objective-C 写的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1630) [似乎在关于 Swift 的演讲中出现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1632) [有些奇怪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1633) [事实上 最好的消息是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1634) [我还真没有看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1636) [任何 Swift 代码使用这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1638) [从中我觉得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1640) [我不希望你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1641) [做第一个尝试并给我惊喜的人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1642) [最后有关我们对 layer backing 做的改动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1646) [还需要再说一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1649) [如果你使用 NSOpenGL 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1651) [来和 OpenGL 进行协同操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1653) [要和 macOS 10.14 连接的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1654) [我们一些执行细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1657) [有关我们将图层关联 OpenGL 系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1658) [的执行细节这一层面上有一些不同之处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1659) [大家也可能发现了一些小小的变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1661) [不过最重要的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1664) [我想要大家明白一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1665) [在 macOS 10.14 上 我们不推荐大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1668) [使用 OpenGL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1669) [如果你过去一直使用 NSOpenGL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1671) [我们真的建议你换成 MTKView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1672) [今天我们还有一场会议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1675) [会仔细给大家介绍](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1677) [如何帮助开发者为 OpenGL 采用 Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1678) [如何帮助开发者为 OpenGL 采用 Metal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1678) [还有最后一点我想要聊聊的变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1683) [这个变化就是我们对于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1684) [字体反混淆化做的努力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1686) [大家可以仔细看看这两个屏幕的对比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1688) [左边的是 10.13](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1689) [右边的是 macOS 10.14](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1691) [如果我们看窗口里的文字的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1694) [基本上是一样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1696) [但是如果我们放大拉近](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1698) [放大到 48X 的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1701) [我们就能够看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1703) [macOS 10.13 实际上用的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1706) [色彩边纹效果来显示其字体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1707) [而在 macOS 10.14 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1709) [我们不再用这个效果了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1712) [这就意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1713) [我们的文字在更广的平台技术上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1714) [会变得更加美观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1716) [当然在扩展缩放模式上也会更好看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1718) [这样说来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1720) [我们还有很多好消息要和大家分享](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1722) [有关这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1723) [我想要邀请 Jesse 上台给大家讲一讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1724) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1726) [&gt;&gt; 谢谢 Chris](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1732) [大家好 今天很高兴能在这里见到你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1733) [我有很多话题要讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1735) [首先 我要从用户通知的框架开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1737) [这个功能已经在 iOS 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1739) [这个功能已经在 iOS 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1739) [使用一段时间了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1741) [这次 macOS Mojave 我们将把这个功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1742) [带给 Mac](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1744) [这个功能也能使用户更好地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1747) [控制通知](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1749) [而且这还意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1751) [你的 App 也可以像在 iOS 上一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1752) [与这些通知协同工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1753) [它们将会使用 userNotificationCenter 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1755) [NSApplication 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1757) [registerForRemoteNotifications](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1758) [以及 requestAuthorization 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1761) [作为工作的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1767) [我们也会弃用一些已经存在的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1768) [用户通知相关的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1770) [尤其是在 NSApplication](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1772) [我们将弃用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1775) [remoteNotificationType](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1776) [OptionSet 和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1777) [registerForRemoteNotifications 方法 以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1779) [enabledRemoteNotificationTypes 性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1781) [我们也会弃用所有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1785) [NSUserNotification](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1786) [那么既然你要使用 SDK 重新建立](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1789) [你最好升级用户通知框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1790) [接下来 我想讲一讲 NSToolbar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1796) [当你想在工具栏中居中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1800) [一个项目时 你可能会想要在 item 的两个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1801) [你可能会想要在项目的两侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1802) [各留一个灵活的空间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1805) [这种方式可以奏效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1807) [但还是有一些缺点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1809) [尤其是当你在工具栏中添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1810) [额外的项目时 它将会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1811) [把你的项目从中间移走](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1813) [所以 NSToolbar 现在出现了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1814) [新的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1816) [centeredItemIdentifier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1817) [你可以将想置于中心的项目设置标识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1819) [这样 NSToolbar 就会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1821) [一直将它放在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1823) [除非其他工具栏项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1825) [迫使它移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1826) [否则它会一直在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1828) [这里还有另外一个改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1831) [也值得一提](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1832) [就是自动布局现已用于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1835) [衡量工具栏的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1838) [在最大或最小的尺寸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1840) [没有进行规定的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1841) [这个功能仅适用于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1844) [10.14 SDK 的 App 但是这意味着比如说你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1846) [比如说你可以改动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1848) [按钮的大小 测量功能将会替你完成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1850) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1853) [centeredItemIdentifier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1860) [行为在 Interface Builder 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1861) [也可使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1863) [这是工具栏项目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1864) [检查窗格 你可以看到在最底下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1865) [有一个新的勾选框 写着 “Is Centered Item.”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1868) [你可以勾选上 而不必再在代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1871) [进行设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1872) [而且也不必再退回编程 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1873) [你可以继续在 Interface Builder 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1876) [进行你所有的 UI 工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1878) [提到 Interface](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1881) [Builder 我简直产生了无法形容的激动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1882) [因为 Interface](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1884) [Builder 新增了支持编辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1886) [NSGridViews](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1887) [如果你对 gridView 不熟悉的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1890) [我可以告诉你 我们多年以前就引入了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1891) [它是一种早期的布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1893) [使用一种方格状的结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1894) [来呈现你的视觉效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1896) [这是从一个钥匙串访问 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1898) [中取的范例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1899) [你可以想象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1900) [要是手动创建这种布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1902) [要动用多少系统规定参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1903) [你还可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1906) [stackViews 来构建这种效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1907) [但是 NSGridView 使整个事件更加容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1909) [并且这个 Interface Builder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1911) [中全新的编辑功能支持简直太赞了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1912) [太赞了 让我来给你展示一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1914) [这是一些 UI 来自](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1917) [storyboard 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1918) [你可以选中这些控制量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1920) [然后将它们纳入到方格的试图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1922) [那么之后 你就可以进行操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1923) [将这些小格子的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1925) [填充和直线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1926) [调整成你想要的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1927) [编辑 UI 的工作方式很像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1931) [编号电子表格 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1933) [你可以将视图拖拉或者放置到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1935) [cell 里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1936) [你可以成行成列地选中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1937) [并调整它们的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1939) [你甚至可以合并 cells](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1942) [正如你看到的最后两行那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1943) [这里举个例子 我们选中一列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1946) [这就是检查](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1949) [窗格显示的样子 可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1951) [你能调整](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1952) [这一列 cells 的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1954) [你可以调整头和尾的填充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1956) [如果我们切换到尺寸检查器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1958) [你可以给纵列调整

00:32:41.336 --> 00:32:42.976 A:middle
明确的宽度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1959) [如果你不进行设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1962) [纵列的大小就会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1964) [根据内容自动调整](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1965) [关于这个特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1969) [另外一个特别赞的事情就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1970) [它是可逆展开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1972) [GridViews 在 Interface](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1974) [Builder 中可使用 同样也可以回用到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1976) [macOS 10.13.4](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1978) [macOS 10.13.4](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1978) [如果你还没有使用合并的 cells](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1981) [你甚至可以回用到10.12](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1983) [所以 如果你想要将你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1985) [使用在较老版本的 macOS 上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1987) [别再等待了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1988) [直接使用这个超赞的新功能吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1990) [下一个我想要聊的话题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1995) [NSTextView 的一些改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=1997) [首先 有一些新的代理方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2000) [第一个是 fieldEditor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2002) [配置了一个 textView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2004) [为了给 NSTextField 用作 fieldEditor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2007) [这些都提供了一个更为简单的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2009) [来配置 textViews](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2012) [用于常见案例的使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2014) [后面的三个使得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2016) [textViews 被纳入到 scrollViews](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2018) [这是目前为止 textView 最为常见的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2020) [使用案例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2022) [但如果你不得不对 textView 做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2024) [额外的配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2025) [一定要记得查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2026) [scrollView 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2027) [documentView 这非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2029) [这些在 Interface Builder 同样也是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2031) [可以使用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2032) [因此 再次重复 这里也没有必要去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2033) [后退回编程 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2034) [下面让我们看一下 它们是什么样子的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2037) [这里的窗口做例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2039) [这里的窗口做例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2039) [显示了全部的 4 个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2040) [TextViews 有时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2042) [会被误配置 当客户需要在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2043) [textField 中优先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2044) [fieldEditor 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2046) [所以 使用一个 fieldEditor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2047) [代理方法可以帮助避免此问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2048) [下一个 scrollableTextView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2051) [应该被用于 textViews](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2054) [中弹窗和检查器窗格的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2055) [补充文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2057) [诸如此类的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2059) [接下来 最下面的两个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2060) [适用于文件内容的文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2062) [左边的适用于格式化文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2064) [右边的适用于纯文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2065) [在这一点上你可能会想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2068) [它们的区别是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2069) [因为看起来真的非常相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2071) [主要的好处就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2073) [你不必再担心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2074) [系统配置的问题了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2075) [比如说 黑暗模式的系统中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2077) [它们会看起来截然不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2078) [格式化文本的 textView 仍保持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2082) [白色背景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2084) [而纯文本会变成黑色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2086) [来匹配剩余的系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2088) [所以 通常来讲 如果你使用这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2090) [代理方法 会帮助你维持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2091) [你的 App 与系统其它 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2092) [保持一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2095) [我想说的关于 textView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2098) [的另一改变是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2099) [的另一改变是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2099) [修改文本的新方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2101) [PerformValidatedReplacement](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2104) [这个方法背后的想法是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2106) [它提供给你一种非常简单的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2107) [去修改 textView 中的文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2109) [而且还给你一种行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2110) [就像是用户自己](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2112) [做出了这个修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2114) [它控制了所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2116) [适合的你期待的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2117) [但是 真正有趣的部分是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2120) [任何一个属性 当它没有被特定指派给](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2121) [输入的字符串时 textView 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2123) [typingAttributes 会自动将其](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2127) [匹配输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2128) [我来给你们举个例子吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2130) [这个窗口有一些格式化文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2132) [代码中的一个小片段调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2133) [performValidatedReplacement](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2136) [去在中间插入 "Developers" 这个单词](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2138) [如果我们运行这个 这就是我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2141) [获得的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2142) [单词出现了 而且与周围文本的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2143) [格式一致](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2145) [我们不必去特别指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2146) [任何一个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2148) [但是 这里也有一个细微的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2150) [需要注意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2151) [因为后退](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2152) [属性来自于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2155) [typingAttributes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2156) [因此 如果你开始使用格式化文本来进行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2157) [此操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2159) [此操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2159) [插入的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2160) [最后就会显示为亮色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2162) [我们运行的还是同样的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2164) [这就是结果 格式属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2166) [来自于最后的亮色部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2169) [这个原因让你发现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2172) [在调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2174) [performValidatedReplacement 之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2175) [你需要为你即将取代的部分设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2176) [设置选定的范围](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2178) [如果你如此操作的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2182) [这就是你获得的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2184) [对于下一个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2187) [连续相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2188) [我想快速讲一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2190) [这是在 macOS Mojave 中另一个很赞的特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2191) [如果你只是使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2196) [标准的框架类 比如](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2197) [NSTextView 要利用这个特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2198) [你不需要做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2200) [特殊的设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2201) [框架会为你解决一切事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2202) [但是 如果你有更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2205) [特定的 App 需要用到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2205) [你可能需要更直接地使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2209) [另外还很重要的一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2211) [需要了解的就是它是使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2212) [现存服务的 API 去执行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2213) [所以 你需要做的就是告诉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2216) [一个框架你的回应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2218) [类有能力解决图片数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2219) [类有能力解决图片数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2219) [并且 你可以通过执行 validRequestor 来实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2221) [如果你想尝试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2225) [我会鼓励你去查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2227) [validRequestor 的文稿以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2228) [其他一些相关的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2229) [下面我想讲一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2233) [自定义快捷操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2235) [昨天年度咨文部分的会议上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2236) [你可能听到一些关于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2237) [快捷操作的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2239) [快捷操作使得简单的操作动作变得非常容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2241) [比如说打开一个最喜爱的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2244) [复杂的动作比如](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2246) [筛选文件或者调用脚本 也很简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2247) [你可以使用 App 扩展或者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2253) [Automator 的动作套装](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2255) [构建自动移快捷操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2258) [它们在很多地方都非常有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2261) [并且也有诸多方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2262) [可以调用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2263) [但是 到目前为止我最爱的还是触控栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2265) [如果将你的快速操作应用到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2268) [触控栏上 会非常容易就可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2269) [不管你在哪儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2271) [不管何时你需要它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2272) [你可以通过键盘的偏好设置中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2274) [偏好设置中获得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2275) [这项操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2276) [并且可以重新设置你的触控栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2278) [是一直展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2279) [是一直展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2279) [还是当控制功能键的时候 进行折叠](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2281) [或者 你可以将触控栏自定义](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2284) [将工作流的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2285) [拉进控制脚本中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2287) [还有一点值得注意的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2291) [你可以去快捷窗格浏览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2292) [在服务下面查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2293) [这里你可以通过打开或者关闭](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2296) [来控制哪一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2298) [可以显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2299) [正如我提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2301) [它们不仅仅是显示在触控栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2302) [我用访达窗格来进行举例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2303) [如你所见 contextual 菜单下面的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2305) [还有一个快捷操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2307) [访达的预览窗格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2311) [也有很多快捷操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2313) [显示在底部 而且完整的列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2314) [在“更多”按钮下面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2316) [Automator 的行动套装显示在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2318) [服务菜单里面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2319) [比如说 TrimLogs 就是一个我写来用于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2322) [筛选校正错误的日志的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2324) [这也引入了我想要说的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2327) [下一个话题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2328) [创建行动套装 也被成为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2330) [contextual 工作流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2332) [这是 Automator 的新功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2334) [当你进入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2336) [创建一个新文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2337) [会有一个关于 contextual 工作流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2338) [的新的可选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2339) [的新的可选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2339) [他们看起来很像平常的工作流](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2341) [除了在顶部有一个新的块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2342) [可以让你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2344) [配置输入和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2346) [输出以及选择图标和颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2347) [我们来迅速浏览一个示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2351) [我经常会面临一个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2354) [当我想在 TextEdit 中打开一些文件时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2355) [我打不开因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2356) [没有文件扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2358) [使用 Automator 就会非常容易就解决](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2360) [你要做的只是点进资料库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2364) [将打开访达项目行动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2365) [拉取出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2367) [你可以将其配置成为用 TextEdit 打开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2370) [不再使用默认的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2372) [在访达中被选中的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2375) [自动成为这个动作的输入内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2377) [如果你用什么名字保存这个文件 就会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2378) [自动出现在触控栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2383) [或者在其他有用的文本下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2384) [总结来说 我们提到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2390) [许多新的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2394) [以及其他的一些改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2396) [将会使你的开发经历更为丰富](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2397) [你的 App 更加伟大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2399) [你的 App 更加伟大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2399) [查看新的 SDK](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2401) [并开始在你的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2405) [使用这些内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2407) [会让你的 App 吸引人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2410) [你的顾客也会喜欢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2411) [更多信息 可以查看以下 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2415) [并且 也可进入 WWDC](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2417) [的 App 此演讲部分下查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2420) [所有相关的演讲链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2422) [都在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2423) [非常感谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2424) [［ 掌声 ］](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/209/?time=2425)