# Advanced Debugging with Xcode and LLDB

## Summary
Discover advanced techniques, and tips and tricks for enhancing your Xcode debugging workflows. Learn how to take advantage of LLDB and custom breakpoints for more powerful debugging. Get the most out of Xcode's view debugging tools to solve UI issues in your app more efficiently.

## Info
* Developer Tools
* WWDC 2018 - Session 412 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/

## Text
 [（使用XCODE和LLDB
进行高级调试）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=16) [（演讲412）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=22) [大家好 欢迎来到“使用Xcode
和LLDB进行高级调试”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=29) [我是Chris Miles
Xcode团队的工程经理之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=33) [今天我非常高兴能够来到这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=35) [我知道你们已经对稍后的啤酒狂欢节
早已迫不及待](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=38) [所以谢谢你们的光临](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=41) [我们会及时结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=43) [但今天我们为你提供了
许多精彩的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=44) [所以我们马上来看看吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=47) [我想先谈谈Swift调试的可靠性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=49) [这里的重点是我们带来了好消息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=53) [我们团队已在Xcode 10中
修复了很多可靠性问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=55) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=62) [编译器和调试器团队已经解决了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=68) [许多导致Swift调试
令人头痛的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=71) [我想告诉你们其中几个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=74) [在某些情况下
通常是在更复杂的项目或构建配置中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=77) [尝试po一个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=80) [或在控制台中执行一条表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=82) [可能会失败
并产生这样的错误信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=85) [此错误所说的AST上下文
是一个表达式上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=88) [LLDB需要它来恢复你构建项目时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=92) [编译器的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=95) [而在某些情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=97) [比如当模块有冲突时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=98) [这时表达式上下文不能可靠地重建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=100) [你的表达式就会失败](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=103) [在Xcode 10中
LLDB实现了回退机制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=106) [以处理这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=109) [如果它不能重建上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=111) [它会回退到创建一个
当前帧的更简单的上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=113) [并使用它来评估你的表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=116) [一些开发者可能遇到的另一种错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=120) [是由于调试器无法在调试时
实现某些变量类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=123) [所造成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=127) [这在Xcode中看起来像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=128) [在左侧 你可以看到变量视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=131) [显示了当前帧中所有变量的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=134) [但不会显示任何类型信息或值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=136) [尝试打印出变量的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=138) [可能会失败并产生像这样的错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=141) [现在 再次感谢你们的漏洞报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=144) [我们团队已经能够追踪并修复这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=146) [调试信息不能可靠生成的边缘案例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=150) [所以我想再次代表团队感谢你们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=153) [在遇到调试问题时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=156) [能够提交问题报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=159) [如果你在调试项目时
发现Xcode 10](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=160) [还有其他问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=163) [请继续为我们提交错误报告](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=165) [对于参加这次演讲的你们来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=167) [如果你发现项目存在问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=169) [请到实验室来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=170) [明天早上我们有一个
Xcode调试和分析实验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=171) [从九点到十二点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=175) [带上你的项目并找到
Xcode调试工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=177) [或LLDB工程师
他们很期待看到你的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=179) [或LLDB工程师
他们很期待看到你的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=179) [现在我想继续告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=185) [一些我最喜欢的调试技巧和窍门](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=187) [我喜欢用它们来增强我的调试流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=190) [事实上 我不只是要告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=193) [我还想为你演示一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=195) [我们今天要使用的项目是一个叫做
Solar System的iOS app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=206) [你可能见到过
Solar System出现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=209) [Keynote演讲
和“国情咨文”中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=213) [我们将要调试
Solar System中的一个部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=215) [其被称为Moon Jumper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=218) [Moon Jumper
允许用户握住手机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=220) [并跳到空中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=222) [该app可衡量你的跳跃力量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=224) [然后将其转换为月球重力](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=226) [并向你展示如果你站在月球上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=228) [你刚才跳跃的高度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=231) [你可以设置一条栏来作为目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=233) [然后你可以试着挑战自己
尽量在月球重力下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=235) [跳到该栏的高度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=238) [现在我们对Moon Jumper
进行一些改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=241) [如一些视觉增强
和GamePlay模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=244) [我们还没有准备好交付](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=248) [我们已经做了一次测试
并得到一个漏洞列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=249) [我们需要仔细看看它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=252) [所以这些都是
Solar System的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=254) [我会先解决iOS上的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=256) [稍后 Sebastian将上台
解决macOS端的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=258) [现在 正如它所说的
谁都不能离开去参加啤酒狂欢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=262) [直到我们修复所有这些漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=265) [所以没什么比与2000人结对编程
更令人振奋的事了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=267) [让我们马上动手
并从第一个漏洞开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=273) [跳跃失败动画与规范不符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=275) [那是在说什么？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=278) [我们切换到模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=280) [因为我们正在使用模拟器
来加快调试和开发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=282) [我连接了点击动作来识别它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=285) [所以每次我点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=287) [他都会成功跳到栏的高度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=289) [现在这个漏洞说的是
当宇航员没有达到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=292) [栏的高度的情况
所以让我们重现一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=294) [切换到编辑器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=297) [我将使用跳转栏导航到jump函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=299) [我将使用跳转栏导航到jump函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=299) [并在该函数的开始处设置一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=302) [现在我点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=305) [我们将进行一次跳跃
现在我们在调试器中暂停了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=306) [要指出的第一件事是在标签栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=310) [这里有四个选项卡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=313) [这个调试选项卡是由Xcode
刚为我们创建的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=314) [对于那些像我一样
喜欢在选项卡中工作的人来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=317) [这是你可以定义的Xcode行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=320) [为了做到这一点 你需要使用
Xcode菜单来编辑行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=326) [这将你带到Behavior
选项卡中的首选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=330) [在这里你可以配置许多行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=333) [在这个例子中
你需要配置Running部分中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=335) [Pauses的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=339) [这就是
当Xcode在调试器中暂停时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=340) [所触发的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=344) [你可在此看到我已配置它
显示名为Debug的选项卡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=345) [当在调试器中暂停时
Xcode将始终](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=348) [切换到该选项卡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=350) [对于像我一样喜欢在选项卡中
工作的用户 这非常棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=352) [现在切换回代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=355) [我们可以看到有一个条件语句
基于这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=356) [didReachSelectedHeight属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=359) [didReachSelectedHeight属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=359) [所以我想看看这个属性的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=360) [我们切换到调试控制台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=363) [我可以使用po命令来查看
该属性的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=365) [它当前的值为true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=368) [现在我想…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=371) [点击动作只是识别我已连接
并且总是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=372) [将其值设置为true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=374) [我想将其更改为false
以便重现该错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=375) [现在我们在代码中对其进行修改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=378) [点击以识别它
并将其设置为false](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=380) [但我不想仅为了调试目的
而对我的代码进行更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=382) [如果我能避免的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=386) [所以在这种情况下
我可以让调试器为我做这件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=388) [我可使用
expression命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=391) [我可以给它任何Swift表达式
例如](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=393) [didReachSelectedHeight=false](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=397) [它会评估并执行它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=399) [现在我们可以看到这个属性
确实已经变成了false](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=402) [如果我使用调试器单步执行这行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=406) [可以看到 我们已进入了
分支的else语句块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=408) [当我们继续运行时
我们可以看到宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=411) [无法跳到栏的高度并掉落下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=414) [这正是我们试图重现的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=417) [我希望每次点击宇航员时
都会发生这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=419) [我希望每次点击宇航员时
都会发生这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=419) [但我不想每次都暂停
并输入这个表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=422) [所以我要做的就是配置这个断点
来为我做这件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=425) [如果我右键点击断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=429) [我可以选择
Edit Breakpoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=430) [这将显示一个弹出窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=433) [用一些配置来定制断点的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=435) [我将Action设置为
Debugger Command](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=438) [并输入表达式命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=441) [即我在调试控制台中使用的命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=443) [并使其成为一个自动继续断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=447) [我们在这里配置的是一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=450) [一旦执行到这个函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=452) [该断点将被触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=454) [为我们执行这个命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=455) [更改属性的值
然后自动继续执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=456) [现在每当我点击宇航员时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=459) [他都会执行这个不成功的跳跃并回落](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=461) [现在我们需要解决什么问题呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=465) [规范说 跌倒后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=467) [宇航员应该再次站起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=469) [现在我们来修复它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=471) [我将导航到此函数
updateUIForJumpFailed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=473) [我们可以看到这个函数
使用UIKit Dynamics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=477) [我们可以看到这个函数
使用UIKit Dynamics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=477) [来模拟失败跳跃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=480) [它首先创建一个
UIDynamicAnimator](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=482) [然后调用一个函数来添加行为
以创建物理效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=486) [然后宇航员应该在
dynamicAnimatorDidPause代理回调中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=489) [被重新调整方向并定位到屏幕中间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=492) [现在我们可以向下滚动
并看到委托回调](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=497) [已成功实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=499) [这部分看起来很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=501) [但我注意到这个对象没有设置委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=502) [所以如果我在这里添加该代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=506) [我认为这个更改可以解决我们的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=508) [现在我可以重新编译并运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=511) [并尝试和验证我的修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=514) [但如果可以的话
我想尽量缩短整个周期](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=516) [所以我要做的是使用一个断点
来为我注入这个变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=518) [以便我可以快速方便地看到
这是否可以解决问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=522) [我在这里创建一个断点
双击打开编辑窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=526) [这是调出编辑窗口的快捷方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=531) [然后再次使用值为
Debugger Command的Action](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=533) [来注入一个表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=535) [输入我认为能解决问题的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=537) [那行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=539) [那行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=539) [并使其成为一个自动继续的断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=541) [我在这里进行配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=543) [尽管我已经修改了代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=544) [但我还没有重新编译过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=545) [我通过使用自定义断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=547) [来为我注入更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=549) [因此我可以使用
当前的实时app进行测试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=550) [如果我现在点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=554) [他执行了这次不成功的跳跃并摔倒
然后重新站起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=555) [我们似乎已经解决了这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=559) [我喜欢这个效果
我打算再做一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=560) [现在我们再看看笔记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=568) [我们可以勾掉第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=571) [漏洞表示已修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=574) [没有比勾掉已修复的漏洞更好的事了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=576) [接下来的三个漏洞
是关于新的GamePlay模式的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=579) [我一直在研究它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=582) [我在模拟器中
点击Play向你展示它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=583) [这里的挑战是
尝试跳过栏10次以上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=585) [栏一开始较低
随后每次升高一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=589) [你还可以看到
顶部添加了一些分数标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=593) [如果我点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=596) [你会看到他仍然被配置为
执行不成功的跳跃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=597) [你会看到他仍然被配置为
执行不成功的跳跃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=597) [这时顶部的Attempts标签
应该增加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=600) [但它没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=603) [这是我们在此遇到的
第一个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=604) [这个标签闪了一下但没有改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=606) [我们也遇到了游戏结束状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=608) [处理不当的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=611) [及Scores标签
和Attempts标签布局问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=612) [我们稍后再解决它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=615) [回到这个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=616) [如果你没有注意到
让我再次点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=618) [并密切关注顶部的
Attempts标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=620) [你会看到它闪了一下但没有更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=623) [所以这表明标签正在获取一个值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=626) [因为我们看到了过渡动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=629) [然而值不正确](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=631) [所以我想找到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=632) [修改此标签的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=634) [来看看它的逻辑是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=636) [我们注意到用户界面标签正在尝试
改变文本属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=638) [所以我要做的是切换到断点导航器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=641) [并点击底部这里的加号按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=644) [来创建这些专门断点之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=646) [你可以看到这里有
Swift Error Breakpoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=650) [和Exception Breakpoint
甚至Test Failure Breakpoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=652) [但在这个例子中
我将使用Symbolic Breakpoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=654) [这样就创建了一个新的断点
并启动了编辑器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=657) [在这里我们可以输入任何函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=659) [在这里我们可以输入任何函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=659) [或方法名称
如我们在这里用到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=663) [UILabel setText](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=666) [且我们用Objective-C格式输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=668) [因为UIKit是一个
Objective-C框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=670) [需要指出的是断点下面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=673) [有一个子行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=677) [这是来自调试器的反馈
它告诉我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=679) [它能够在UIKit Core中的
一个位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=681) [解析这个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=683) [某些符号可能会解析到多个位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=686) [它们都会显示在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=688) [如果你没有看到子条目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=689) [这表明调试器无法解析你的断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=691) [因此它永远不会命中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=694) [准备好这些以后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=696) [我再次点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=697) [现在可以看到 我们在
UILabel setText中命中了该断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=700) [然而我们没有UIKit的源代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=703) [所以我们看到的是汇编代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=706) [但没有必要留在黑暗中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=708) [即使你处于一个框架的汇编代码中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=710) [并且是系统中的的一个框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=712) [我们可以检查传入函数的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=714) [你只需要知道该架构的调用约定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=717) [就可以检查寄存器以查看参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=720) [我承认我永远记不住](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=722) [那些寄存器是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=725) [但幸运的是我不必这样做
因为调试器提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=727) [伪寄存器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=729) [现在 $arg1代表保存了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=731) [第一个参数的寄存器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=734) [现在我们可以看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=735) [该Objective-C
消息的接受者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=737) [这是一个UILabel实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=739) [我们看到它的值为“17 ft”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=742) [这表明它是这里的这个高度标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=744) [因此它不是我们感兴趣的标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=747) [我们再来看看其他的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=749) [如果你熟悉
objc_msgSend](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=752) [你可能会记得第二个参数
应该是选择器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=754) [可我们并没有看到它
那是因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=757) [LLDB不会自动知道
这些参数的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=759) [因此在某些情况下
我们需要对它进行类型转换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=762) [现在我们看到了这个消息的选择器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=764) [第三个参数是传递到方法中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=766) [第一个参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=769) [换句话说
它是传递给setText的字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=771) [所以这对于在一个框架的汇编帧中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=774) [检查参数来说非常方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=776) [检查参数来说非常方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=776) [这也不是我们感兴趣的标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=781) [所以让我们点击继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=782) [现在我们再次命中断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=785) [我们可以检查$arg1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=786) [看看接收者是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=788) [看起来它是同一个高度标签
其值现在为“0 ft”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=790) [现在我知道我的策略出了什么问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=794) [当宇航员跳跃时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=796) [代码实时更新高度标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=798) [所以断点会频繁地命中这个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=801) [这将花费我们很长时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=806) [要命中一个Attempts标签的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=807) [UILabel setText
断点是非常困难的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=809) [所以我认为我应该做的
只是将这个符号断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=812) [设置在跳跃动画完成后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=816) [有一个方法可以做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=818) [我将切换到断点导航器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=821) [如果我双击符号断点的指示符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=823) [就可以重新调出编辑器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=826) [我们可以使用这个
Condition字段](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=828) [我们可以在这里输入一个
返回true或false的表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=829) [只有当该表达式计算结果
为true时 才会触发断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=832) [因此如果我们有一个属性
如jumpAnimationInProgress](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=836) [我们写一个表达式
测试它是否为false](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=839) [我们写一个表达式
测试它是否为false](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=839) [然后断点就会被触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=841) [然而我没有该属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=843) [我要告诉你一个不同的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=845) [我将删除该符号断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=847) [并向下滚动到此函数
jumpCompleted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=849) [并在这里设置一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=852) [jumpCompleted函数
将会在动画完成后被调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=854) [以便它可以更新用户界面
并更新游戏状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=858) [然而我们不希望在这个函数中中断](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=861) [我想要做的只是配置这个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=863) [并让它在UILabel setText处
替我设置一个符号断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=866) [我可以通过添加一个
Debugger Command的Action来做到这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=869) [命令为breakpoint set
参数为--one-shot true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=872) [这个一次性断点是一个临时断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=877) [它一旦触发后就会被自动删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=879) [我们给它起一个有意义的名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=884) [UILabel setText](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=886) [并使其成为自动继续断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=888) [这里我们创建了这样一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=890) [即当执行进入
jumpCompleted函数时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=892) [它会替我们在我们感兴趣的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=896) [设置一个临时断点
然后继续执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=898) [设置一个临时断点
然后继续执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=898) [从而使我们只会在进入这个函数之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=901) [才命中setText断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=903) [让我们点击继续
我们看到跳跃动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=906) [在模拟器中完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=908) [并且现在我们在UILabel setText处
触发了断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=910) [现在我们可以
通过使用po $arg1命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=914) [看看该消息的接收者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=917) [我们看到这确实是
一个不同的UILabel实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=919) [其值为0](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=922) [因此它很可能是
顶部标签其中的一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=923) [看起来我们找到了正确的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=925) [我们来看看修改这个标签值的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=927) [我们可以在调试导航器中执行此操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=931) [通过选择栈中的下一帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=933) [现在我们已经找到了
修改标签值的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=935) [它当前使用labelText变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=938) [传入一个“0”字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=940) [往上看 我们看到
labelText始终被设置为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=942) [标签的当前值
难怪它不会改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=945) [看起来valueText才是
包含新值的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=948) [所以可能只是打错了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=951) [让我们解决它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=953) [我们将它改为valueText](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=955) [接下来我想做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=960) [不是重新编译并运行以测试此更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=962) [我想像之前一样
在当前运行的app上下文中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=964) [直接测试这个改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=968) [所以我要在当前行的下面
添加一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=970) [请记住 我们已经更改了代码
但我们没有重新编译](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=973) [所以标签仍会被设为原来的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=975) [我们在下面添加我们的代码
将其设置为我们认为正确的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=977) [设置另一个自定义断点
我们可以再次使用表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=981) [来注入该代码并使其自动继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=985) [现在如果我点击继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=989) [代码执行将经过这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=992) [我们看到Attempts标签
确实已更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=993) [我想确保它…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=996) [谢谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=998) [我想确保它在一次成功跳跃后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1004) [也适用于Score标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1007) [让我们回到这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1008) [先移除jumpCompleted中的
替我们创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1011) [一次性断点的这个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1014) [因为我们不再需要它了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1015) [我还要禁用jump函数中的断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1017) [因为我们不想再改变
didReachSelectedHeight了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1019) [因为我们不想再改变
didReachSelectedHeight了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1019) [现在当我点击宇航员时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1022) [他进行一次成功的跳跃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1023) [我们可以看到所有标签都正确更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1025) [这样看起来很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1027) [让我们回头把它勾掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1031) [好的 接下来的漏洞是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1034) [关于游戏结束状态的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1035) [游戏本应该在10次尝试后结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1038) [我可以点击宇航员并等待动画播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1040) [持续这个过程直到那个状态
以尝试重现它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1043) [但播放动画需要一些时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1047) [当测试并验证我的修复程序时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1049) [我可能需要多次这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1050) [因此我想跳过所有的跳跃动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1053) [我们来看看如何做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1056) [我们导航到
updateUIForJumpSucceeded函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1058) [我们可以看到这个函数
修改了一些颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1062) [然后调用了
jumpAstronaut(animated:true)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1066) [所以看起来我只需要调用
jumpAstronaut(animated:false)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1069) [我可以更改代码并重新编译](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1072) [但正如我之前所说的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1073) [我不喜欢为了调试目的
而改变我的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1074) [如果我能避免这样做的话
所以我们来看看我将使用的技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1076) [我在这一行上设置一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1080) [让我们清除调试控制台
并通过点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1082) [进行一次新的跳跃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1085) [现在我们在这一行暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1086) [我需要让调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1088) [将这行代码替换为
jumpAstronaut(animated:false)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1089) [然而代码已经编译过了
我们无法取代它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1093) [但我们可以做的是
让调试器跳过这一行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1095) [不执行它 而是跳过它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1099) [然后我们可以使用表达式来注入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1100) [我们所希望的调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1103) [那么我们如何跳过一行代码呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1105) [我们把注意力放在这个绿色的
Thread 1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1106) [注解标签上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1109) [我们称之为指令指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1110) [它指向包含](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1112) [接下来会执行的指令的行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1114) [这里的这个看起来像握柄的图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1116) [实际上就是一个握柄](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1119) [按住鼠标就可以移动它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1120) [这样我就可以在暂停时更改指令指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1122) [我可以把它往下移动一行 然后放手](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1125) [接着Xcode
会显示一条可怕的消息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1128) [它所说的基本就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1130) [巨大的权力会带来巨大的责任](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1132) [说实话
这是我今天告诉你们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1135) [最危险的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1137) [这项操作是有风险的
因为调试器允许你移动指令指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1138) [这项操作是有风险的
因为调试器允许你移动指令指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1138) [到你想要的任何地方
它并不关心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1142) [但它不能保证app的状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1143) [完好无损](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1145) [例如 这可能会造成内存管理问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1147) [当你试图引用尚未初始化的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1149) [或过早释放对象时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1152) [但既然这是高级调试演讲
所以我们知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1155) [我们在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1157) [让我们按下蓝色按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1158) [现在我们跳过了那行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1161) [在控制台中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1163) [我们可以使用expression命令调用
jumpAstronaut(animated:false)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1164) [现在我们点击继续
来看看这一切是否奏效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1169) [游戏状态的确已更新
而且我们跳过了所有跳跃动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1171) [我希望每当我点击宇航员时都能这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1177) [所以我要配置这个断点
来为我做这件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1179) [首先我们需要一个
跳过一行代码的调试器操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1183) [它的命令是
thread jump](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1187) [再给它一个参数
--by 1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1190) [这告诉调试器为当前线程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1191) [跳过一行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1195) [然后我们只需要调用表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1196) [我们可以通过点击加号按钮来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1199) [我们可以通过点击加号按钮来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1199) [添加另一个命令操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1201) [expression
jumpAstronaut(animated:false)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1204) [然后将其设置为自动继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1208) [我们这里有一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1210) [当运行到此行 但在执行此行之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1214) [断点将被触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1217) [它将执行跳过该行的命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1219) [然后使用表达式来调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1221) [我们想要调用的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1224) [现在 如果我们点击宇航员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1227) [我们可以快速推进游戏进展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1229) [并跳过所有动画
从而轻松地重现我们的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1231) [所以正如我所说的那样
游戏本应该在10次尝试后结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1235) [我们已经远远超过了它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1238) [让我们来看看游戏状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1240) [它们都被保存在上面这个属性中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1244) [即gamePlay](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1247) [所以我会在该属性上设置一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1248) [并执行一次新的跳跃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1250) [现在我们在对该属性的
下一个引用处暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1252) [我将使用po命令来查看
该对象的当前状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1255) [这里我们看到对这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1259) [这里我们看到对这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1259) [GamePlay对象的调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1261) [这里有一个自定义的调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1262) [所以值得指出的是
po命令能够获得](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1265) [对象的编程调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1267) [而且你可以自定义该描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1269) [来看看我们对GamePlay
做了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1271) [如果我切换到源代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1273) [并滚动到底部](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1274) [你可以看到我们添加了一个扩展
以使GamePlay符合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1276) [CustomDebugStringConvertible约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1279) [该约束要求你实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1282) [一个名为debugDescription的属性
并返回一个字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1284) [你可以返回你喜欢的
任何用于调试的字符串](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1287) [来表示这个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1290) [你也可以通过实现
debugDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1294) [来对Objective-C对象
执行相同的操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1296) [将其与命令
p GamePlay对比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1299) [p是另一种…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1302) [或LLDB命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1304) [它使用LLDB的内置格式化程序
来表示对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1307) [因此这里我们看到了
同一个对象的两个表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1310) [并且默认格式化程序向你显示
完整限定类型名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1313) [内存地址
以及所有属性及其值的列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1316) [我们可在此看到
有一个maxAttempts属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1320) [其值被正确设置为10](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1322) [因此可能某处存在逻辑错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1324) [在attempts的值增加后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1327) [没有正确判断出
它已经超过了最大值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1328) [所以我想找到修改
attempts值的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1332) [来看看其中的逻辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1334) [我将打开变量视图并展开视图控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1336) [以查看其所有属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1339) [在底部我将在过滤器中
输入GamePlay](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1341) [来找到这个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1344) [展开它的属性列表
然后选择attempts属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1345) [在这里打开其上下文菜单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1349) [并选择
Watch “attempts”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1352) [它所做的是创建一个所谓的观察点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1356) [在断点导航器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1359) [在所有断点下面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1360) [你会看到有一个叫做
Watchpoints的新组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1362) [我们有一个attempts观察点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1364) [观察点就像一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1366) [但它会在下一次变量的值改变时
暂停调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1368) [现在我们可以移除这个属性断点
因为我们不再需要它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1372) [然后点击继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1375) [现在我们已经在这个观察点停了下来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1377) [并且我们找到了
修改attempts变量的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1379) [并且我们找到了
修改attempts变量的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1379) [我现在禁用这个观察点
因为我不再需要它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1383) [我们看看这里的代码
当游戏正在进行时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1385) [增加attempts
如跳跃成功则增加score](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1387) [我没有看到任何会检测
attempts是否已超过最大值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1390) [并转换到游戏结束状态的逻辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1393) [所以我认为这就是需要改的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1397) [但在我实际更改任何代码之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1399) [我想先测试我的假设](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1400) [所以在我更改任何代码之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1403) [我要创建一个断点
并配置它注入该更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1405) [以查看它是否修复了问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1408) [我可以再次添加一个
调试器命令行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1410) [和一个表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1412) [我们要的是如果attempts
大于等于maxAttempts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1413) [则将游戏状态更改为已结束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1418) [并将其设为自动继续](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1421) [所以现在只需按下继续按钮
来测试一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1422) [是否真正解决了问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1425) [程序执行到这个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1426) [注入代码
我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1429) [它确实修复了问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1430) [我想从游戏开始时验证一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1432) [我可以点击Play again
快速轻松地完成此操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1434) [并迅速进行10次尝试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1437) [在第十次我们看到它确实检测到
游戏结束状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1439) [在第十次我们看到它确实检测到
游戏结束状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1439) [看起来这正是我们需要的修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1442) [别忘了将更改应用于你的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1452) [我将代码复制出来
拖动断点以删除它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1454) [然后将代码粘贴进去
看起来不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1457) [我们来勾掉这一项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1460) [这个部分我们只剩下一个漏洞了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1461) [即Attempts
和Score标签的布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1463) [现在这个app的布局工作
被留给了工程师们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1466) [就像优秀的工程师一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1470) [我们找到了一个好位置
将它们填到顶角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1472) [但是团队认为这不太合适](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1475) [他们将app退回
并要求我们再试一次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1478) [所以我想模拟出
这些分数标签的新布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1480) [现在我可以打开我的图形app
并开始建模了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1484) [但我是一名工程师
我喜欢用代码建模](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1487) [我其实是调试工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1489) [所以我喜欢用实时app
和真实数据在调试器中建模](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1490) [我们看看如何做到这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1494) [让我们导航回去
并在jump函数中设置断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1498) [让我们导航回去
并在jump函数中设置断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1498) [我们首先需要找到一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1503) [可与其交互的视图的引用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1505) [所以我要清空这里并打开它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1507) [进行一次新的跳跃
然后调试器在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1510) [视图控制器内的这个
jump函数中暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1512) [所以如果你有一个视图的
属性或输出口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1515) [那么这是会一个很好的引用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1518) [但如果你没有
那你需要获得视图的内存地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1520) [因此让我向你展示一些
查找内存地址的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1522) [以及如何仅通过内存地址来操作视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1524) [像我们之前说的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1528) [调试描述包含一个自定义描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1530) [所以看一下视图控制器的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1532) [我们可以看到UIView的
默认调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1534) [其中包含视图的类和内存地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1537) [所以一种方法就是
获取对象的调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1540) [由于我们有一个属性指向它
所以很容易得到这个信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1545) [但这个视图控制器视图
下面的所有视图该怎么办呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1548) [我们需要查看视图层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1552) [一种方法是使用这里的这个按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1554) [它会调用Xcode的
可视化视图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1557) [它将为层次结构拍摄快照
并为你提供3D分解视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1559) [它将为层次结构拍摄快照
并为你提供3D分解视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1559) [你可以用它来检查视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1563) [Sebastian稍后
会详细讨论这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1565) [所以我们来看看另一种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1567) [这对于更简单的层次结构很有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1569) [并且只需在调试控制台中操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1571) [这就是使用UIView上的调试函数
recursiveDescription](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1574) [我们应该可以调用 po self.view.
.recursiveDescription()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1580) [但这行不通](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1584) [为什么呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1585) [recursiveDescription
仅用于调试目的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1587) [它不是公共API的一部分
因此也不会被Swift扫描](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1590) [所以…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1594) [Swift是一种严格的语言
不允许你调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1595) [尚未严格定义的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1598) [然而Objective-C不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1600) [在Objective-C世界中
代码可以自由放纵的运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1602) [你可以做任何你想做的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1604) [我的意思是它是一种动态语言
所以你可以调用这样的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1605) [所以我们要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1609) [是告诉调试器使用
Objective-C语法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1610) [来评估这个表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1613) [实现这点的方法是
使用expression命令和选项参数-l objc](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1615) [实现这点的方法是
使用expression命令和选项参数-l objc](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1615) [这表明你即将
给expression命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1620) [一段Objective-C代码
即使你处于Swift框架中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1622) [我们再加上-O](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1626) [来告诉它我们也想要调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1628) [就像用po一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1629) [再加上--以表示没有更多选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1631) [该行的其余部分仅仅是
原始表达式输入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1634) [所以我们应该能够给它
这个方法调用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1637) [Objective-C格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1640) [不幸的是 这并不奏效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1642) [其原因是这个表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1644) [将为Objective-C
编译创建一个临时表达式上下文](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1645) [并且它不会继承
Swift框架中的所有变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1649) [尽管如此 还是有办法的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1652) [如果我们把self.view
放到反引号中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1654) [反引号就像预处理器一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1656) [它表示先评估其在当前帧中的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1658) [并插入结果
然后我们可以评估其余部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1661) [现在我们可以得到递归描述了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1663) [现在我们就可以看到所有视图的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1672) [调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1674) [我对ScoreboardView
很感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1675) [它承载着这些标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1677) [我们可以找到其中之一的内存地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1678) [我们可以找到其中之一的内存地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1678) [现在我们可以使用
po内存地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1680) [如果你是Objective-C开发者
你可能熟悉该命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1683) [这也行不通
那是因为Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1686) [不会将数字视为指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1688) [并为你解引用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1691) [所以需要在Objective-C
上下文中做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1693) [我们可以做跟刚才同样的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1696) [但我觉得这样更方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1698) [我喜欢将其简化为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1700) [一个简单的命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1702) [所以我打算通过使用命令别名
来做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1706) [我把这个命令称为poc](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1709) [我已创建了一个别名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1711) [我能简单地poc那个内存地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1712) [并查看该对象的调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1714) [我想向你展示另一种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1716) [来查看对象的描述
当你只有其内存地址的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1718) [在Swift中你可以使用一个叫做
unsafeBitCast的函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1722) [给它一个内存地址
它不安全是因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1726) [它依赖你来提供正确的类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1728) [因此我给它
ScoreboardView.self](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1731) [现在我们看到我们可以使用
unsafeBitCast函数来查看一个对象的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1734) [调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1737) [unsafeBitCast函数
的一个好处是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1739) [unsafeBitCast函数
的一个好处是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1739) [它返回一个经过类型转换的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1741) [所以我们可以调用它的函数
和属性名称 例如.frame](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1742) [我想看一下它的中心点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1746) [然后修改该中心点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1749) [我们将其改为300](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1750) [现在我们可以看到
它已经变成了300](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1752) [但模拟器中的视图并没有移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1755) [为什么会这样呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1758) [我们在调试器中暂停了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1759) [所以Core Animation
目前不会将任何视图模块更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1760) [应用到屏幕的帧缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1764) [但我们可以要求Core Animation
为我们做这件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1765) [只需使用表达式
CAtransaction.flush()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1768) [这告诉Core Animation
更新屏幕的帧缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1773) [现在我可以用这两行代码
来修复新的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1782) [继续刷新屏幕
并四处移动该视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1785) [实际上 我觉得将这些都包装到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1787) [一条命令中来移动视图会很方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1789) [所以我将这么做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1792) [我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1794) [我将切换到终端
并打开一个Python文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1796) [为什么使用Python文件呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1799) [为什么使用Python文件呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1799) [LLDB可以使用
Python编写脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1801) [你可以完全访问LLDB API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1803) [我创建了LLDB Python
脚本实现一个nudge命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1806) [它需要一个x偏移量、一个y偏移量
和一个视图表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1811) [你可以在调试器中暂停时
使用它来移动视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1814) [它可能看起来很长](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1817) [但大部分都是参数解析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1819) [其位于中间的核心部分只是在调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1821) [我们原来手动调用的表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1824) [不幸的是我们没有时间
详细研究这个脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1826) [但我们会将其放到网上以供下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1829) [以便你可以看到它是如何工作的
并以此为基础](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1830) [开发你自己的自定义调试命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1833) [让我向你展示如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1836) [启用这样的脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1838) [只需编辑你的主目录中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1840) [.lldb文件…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1843) [并添加一行
command script import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1844) [我也想添加一些我觉得方便的别名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1847) [比如我之前创建的poc别名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1850) [和一个用于刷新事务的别名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1853) [我想我会记住这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1854) [我将复制command script import
以便我们可以直接将其粘贴到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1860) [调试会话以免重新启动该会话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1863) [现在我们有了一个
叫做nudge的命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1866) [现在我可以 比方说
水平移动0点 垂直-5点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1868) [为其提供一个视图的内存地址](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1872) [并开始在模拟器中四处移动它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1875) [关于LLDB的一个很棒的地方在于
如果你只是在空行上按回车](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1886) [它会重复执行上一行
所以非常适合移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1889) [我可以将它稍微推向右侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1892) [让它看起来更好一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1895) [然后我们来移动另一个视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1896) [我们可以给它任何视图表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1898) [比如这个attemptsView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1902) [nudge的另一个特点是
一旦你给它一个视图表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1904) [下次你就不必重复它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1907) [它会记住该视图并将命令应用于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1910) [你上一次指定的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1913) [这样看起来很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1914) [这是一个比以前更好的布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1916) [现在我能做的就是获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1917) [nudge提供的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1920) [例如应用于该视图的相对于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1921) [其原始中心点的总偏移量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1924) [然后是你的框架值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1926) [我可以回到代码并修改布局代码
或我的自动布局约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1927) [我轻松地为自己的场景
构建了一种新的布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1931) [最后要做的事情是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1935) [首先别忘了勾掉该漏洞
这非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1937) [然后在重新启动或编译运行之前
要做的最后一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1942) [是禁用或删除任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1945) [注入表达式的断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1949) [因为你不希望这些代码被执行两次](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1950) [选择它们或它们所在的组
并点击删除](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1952) [是删除这些内容的快速方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1955) [这些都是一些调试技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1957) [我喜欢用它们来增强
我的调试工作流程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1959) [请注意我们如何诊断和修复
所有四个错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1963) [而无需重新编译或重新运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1968) [这可以节省大量的时间
特别是对于复杂的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1971) [并且在尝试解决难以重现的漏洞时
可能至关重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1975) [非常感谢你们与我结对编程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1979) [非常感谢你们与我结对编程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1979) [希望你们喜欢它
并且可以在调试中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1981) [使用这些技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1983) [我想快速回顾一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1995) [刚才谈到的所有的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=1997) [功能和技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2000) [首先 我们看到了
如何使用Xcode行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2003) [来调出一个专门调试选项卡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2005) [以及如何使用LLDB表达式
修改程序状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2007) [我们可以在调试器命令中
使用自动继续断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2011) [来实时注入代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2013) [我们还可以使用命令
breakpoint set --one-shot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2015) [创建依赖断点配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2018) [以作为设置另一个断点的
调试器命令行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2020) [即使在汇编帧中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2023) [我们可以很容易使用
po $arg1 $arg2等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2025) [来检查函数的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2027) [我们也可以通过拖动指令指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2030) [或使用命令thread jump
来跳过代码行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2032) [我们可以在使用观察点的变量
被修改时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2036) [请求调试器暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2038) [我们甚至可以使用
表达式expression -l objc](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2041) [来在Swift框架中
执行Objective-C代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2044) [我们可以使用 expression
CATransition.flush()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2048) [将视图更改直接刷新到屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2051) [即使是在调试器中暂停时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2053) [你还可以添加自定义LLDB命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2056) [无论是给常用命令设置别名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2059) [还是使用
LLDB Python脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2063) [完全自定义并创建自己的命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2066) [别忘了访问我们的演讲网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2068) [我们会尽快发布这个nudge脚本
以便你可以下载它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2070) [研究它并将其用作
你自己的命令的基础](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2073) [还有一件事我想和你们提一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2078) [就是当前的LLDB打印命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2080) [你可能已经很熟悉po了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2083) [在演示中我们多次用到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2084) [我们看到po](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2086) [会请求对象的调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2087) [而且你可以自定义该描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2089) [那是因为po只是一个
以下命令的别名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2091) [expression
--object-description](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2093) [或expression -O](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2096) [与p命令相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2099) [与p命令相比](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2099) [p只是expression命令
的别名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2101) [它使用LLDB的内置格式化程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2103) [来显示对象的表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2107) [需要知道的第三个命令是
frame variable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2110) [它与前两个的不同之处在于
它完全不需要编译](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2113) [和评估表达式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2116) [它只是直接从内存中
读取变量中的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2117) [然后使用LLDB的内置格式化程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2120) [所以选择使用哪个命令
其实取决于个人喜好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2124) [以及你希望在调试时看到的信息类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2126) [但重要的是要记住
如果你遇到这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2129) [即当表达式失败时
po和p可能无法工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2132) [如果你需要检查当前帧中的变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2137) [那么frame variable
应该还能正常工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2139) [接下来 我想将话筒
交给Sebastian](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2144) [他会告诉你一些高级视图调试技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2146) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2149) [谢谢你 Chris](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2155) [我很高兴能够向你展示…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2158) [我很高兴能够向你展示…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2158) [关于如何充分利用
Xcode视图调试器的提示和技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2161) [我们也会看看我们
为Xcode 10所做的改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2164) [为采用macOS Mojave
暗色外观的Mac app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2167) [的调试提供更好的体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2170) [我们将在一个演示中看到这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2174) [让我切换到演示机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2177) [我将使用与Chris刚才使用的
相同的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2180) [并且你已经看到
我们还有两个错误需要解决](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2183) [但是我不打算使用iOS app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2189) [我将使用Mac app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2192) [我们可以在这里看到
Solar System app的Mac版本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2194) [它在暗色模式下看起来很不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2198) [但有两个漏洞我们需要解决掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2201) [首先 星球图像没有正确水平居中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2203) [这是一个非常明显的漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2207) [你可以看到在右边
这张地球图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2209) [被移到右侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2212) [我们将会看看这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2213) [第二个漏洞是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2215) [在暗色模式下
弹出框中的文本不可读](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2218) [在暗色模式下
弹出框中的文本不可读](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2218) [我们来看看这是指的是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2221) [当我切换到这个app时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2223) [我可以显示轨道细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2225) [信息显示在弹出框中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2227) [你可以看到顶部的标签清晰可见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2229) [然而底部的标签很难阅读](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2231) [我必须通过选择文本来阅读它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2234) [所以这些是
我们必须要解决的两个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2236) [让我隐藏待办事项列表
然后我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2239) [所以我要使用
Xcode捕获该app的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2242) [视图层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2244) [然后检查它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2246) [我们会定位问题
然后希望能够修复它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2248) [我们就能去喝啤酒了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2250) [问题是当我切换到Xcode
以捕捉视图层次结构时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2252) [这个弹出框将会消失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2256) [因为app进入了后台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2257) [因此我们将无法捕获其视图层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2260) [我们必须要在app处于活动状态时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2263) [来对app进行捕捉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2265) [我会向你展示做到这点的两种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2266) [你可以看到当我切换到Xcode时
这个弹出框如何消失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2269) [首先 我们可以使用触摸栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2274) [我会通过从Xcode的窗口菜单
调出触摸栏模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2276) [来向你展示它的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2279) [来向你展示它的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2279) [我将切换回
Solar System app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2280) [并再次调出弹出框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2282) [然后看看触摸栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2284) [你可以看到这里有个喷雾罐图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2285) [当我在触摸栏上点击它时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2288) [你可以看到Xcode在其调试栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2289) [提供的该调试选项的子集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2293) [因此从触摸栏访问这些工具非常方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2295) [如你所见 我可以在Xcode
处于背景中的情况下调出它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2299) [因此你甚至可以在以全屏模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2302) [开发app时访问它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2304) [这其中一个选项允许我捕捉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2307) [视图的层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2310) [我不打算这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2311) [因为我知道不是每个人都有
带触摸栏的Mac](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2312) [所以我会告诉你另一种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2315) [我要关闭模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2318) [我将使用命令点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2319) [来点击Xcode的调试栏中的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2322) [命令点击是一个系统手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2326) [它允许你在不激活app的情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2328) [执行鼠标事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2331) [所以这允许我们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2333) [调用对视图层次结构的捕获](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2336) [调试器在app仍处于活动状态时
将其暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2338) [调试器在app仍处于活动状态时
将其暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2338) [我们可以看到用户界面仍然显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2342) [就好像app还在屏幕最前面
并且弹出框没有消失](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2344) [如果你想知道
为什么那个旋转的光标会出现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2347) [这是因为app在调试器中暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2349) [并且不再响应鼠标事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2351) [现在你可能在想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2354) [如果我们看看这里的视图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2355) [为什么弹出框不可见呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2358) [别担心 视图层次结构已被捕获](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2360) [当我们谈到那个漏洞的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2362) [再看看该如何查看弹出框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2364) [但首先我想看看
这个ImageView的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2366) [布局问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2368) [我先选择这个图像视图
让我放大一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2369) [当我们看一下右侧的内容时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2373) [我们可以看到这是一个
_NSImageViewSimpleImageView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2375) [这个下划线前缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2379) [通常暗示这是来自系统框架的内部类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2382) [而不是我们在代码或界面构建器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2386) [设置图像视图时所使用的类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2388) [我们来看看这个对象
在视图层次结构中的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2391) [我可以通过点击
Navigate菜单并选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2394) [Reveal in Debug Navigator
来做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2396) [我们现在可以在左侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2398) [我们现在可以在左侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2398) [看到它以及它的父视图和子视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2400) [我们能看到其父视图为
NSImageView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2404) [这就是我们正在寻找的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2407) [我们也看到其父视图
是PlanetGlobeView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2408) [以及PlanetGlobeView的父视图
是NSVisualEffectView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2411) [现在我要选择这个图像视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2416) [我们可以在右侧看到
该图像视图的其他属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2419) [我们来看看这个视图的布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2423) [我在这个app中使用了自动布局](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2425) [所以我想看看其自动布局约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2427) [我可以使用这个按钮来显示约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2430) [现在我们可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2433) [会影响此视图布局的所有约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2435) [你可以看到 例如](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2438) [此处的宽高比约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2439) [还有这条垂直线
这是一个对齐约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2441) [当我选择这个约束时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2446) [我们可以在右侧看到其中所有属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2448) [现在 如果你想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2451) [为什么视图调试器只显示线框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2452) [这是因为它只显示特定视图的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2454) [该视图需要处于所选视图的布局中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2457) [由于所有这些视图本身都没有内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2459) [由于所有这些视图本身都没有内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2459) [所以我们目前只显示线框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2463) [选择约束后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2465) [让我们来看看右侧的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2467) [我们可以看到
它与图像视图的水平中心对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2470) [也与PlanetGlobeView的
水平中心对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2474) [并且它以常量0进行对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2476) [所以它在其父视图中水平居中对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2479) [现在我们从调试导航器中
选中PlanetGlobeView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2482) [我们可以看到它向左侧稍大一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2487) [但它在右侧对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2490) [所以这有点奇怪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2491) [因为我们刚刚看到了
能够正确对齐的约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2492) [即准确的水平居中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2495) [但我们在视图调试器中
看到的却不是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2497) [我们来看看
PlanetGlobeView的约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2500) [希望能够理解正在发生的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2501) [我在这里选择前沿约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2505) [再次看看其信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2507) [我们可以看到
PlanetGlobeView的前沿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2509) [与NSVisualEffectView
的前沿对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2512) [而后者是在父视图中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2515) [所以它只是相对于它的父视图
插入进去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2516) [并且它以常量30这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2519) [并且它以常量30这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2519) [这还算合理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2521) [然后这个后沿约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2523) [将PlanetGlobeView
的后沿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2526) [与父视图的后沿对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2528) [它也以常数30这样做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2530) [现在这个约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2533) [没有附加到右侧的任何内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2535) [这有点值得怀疑
这让我在想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2536) [我们是否在此看到了整个图景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2538) [在这种情况下
通常有一个好主意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2540) [即查看是否有任何内容被裁剪了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2542) [而我们默认看不到它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2544) [你可以使用这里的这个按钮
来显示裁剪内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2546) [现在当我启用此功能时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2550) [你可以看到PlanetGlobeView
实际上向右延伸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2551) [超过了窗口范围](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2554) [现在水平居中约束变得合理了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2556) [因为它实际上正确的在父视图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2558) [水平居中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2561) [只是父视图延伸到了窗口之外](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2563) [这是一个很常见的问题
如果你在代码中设置约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2566) [你不小心交换了第一个和第二个项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2569) [从而导致布局方向错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2571) [或者你不小心弄反了常量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2573) [在这个例子中
我们使用了30而不是-30](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2575) [来将其插入左侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2579) [来将其插入左侧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2579) [所以我想要做的就是尝试反转常量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2581) [进行修复 我将使用
与Chris使用的相同技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2584) [简单的在LLDB中应用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2586) [选中这个约束](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2591) [再选择Edit-&gt;Copy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2596) [再调出底部的控制台区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2600) [刚才我复制的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2603) [是所选对象的经过类型转换的指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2607) [这适用于你在视图调试器中
以及内存图形调试器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2609) [选择的所有对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2612) [这使得在控制台中使用它们非常方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2614) [让我们…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2616) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2622) [让我们打印调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2623) [我们可以确定这个常数的确是正30](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2624) [这也是我们在信息栏中看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2628) [所以让我们将常数设置为-30](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2630) [输入e
这是expression超短缩写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2633) [转换指针的类型
然后setConstant](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2636) [转换指针的类型
然后setConstant](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2636) [为-30](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2641) [我们遇到与Chris
在上个app中看到的相同问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2643) [即app没有及时更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2646) [所以我必须要做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2648) [执行一个命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2651) [来让暂停的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2653) [调度其用户界面的更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2657) [我可以使用
Chris刚才添加的方便命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2659) [我可以在这里找到命令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2663) [现在我们可以看到地球图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2666) [正确地水平居中了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2668) [所以反转常量是正确的修复方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2670) [现在我们能够确认这一点
所以让我们在代码中应用这个改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2672) [选中约束后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2677) [你可以在右侧看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2679) [这个回溯信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2681) [那就是约束的分配回溯路径](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2682) [它准确告诉我它被分配在哪个框中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2685) [所以它可以让我直接找到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2687) [创建该约束的相应代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2690) [为了显示这个回溯信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2692) [你必须启用
Malloc Stack日志](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2695) [让我告诉你如何启用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2697) [在此找到你的方案
然后选择Edit Scheme](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2700) [并在Scheme Options的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2703) [Diagnostics选项卡中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2705) [在Logging选项处
可启用Malloc Stack日志](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2707) [并选中 All Allocations
and Free History](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2710) [这将为你提供这些方便的
分配回溯信息 即视图调试器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2713) [和Xcode的内存图像调试器中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2716) [所选对象的分配回溯信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2718) [现在当我将鼠标悬停在这个堆栈上时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2721) [我们可以看到该框的全名](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2724) [我们可以看到
这是SceneViewController中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2727) [setupPlanetGlobeLayout方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2731) [我可以使用此跳转箭头](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2733) [跳到这部分代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2736) [我通过按住Shift-Control-Option键
来做到这点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2739) [这将打开这个导航框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2741) [并允许我在新窗口中打开此文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2744) [现在你可以看到分配约束的这行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2748) [被高亮显示了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2750) [我们看到值为30的常量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2752) [我可以将其反转为-30](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2754) [保存该文件并关闭它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2756) [我们解决了第一个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2758) [完美
第二个漏洞是我们无法看清](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2761) [弹出框中的描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2764) [让我们来看看这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2768) [首先我想禁用约束模式和裁剪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2770) [以便我们可以看到内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2773) [我也将清除控制台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2777) [我一开始向你展示了如何在这款
Mac app处于活动状态时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2779) [进行捕捉
这样我们就可以在弹出窗口打开时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2782) [看到其视图层次结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2786) [然而我们没有看到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2788) [这是因为视图调试器
一次只显示一个窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2789) [我们来看看如何查看其他窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2793) [当我在视图层次结构中向上滚动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2796) [并最终找到当前窗口时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2799) [我们可以看到它在窗口控制器下面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2803) [如果我在这里折叠这个根项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2805) [我们可以看到实际上有另一个根项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2808) [这正是我们正在寻找的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2810) [我们的弹出窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2812) [所以如果你的app有多个窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2814) [macOS和iOS也是如此](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2816) [它们会在左侧的导航栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2818) [它们会在左侧的导航栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2818) [显示为多个根级别的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2820) [所以如果你认为你的app
包含多个窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2822) [那么就看看那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2826) [它们会被视图调试器所捕获](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2827) [我们可以在3D模式下看看它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2830) [我们可以看到这个大视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2832) [阻挡了我们对标签的点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2834) [我想看看这些标签以检查它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2838) [让点击穿过视图调试器中的视图
有一个技巧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2841) [你只需按住Command键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2843) [现在我可以穿过前面这个视图
并点击选中这个蓝色标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2845) [我们来看看这个标签的文字颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2849) [我想先看看在暗色中
看起来很棒的那些标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2852) [以便我们可以为底部的问题标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2854) [找出解决方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2856) [我们来看看文字的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2859) [我们可以看到这是一种RGB颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2861) [效果为这种蓝色
我们也可以看到信息栏向我们提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2863) [这种颜色的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2867) [这表明这种颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2868) [来自我们项目中的素材目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2870) [在Xcode 10中
你可以提供你定义的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2872) [单个颜色的多种颜色变体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2876) [例如 你可以提供一种用于浅色
另一种用于暗色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2877) [例如 你可以提供一种用于浅色
另一种用于暗色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2877) [并且使用哪种颜色变体](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2880) [取决于视图的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2884) [你也可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2885) [在信息栏中得到这些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2887) [向下滚动信息栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2889) [到视图部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2891) [你可以看到有Appearance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2892) [和Effective外观选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2893) [现在Appearance选项
没有在这个视图上明确设置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2895) [这是一种非常常见的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2898) [因为大多数视图继承了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2899) [其任意一个父视图的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2902) [比如窗口或app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2904) [但是你可以在这里看到
所继承的有效外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2907) [那就是VibrantDark](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2909) [这将决定你在素材目录中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2911) [定义的哪种颜色会被使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2912) [好的 事实上在信息栏的此处](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2916) [我想指出
Description属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2919) [这是该对象的调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2921) [Chris先前向你展示了
如何为你的对象提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2924) [自定义调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2926) [所以你不仅受益于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2927) [当你在对象上使用po时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2929) [你的控制台会显示清晰的调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2932) [你也可以从视图调试器中获益](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2934) [因为它在信息栏中也会显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2936) [好的 让我们回到文本颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2939) [好的 让我们回到文本颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2939) [我想选择第二个标签
因为它在暗色中看起来也还不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2941) [这次我们仍可以看到
一个带有名称的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2945) [它是labelColor
但它以System为前缀](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2947) [这表明它不是
来自我们自己的素材目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2950) [而是来自系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2952) [当然 系统颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2954) [也会自动适应外观变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2955) [现在看看这个有问题的标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2958) [我们可以看到它是非常深的灰色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2961) [并且没有名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2964) [这意味着它是一种自定义颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2965) [它不会适应外观变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2967) [所以我们想要做的是改变它的颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2970) [将其文本颜色设置为系统颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2973) [所以选中这个对象后
我按下Command-C键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2977) [键入e命令 粘贴类型转换后的指针
并设置setTextColor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2981) [为NSColortextColor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2987) [我必须再次刷新才能看到效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2991) [我们可以看到弹出框现在更新了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2993) [字体很好看并且可读性强](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2995) [现在 我不打算在我的故事本文件中
应用此修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2998) [现在 我不打算在我的故事本文件中
应用此修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=2998) [但我想指出的一点是
你这么做很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3002) [即当你对用户界面进行更改时
你需要验证你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3005) [在所有外观中都仍然很好看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3009) [因为现在存在多种系统外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3011) [我会告诉你如何做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3014) [我将继续运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3015) [我并不需要将我的整个系统外观
切换为浅色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3018) [以查看标签在浅色背景下
是否仍然看起来不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3021) [Xcode 10
为你提供了一种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3024) [来仅仅改变目标app的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3026) [你可以在调试栏中使用这个按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3029) [我可以在这里选择Light](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3031) [你可以看到app
现在以浅色外观呈现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3033) [我可以调出弹出框
从而验证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3037) [其文本清晰可读](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3041) [这证实我们的确
解决了我们的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3042) [由于以不同的外观查看你的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3045) [是一个非常普遍的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3047) [我们实际上在触摸栏中提供了该选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3050) [我马上向你演示一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3053) [我将再次调出触摸栏模拟器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3054) [并打开弹出框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3056) [我可以选择这个选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3059) [我可以选择这个选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3059) [你现在可以在触控栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3061) [看到所有的覆盖选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3063) [所以即使你的app处于全屏模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3064) [你也可以访问它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3066) [让我切换到
High Contrast Light模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3068) [它可以实现高对比度的无障碍功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3070) [同时覆盖外观为浅色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3074) [这样你可以确保你的app
在该配置中也看起来不错](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3077) [当然我也可以回到系统外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3082) [我们确认了我们的问题已经解决](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3085) [现在我可以在漏洞列表中勾掉它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3088) [就这样
我们完成了我们的演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3091) [我会回到幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3093) [让我们回顾一下刚刚看到的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3103) [我向你展示了如何使用
Reveal in Debug Navigator选项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3106) [在左侧的层次结构中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3108) [定位你当前选中的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3110) [我向你展示了如何显示裁剪内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3113) [并且我们使用了自动布局调试功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3116) [来定位我们的约束问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3118) [来定位我们的约束问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3118) [我向你展示了如何使用对象指针](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3121) [要使用它你只需复制选定对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3123) [并在LLDB中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3127) [我们看了一下构建过程回溯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3128) [如果你在Scheme Options中
启用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3130) [Malloc Stack日志
就可以使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3132) [来直接跳转到代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3135) [并应用约束所需的更改](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3137) [我们看了一下调试描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3139) [它在视图调试器的信息栏中
用起来很方便](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3141) [我们使用了点击量功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3145) [来选中位于一个视图后面的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3147) [关于调试暗色模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3151) [我们看到你可以通过直接使用
Xcode的调试栏或触摸栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3152) [轻松更改目标app的外观](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3156) [我向你展示了如何捕捉
处于活动状态的Mac app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3159) [我们也看了一下命名颜色信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3162) [及其NSAppearance信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3164) [它们在Xcode的视图调试器的
信息栏中可见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3165) [若你想了解更多
关于在你的Mac app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3169) [使用暗色模式的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3171) [请观看这两场演讲的视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3173) [我们这次的演讲就到此结束了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3177) [若你想了解更多此次演讲的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3179) [若你想了解更多此次演讲的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3179) [包括Chris先前向你展示的
nudge脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3181) [它们会被发布在演讲网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3185) [如果你对本次演讲的任何内容
或一般性调试问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3187) [有任何疑问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3190) [明天上午9点将有一个
分析和调试实验室](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3191) [Chris和我会在那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3194) [我们很乐意回答
你可能遇到的任何问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3195) [另外如果你对内存调试感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3198) [还有一个“iOS内存深潜”演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3200) [它也在明天](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3202) [最后 我希望你在啤酒狂欢节中
度过美妙的时光](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3204) [并享受此次大会的其余部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/412/?time=3207)