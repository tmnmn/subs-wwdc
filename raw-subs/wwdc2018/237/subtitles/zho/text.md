# Quick Look Previews from the Ground Up

## Summary
Quicklook Previews are an easy way preview documents in your app. Hear about the basics as well as some advanced implementations. Learn to present a variety of types of documents from within your app without reinventing the wheel, and make sure your custom file format works great with the built-in support offered by iOS.

## Info
* Frameworks
* WWDC 2018 - Session 237 - iOS, macOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=7) [&gt;&gt; 在这个讨论会中 我们将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=18) [向你介绍 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=19) [欢迎参加 Quick Look 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=21) [“Preview from the ground up（入门预览）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=22) [我是 Raffael](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=24) [我将与另一位 Apple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=26) [软件工程师 Maxime](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=28) [一起向大家讲解](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=29) [我们首先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=30) [会进行一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=34) [Quick Look 的概述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=36) [然后我们将向你展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=37) [如何在 App 中 采用 “Quick Look Preview](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=39) [Controller（Quick Look 预览控制器）”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=41) [然后我们将解释](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=43) [如何为你自己的文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=45) [提供自定义 Quick Look 预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=47) [和自定义缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=51) [让我们开始吧 什么是 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=55) [Quick Look 被用来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=60) [预览文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=61) [它让你能轻松地展示文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=63) [更准确地说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=67) [Quick Look 是一个 iOS 框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=69) [它为开发者提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=70) [多个核心功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=72) [它允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=75) [预览几种常用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=76) [文件格式的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=78) [为你的文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=81) [提供自定义预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=83) [并为你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=87) [自定义文件格式的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=89) [向系统提供缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=91) [实际上 Apple 的许多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=95) [第一方 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=97) [已经在使用 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=98) [例如 在“文件”中显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=101) [存储在云中的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=103) [或者在“邮件”和“备忘录”中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=111) [预览你的附件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=113) [在“信息”中显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=121) [你已经发送的照片和视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=123) [所以 这个讨论会的目标听众是谁呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=132) [如果你想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=133) [如何在 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=135) [展示文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=137) [而不需要实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=138) [用户所使用的所有常见功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=139) [那么你就来对了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=142) [你可能还拥有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=144) [iOS 原本不支持的自定义文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=146) [你想要保证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=149) [你的文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=150) [通过自定义缩略图和预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=152) [被 iOS 正确地处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=154) [如果你想了解更多信息 就不要离开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=156) [不管你是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=159) [iOS 的新手](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=160) [还是已经有了一个 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=163) [我们都会一步一步地指导你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=165) [顺便说一句](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=169) [如果你还没看过的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=170) [你应该看看去年的讨论会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=171) [“在 iOS 中打造](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=173) [优秀的基于文稿的 App”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=175) [那次我们介绍了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=177) [UIDocumentBrowserViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=179) [UIDocumentBrowserViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=179) [也简要介绍了一些关于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=181) [Quick Look 的预览和缩略图扩展功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=183) [的基础内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=184) [今年还将会有一场](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=187) [文稿浏览器入门](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=189) [的讨论会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=190) [如果你对 iOS 上的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=191) [文件处理感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=194) [我们强烈建议你参加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=195) [Quick Look 已经存在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=201) [有一段时间了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=202) [它是在 iOS 4 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=203) [SDK 中引入的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=205) [你最感兴趣的应该是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=208) [QLPreviewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=209) [它是一个预览文稿的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=210) [视图控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=212) [它使用经典的数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=216) [和委托模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=218) [这些你已经从你的 UIKit 和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=220) [其他框架中知道了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=221) [要想用一个漂亮的缩放变换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=222) [来展示 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=226) [我们给你的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=227) [是最便利的方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=229) [你为什么想使用 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=235) [如果你有一个与“文件” “邮件”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=236) [或其他我们之前展示给你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=238) [或其他我们之前展示给你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=238) [相似的用例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=240) [Quick Look 是你最好的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=242) [Quick Look 可以直接使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=245) [你想要的它都有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=247) [它支持常用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=250) [文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=251) [并提供给用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=254) [从其他第一方 iOS App 已经习惯的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=256) [原生用户体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=258) [我们确保 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=261) [在所有设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=262) [都具有优异的性能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=264) [因此所有的动画和手势都很流畅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=266) [你可能正在处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=270) [来自不可信来源的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=271) [但别担心 有我们在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=273) [Quick Look 附带了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=275) [复杂的安全模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=276) [可以保证 App 的安全性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=278) [让我们看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=284) [受支持的文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=285) [正如你所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=287) [囊括了所有的常用类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=288) [媒体文件 比如图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=290) [音频文件和视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=292) [文稿 比如 PDF](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=294) [办公文件以及压缩档案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=296) [预览压缩档案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=300) [允许你查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=302) [档案中的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=304) [并单独查看其中的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=306) [或共享等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=308) [现在如果你的自定义文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=311) [并不在这个列表中 那也不要担心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=313) [去年我们引入了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=316) [一个新的扩展点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=317) [来实现 Quick Look 的预览扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=319) [预览扩展允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=321) [作为开发者为自己的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=323) [自定义文件格式的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=325) [创建预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=327) [我们将在讨论会的第二部分讨论这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=328) [今年有了 iOS 12 我们也增加了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=332) [对新的 AR 文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=335) [USDZ 的支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=337) [所以只要几行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=341) [你就可以在 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=343) [获得完全沉浸式的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=344) [增强现实体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=346) [好的 现在我们谈一谈用户体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=348) [对于刚才所显示的每个文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=351) [我们确保 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=353) [为你的移动设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=355) [提供了最好的预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=356) [例如 当你预览图像时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=360) [你可以方便地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=361) [放大图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=364) [你也可以用一个向下滑动的手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=366) [来关闭 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=368) [在 PDF 文稿中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=371) [你会有一个带有缩略图的侧边栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=374) [便于导航](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=376) [在电子表格中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=378) [你可以切换文稿的各个页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=380) [在媒体文件中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=384) [我们展示了一个滚动条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=386) [允许你前后快进 等等](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=388) [你应该明白了吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=389) [所以当你选择 Quick Look 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=392) [你的用户可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=394) [所有其他 App 可以使用的手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=396) [那么对于 Quick Look 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=403) [常见用例是什么呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=404) [例如 你可能希望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=407) [让用户放大照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=409) [或者希望能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=411) [通过左右滑动 快速浏览一组照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=414) [你想要播放音频或视频文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=417) [你想要播放音频或视频文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=417) [而不需要处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=420) [底层框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=422) [或者你想要呈现一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=423) [可滚动 可缩放的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=426) [PDF 形式的用户协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=428) [那就使用 Quick Look 吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=432) [但是 Quick Look 不应该被误用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=436) [这些时候不应该使用 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=437) [Quick Look 提供预览功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=441) [但不提供编辑功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=442) [因此如果你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=446) [图像编辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=447) [PDF 管理 或者电影剪辑等功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=449) [你需要选择另一种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=452) [类似地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=459) [如果你需要为你的视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=460) [提供更高级的播放控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=462) [Quick Look 可能不是最好的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=463) [你可以使用 AVPlayer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=466) [Quick Look 应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=469) [全屏显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=470) [如果你只是想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=471) [展示嵌入布局的一个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=473) [一个视频或一个文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=475) [以及它周围的其他视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=477) [你可能想要使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=479) [你可能想要使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=479) [UAImageView AVPlayer WKWebView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=480) [或其他类型的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=484) [还要注意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=488) [暂不支持定制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=490) [Quick Look 的视图层级结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=492) [请不要尝试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=494) [在预览前面添加别的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=496) [比如导航工具栏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=497) [这是目前不支持的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=500) [现在我们已经介绍了 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=506) [让我们看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=507) [如何充分利用我们的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=509) [如果你想把文稿作为第一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=517) [呈现给用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=518) [你要实例化一个新的 QLPreviewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=520) [它基本上就是一个 UIViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=524) [接下来 为了告诉 previewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=528) [要预览哪些文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=530) [你需要为它分配一个 dataSource（数据源）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=533) [dataSource 是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=535) [遵循 QLPreviewControllerDataSource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=537) [dataSource 协议的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=538) [dataSource 协议的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=538) [我们马上就会看到这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=540) [第三步也是最后一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=543) [你要做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=547) [展现这个视图控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=549) [让我们仔细看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=555) [dataSource 是如何工作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=556) [你的数据源必须遵循](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=558) [QLPreviewControllerDataSource 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=560) [这是一个需要两个方法的协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=564) [首先你需要返回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=566) [预览控制器应该](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=568) [预览的项目数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=570) [它应该提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=572) [一个以上的项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=574) [让用户将能够左右滑动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=576) [浏览文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=577) [接下来 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=581) [根据你之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=583) [返回的数值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=584) [QLPreviewItem 向你询求一个或多个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=586) [那么 什么是 QLPreviewItem 呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=590) [它是一种对文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=593) [进行抽象的协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=594) [对于 Quick Look 而言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=597) [QLPreviewItem 基本上就是 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=599) [QLPreviewItem 基本上就是 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=599) [我可以在这找到磁盘上的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=602) [以及可选的标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=604) [Quick Look 将把它显示在导航栏中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=606) [在你的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=609) [表示文稿的类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=612) [需要遵循 QLPreviewItem 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=614) [但是顺便说一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=616) [NSURL 已经遵循了 QLPreviewItem 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=619) [所以如果不需要自定义标题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=621) [你可以直接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=623) [返回数据源中的 NSURL 实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=625) [而无需自己实现协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=629) [让我们看一下这个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=631) [在这个场景中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=636) [显示 Quick Look 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=638) [视图控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=639) [充当 QLPreviewController 的数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=641) [因此我们让它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=644) [在扩展中遵循](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=646) [QLPreviewControllerDataSource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=648) [并执行了这两种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=650) [这里我们使用一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=653) [文件 URL 数组作为 Model](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=654) [我们返回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=657) [numberOfPreviewItems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=659) [numberOfPreviewItems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=659) [(in controller:) 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=662) [中的 URL 数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=663) [然后每个 URL 会相应地被](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=664) [previewController(_ controller:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=667) [previewItemAt index:) 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=670) [中的索引引用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=672) [好的 我们已经设置好了 previewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=679) [它知道要预览哪些文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=682) [所以我们已经准备好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=684) [展示视图控制器了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=685) [有两种方法可以选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=687) [你可以在当前环境顶上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=689) [模态地显示 previewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=690) [也可以将 previewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=694) [推入 UINavigationController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=696) [这两种方法都很有效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=699) [你需要决定哪一种](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=701) [更适合你的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=703) [如果要模态地显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=704) [你的处理方法和处理任何视图控制器一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=707) [也就是调用 present()](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=708) [这是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=711) [模态显示的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=713) [如果你有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=717) [UINavigationController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=718) [而且更喜欢把 previewController 推入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=719) [而且更喜欢把 previewController 推入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=719) [你可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=721) [pushViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=723) [它的效果是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=728) [QLPreviewController 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=736) [提供了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=737) [我想要强调的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=738) [首先 如果你想知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=740) [Quick Look 是否能够](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=742) [预览某个文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=744) [使用 canPreview(_ item:) 类方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=746) [这个方法将返回为真](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=748) [如果文稿匹配任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=752) [默认支持的文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=753) [或者如果有可用的预览扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=756) [可以处理该文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=757) [这是我们已经讨论过的 dataSource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=761) [reloadData() 重新加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=766) [预览控制器应该呈现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=769) [文稿列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=770) [如果这个列表发生了变化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=772) [且预览控制器已经显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=774) [则使用该方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=775) [来触发重载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=777) [如果你需要获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=781) [预览项列表中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=783) [当前预览项的索引](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=785) [请记住用户可以向左](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=787) [或向右滑动以切换到另一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=789) [请使用 currentPreviewItemIndex 变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=790) [这既是一个 getter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=795) [也是一个 setter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=797) [所以如果你想要 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=799) [在某个特定项目时开始显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=800) [请将索引设置为正确的值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=802) [最后但同样重要的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=805) [预览控制器也有一个委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=809) [现在让我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=813) [QLPreviewControllerDelegate 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=814) [如果你给你的预览控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=821) [分配一个委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=822) [你会有更多的方法来控制 Quick Look 的行为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=824) [它还允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=827) [对 Quick Look 的显示做出反应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=829) [注意 QLPreviewControllerDelegate 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=831) [所有方法都是可选的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=832) [你不需要执行它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=836) [事实上你甚至](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=837) [不需要分配一个委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=839) [不需要分配一个委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=839) [该协议承载了许多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=842) [可以实现的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=844) [前两种方法允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=846) [对 Quick Look 即将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=847) [被用户取消](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=849) [以及已经取消这两种事件 做出反应](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=851) [你可能想要使用这些方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=858) [来更新当前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=859) [呈现 Quick Look 的视图控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=860) [接下来 previewController(_ controller:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=867) [shouldOpen url: for item:)方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=869) [让你能预防 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=872) [打开预览文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=874) [所包含的链接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=875) [使用这个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=878) [你可以防止用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=879) [在点击 PDF 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=881) [包含的 URL 或电话号码时离开 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=883) [最后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=886) [如刚刚我们提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=891) [QLPreviewControllerDelegate 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=892) [提供了 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=893) [以在 Quick Look 被显示和被撤销时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=896) [获得一个平滑的缩放动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=898) [获得一个平滑的缩放动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=898) [通过这些方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=901) [用户界面上的缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=903) [可以在被点按时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=905) [转换为 Quick Look预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=907) [如果有一个邮件附件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=913) [或对话视图中的一张照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=915) [借助 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=917) [你可以通过轻点它 让它全屏显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=920) [在你的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=925) [我们让你非常容易地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=927) [得到这个渐变缩放动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=928) [如果你要执行委托中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=932) [其中一种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=933) [Quick Look 将需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=935) [询求所需的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=937) [来执行缩放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=938) [基本上就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=941) [一个矩形区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=942) [当显示或取消 Quick Look 时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=944) [动画会在这个区域内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=945) [开始或停止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=948) [你可以提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=951) [缩略图的框架和图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=954) [或者 更好地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=958) [或者 更好地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=958) [你可以使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=960) [我们的模态方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=962) [即返回缩略图为视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=964) [使用这种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=966) [你不必担心坐标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=968) [Quick Look 将为你完成所有繁重的工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=970) [它的效果是这样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=977) [请注意缩略图是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=979) [如何过渡到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=981) [Quick Look 全屏预览的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=982) [好的 现在是演示的时候了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=986) [我们想向你展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=987) [我们刚刚讲过的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=989) [好的 这是一个 iOS 项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=993) [我们不讨论它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=995) [而是按下播放键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=997) [看一看我们准备了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=998) [以及我们正做些什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1000) [我们叫它《Wildlife Explorer》](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1011) [它是一个非常简单的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1011) [它基本上显示了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1014) [一个照片网格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1016) [我们在这里看到的每一张照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1018) [我们在这里看到的每一张照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1018) [都是它背后内容的缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1020) [你可以点击它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1022) [例如 点击大象的图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1023) [就会在全屏显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1025) [大象的大照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1027) [点击长颈鹿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1028) [就会预览一个完整的 PDF 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1032) [内含所有种类的长颈鹿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1033) [现在 我们除了看着它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1037) [什么都做不了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1038) [点击图片没有反应 所以我们来修复这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1041) [这个 App 的结构](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1048) [相当简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1050) [为了显示照片的网格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1052) [我们使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1053) [CollectionViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1055) [在初始化它时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1058) [我们将获得与 App 打包的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1061) [的 URL 列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1063) [比如我们刚刚看到的大象图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1065) [我们使用这个列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1071) [来初始化 documentDataSource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1073) [该对象在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1076) [UICollectionViewDataSource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1078) [协议的实现中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1079) [协议的实现中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1079) [作为集合视图的 Model](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1081) [在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1092) [我们返回刚才收集的文稿的数目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1093) [然后为每个文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1096) [创建一个 cell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1097) [每个 cell 的缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1099) [分别作为单元格的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1100) [到目前为止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1102) [这几乎就是这个 App 的核心了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1105) [现在我们把之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1108) [讲过的内容加上去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1109) [在点击单元格时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1111) [我们希望 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1112) [会显示正确的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1114) [我们已经可以确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1116) [在用户刚刚轻点一个单元格时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1117) [有一个方法被调用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1119) [为了显示 Quick Look 我们在这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1127) [创建一个新的 QLPreviewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1128) [并对它进行配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1131) [我们创建一个新的控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1143) [并把 documentDataSource 赋予给它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1145) [作为数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1147) [然后确保 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1149) [在出现的时候显示正确的预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1151) [通过设置正确的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1152) [currentPreviewItemIndex](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1155) [很好 现在 Xcode 已经在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1160) [抱怨我们的新代码了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1162) [它还不知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1163) [QLPreviewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1165) [我们需要首先导入 QuickLook](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1167) [因此我们返回到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1169) [文件的顶部并导入 QuickLook](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1171) [好了 Xcode 抱怨的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1184) [下一件事是数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1186) [我们赋给](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1189) [新预览控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1190) [的文稿数据源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1192) [似乎还没有遵循](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1193) [QLPreviewControllerDataSource 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1194) [这个我们之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1196) [已经讨论过了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1197) [为了解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1200) [我们切换到 DocumentDataSource 的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1202) [DocumentDataSource](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1210) [是一个非常简单的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1211) [到目前为止](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1213) [它仅仅拥有一个 URL 数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1215) [我们需要将](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1217) [QLPreviewControllerDataSource 协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1218) [添加到这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1220) [类实现的协议列表中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1221) [接下来 我们实现缺失的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1233) [正如你看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1245) [我们在这里使用 DocumentDataSource 的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1246) [与我们在集合视图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1248) [使用文稿数据源的方式非常相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1250) [在 numberOfPreviewItems() 方法中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1251) [我们返回之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1254) [从文稿文件夹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1256) [收集的 URL 数量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1257) [然后 Quick Look 询求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1259) [然后 Quick Look 询求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1259) [单独的 QLPreviewItem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1263) [然后返回索引引用的正确 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1266) [很好 数据源已经](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1273) [被正确地设置好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1274) [因此我们可以继续并](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1275) [显示预览控制器了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1277) [因此 我们返回到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1279) [didTapCollectionCell() 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1280) [并添加丢失的方法调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1283) [我们来看看现在是什么样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1294) [好的 我们回到了网格中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1306) [现在 当点击一个单元格时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1307) [Quick Look 会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1309) [全屏显示正确的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1311) [看看 使用你习惯的所有手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1315) [全屏显示图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1317) [甚至 PDF 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1319) [甚至 PDF 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1319) [是多么容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1321) [我们可以用两个手指放大文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1324) [我们可以选择文本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1326) [甚至复制它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1329) [一旦我们完成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1333) [我们可以用缩放手势](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1336) [再次取消 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1338) [所以我们在这里使用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1343) [显示 Quick Look 的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1344) [是模态展示风格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1345) [正如我前面所说的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1347) [我们还可以用一个推挤动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1349) [来呈现 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1351) [因此 我们只需](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1353) [告诉 App 的导航控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1355) [将预览控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1356) [推到当前的控制器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1358) [来让它显示 我们来看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1360) [正如你所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1385) [这是一种不同的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1386) [呈现 Quick Look 的风格](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1387) [它和模态呈现一样有效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1389) [好了 Quick Look 能用了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1397) [现在我想告诉你们的最后一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1399) [是如何使用 Quick Look 委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1400) [来我们在网格中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1402) [点击缩略图时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1403) [获得漂亮的缩放动画](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1405) [首先 我们切换回](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1408) [模态呈现样式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1410) [这是缩放变换工作所需要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1412) [然后我们需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1419) [给预览控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1420) [分配一个委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1421) [在这种情况下我们分配 self](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1423) [然而 self 还不符合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1434) [QLPreviewController 委托](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1435) [所以让我们将它添加到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1437) [协议列表中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1439) [现在 最后一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1452) [我们执行一个神奇的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1454) [它告诉 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1456) [当将要显示缩放动画时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1458) [使用哪个视图作为源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1460) [正如你所看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1474) [我们正在使用最近被轻点的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1476) [单元格的 imageView](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1478) [我们将这个单元格作为参考](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1480) [并将其返回给 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1482) [这就是我们为了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1484) [让缩放动画工作要做的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1485) [Quick Look 将在被提交时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1488) [和被取消时调用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1489) [我们来试一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1492) [现在 当我们点击一个缩略图时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1503) [请注意缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1505) [是如何显示到全屏预览的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1506) [同时也观察到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1509) [无论我们如何取消预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1511) [它都会漂亮地过渡到正确的起点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1513) [很好 演示到这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1522) [回到幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1525) [现在我想把它交给 Maxime](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1526) [他会告诉你关于预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1530) [和缩略图扩展的一切](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1531) [&gt;&gt; 谢谢你 Raffael](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1534) [那么 如你所见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1536) [Quick Look 使得在 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1537) [添加一个强大的预览功能变得非常容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1539) [但还有更多的事情可以谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1542) [首先 我想向你展示的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1544) [如何扩展 Quick Look 的预览功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1545) [通过为你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1547) [文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1548) [提供预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1550) [我们已经列出了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1554) [Quick Look 在本地支持的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1555) [文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1556) [然而 自 iOS 11 以来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1559) [然而 自 iOS 11 以来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1559) [这个列表可以通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1563) [与 iOS App 捆绑一个预览扩展来扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1564) [这样作为开发者的你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1566) [就可以为你的自定义文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1568) [提供预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1570) [你应该提供一个预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1572) [如果你使用的是自定义文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1575) [并且你想使它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1577) [像其他原生文件类型一样通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1578) [Quick Look 预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1580) [可供共享的文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1583) [通常是用来创建扩展的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1585) [很好选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1587) [特别是如果你希望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1589) [用户在收到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1591) [来自“邮件” “信息”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1592) [或“备忘录”等 App 中的文件后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1595) [轻松预览内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1597) [然后一切开始运转](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1598) [如果 App 使用 QLPreviewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1600) [且打算预览一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1604) [本地并不支持的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1606) [那它将会从你的预览扩展中受益](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1608) [下面这个例子能告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1612) [你可以通过预览扩展获得什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1614) [我们已经构建了一个示例 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1617) [你可以从 Apple 的网站上下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1619) [你可以从 Apple 的网站上下载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1619) [这个 App 允许用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1621) [创建定制的 Particle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1622) [并与其进行交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1625) [由于我们想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1627) [与其他用户共享我们很酷的 Particle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1628) [我们创建了一个新的文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1631) [Particles 文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1633) [每个文件代表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1636) [一个 Particle 系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1638) [并且你可以在其中配置各种火焰和星星](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1640) [现在假设](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1644) [你向你的朋友共享一个 Particles 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1647) [当你在“信息”中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1650) [或作为电子邮件附件预览它们时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1651) [我们看到的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1653) [一个空白的屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1655) [那肯定不是我们想要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1656) [但是通过为我们的 Particles 文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1660) [执行预览扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1662) [它将用一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1663) [漂亮的三维互动 Particle 系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1665) [取代空白屏幕 这多么棒啊](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1668) [我确信你现在一定希望](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1674) [了解如何为你的文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1675) [创建自己的预览扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1676) [首先 你需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1680) [在现有的 App 项目中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1682) [添加一个新的 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1684) [为此 你必须在 Xcode 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1686) [选择 “Quick Look Preview Extension](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1690) [（Quick Look 预览扩展）”模板 然后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1693) [Xcode 将为你生成几个文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1696) [具有一个基本实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1699) [PreviewViewController 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1700) [这就是你要为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1703) [预览添加代码的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1705) [将 PreviewViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1707) [作为其入口点的 storyboard 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1709) [然后 Info.plist 是你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1712) [需要编辑的第一样东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1715) [让我们仔细看一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1717) [首先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1722) [我们最感兴趣的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1725) [是 QLSupportedContentTypes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1726) [就是在屏幕快照中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1729) [被选定的那个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1730) [这是一个数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1733) [其中列出了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1735) [你的扩展可以提供预览的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1736) [所有文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1737) [请注意 你只能为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1739) [请注意 你只能为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1739) [你拥有的和导出的 UTI（统一类型标识符）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1740) [提供预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1742) [当 Quick Look 不能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1745) [预览本机的文件类型时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1747) [它将使用添加到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1749) [这个数组中的内容类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1750) [并选择一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1753) [可以处理这个预览的扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1755) [所以一定要列出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1756) [你的扩展支持的所有文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1758) [让我们看看我们的《Particles》App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1761) [是如何实现这一点的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1762) [如你所看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1764) [Particles 声明并导出一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1769) [新的 Particles 文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1771) [它的标识符是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1772) [com.example.apple-samplecode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1775) [Particles.Particles](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1777) [由于我们希望扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1781) [以支持预览 Particles 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1783) [所以我们将这个标识符添加到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1785) [Info.plist 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1787) [QLSupportedContentTypes 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1788) [顺便说一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1790) [如果你对 UTI 感兴趣](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1792) [你应该看看今年的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1794) [“Document Manage（文稿管理）”讨论会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1796) [当需要为文件类型扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1800) [生成一个新的预览时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1801) [Quick Look 将创建一个新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1803) [PreviewViewController 实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1806) [并在 preparePreviewOfFile(](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1808) [at url: completionHandler handler:)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1809) [方法中调用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1810) [该方法是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1814) [QLPreviewingController 协议的一部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1816) [必须为文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1819) [提供预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1820) [Quick Look 将显示并加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1823) [同时等待](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1825) [你的扩展准备好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1826) [显示预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1827) [你所要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1828) [就是加载预览的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1831) [并在扩展完成后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1832) [立即调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1834) [completionHandler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1836) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1839) [这就是预览扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1840) [让我们更进一步](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1842) [与预览类似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1844) [你也可以为自己文件格式的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1846) [提供缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1847) [让我们来谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1849) [Quick Look 缩略图扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1851) [缩略图是表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1852) [文件内容的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1856) [有限大小的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1858) [有限大小的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1858) [整个 iOS 和 macOS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1861) [都允许用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1863) [辨别文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1865) [而不需要打开文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1868) [例如 你可以在这个屏幕快照中看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1871) [iOS 是如何在“文件” App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1872) [使用它们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1875) [iOS 可以为不同的文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1877) [图像 视频 PDF](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1879) [文本文件和 USDZ 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1881) [生成缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1884) [现在你可能已经注意到了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1886) [左边的空白图标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1888) [这是因为这些是 Particles 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1891) [iOS 不知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1892) [如何为这个文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1895) [生成缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1897) [但是不用担心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1898) [我们将向你展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1901) [如何创建一个缩略图扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1903) [你可以使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1905) [轻松地为你的自定义文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1906) [改进这种情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1907) [看看这些 Particles 文件的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1909) [缩略图看起来有多棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1910) [多亏了我们在 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1912) [添加的缩略图扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1914) [这个扩展提供的缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1921) [出现在“文件” App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1922) [以及任何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1924) [基于 UIDocumentBrowswerViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1926) [的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1927) [它们也会出现在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1930) [Quick Look 列表中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1932) [在 Quick Look 中预览多个文件时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1934) [你可以在点击列表按钮时看到它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1935) [如果你有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1937) [用户可以共享并与之交互的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1940) [自定义文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1942) [那么你可能想要为你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1944) [提供一个这样的扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1945) [现在让我们看看如何做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1947) [创建缩略图扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1951) [就像创建预览扩展一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1953) [为此 在现有的 App 项目中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1956) [添加一个新的 Target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1959) [并选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1960) [“Thumbnail Extension（缩略图扩展）”模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1962) [Xcode 将为你生成两个文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1966) [一个是具有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1968) [基本实现的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1970) [ThumbnailProvider 类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1971) [在这里 你要添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1973) [负责生成缩略图的代码 Info.plist](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1976) [负责生成缩略图的代码 Info.plist](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1976) [像在预览扩展中一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1980) [是你创建扩展后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1982) [你要编辑的第一件东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1983) [与预览扩展的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1990) [Info.plist 一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1991) [缩略图扩展的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1992) [Info.plist 也有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1994) [QLSupportedContentTypes 数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1995) [需要用扩展支持的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=1997) [内容类型填充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2000) [因此 请确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2004) [在 QLSupportedContentTypes 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2006) [包含你的扩展可以生成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2009) [缩略图的所有内容类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2010) [在设置扩展之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2013) [你将能够开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2015) [实现 QLThumbnailProvider 子类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2017) [有两种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2020) [可以为文件提供缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2022) [你可以使用这些来绘制 CoreGraphics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2025) [UIKit 绘制技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2029) [或者你可以返回图像文件 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2032) [你必须在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2035) [QLThumbnailProvider 子类中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2039) [QLThumbnailProvider 子类中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2039) [重写 provideThumbnail(for request:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2040) [_ handler: )方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2042) [我们在 2017 年的 WWDC 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2045) [“在 iOS 11 中打造优秀的基于文稿的 App”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2047) [讨论会中 对 Quick Look API 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2049) [这一部分进行了广泛的讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2054) [如果你想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2057) [为你的自定义文件类型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2058) [提供缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2059) [我强烈建议你去看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2061) [简而言之](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2063) [你将需要利用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2065) [在 QLFileThumbnailRequest 方法中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2066) [包含的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2068) [文件的 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2071) [缩略图的最大和最小尺寸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2074) [以及它的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2075) [对于每个缩略图请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2079) [API 期望你创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2081) [QLThumbnailReply 对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2083) [这个对象必须](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2085) [负责生成缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2088) [你需要通过该方法的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2090) [完成处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2091) [把它提供给 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2093) [好吧 让我们来具体看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2097) [现在是演示时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2099) [现在是演示时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2099) [让我们先来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2100) [安装了《Particles》App 后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2104) [没有任何 Quick Look 扩展的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2105) [好吧 我们还没有任何文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2109) [让我们按一下 “+” 按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2111) [创建一个新的文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2113) [你在这里看到的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2117) [Particle 编辑器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2118) [让我们创建一个火焰 Particle 系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2120) [我们稍微改变一下颜色](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2121) [然后保存文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2123) [那么你可以看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2127) [我们并看不到我们刚刚设计的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2130) [美丽的 Particle 系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2131) [我们可以通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2133) [在我们的 App 中添加一个缩略图扩展来修复](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2135) [现在 让我们将文件保存到“备忘录”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2138) [并查看 Quick Look 中的预览效果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2141) [好的 我们打开文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2147) [我们看到的只是一个空白的屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2152) [我们可以做得更好 我们也改进一下这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2154) [让我们切换到 Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2157) [并实行预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2159) [并实行预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2159) [和缩略图扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2160) [我们已经有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2162) [包含扩展设置的现有项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2164) [我们将使用这些作为起点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2167) [并添加这两个扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2169) [如前所述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2172) [我们需要配置扩展的 Info.plist](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2174) [以便系统知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2176) [我们能够为 Particles 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2177) [提供预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2179) [和缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2181) [所以《Particles》App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2183) [在 App 的 Target 中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2185) [“Exported UTIs” 部分定义自己的文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2188) [我们需要配置扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2190) [以在 Info.plist 中使用该 UTI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2192) [正如你所看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2195) [预览扩展的 Info.plist 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2198) [QLSupportedContentTypes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2200) [确实包含](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2201) [Particles 文件格式的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2203) [UTI 的标识符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2204) [缩略图扩展的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2206) [Info.plist 的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2209) [也是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2210) [所以唯一剩下要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2211) [就是执行这些扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2214) [让我们从预览扩展开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2216) [正如演讲中提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2219) [正如演讲中提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2219) [我们需要执行这个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2222) [preparePreviewOfFile(at url:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2223) [completionHandler handler: )](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2225) [我们的主要 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2227) [《Particles》已经有一个视图控制器类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2230) [它会在屏幕上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2232) [变成 Particles 系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2233) [我们将在我们的扩展中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2235) [减少重复的控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2236) [我们将创建一个 helper 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2239) [它将负责](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2241) [加载这样的视图控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2242) [并将其添加到视图层级结构中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2244) [正如你看到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2248) [现在一个文稿的 particleViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2250) [只是创建一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2252) [particleViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2253) [并将它传递给](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2255) [它接收到的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2257) [这样 particleViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2258) [就可以呈现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2259) [文稿所代表的 Particles](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2261) [我们仍然需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2264) [从 preparePreviewOfFile() 中调用这个方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2265) [那么我们就这么做吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2266) [我们首先创建一个文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2271) [它是 UIDocument 的子类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2274) [我们打开它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2277) [一旦它打开我们就可调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2279) [一旦它打开我们就可调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2279) [我们的 helper 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2281) [它会取代一个 particleViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2283) [最后 我们不要忘记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2285) [关闭完成处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2288) [以通知 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2289) [我们的视图控制器已经加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2291) [并准备在屏幕上显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2293) [我们的预览扩展现在已经准备好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2295) [让我们现在实现缩略图扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2298) [这里我们要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2301) [就是执行 provideThumbnail(for request:](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2304) [_ handler: ) 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2306) [因此 request 提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2308) [在呈现缩略图时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2310) [需要考虑的几个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2312) [在本例中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2315) [我们将使用文件 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2317) [作为缩略图的最大尺寸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2319) [注意这里也有缩放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2321) [和最小尺寸的性质](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2323) [但是在我们的 Particle 系统中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2325) [我们不使用它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2327) [然后我们创建一个绘制代码块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2329) [稍后我们将提供完成块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2331) [在本例中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2336) [我们调用 helper 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2338) [我们调用 helper 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2338) [它负责绘制缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2340) [drawThumbnail(for: fileURL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2342) [contextSize: )](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2344) [我们马上要执行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2345) [这个 helper 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2346) [你可能已经注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2348) [我们的绘图块返回一个布尔值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2350) [该标志指示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2352) [是否已成功绘制了缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2353) [如果这个代码块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2355) [被用来生成缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2357) [现在我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2359) [如何画出 Particles 缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2361) [为了绘制缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2364) [我们使用文件的 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2366) [以及绘制环境的大小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2369) [在这种情况下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2372) [我们都知道缩略图要求的最大尺寸](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2373) [因为我们可以生成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2375) [任意大小的 Particles 缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2377) [我们的方法是首先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2379) [创建一个表示文件的文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2381) [并尝试打开它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2383) [如果失败 则返回假](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2386) [表示无法生成缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2388) [打开文件之后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2390) [它会创建一个 particleViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2394) [用于呈现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2396) [Particles 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2397) [然后它获取一个 particleViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2399) [然后它获取一个 particleViewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2399) [的快照](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2401) [并使用它来绘制缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2402) [我们在返回真之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2405) [关闭文稿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2406) [表明我们成功地生成了一个缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2408) [现在我们已经](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2411) [生成了缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2413) [我们需要创建我们的 QLThumbnailReply](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2415) [我们根据环境大小创建](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2417) [在本例中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2420) [是最大尺寸和绘制代码块](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2423) [我们还有我们通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2427) [完成处理程序中的参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2429) [提供的 reply 对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2432) [在这个例子中是 “nil”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2433) [因为我们总是添加它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2435) [来为 Particles 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2436) [绘制缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2439) [如果在绘制时它们中的任何一个显示出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2440) [缩略图块的成功值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2442) [将会支持出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2443) [所以缩略图可在之后被舍弃](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2445) [我们最终都设置好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2448) [让我们运行这段代码看看 它是怎样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2449) [哇 现在我们看到了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2452) [漂亮的火粒子的文件缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2454) [这比之前看起来好太多了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2457) [现在我们来检测一下我们的预览扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2460) [好的 所以我们在“备忘录”里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2464) [Quick Look 仍然显示着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2467) [和之前我们尝试预览文件的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2468) [一样的空白屏](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2469) [让我们取消 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2471) [然后再次显示它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2473) [现在我们能看见](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2476) [漂亮的粒子预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2478) [将我们的自定义文件格式 在 iOS 中是如此的简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2480) [今天的展示就到这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2485) [所以 我们今天学习到了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2487) [首先 我们已经向你展示了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2489) [通过使用 Quick Look 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2492) [QLPreviewController](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2493) [向 App 添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2495) [强大的预览功能是多么容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2497) [之后我们了解了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2500) [Quick Look 的扩展点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2502) [预览扩展允许你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2505) [让你的自定义文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2507) [像任何本地文件类型一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2508) [通过 Quick Look 得以预览](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2510) [而缩略图扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2512) [用于在需要时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2514) [向 iOS 提供你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2516) [文件类型的缩略图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2517) [这些扩展一起协作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2519) [这些扩展一起协作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2519) [使你的文件格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2521) [成为 iOS 中的会员](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2522) [那么 这就是这场 Quick Look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2526) [讨论会的全部内容了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2528) [如果你想得到更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2529) [你可以登陆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2530) [Apple 的网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2532) [感谢大家的关注](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/237/?time=2533)