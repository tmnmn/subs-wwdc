# MusicKit on the Web

## Summary
MusicKit has enabled the creation of new, compelling, and engaging Apple Music powered app experiences. With the introduction of MusicKit on the web, as a developer, you can now bring Apple Music powered experiences to the web. Learn how to use declarative markup or javascript to enable Apple Music on your website.

## Info
* Media
* WWDC 2018 - Session 506 - iOS, macOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/

## Text
 [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=7) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=17) [&gt;&gt; 大家好 欢迎大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=21) [我是 Betim Deva](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=25) [Apple Music 团队的工程师](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=26) [在此我激动地与你们分享](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=28) [我们对 MusicKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=30) [所作的一些更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=32) [MusicKit 发布于去年](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=35) [它使得开发者](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=36) [可以在自己的 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=38) [实现定制化的音乐体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=41) [今年 我们要介绍的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=44) [网页端 Apple Music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=46) [将使你能够在你的网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=48) [实现同样的音乐体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=50) [我们准备好了一个很棒的网页播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=54) [方便你嵌入使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=56) [而我们即将登场的网页端 MusicKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=58) [而我们即将登场的网页端 MusicKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=58) [能够把 Apple Music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=60) [整合在你的网站中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=63) [我们过一小会再讨论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=67) [网页端 Apple Music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=69) [但是首先让我们看一看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=70) [MusicKit 上的一些令人激动的更新](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=72) [我们非常欣喜地看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=75) [App 开发者以不同的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=78) [将 Apple Music 结合到他们的 App 里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=81) [例如 我们都熟知并喜欢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=84) [用 musical.ly 来制作音乐视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=87) [当你在这个 App 中发现一首新歌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=90) [你可以很容易将它加入播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=92) [Houdini 使得加入 Apple Music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=96) [更加简单](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=98) [它可以把你的播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=100) [转移到 Apple Music 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=102) [Stationhead 可以把你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=105) [播放列表变成电台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=108) [它可以将你的音乐和声音](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=110) [广播到全世界](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=113) [最后 Ola 是全印度最大的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=117) [最后 Ola 是全印度最大的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=117) [网约车服务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=120) [我们一直在与他们合作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=123) [将 Apple Music 体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=124) [加入到他们的车队中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=126) [自从去年 MusicKit 发布以来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=130) [我们收到了大量的反馈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=133) [希望我们提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=135) [能够利用 ISRC](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=138) [也就是国际标准音像制品编码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=140) [来搜索内容的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=142) [在此我高兴地宣布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=144) [我们已经加入了这项功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=148) [它能够精确地把](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=150) [Apple Music 目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=152) [与几乎任何其他来源的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=155) [歌曲与音乐视频进行匹配](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=157) [另一项对 MusicKit 的改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=160) [是增加了 iCloud 音乐资料库 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=163) [只要用户向你的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=168) [提供授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=170) [他们就可以以各种方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=172) [在你的 App 里直接与](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=174) [他们的音乐资料库互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=176) [这些 API 使你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=180) [可以浏览 搜索 添加内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=183) [到他们的音乐资料库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=188) [你还可以让你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=190) [创建播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=192) [或是将歌曲添加到已创建的播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=194) [这一切在你的 App 内就能完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=196) [去年我们带来了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=204) [针对目录的 Apple Music API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=206) [今年我们新增了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=209) [iCloud 音乐资料库的 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=212) [我们认为这是一组不错的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=214) [音乐 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=215) [如果你一直在使用我们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=218) [现有的 iTunes Search API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=220) [我们希望现在你能转移到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=222) [Apple Music API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=224) [现在我要请](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=228) [我的同事 DJ 上台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=230) [给大家谈一谈网页端 Apple Music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=232) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=234) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=236) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=236) [&gt;&gt; 谢谢 Betim](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=241) [今年 我们怀着激动的心情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=243) [发布网页端 MusicKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=244) [去年 我们讨论了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=246) [将 Apple Music 加入你的 iOS App 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=248) [各种方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=249) [今年 我们将给网页端](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=252) [带来同样强大的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=253) [那么 让我们来谈谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=256) [网页端 MusicKit 的组成部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=257) [去年 我们添加了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=262) [REST API 用来访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=263) [整个 Apple Music 目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=264) [今年 正如 Betim 提到过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=267) [我们将会发布对 REST API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=269) [进行补充](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=270) [允许已登录用户访问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=272) [iCloud 音乐资料库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=273) [同时我们会发布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=276) [MusicKit JS 库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=277) [它能让你轻松地在浏览器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=279) [使用两个 REST API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=281) [并允许你的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=282) [仅使用浏览器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=286) [就能完整地播放歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=287) [无论歌曲位于 Apple Music 目录上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=289) [还是位于 iCloud 音乐资料库里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=291) [在我们深入研究 MusicKit JS 之前](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=296) [我想向你们展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=298) [Apple Music 网页播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=299) [Apple Music 网页播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=299) [几星期前 我们发布了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=302) [新的可嵌入式播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=304) [它在桌面和移动端的浏览器上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=306) [运行得都很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=308) [这些可嵌入式播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=311) [让你能很轻松地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=313) [在自己的网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=315) [完整播放 Apple Music 目录中的歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=316) [我们的播放器支持](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=318) [单曲 专辑或是整个播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=320) [你可以在 Apple Music 预览页面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=324) [或是可嵌入式播放器自身上面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=326) [找到嵌入代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=328) [你所需做的仅仅是将它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=331) [拷贝并粘贴到你的网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=332) [这些可嵌入式播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=334) [非常适合用来在第三方网站上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=336) [播放完整的歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=338) [同时 我们也把这个功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=340) [做到了 Apple Music 预览页面上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=341) [内嵌功能是由](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=343) [MusicKit JS 支持的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=347) [我们也将一并发布 MusicKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=349) [让你打造属于自己的音乐体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=350) [那么 让我们谈谈功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=353) [最重要的一点是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=358) [你将能够在浏览器内完整播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=359) [你将能够在浏览器内完整播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=359) [Apple Music 上的歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=361) [它可以在如今所有浏览器上运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=364) [不需要任何插件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=365) [也没有任何外部依赖](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=366) [你可以单独使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=369) [或是在想要的 JavaScript 框架中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=371) [播放音乐需要我们授权用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=374) [我们会替你把控](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=378) [确保该用户订阅了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=379) [Apple Music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=380) [JavaScript 库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=381) [会维护一个歌曲队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=384) [允许你完整播放整张专辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=385) [或是整个播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=386) [只要你有了那个播放队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=387) [你就能够轻易控制它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=391) [你可以播放 暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=393) [跳到上一首或是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=394) [跳到下一首](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=396) [并且我们也会追踪正在播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=398) [或正在加载的歌曲的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=400) [正在播放元数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=402) [以便你可以基于它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=403) [来渲染 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=405) [让我们来聊聊](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=408) [如何给网页构建一个简单的播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=409) [我们要包含](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=411) [JavaScript 库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=413) [然后 你需要提供你的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=416) [开发者令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=417) [你可以用你的私钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=418) [你可以用你的私钥](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=418) [来生成令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=420) [我们可以很好地使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=421) [声明式的 HTML 标记语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=425) [你可以给你的页面添加一些标记语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=427) [例如 登录 登出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=429) [或是播放控制的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=430) [我们会将这些元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=433) [与 MusicKit 内的有关功能相连接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=435) [然后 我们来加一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=438) [播放按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=440) [我们会用到一些来自 Apple Music 目录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=441) [内容 ID 和 URL](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=442) [这样用户就能开始播放了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=444) [让我们来看一下这里的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=447) [你需要包含 JavaScript 库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=451) [同时我们也会将该文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=453) [托管至我们的 CDN 服务器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=454) [我们需要加入一些用于](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=457) [登录和登出的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=459) [用于控制播放的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=462) [这里 我们有一个播放键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=464) [一个暂停键和下一曲键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=465) [我们会加一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=466) [关于正在播放内容的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=470) [将会在元数据中提供的元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=472) [比如我们可以得到播放列表名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=473) [歌曲名称和艺术家名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=474) [然后我们有一些元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=477) [使你能够向用户展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=479) [使你能够向用户展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=479) [当前播放音轨的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=481) [进行状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=482) [播放时长](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=484) [播放时间和播放进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=485) [所以 我想让 Jae Hess 上台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=487) [来向你们演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=490) [如何用 MusicKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=492) [来构建一个我们刚刚讨论过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=493) [简易播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=495) [[ 鼓掌 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=497) [&gt;&gt; 谢谢你 DJ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=500) [我们这就准备开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=502) [在右侧的 Xcode 里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=504) [有一个基础的 HTML 模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=507) [已经与 MusicKit JS 库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=509) [相关联](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=510) [在左边 有一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=512) [打开的 Safari 窗口](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=514) [正在运行一个实时重载的服务器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=515) [这样一来 我在标记语言上做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=517) [任何改变都会直接](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=518) [反映在左手边的窗口里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=520) [要想开始使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=522) [我们首先要做的事就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=525) [按照我们的使用目的配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=527) [有了声明式标记语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=529) [通过使用 meta 标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=531) [可以很简单地完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=532) [我们可以指定我们的 App 名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=533) [同时提供我们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=538) [同时提供我们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=538) [开发者令牌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=540) [然后 为了得到我们想要的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=541) [我们要往页面上放置一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=545) [供用户点击的按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=548) [当点击这个按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=550) [它将会从 Apple Music 目录里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=551) [获取一个播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=553) [设置好播放队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=555) [然后开始在浏览器里播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=557) [现在我准备提供一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=558) [从桌面端的 iTunes 中获取的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=560) [内容 URL 以嵌入一个我想嵌入的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=562) [具体的播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=564) [这个播放列表叫做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=566) [Today at Apple Music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=567) [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=574) [只用简简单单一条代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=581) [我们就能在浏览器里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=582) [完整播放 Today at Apple 列表了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=585) [尽管这很棒 并且是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=591) [相当好的解决方案](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=593) [但我们可能会想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=595) [为用户提供更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=596) [控制方式和功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=598) [我们的第一件要做的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=600) [是让你的 App 用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=601) [同时也是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=602) [Apple Music 的订阅用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=603) [能够登录和登出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=605) [我们可以通过往页面上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=606) [添加授权和取消授权按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=608) [来做到这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=609) [我们使用 Apple Music 的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=613) [Authorize 和 Unauthorize 属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=615) [然后 MusicKit JS 就能替我管理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=619) [这些按钮的展示状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=621) [我之前登录过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=622) [所以你能看到这里的状态显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=624) [从 Apple Music 登出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=625) [接下来我想要加一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=632) [播放控制按键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=633) [我们可以用 Apple Music 属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=635) [来指定这些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=637) [而且我们可以指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=639) [跳转到上一项 暂停 播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=641) [以及跳转到下一项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=648) [我们可以添加正在播放信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=656) [让用户能够看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=658) [队列中正在播放的那一首](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=659) [队列中正在播放的那一首](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=659) [这里我指定了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=662) [playlistArtworkURL 并且我可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=663) [指定我想要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=665) [展示的高和宽](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=666) [并且我也有权获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=668) [有关这个媒体项目的可用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=669) [任何数据属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=671) [所以我可以指定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=672) [播放列表名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=675) [曲目名称 还有艺术家名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=678) [在下面 我已经指定了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=681) [我希望当前播放时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=682) [可以被加载在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=683) [HTML 的时间元素中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=686) [当页面重新加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=689) [正在播放 界面里什么都没有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=691) [因为我们没有播放任何音乐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=693) [让我们解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=693) [添加按键 让用户得以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=695) [将播放列表加入队列中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=697) [我要粘贴 16 个播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=699) [然后当用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=705) [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=711) [现在 使用播放控制按键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=718) [我可以暂停播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=719) [我可以暂停播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=719) [可以跳至下一首](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=721) [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=725) [甚至可以回到那一首](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=729) [现在 MusicKit JS 提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=738) [用声明式标记语言的解决办法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=741) [它也提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=742) [完整的 JavaScript API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=744) [所以我想请 DJ 回到台上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=746) [来和你们讲讲 JavaScript API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=749) [谢谢大家](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=750) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=752) [&gt;&gt; 谢谢你 Jae](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=758) [用声明式标记语言来实现基础功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=760) [是一种非常直接的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=763) [让我们再来谈谈更加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=767) [高级的用法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=768) [让我们来写一些 JavaScript](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=769) [来与 MusicKit 交互](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=770) [现在我们先](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=772) [来看几个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=773) [用 ID 可以从目录获取到元数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=775) [我们可以在 Apple Music 目录内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=779) [我们可以在 Apple Music 目录内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=779) [搜索内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=783) [我们可以为已登录的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=784) [浏览 iCloud 音乐资料库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=788) [搜索也可以在资料库范围内进行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=790) [我们可以直接设置和控制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=793) [歌曲队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=796) [而且我们可以响应播放事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=797) [相应地绘制 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=800) [那么 我们来看一些代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=806) [首先 我们会用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=808) [MusicKit.getInstant 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=809) [MusicKit 是单件模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=813) [因为你同时只能播放一首歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=814) [所以我们把](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=815) [这个赋值给 music 变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=817) [然后会在剩下所有例子里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=819) [都使用 music 来代替](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=820) [你可以用 ID 来查找一首歌](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=822) [api.song 方法拿到这个 ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=827) [然后你需要提供一个回调](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=829) [这就是一个 promise](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=830) [你会看到这个 promise 模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=832) [贯穿了 MusicKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=833) [然后会返回给你一个内容对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=834) [该内容对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=838) [向你展示那首歌曲的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=839) [向你展示那首歌曲的属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=839) [以及任何相关信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=840) [例如艺术家和专辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=843) [就像 Betim 之前提到过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=846) [如果你没有内容 ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=850) [使用 ISRC 查询筛选器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=851) [你也能完成同样的查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=854) [返回的对象与之前的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=857) [是一模一样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=859) [如果你想要用一次网络请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=864) [返回一组歌曲对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=867) [我们有一个批处理 API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=869) [对于专辑和播放列表也](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=870) [同样生效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=873) [我们可以让用户从他们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=879) [iCloud 音乐资料库选择播放内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=881) [因此 这些 API 是在资料库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=884) [范围内运行的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=886) [你可以得到歌曲列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=887) [专辑和播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=889) [这些 API 都是分页的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=892) [所以你可以像常见做法那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=894) [仅获取一个子集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=896) [然后你可以在用户翻页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=897) [然后你可以在用户翻页](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=897) [或者滑动的时候加载更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=900) [你可以搜索 Apple Music 目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=902) [我们先仅搜索歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=907) [然后在第二个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=909) [我们将同时搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=911) [歌曲和专辑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=912) [你也可以提供一个限制](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=914) [来规定返回结果的数量上限](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=916) [你也可以将查询指令](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=918) [限定在用户自己的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=922) [iCloud 音乐资料库范围内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=924) [这里我们用到的是一模一样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=926) [使用同样参数的搜索方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=927) [但是我们在资料库范围内](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=928) [进行搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=930) [接下来 我们来讲授权](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=935) [我们应该在真正](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=938) [需要授权的时候处理授权问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=939) [也就是当播放开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=940) [或者当你试图获取](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=942) [当前已登录用户的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=944) [iCloud 音乐资料库的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=945) [如果你想 你也可以自行触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=948) [或许在用户刚来到你们网站时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=951) [就想强制他们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=952) [进行授权验证](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=953) [当用户按下一个按键](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=958) [你就可以开始播放了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=960) [你可以用 setQueue 方法来做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=961) [这里我们提供了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=964) [一张专辑 然后 MusicKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=966) [将会处理获取元数据以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=967) [设置播放队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=970) [如果有个之前见过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=972) [内容对象 你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=973) [直接传入它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=975) [MusicKit 自己就知道该做什么了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=976) [setQueue 返回了一个 promise](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=979) [当队列完全加载时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=982) [你就可以开始播放了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=983) [这里我们用 music.play](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=984) [来自动开始播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=984) [一旦那些歌曲开始播放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=991) [你会想去控制它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=992) [你可以跳到下一曲或是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=994) [返回上一曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=996) [你可以暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=997) [你可以在 UI 上呈现一些操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1002) [让用户可以快速把](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1004) [正在浏览的歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1006) [专辑或者播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1007) [添加到自己的 iCloud 音乐资料库里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1009) [我们这里有一个 addToLibrary 方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1011) [你可以做一样的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1012) [你可以一次性完成三次调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1018) [你可以一次性完成三次调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1018) [现在我们添加上面例子中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1020) [相同的四个项目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1021) [但是我们会在一次网络](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1023) [请求中完成](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1024) [接下来我们看看事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1025) [MusicKit 会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1031) [触发事件来驱动 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1033) [我们之所以这样做是因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1035) [MusicKit 为了播放完整的曲目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1036) [需要控制音频元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1038) [这里我们会用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1041) [addEventListener](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1042) [如果你之前写过 DOM 脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1044) [这对你来说会非常熟悉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1046) [作为例子 我们会](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1048) [详细看看几个事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1050) [mediaItemWillChange 和](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1054) [mediaItemDidChange 事件会在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1056) [队列中的正在播放项目变化时触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1058) [以及在正在播放的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1059) [第一首切换到第二首的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1061) [你可以用它来触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1064) [更新 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1065) [显示正在播放的歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1067) [当你真正开始播放时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1069) [playbackStateChange](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1073) [事件会被激发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1074) [同样 这里我们有 playbackStateWillChange](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1076) [和 playbackStateDidChange](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1077) [比如说 你能知道一首歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1079) [比如说 你能知道一首歌曲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1079) [正在加载](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1081) [正在播放或已暂停](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1083) [然后你会恰到好处地](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1085) [更新你的 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1086) [这个事件会告诉你](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1088) [之前的状态以及](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1089) [将要转变至的新状态](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1091) [当歌曲在播放时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1096) [你会有 playbackProgressChange 事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1098) [这个事件把当前播放进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1100) [作为百分比展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1103) [你可以利用它来更新播放进度的 UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1106) [你也会需要监听](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1111) [所有媒体回放错误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1112) [mediaPlaybackError 事件会被激发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1115) [你可以捕捉到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1119) [然后给用户展示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1120) [对应的错误信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1121) [我想请 Jae 回到舞台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1122) [他将接手](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1127) [我们刚刚制作好的这个播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1128) [向大家展示如何使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1130) [那些 JavaScript API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1131) [来实现搜索 Apple Music 目录](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1133) [搜索 iCLoud 音乐资料库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1136) [我们还将运用事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1138) [我们还将运用事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1138) [来制作一个简单的进度条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1140) [有请 Jae](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1143) [&gt;&gt; 谢谢你 DJ](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1144) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1146) [如 DJ 提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1152) [我们要在之前的例子的基础上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1153) [进一步扩展](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1155) [增加播放列表搜索功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1157) [我在台下时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1159) [移除了之前那个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1162) [我们做过的许多东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1163) [但是我保留了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1164) [页面内的一些东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1166) [另外 我包含了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1167) [一个 JavaScript 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1169) [之后会往里面添加](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1171) [JavaScript 代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1172) [但我想再快速地过一遍 HTML 文件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1173) [我们做的主要改变是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1176) [添加了一个输入元素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1178) [让用户可以搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1180) [以及两个 DOM 容器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1183) [可以让我们把搜索结果放进去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1185) [MusicKit JS 无所谓](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1187) [你在 App 中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1188) [使用什么库或者框架](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1190) [所以在这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1191) [我们的 CSS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1193) [已经在后台构建好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1195) [在另一个文件里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1196) [我们也构建了一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1198) [template helper](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1199) [我们注意到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1200) [标记语言在左边看起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1202) [有点奇怪](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1204) [有几个按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1205) [随意地漂浮着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1206) [专辑封面明显是空的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1209) [这是因为 MusicKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1211) [假定如果你在用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1215) [meta 标签配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1216) [那么你就想要启用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1218) [声明式标记语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1220) [如果你没有提供](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1221) [那些配置项 它会假定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1222) [你在运行 JavaScript](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1224) [你并不需要声明式标记](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1225) [但我们为你提供了一个 hook 使得你可以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1226) [在 JavaScript 里重新启用声明式标记语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1228) [我们通过监听](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1230) [在文档中触发的 MusicKit 加载事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1235) [来配置 MusicKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1236) [我们可以由此知道](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1238) [MusicKit JS 已经可以使用和配置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1240) [以及播放可以开始了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1242) [我们可以像使用 meta 标签那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1244) [配置 App 名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1246) [但是现在有一个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1248) [告诉我们说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1249) [declarativeMarkup 可以被设置为 true](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1250) [这样 MusicKit JS](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1252) [就知道我们运行在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1254) [一种混合模式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1255) [我们希望启用声明式标记特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1257) [接下来 我要添加一个搜索处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1265) [这是纯粹的 JavaScript](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1267) [并非 MusicKit JS 特有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1269) [但我想特别指出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1270) [当用户在搜索框里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1272) [按下回车键时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1273) [就是我们需要触发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1275) [搜索回调的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1277) [我们可以通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1279) [使用 MusicKit 的 API 属性的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1283) [search 方法来实现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1284) [这样会用 Apple Music API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1287) [来搜索 并且](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1289) [我们可以用一个配置对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1291) [来指定 Apple Music API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1292) [接受的搜索变量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1294) [所以我们可以搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1299) [并将搜索范围](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1300) [限制在播放列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1301) [以及希望搜索结果个数限制在 8 个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1303) [我们有我们自定义的模板](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1306) [但是我想强调这三行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1309) [通过这三行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1311) [我们告诉 MusicKit 实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1313) [采用用户点击的播放列表封面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1315) [而且我们想要把](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1317) [播放队列设置为那个列表 ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1319) [播放队列设置为那个列表 ID](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1319) [这会返回一个 promise](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1321) [我们可以调用 music.play](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1324) [这样就会开始为用户播放了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1325) [接下来 我们也有了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1327) [自定义的界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1328) [我以 a list 为关键词进行一次搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1333) [我们看到 8 项来自 Apple Music 目录的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1336) [关于 a list 播放列表的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1338) [如果同样的搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1340) [可以运用到我的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1345) [个人 iCloud 资料库就好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1347) [我们可以用几乎一模一样的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1350) [完成以上搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1351) [除了 search 方法来自](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1354) [library property 而非](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1356) [API property](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1358) [这会告知 MusicKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1359) [你正在查找 iCloud 资料库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1361) [设置播放列表 同样设置结果数为 8 个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1365) [然后 设置播放队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1367) [以及开始播放的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1369) [跟之前完全一样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1372) [如果我运行同一个搜索](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1377) [会看到 iCloud 音乐资料库的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1380) [搜索结果 同时还有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1382) [目录资料库的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1384) [我可以点击](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1386) [然后我们就能播放 iCloud 资料库里的内容了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1390) [[ 音乐 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1394) [看着正在播放的界面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1398) [或者说底部显示的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1399) [正在播放的信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1401) [让我意识到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1402) [少了一个进度指示器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1403) [这样我无法得知正在播放的曲目](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1405) [播了多少了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1406) [我们可以通过监听](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1408) [MusicKit JS 提供的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1410) [playbackProgressDidChange 事件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1413) [来添加一个进度指示器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1415) [在这里我们给 MusicKit 实例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1422) [添加一个 EventListener](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1423) [监听 playbackProgressDidChange](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1425) [当我们收到那个事件时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1427) [用一个自定义的渲染程序来显示进度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1428) [我们可以再搜索一遍 a list](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1434) [这一次 当我播放歌曲时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1436) [能看到我们制作的进度条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1439) [能看到我们制作的进度条](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1439) [被绘制出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1441) [其实还有更多可以深入讨论的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1447) [关于 MusicKit JS 的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1449) [但我想让 DJ 回到舞台上来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1450) [为今天我们聊过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1452) [做一个总结](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1453) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1456) [&gt;&gt; 你们现在可以为你们的网站](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1460) [带来超凡的音乐体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1461) [你可以使用声明式标记语言](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1464) [来快速添加简单的播放功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1465) [或者你可以直接使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1467) [JavaScript API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1470) [制作一个高级的 App](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1472) [我们非常期待看到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1474) [你们的杰作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1475) [我们有很好的开发文档](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1477) [在本场会议结束后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1478) [马上在 Technology Lab 3](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1481) [会有一个实验室](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1482) [可以回答你们的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1484) [任何问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1485) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1487) [[ 掌声 ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/506/?time=1489)