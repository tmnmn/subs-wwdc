WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:13:59.676 --> 00:14:05.396 A:middle
泄漏的对象 还可显示它们所属的 Retain Cycle

00:14:05.396 --> 00:14:07.126 A:middle
如果进程中启用了

00:14:07.126 --> 00:14:08.856 A:middle
malloc 堆栈日志记录

00:14:08.856 --> 00:14:10.666 A:middle
我们甚至为你提供了

00:14:11.786 --> 00:14:14.146 A:middle
根节点 回溯

00:14:14.416 --> 00:14:15.796 A:middle
我经常问自己的一个问题是

00:14:15.906 --> 00:14:17.276 A:middle
内存都去哪了

00:14:18.096 --> 00:14:19.606 A:middle
我查看了 vmmap

00:14:19.606 --> 00:14:20.716 A:middle
发现堆很大

00:14:20.966 --> 00:14:22.006 A:middle
但是接下来要做什么呢

00:14:22.626 --> 00:14:24.426 A:middle
heap 工具提供了

00:14:24.426 --> 00:14:25.366 A:middle
关于进程堆中

00:14:25.366 --> 00:14:26.836 A:middle
对象分配的各种信息

00:14:27.046 --> 00:14:28.616 A:middle
它可以帮助你追踪

00:14:28.616 --> 00:14:30.216 A:middle
非常复杂的分配

00:14:30.216 --> 00:14:32.086 A:middle
或者很多同类的对象

00:14:34.036 --> 00:14:36.236 A:middle
我这里有一个 Memgraph 文件

00:14:36.236 --> 00:14:37.516 A:middle
它是我在 Xcode 捕获到

00:14:37.516 --> 00:14:39.336 A:middle
内存资源异常时得到的

00:14:39.336 --> 00:14:40.366 A:middle
我想研究它的堆

00:14:40.906 --> 00:14:43.416 A:middle
所以我把它传递给了 heap

00:14:43.926 --> 00:14:45.186 A:middle
它告诉我

00:14:45.186 --> 00:14:49.696 A:middle
每个对象的类名

00:14:49.696 --> 00:14:50.546 A:middle
它们的数量

00:14:50.546 --> 00:14:52.366 A:middle
它们的平均大小

00:14:52.366 --> 00:14:54.976 A:middle
以及这类对象的总大小

00:14:54.976 --> 00:14:56.446 A:middle
在这里

00:14:56.656 --> 00:14:58.156 A:middle
我看到了很多很多小对象

00:14:58.156 --> 00:14:58.976 A:middle
但我不认为

00:14:58.976 --> 00:14:59.676 A:middle
这是什么问题

00:14:59.946 --> 00:15:01.066 A:middle
我不认为

