# Vision with Core ML

## Summary
Using Core ML models in Vision makes the creation of powerful Computer Vision applications easy. Learn how easy it is to use custom trained classifiers and object recognition models in a live camera capture. In addition, you'll learn about the latest additions to the Vision Framework along with a deeper dive into some its fundamentals.

## Info
* Media
* WWDC 2018 - Session 717 - iOS, macOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/

## Text
 [（Vision与Core ML
简化强大的计算机视觉）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=16) [（演讲717）](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=19) [下午好 欢迎来到WWDC](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=25) [我知道我现正与咖啡和饼干竞争](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=28) [但我不知道咖啡是否是无麸质的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=30) [以及饼干是否不含咖啡因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=33) [所以坚持下去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=34) [我叫Frank Doepke
我将谈一些你可使用Core ML](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=36) [和Vision框架做的
关于计算机视觉的有趣事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=39) [那么今天我们要谈什么呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=44) [首先 你可能听说过
我们在自定义图像分类方面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=46) [为你准备了一些特别的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=49) [然后我们将谈一下对象识别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=53) [最后但同样重要的是
我将通过深入探讨一些基础知识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=56) [来提升你对Vision的理解水平](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=59) [来提升你对Vision的理解水平](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=59) [现在先看看自定义图像分类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=64) [我们已经在之前的演示中
看到了一些优点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=67) [我们看到比如
我们可以用鲜花和水果做些什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=71) [我和其他人一样喜欢鲜花和水果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=74) [抱歉 Lizzie
我们会在此做些更有技术性的事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=77) [我的意思是 如果我们创建一个商店
我们可以做什么 我们都是极客](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=80) [所以让我们创建一个
可以建造机器人的商店](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=85) [因此我们需要识别一些零件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=87) [我认为如果我有一个
可以帮助客户识别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=90) [这些物体是什么的app会很棒](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=93) [所以我们必须为此
训练一个自定义分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=98) [然后](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=101) [一旦我们有了分类器
我们根据它构建一个iOS app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=103) [其可以在我们的设备上运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=107) [在经历这些过程时
我将介绍一些你在做这类事情时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=110) [遇到的常见陷阱](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=114) [并尝试引导你避开它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=116) [让我们从训练开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=120) [我们如何训练呢？
当然是使用Create ML](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=123) [当然 我们要做的第一步是
我们必须拍照](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=127) [然后我们将照片放在文件夹中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=131) [我们使用文件夹名称作为分类标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=133) [现在 每个人都会问的一个问题是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=138) [“我需要多少数据”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=141) [首先 我们每个类别
至少需要10张图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=143) [但这是偏低的 你肯定想拥有更多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=149) [越多越好
实际上是你的分类器会表现得更好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=153) [需要注意的另一件事是
高度不平衡的数据集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=158) [这是什么意思呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=161) [当数据集中的一个类别
包含数千个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=162) [而在另一个类别中只有十个时
这个模型的训练效果不会很好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=166) [因此你想在大多数类别之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=169) [拥有一个更为均匀的分布](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=171) [我们引入的另一件事是增强](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=175) [增强将帮助你使此模型更加强大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=180) [但它并没有取代多样性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=184) [所以你仍然希望拥有许多
想要分类的对象图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=185) [但通过增强 我们要做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=191) [我们拍摄一张照片并扰乱它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=193) [我们对其添加噪声 模糊它
旋转它 翻转它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=195) [所以当我们训练它时
它在分类器看来有所不同](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=199) [我们来看一下训练的实际运作方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=204) [你可能已经听过
“迁移学习”这个术语](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=209) [这正是当我们训练分类器时
在Create ML中使用的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=212) [我们从一个预训练模型开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=216) [这是所有繁重过程发生的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=218) [这些模型通常训练数周
并且有数百万张图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=220) [这是你需要实际使用它的第一个起点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=225) [我们可以将该模型当做特征提取器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=230) [这可以给我们一个特征向量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=233) [它是我们图像中物体的数字描述](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=236) [现在你引入自己的数据
我们使用你的标签数据训练该集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=239) [现在你引入自己的数据
我们使用你的标签数据训练该集合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=239) [我们称之为最后一层
即真正的分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=242) [最终输出你的自定义模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=245) [我提到了这个大型的首次预训练模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=251) [本次演讲中
带来Vision的新特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=255) [我们称之为面向场景的
Vision FeaturePrint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=257) [它可在Create ML中使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=260) [并允许你训练图像分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=263) [它已经在一个非常大的
数据集上进行过训练](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=267) [它能够分类超过一千个类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=271) [这是一个你可以使用的
非常好的发行版](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=275) [我们已经使用过它了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=280) [在过去三年中
你可能已经在Photos中见过的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=281) [一些面向用户的功能
实际上它们在底层使用了此模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=284) [我们也将继续改进该模型
但也有一点需要注意](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=289) [我想在此强调一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=293) [当我们推出该模型的新版本时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=296) [你不一定会自动获得它的改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=299) [你不一定会自动获得它的改进](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=299) [除非你使用新模型重新训练](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=301) [所以如果你今年开始用它来开发](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=304) [并且你想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=306) [利用我们未来几年推出的特性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=307) [保留你的数据集
以便你可以重新进行训练](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=310) [再谈一些关于我们的
特征提取器的更多内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=316) [它已经存在在设备上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=321) [这对我们来说是一个重要的决定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=323) [因为它使你的模型的
磁盘占用空间显著减小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=326) [让我们稍微比较一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=332) [我选择了一些我们今天常用的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=334) [首先是Resnet
若我在Resnet上训练分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=338) [我的模型有多大呢？
98兆字节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=342) [如果我使用Squeezenet
它是一个小得多的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=347) [它无法区分很多的类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=350) [它的大小为5兆字节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=353) [所以这很不错
但问题是它没那么强大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=355) [Vision怎样？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=359) [Vision怎样？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=359) [在大多数情况下
它不到1兆字节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=361) [我们相信这对你来说
是一个好选择的另一个原因是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=366) [它已经经过优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=370) [我们了解我们的硬件
或者说GPU和CPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=371) [我们对该模型进行了大量优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=375) [因此它在我们的设备上表现最佳](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=377) [我们如何使用它来训练呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=384) [我们从一些带标签的图像开始
并将它们放入Create ML](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=386) [而Create ML知道如何从中提取
Vision FeaturePrint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=391) [它训练我们的分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=396) [并且该分类器实际上就是最终
将进入Core ML模型中的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=398) [这就是它如此之小的原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=402) [当我真正想要分析图像的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=405) [我所要做的就是使用我的图像和模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=408) [在Vision或Core ML中
它在底层知道如何](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=413) [使用我们的
Vision FeaturePrint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=417) [使用我们的
Vision FeaturePrint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=417) [并向我们返回分类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=421) [这就是我们需要了解的
关于训练的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=427) [但我说过当我们处理app时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=430) [还有一些注意事项](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=434) [所以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=436) [首先 我们只想](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=438) [在必要的时候才运行我们的分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=440) [分类器是深度卷积网络](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=444) [它是计算密集型的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=446) [所以当我们运行它时
它肯定会用掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=448) [CPU和GPU上运行的一些电子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=452) [所以除非你真的需要
否则你不想使用它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=455) [在我稍后演示的例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=458) [我实际上只想在用户
真正看一件物体时才进行分类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=462) [而不是在相机四处移动时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=466) [所以我问的问题是
“我拿稳相机了吗？”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=470) [然后我才运行我的分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=473) [我该怎么做？
我可以通过Vision进行配准](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=476) [配准意味着我可以拍摄两张图像
并将它们相互对齐](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=480) [它会告诉我
“如果你把它移动这些像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=483) [它们就能完全匹配”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=487) [这是一个非常便宜且快速的算法
它会告诉我](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=489) [我是否拿稳了相机
或者相机前面是否有物体在移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=493) [我使用了VNTranslationalImage
RegistrationRequest](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=499) [我知道这很绕口
但这包含了所有这些信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=502) [为了将其可视化
让我们看一下这个小视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=508) [我在这个视频中所做的是
我显示一条黄线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=511) [它会告诉我在过去几帧中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=515) [相机如何移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=517) [或者说配准请求如何求移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=519) [所以注意看那条黄线
如果它很长 则说明我的相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=521) [移动了很多
如果我拿稳相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=524) [则它应该是一条很短的线](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=527) [你可以看到相机正在移动
现在我对准这里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=530) [它变得很短](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=534) [这是个好主意
这就像是说“现在我拿稳相机了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=536) [现在可以运行我的分类器了”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=539) [现在可以运行我的分类器了”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=539) [要记住的下一件事是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=543) [制定备用计划](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=545) [有一个备用计划总是好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=547) [分类可能有误](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=549) [这意味着](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=553) [即使我的分类具有很高的置信度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=554) [我还是需要为它无法
正常工作而做准备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=557) [我在这个例子中做的一件事是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=562) [正如你稍后将看到的那样
我有一些东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=564) [其中没有实体对象
那么我该如何解决呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=566) [我的例子中
我正使用Vision框架中的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=569) [条形码检测器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=571) [来读取条形码标签以识别它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=573) [我们看的幻灯片足够多了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=577) [谁想看演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=579) [你在屏幕右侧看到的是我的设备](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=592) [我现在启动我的小机器人商店app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=597) [我现在启动我的小机器人商店app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=597) [你可以看到当我四处移动时
什么都没有发生](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=601) [当我静止不动并且对准某些东西时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=604) [我可以看到一条黄线
然后 瞧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=607) [没错 这的确是一个步进电机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=609) [让我们看看这张桌子上还有什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=612) [那是我的微控制器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=618) [这是一个步进电机驱动器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=623) [我们也可以拿起一件东西
然后对准它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=625) [是的 这是一个闭环带](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=629) [这是什么
这是一个导螺杆](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=635) [如我所说 你也可以查看条形码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=637) [我需要把数据线拉长一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=641) [这是我的培训课程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=646) [-嘿 Frank
-当然 因为我没有…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=648) [Frank？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=649) [发生了什么事？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=651) [Frank](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=653) [我需要你在演示中添加
另一个机器人零件](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=656) [这是Brett 他是我的经理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=660) [那样就太好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=664) [像往常一样 管理层
最后一刻的需求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=668) [我将确保你得到该备忘录的
另一份副本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=672) [我可不打算周六来干这事儿](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=675) [好吧 这是什么？
这是一台伺服电机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=678) [好吧 让我们看看
说不定它能成功呢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=681) [让我试一试](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=685) [我能搞定它吗？
不 它无法识别这个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=688) [这样呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=692) [不 它不是步进电机
所以这是一个漏洞](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=693) [我想我们需解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=697) [谁想解决这个问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=699) [噢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=702) [谁想解决这个问题
就是这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=704) [所以我现在要做的就是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=709) [拍摄一些该伺服电机的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=712) [我可能需要去工作室
你知道 设置好灯什么的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=715) [或者 我可以使用
我最喜欢的这个相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=719) [或者 我可以使用
我最喜欢的这个相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=719) [现在 让我们看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=725) [我们将拍摄一堆伺服电机的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=726) [而且我需要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=732) [从不同角度拍摄它
并且确保画面中没有任何其它东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=733) [我需要至少十张不同的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=743) [很好的选择
我喜欢把它放在不同的背景上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=747) [并确保拍到这些角落](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=755) [再把它放在手上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=757) [好的 我们现在有了很多图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=766) [现在我要打开Mac](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=771) [并实际向你展示如何对其进行训练](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=772) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=777) [我打开Image Capture app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=779) [我打开Image Capture app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=779) [让我暂时隐藏
我的QuickTime播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=782) [如果我现在查看我的Finder](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=789) [你可以看到这是我的训练集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=790) [我之前用它们来训练
我的当前app中使用的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=792) [那个模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=795) [我现在需要创建一个新文件夹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=797) [让我们称之为Servo](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=801) [在Image Capture中
我可以简单地将我刚拍摄的所有照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=805) [拖入我的Servo文件夹](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=814) [好的 现在我们已经添加了它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=821) [现在我需要再次训练我的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=824) [因为我的经理刚刚打乱了
我之前所做的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=826) [我在这里使用了一个
简单的Playground脚本](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=832) [而不是使用用户界面
这是因为](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=835) [我稍后想将它作为构建步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=837) [我稍后想将它作为构建步骤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=837) [合并到我的app中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=840) [我将其指向我们刚添加到
文件夹中的数据集](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=842) [然后只是简单地训练我的分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=846) [最后保存我的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=849) [现在发生的是 你可以看到
我们已经开始训练了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=852) [它将遍历我们文件夹中的
所有这些图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=857) [并从中提取场景打印](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=863) [它进行了所有必须的缩放操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=865) [最后将基于此训练出一个模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=868) [这是一项非常复杂的任务
但你知道 对你来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=872) [它只需要一行代码
最终就可以得到](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=875) [你可以在app中实际使用的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=878) [它刚刚结束 我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=881) [马上就完成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=884) [瞧 这就是我们的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=887) [那个模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=893) [我已在我的机器人商店app中
引用过它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=894) [这就是我们现在看到的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=897) [如你所见 这是我的图像分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=900) [它的大小为148千字节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=901) [这实际上比我的小启动画面还要小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=904) [这里有一件我想强调的事
我们稍后再谈](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=915) [这个图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=918) [也就是我需要传给它的图像
须是299x299像素的彩色图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=921) [奇怪的参数
但实际上很多分类器都这么干](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=926) [好的 现在我有了一个
但愿能够理解它的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=931) [现在我要打开我复杂的产品数据库](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=935) [它只是一个键列表](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=939) [我要把我的Servo添加到那里](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=942) [我对它进行重命名
这是Servo](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=948) [给它一个标签
这将是我们实际看到的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=952) [这里该填伺服电机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=956) [对于描述 我们可以这样写](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=960) [一个会嗖嗖响的电机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=964) [非常具有技术性
让我们看看这是否奏效](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=972) [我现在要运行我的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=977) [那是…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=981) [好的 我们来试试吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=988) [这就是我们的伺服电机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=992) [从另一个角度看
这是你看到的世界第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1002) [在舞台上现场训练的分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1005) [从照片开始
一直到最终的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1007) [我对这个演示着实捏了把汗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1010) [谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1015) [现在我们已经看到它是如何工作的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1021) [但我想在查看代码时强调一些事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1024) [我保证我们将在这里现场写一些代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1028) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1032) [让我把一切不需要的东西都关掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1034) [并让它更大一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1038) [好的 我是如何解决这一切的呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1042) [一开始 我们创建了一个
序列请求处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1045) [它被用于进行配准](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1049) [正如Sergei
在上个演讲中提到的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1051) [它非常擅长跟踪对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1055) [然后创建我的请求
将它们放入一个数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1057) [你在这里看到的是 对于配准](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1061) [只保留最近15个配准结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1063) [然后我会对其做一些分析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1066) [来看看我是否真的拿稳了相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1068) [当分析它们时 我要保留一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1071) [用于此目的的缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1073) [这实际上就是分类所运行的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1075) [并且由于这是一个很耗时的任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1078) [并且由于这是一个很耗时的任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1078) [我将在一个单独的队列上运行它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1081) [这是我用来打开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1085) [我们刚刚看到的小面板的一些代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1088) [但最重要的一点是
我该如何设置我的Vision任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1091) [我要完成两项任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1095) [首先是条形码请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1096) [然后是我的分类请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1098) [我设置了我的条形码请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1101) [在我的完成处理程序中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1103) [我只是查看
“我得到了任何结果吗？”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1105) [而且因为我只期待一个条形码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1108) [所以我只看第一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1112) [我能解码它吗](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1114) [如果我从中得到一个字符串
我将用它进行查找](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1116) [这实际上就是我刚才如何用条码打开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1118) [“哦 没错 那是我的训练课程”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1120) [我将其添加为我想要运行的请求之一](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1123) [现在我开始设置我的分类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1127) [这里我所做的是 我使用分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1129) [我从包中加载它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1133) [并以此创建我的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1137) [在这种情况下 我没使用
Core ML的代码完成功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1139) [在这种情况下 我没使用
Core ML的代码完成功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1139) [因为这是我的app中使用的
唯一一行Core ML代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1142) [它允许我进行自定义类型的错误处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1145) [但你也可以选择使用
Core ML中的代码完成功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1149) [两者都绝对有效
我由它创建我的Vision模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1152) [Vision Core ML模型
以及请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1157) [同样 当请求返回时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1160) [这意味着会执行我的完成处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1163) [我只是检查
我得到的是什么样的分类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1166) [然后我在这里设置此阈值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1171) [这是我凭经验设定的置信度目标](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1174) [我使用的是0.98
即有98%的信心它是正确的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1177) [为什么我要这样做？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1183) [这允许我过滤掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1185) [当我在看某物体时
不太确定那是什么的情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1186) [我们稍后会看到这是什么意思](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1189) [现在我准备好了所有的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1192) [当我真正想要执行它们的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1195) [我在这里创建了一个小函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1197) [它的作用是分析当前图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1199) [它的作用是分析当前图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1199) [在分析它的时候
我得到了我的设备方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1202) [这对于了解我正如何拿着手机
非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1207) [我创建了图像请求处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1211) [在我们当前想要处理的缓冲区上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1213) [并且我让它异步地执行它的工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1217) [这就是为了使用Core ML
进行处理和条码扫描](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1224) [我所需要做的所有事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1226) [我如何实现场景稳定性部分的呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1230) [我有一个可以重置的队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1234) [我可以将我的点添加进去](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1236) [然后我创建了一个函数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1239) [它允许我遍历所记录的点队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1244) [并且设定“如果它们全部加起来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1246) [只有不到20像素的距离”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1249) [同样 这也是我选择的经验值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1251) [然后我就知道场景是稳定的
即我拿稳了手机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1253) [我的相机前面没有东西在移动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1256) [然后是我们捕捉输出的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1259) [然后是我们捕捉输出的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1259) [这就是
AVFoundation通过](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1261) [相机的缓冲区对我们的调用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1264) [我需要确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1266) [获取到前一个像素缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1268) [因为这是我为了配准
要进行比较的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1270) [并在完成之后将它们换掉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1273) [我使用当前的缓冲区创建了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1277) [TranslationalImage
RegistrationRequest对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1280) [然后我在序列请求处理程序上](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1282) [执行我的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1284) [现在我得到了我的观察
我可以检查一下它们是否正常](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1287) [并将它们添加到我的数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1291) [最后但同样重要的是
我还要检查场景是否稳定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1294) [然后我将显示我的小黄框
它是一个检测叠层](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1298) [我知道这是我当前分析的缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1304) [并要求它对此进行分析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1307) [我在当前分析的缓冲区中的
异步调用结束时所做的一件事是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1314) [我释放了该缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1319) [我释放了该缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1319) [你在这里可以看到我正在检查
当前是否有一个缓冲区正被使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1322) [这可以让我确保
我只在一个缓冲区上工作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1326) [并且我不会总是在它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1330) [还在后台运行时
将越来越多缓冲区放入队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1331) [因为这会使相机得不到足够的帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1333) [好的 当我们运行的时候](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1337) [我想要强调一些事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1338) [我们先来讨论第一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1340) [我们看看底部的控制台](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1344) [你可以看到 当我刚开始运行时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1346) [我现在要在这里运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1351) [以便你能看到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1355) [你可以看到置信度得分很低](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1358) [我只是在拍摄白色背景](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1361) [它不确定我正在看的是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1362) [而当我对准它应该能识别的东西时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1365) [我们的置信度得分非常高](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1370) [这就是我如何确定
这是我想要展示的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1371) [我想要演示的另一件事…](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1376) [让我们看一下CPU的实际情况](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1381) [好的 现在我什么都没做](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1387) [我只是在显示我的屏幕](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1388) [当我四处移动相机时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1392) [场景不稳定
CPU的使用率大约为22%](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1395) [现在如果我保持稳定
这时分类器开始运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1399) [你可以看到CPU使用率上升](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1402) [这就是为什么我总是建议
只在你真正需要时才运行这些任务](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1404) [好的 我们刚才讲了很多东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1411) [让我们回到幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1414) [并回顾一下我们刚刚看到的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1415) [回到幻灯片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1420) [好的 回顾一下
首先是我们如何实现场景稳定性的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1428) [我们使用了序列请求处理程序](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1433) [以及VNTranslationalImage
RegistrationRequest](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1435) [来与前一帧进行比较](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1440) [除此之外 我们从alignmentTransform中
得到了平移方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1443) [它告诉我前一帧如何移动X和Y](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1448) [从而达到当前这帧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1452) [然后我们谈到
我们只想在场景稳定时进行分析](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1455) [为此 我们创建了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1460) [当前缓冲区的
VNImageRequestHandler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1462) [并且我们一起传入](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1465) [条码检测请求和分类请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1467) [这允许Vision在底层进行优化](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1472) [这比将它们作为单独的请求运行](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1475) [要快得多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1479) [下一部分关于我们在运行时
需要多大的缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1483) [所以说要“管理你的缓冲区”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1487) [有些Vision请求
如这类卷积网络](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1490) [可能耗费较长时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1494) [这些运行时间更长的任务最好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1495) [运行在后台队列上 以便你的UI
或你在相机中做的任何事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1498) [运行在后台队列上 以便你的UI
或你在相机中做的任何事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1498) [可以继续运行而不会卡死](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1502) [但在做这点时 特别是对于相机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1504) [你不想持续将来自相机的缓冲区
放入队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1506) [所以你应该放弃繁忙的缓冲区
在这个例子中 我说过我只用了一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1510) [这实际上在我的用例场景中
效果非常好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1514) [我用的是大小为1的队列
这就是为什么我只检查一个缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1517) [只要它正在运行
我就不会将新的缓冲区放入队列](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1520) [当其处理完成后
我就可以重置并处理下一个缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1523) [现在你可能会问](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1531) [当我能在Core ML中运行
该模型时 为何要用Vision？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1532) [这毕竟是Core ML模型啊](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1535) [以下是使用Vision的
一个重要原因](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1538) [让我们回过头看看我们的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1542) [这是奇怪的299x299像素参数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1545) [这就是这个模型的训练方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1549) [这就是它想要作为输入的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1551) [但是相机给我们的是
640x480的照片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1553) [或更高的分辨率
如果你愿意的话](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1556) [而Vision将完成所有这些工作
它获取这些来自相机的YUV缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1559) [而Vision将完成所有这些工作
它获取这些来自相机的YUV缓冲区](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1559) [将其转换为RGB并缩放图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1564) [而你不必为此编写任何代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1567) [这使得用Vision驱动这些
Core ML模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1569) [来处理图像请求变得更加容易](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1572) [以上就是图像分类的内容
接下来 我们将讨论对象识别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1577) [一点警告
在这个演示中 一个活羊角面包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1584) [可能会在舞台上受伤](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1587) [所以对于那些娇气的人
请把目光移开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1588) [我们用于对象识别的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1594) [基于这种YOLO技术
即“你只看一次”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1598) [这是一个运行非常快速的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1603) [它允许我们获取对象的边界框
并为其添加标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1605) [并且它可以在屏幕上找到多个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1610) [如这幅截图所示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1612) [它的优势在于我可以得到
比如它们的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1617) [它的优势在于我可以得到
比如它们的位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1617) [但我不会得到整体图像分类器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1621) [能够得到的那么多的分类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1623) [这与训练也有一定关系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1627) [对于这个话题 我推荐你
观看Turi Create演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1630) [它是在昨天举办的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1634) [其向你展示了如何训练这类模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1635) [这些模型也有点大](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1638) [那么这看起来效果如何
我们来看看演示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1641) [机器人商店打烊了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1650) [现在是早餐时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1655) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1662) [打开QuickTime播放器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1663) [这是我的新app
它是一个早餐查找器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1665) [我们看到了什么
哦 这里有一个羊角面包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1672) [我们有一个百吉饼
我们也可以识别香蕉](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1675) [现在它们都显示在一个屏幕中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1680) [我来识别它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1682) [正如我所提到的
在一些烹饪节目中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1684) [它们通常会告诉你如何操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1687) [但却将预烘烤的东西从烤箱中拿出来](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1689) [而这个模型实际上在这个羊角面包
出炉之前早就烤好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1692) [我可以证明这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1698) [它很新鲜
并且它还是一个羊角面包](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1701) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1714) [这很新鲜 但我还是要好好咀嚼](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1718) [让我们快速看一下代码的样子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1724) [那么我做了哪些不同的事情呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1733) [在设置我的请求方面
实际上很少改变](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1736) [我所要做的就是
使用我的Core ML模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1739) [我所要做的就是
使用我的Core ML模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1739) [就像我在上一个示例中所做的那样
创建我的Core ML请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1743) [然后这段代码就是简单的
我如何绘制我的结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1749) [这里有一些新的东西
来让这更容易一些](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1757) [当我们看这些代码时
我们发现一个新的对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1761) [即VNRecognizedObjectObservation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1766) [此外 这是我的边界框
以及观察标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1771) [我还想向你展示一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1777) [让我们从这里运行我们的app
并设置一个断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1780) [好的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1791) [好的 我们现在正处于断点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1793) [我只查看第一个标签](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1796) [当我们实际处理这些结果时
我们正在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1798) [当我们实际处理这些结果时
我们正在做什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1798) [我们看看这个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1804) [查看一下
objectObservation的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1811) [labels属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1816) [你可以看到我实际上
得到不止一个结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1819) [这里有百吉饼 香蕉 咖啡
今天我没带咖啡](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1823) [不好意思
还有羊角面包 鸡蛋和华夫饼干](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1827) [它们按照置信度进行排序
置信度高的在最上面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1830) [它通常是你所感兴趣的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1834) [这就是为什么我在这里
抄捷径并只查看第一个结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1837) [但你总是得到所有的分类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1840) [它们保存在一个数组中
其中包含了我们支持的所有类别](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1843) [这就是我们的早餐查找器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1848) [让我们回到幻灯片
这次我来按这个按钮](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1851) [好](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1854) [我们通过使用一个新的API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1858) [我们通过使用一个新的API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1858) [即我们的VNRecognized
ObjectObservation来使这成为可能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1860) [当我们执行
CoreMLModelRequest](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1867) [且若该模型实际上基于对象检测器时
我们就会自动得到它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1871) [如该示例一样
它是基于YOLO的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1880) [现在你可能会说
“我也可以像去年那样运行YOLO](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1883) [我在网上看到了很多相关文章”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1887) [但是看看他们实际需要编写多少代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1889) [才能获取此模型的输出](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1892) [并将它放入你可以使用的东西中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1894) [而我们在这里只用了几行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1896) [因此它使YOLO模型变得
非常容易使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1898) [我们再来看一次这些代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1902) [我创建了我的模型
根据该模型创建了我的请求](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1904) [在我的完成处理程序中
我可以简单地看一下对象的区域](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1908) [因为我们看到
我们可以得到多个对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1912) [我从中获取标签和边界框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1915) [然后就可以将其显示到早餐查找器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1918) [然后就可以将其显示到早餐查找器中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1918) [我想在这个例子中强调一件事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1924) [你可以看到这些边界框有点抖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1928) [因为我一帧一帧一帧地运行检测器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1930) [跟踪往往是这里更好的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1934) [为什么呢？即使在运行方面](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1937) [跟踪也比运行这些模型要快得多](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1941) [因此重新检测比运行跟踪请求
需要更多时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1945) [只要我想在屏幕上跟踪某对象
我就可以使用跟踪器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1951) [因为它是一种更轻量级的算法
它运行得更快](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1957) [最重要的是 我们有时间平滑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1959) [这样这些框就不再抖动了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1963) [如果你查看我们的一些跟踪示例](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1965) [它们实际上在屏幕上移动得非常顺畅](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1967) [如果你想了解有关跟踪的更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1970) [我的同事Sergei的上一次演讲](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1974) [讨论了如何实现这一点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1976) [好的 最后但同样重要的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1981) [让我们加强对Vision的掌握
并讨论一些基础知识](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1984) [在使用Vision框架时
知道一些事情非常重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1988) [首先是很多问题的常见根源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1992) [图像方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1996) [并非所有的Vision算法
都与方向无关](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=1999) [你可能早些时候听说过
我们有一个新的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2004) [与方向无关的人脸检测器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2006) [但上一个则不是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2009) [这意味着我们需要知道
图像的直立位置是什么样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2012) [这可能有些让人迷惑](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2016) [因为如果你看一下它并预览最终结果](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2018) [我的图片看起来是直立的
但这不是它存储在磁盘上的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2020) [有样东西可以告诉我们
设备的方向是什么样的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2024) [这被称为EXIF方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2028) [如果捕获了一张图像
它通常是传感器方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2031) [通过EXIF 我们可以知道
直立是哪个方向](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2035) [如果你将URL作为输入
传递给Vision](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2038) [如果你将URL作为输入
传递给Vision](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2038) [Vision实际上为你做了所有事](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2042) [并从文件中读取此EXIF信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2045) [但正如我们之前在演示中展示的那样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2049) [如果我使用实时捕获源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2051) [我将需要传递此信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2053) [因此我必须查看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2056) [我的UI设备的当前方向是什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2057) [并将其转换为
CGImagePropertyOrientation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2061) [因为我们需要它的
EXIF方向格式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2064) [接下来我们谈谈坐标系](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2069) [对于Vision
原点始终位于左下角](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2073) [并且所有处理都会假设
图像处于直立位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2077) [因此方向很重要](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2083) [我们所有的处理都是在
标准化的坐标空间中完成的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2087) [除了配准 我们需要知道它
实际上有多少像素](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2090) [标准化坐标意味着我们的坐标是
从(0,0)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2094) [到右上角的(1,1)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2098) [到右上角的(1,1)](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2098) [这是一个](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2102) [执行了面部和特征点检测请求的图片](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2103) [你可以看到我得到了脸上的边界框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2107) [并且特征点以](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2110) [该边界框的相对坐标进行表示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2112) [如果你需要回到图像坐标空间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2117) [可以使用在VNUtils中的工具函数
如VNImageRectFromNormalizedRect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2119) [来在这些坐标之间转换](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2124) [接下来我们谈谈置信度分数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2131) [在我们的机器人商店示例中
我们已经对此有所接触](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2133) [我们的许多算法都可以表示
它们对结果的信心](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2138) [这在稍后分析我想要从结果中
得到什么时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2143) [是一个很重要的部分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2149) [我是得到一个为0的低置信度呢
还是得到一个为1的高置信度呢？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2150) [遥控器](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2158) [好了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2162) [不幸的是 并非所有算法
都使用相同的标准](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2163) [来衡量它们的置信度分数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2168) [例如 如果看看我们的文本检测器
它几乎总是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2171) [返回一个值为1的置信度得分
因为如果它不认为这是文字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2174) [它一开始就不会返回边界框](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2177) [但正如我们所看到的
分类器的置信度得分](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2181) [则是一个较大的范围
我们来看几个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2185) [在我的第一个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2190) [我使用了一张
机器人商店示例中的图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2192) [我在它上面运行了自己的模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2196) [果然 它有很高的置信度分数](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2198) [并认为这是一个步进电机](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2200) [在下面这个例子中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2203) [我将使用我们模型库中的一些模型](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2205) [不要误会我的意思
我不是想比较模型的质量](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2209) [而是关于它们返回的置信度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2213) [以及我们实际想要做的事情](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2215) [当我们想要对这张图片进行分类时
它告诉了我们什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2218) [当我们想要对这张图片进行分类时
它告诉了我们什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2218) [嗯 它并没有那么糟糕
但它也不是很确定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2223) [只有0.395的置信度得分
不算特别高](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2228) [但其中的确有沙滩
这的确是关于海滩的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2232) [所以当我想搜索它时
这结果基本上还算凑合](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2235) [但我可以用它来标记图像吗
这可能是值得怀疑的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2239) [让我们看看下一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2244) [摩托车上的女孩
分类器对此做了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2246) [嗯 我不确定她是否愿意被称为红薯](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2251) [让我们再看一个例子
这是我的代码的屏幕截图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2259) [分类器对此做了什么](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2264) [它认为这是一个网站
电脑实在太笨了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2267) [这是关于我们的置信度得分的
一些结论](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2273) [1.0总是意味着100%正确吗？
不一定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2278) [1.0总是意味着100%正确吗？
不一定](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2278) [它符合算法的标准](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2282) [但我们的感知 正如我们看到的红薯
是完全不同的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2285) [所以当你创建一个
想要利用它的app时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2291) [请记住这一点 好好想一想
如果你写了一个医疗app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2295) [并说“哦 你有癌症”
这个观点可能过于绝对](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2298) [你可能想要软化一点点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2303) [取决于你对结果的确切程度](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2305) [为此你可以使用两种技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2310) [正如我们在机器人商店示例中所见
我使用了置信度得分的阈值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2313) [因为我已经标记了图像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2317) [并且过滤掉置信度分数较低的
所有内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2320) [另一方面
如果我想创建一个搜索app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2323) [我可能会使用我拥有的一些图像
并且可能仍将它们显示在](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2325) [搜索结果下面
因为也许在搜索结果中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2331) [仍然可能有一个正确的选择](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2334) [像往常一样 你可以在我们的网站上
找到更多信息](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2341) [并且我们明天下午3点有个实验室](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2344) [欢迎到访 咨询你的问题
我们随时为你提供帮助](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2347) [接着我首先要感谢你们所有人](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2351) [能够使用我们的技术创造出
这些出色的app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2354) [我期待看到你能用这些技术
所做出来的东西](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2357) [最后谢谢大家来到WWDC
请享受余下的演讲 谢谢](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/717/?time=2359)