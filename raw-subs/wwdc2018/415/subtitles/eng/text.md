# Behind the Scenes of the Xcode Build Process

## Summary
Ever wonder what happens when you build your project in Xcode? Learn how Xcode automates the steps required to build an application, and go behind the scenes to learn how clang, swiftc, and the linker work together to turn your source code into a working program.

## Info
* Developer Tools
* WWDC 2018 - Session 415 - iOS, macOS, tvOS, watchOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=7) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=30) [&gt;&gt; Good afternoon, everyone!](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=36) [Welcome to Behind the Scenes of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=38) [the Xcode Build Process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=39) [My name is Jake Petroules, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=41) [I'm an engineer on the Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=43) [Build System Team.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=44) [And today we're going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=45) [exploring the Xcode build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=46) [process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=48) [I'll start by telling you all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=49) [about Xcode 10's new build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=52) [system which is written from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=53) [scratch in Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=54) [And provides improved](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=55) [performance and reliability.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=56) [We'll answer questions like what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=58) [We'll answer questions like what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=58) [exactly happens when you press](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=60) [Command B?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=61) [How is the build process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=62) [structured?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=63) [And how does Xcode use the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=64) [information in your project file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=65) [to determine how to model and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=66) [orchestrate the build process?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=68) [Next we'll venture into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=71) [compiler realm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=72) [And find out about Clang and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=74) [Swift builds your source code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=76) [into object files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=77) [We'll show how headers and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=79) [modules work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=80) [See how the compilers find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=81) [declarations in your code, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=82) [how the Swift compilation model](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=84) [fundamentally differs from that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=85) [of C, C++ and Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=87) [Finally, we'll land at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=90) [linker which performs one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=92) [final steps in the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=93) [process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=95) [We'll explain what symbols are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=96) [and how they relate to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=97) [source code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=98) [And how the linker takes the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=99) [object files produced by the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=100) [compilers and glues them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=101) [together to produce the final](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=103) [executable for your application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=104) [or framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=105) [By the way, we're going to use a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=107) [small sample app called PetWall](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=109) [as a running example throughout](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=110) [this talk.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=112) [It's just a small iOS app that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=113) [displays photos of our pets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=114) [So let's first understand what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=119) [So let's first understand what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=119) [the build process is and how it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=120) [works when building a typical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=122) [app like PetWall in Xcode.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=123) [You can see here we've got an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=125) [app target, a framework, a bunch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=127) [of different source code files](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=128) [in Swift and Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=130) [And maybe this looks a bit like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=131) [your own project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=133) [So when you build an app,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=135) [there's a number of steps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=139) [involved to go from the source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=140) [code and resources in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=141) [project to the package that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=142) [you're shipping to customers or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=144) [uploading to the App Store for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=146) [distribution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=147) [You have to compile and link](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=148) [source code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=150) [Copy and process resources like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=151) [headers, asset catalogues and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=153) [storyboards.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=155) [And finally code sign and maybe](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=157) [even do some custom work in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=159) [shell script or a make file like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=160) [building API documentation for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=161) [your framework or running code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=163) [linting and validation tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=165) [Now most of these tasks in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=168) [build process are performed by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=169) [running command line tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=171) [Like Clang, LD, AC tool, IB](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=172) [tool, Code sign, and so on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=174) [These tools have to be executed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=177) [with a very specific set of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=179) [with a very specific set of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=179) [arguments and in a particular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=180) [order based on the configuration](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=182) [of your Xcode project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=183) [So what the build system does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=185) [for you is to automate the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=187) [orchestration and execution of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=189) [these tasks each time you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=190) [perform a build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=191) [And since there can be tens of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=193) [thousands of tasks or even more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=194) [involved in a build process with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=196) [a complex graph of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=198) [interdependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=199) [It's definitely not something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=200) [you want to be manually typing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=201) [into the terminal 110 times a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=202) [day.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=203) [Let the build system do that for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=204) [you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=207) [Now I mentioned that the tasks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=209) [in the build process are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=211) [executed in a particular order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=212) [Let's talk about how that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=214) [ordering is determined and why](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=215) [it's important.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=217) [The order in which build tasks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=218) [are executed is determined from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=220) [the dependency information that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=222) [is the tasks, the inputs that a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=223) [task consumes, and the outputs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=225) [that it produces.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=227) [For example, a compilation task](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=229) [consumes a source code file like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=231) [PetController.m as input and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=232) [produces an object file like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=235) [PetController.o as output.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=237) [Similarly, a linker task](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=240) [consumes a number of object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=241) [files produced by the compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=243) [in previous tasks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=244) [And produces and executable or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=246) [library output.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=247) [Like the PetWall executable that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=249) [will go into our .app bundle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=250) [And hopefully you're starting to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=252) [see a bit of a pattern emerge](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=253) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=254) [You can see how the dependency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=256) [information flows through this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=257) [graph structure which ultimately](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=258) [informs the order of execution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=260) [Now if you look at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=263) [compilation tasks in the graph](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=264) [as sort of like lanes of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=266) [traffic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=267) [You can see hoe the compilation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=268) [tasks are totally independent in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=269) [their own lanes and can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=271) [therefore run in parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=272) [And because the linker task](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=274) [takes everything else's input,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=276) [we know that has to come last.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=278) [So the build system uses](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=281) [dependency information to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=282) [determine the order in which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=284) [tasks should be run and which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=285) [tasks can be run in parallel and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=287) [we call this dependency order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=289) [Now that we've covered what the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=291) [build process is, let's go into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=292) [a little more detail on how it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=294) [works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=296) [What happens when you press](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=297) [build?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=298) [So the first step is for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=300) [build system to take the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=301) [description, your Xcode project](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=302) [file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=304) [Parse it, take into account all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=305) [the files in your project, your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=307) [targets and the dependency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=309) [relationships.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=310) [Your build settings, and turn it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=311) [into a tree-like structure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=313) [called a directed graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=314) [And this represents all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=316) [dependencies between the input](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=317) [and output files in your project](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=319) [and the tasks that will be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=320) [executed to process them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=322) [Next the low-level execution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=324) [engine processes this graph,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=327) [looks at the dependency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=329) [specifications and figures out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=330) [which tasks to execute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=332) [The sequence or order in which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=334) [they must be run and which tasks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=335) [can be run in parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=337) [Then proceeds to execute them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=339) [And by the way, our low-level](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=342) [build execution engine for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=343) [new build system is called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=344) [llbuild.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=345) [And it's open source and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=346) [developed on GitHub.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=347) [If you're interested in build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=348) [systems development, feel free](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=349) [to check it out and see how it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=350) [works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=352) [We'll have a link to this and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=352) [other open source components](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=353) [related to the build process at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=354) [the end of the talk.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=356) [Okay, let's talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=357) [discovered dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=359) [discovered dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=359) [Now since you can never have too](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=361) [much dependency information, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=362) [build system might actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=364) [discover more information during](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=366) [the task execution process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=367) [For example, when Clang compiles](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=369) [an Objective-C file, it produces](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=371) [and object file as you'd expect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=373) [But it can also produce another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=375) [file that contains a listing of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=377) [which header files were included](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=379) [by that source file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=381) [Then the next time you build,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=382) [the build system uses the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=384) [information from this file to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=385) [make sure that it recompiles the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=387) [source file if you change any of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=388) [the header files that it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=390) [includes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=391) [And you can see the dependency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=392) [path through PetController.h,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=393) [PetController.d, .n, all the way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=395) [to the .o file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=397) [Now we've been talking a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=400) [about how the build system's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=402) [main job is to execute tasks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=404) [And of course the bigger your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=407) [project, the longer the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=409) [process will take.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=410) [So you don't want to run all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=411) [these tasks every single time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=413) [you build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=414) [Instead, the build system might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=416) [only execute a subset of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=417) [tasks on the graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=419) [tasks on the graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=419) [Depending on the changes you've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=422) [made to your project since the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=423) [previous build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=425) [We refer to this as an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=427) [incremental build and having](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=428) [accurate dependency information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=430) [is very important in order for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=432) [incremental builds to work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=433) [correctly and efficiently.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=434) [Now we talked about how changes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=435) [affect the build system, and how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=439) [they relate to incremental](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=440) [builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=441) [So how does the build system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=442) [actually detect changes?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=443) [Each task in the build process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=444) [has an associate signature which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=447) [is the sort of hash that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=449) [computed from various](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=450) [information related to that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=451) [task.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=453) [This information includes the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=454) [stat infor of the task's inputs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=456) [like file paths and modification](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=457) [time stamps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=459) [The command line indication used](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=460) [to actually perform the command.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=462) [And other task-specific metadata](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=463) [such as the version of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=465) [compiler that's being used.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=466) [The build system keeps track of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=469) [the signatures of tasks in both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=470) [the current and the previous](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=472) [build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=473) [So that it knows whether to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=474) [rerun a task each time a build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=475) [is performed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=476) [If the signature of any given](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=479) [If the signature of any given](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=479) [task is different than the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=480) [signature that it had in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=481) [previous build, then the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=482) [system reruns that task.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=483) [If they're the same, then it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=486) [skipped.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=487) [That's the basic idea behind how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=488) [incremental builds work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=490) [So now that we have an idea of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=492) [what the build process is and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=494) [how it works, how can you help](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=496) [the build system do its job?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=498) [Let's go back to basics for a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=499) [moment.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=502) [A build process is a series of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=503) [tasks executed in a particular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=504) [order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=506) [But remember that the build is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=507) [represented as a directed graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=508) [So we don't want to think about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=511) [the order in which these tasks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=513) [should be executed because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=514) [that's the build system's job.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=515) [Instead, as developers, we need](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=517) [to think about dependencies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=519) [between tasks and let the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=521) [system figure out how to best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=523) [execute them according to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=524) [graph's structure.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=525) [This lets the build system order](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=526) [tasks correctly and parallelize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=528) [where possible in order to take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=530) [full advantage of multicore](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=531) [hardware.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=533) [So where do dependencies come](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=534) [from?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=536) [For certain tasks, dependency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=536) [information comes from knowledge](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=538) [information comes from knowledge](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=538) [built into the build system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=540) [The build system ships with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=541) [rules for the compiler, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=542) [linker, the asset catalogue and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=544) [story board processors and so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=546) [on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=548) [And these rules define what kind](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=548) [of files are accepted as inputs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=549) [as well as what outputs are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=551) [produced.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=553) [There's also target dependencies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=555) [which roughly determine the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=557) [order in which targets are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=558) [built.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=559) [And in some cases, the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=560) [system can compile sources of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=561) [different targets and parallel.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=563) [Previously in Xcode, when a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=564) [target was built, it required](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=566) [the compilation of the entire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=567) [dependent target to be completed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=568) [before it could start.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=570) [In Xcode X's new build system,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=572) [targets can start building](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=573) [sooner.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=574) [This means that your compile](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=575) [sources phase can start earlier](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=576) [providing your some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=578) [parallelization for free.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=579) [However, note that if you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=581) [making use of any run script](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=582) [phases, those script phases will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=583) [need to complete before this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=585) [parallelization can take effect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=586) [Somewhat related to target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=589) [dependencies are implicit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=590) [dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=591) [For example, if you list a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=593) [target in your link library with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=594) [binaries build phase and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=595) [implicit dependencies are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=597) [enabled in the scheme editor,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=598) [that's on by default, by the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=600) [way, the build system will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=601) [establish an implicit dependency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=602) [on that target even if it's not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=603) [listed in target dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=605) [Next up are build phase](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=608) [dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=609) [In the target editor, you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=610) [notice that there's a number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=612) [build phases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=613) [Copy headers, compile sources,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=614) [copy bundle resources and so on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=616) [The tasks associated with each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=619) [of these phrases are usually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=620) [running groups according to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=622) [order in which the phases are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=623) [listed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=624) [But the build system might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=625) [ignore that order if it knows](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=626) [better.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=627) [Like if you have a link library,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=627) [linked binary with library space](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=629) [ordered before compile sources.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=630) [And note that there's cases](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=632) [where having the wrong build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=634) [phase order can cause build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=634) [issues or failures, so make sure](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=636) [to understand your dependencies](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=637) [and verify that your build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=638) [phases are in the right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=639) [sequence.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=640) [There's also scheme order](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=642) [dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=644) [If you have the parallelize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=645) [build check box enabled in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=646) [scheme settings, you get better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=647) [build performance and the order](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=649) [of your targets in your scheme](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=650) [doesn't matter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=652) [However, if you turn parallelize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=653) [build off, Xcode will attempt to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=654) [build their, your targets in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=656) [order you listed them in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=658) [build action of the scheme one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=659) [build action of the scheme one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=659) [by one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=660) [Target dependencies still have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=662) [higher priority in determining](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=663) [which targets build first.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=664) [But otherwise, Xcode will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=665) [respect that ordering.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=667) [Now it might be tempting to use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=668) [this as it gives you a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=670) [predictable build order even if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=671) [you haven't set your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=672) [dependencies correctly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=673) [But you're sacrificing a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=674) [parallelization when you do this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=675) [and slowing down your build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=677) [So we recommend that you leave](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=679) [the parallelize builds checkbox](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=680) [enabled, set up your target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=681) [dependencies correctly and don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=682) [rely on ordering.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=684) [Lastly, dependency information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=687) [comes from you, the developers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=689) [If you're creating custom shell](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=691) [script build phases or build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=693) [rules, make sure to tell the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=695) [build system what its inputs and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=696) [outputs are.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=698) [This lets the build system avoid](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=699) [rerunning the script tasks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=700) [unnecessarily.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=701) [And can help make sure that they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=702) [are executed in the right order.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=703) [You can define the inputs and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=705) [outputs in the run script phase](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=706) [editor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=708) [And the paths of these files](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=708) [will be made available to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=710) [script as environment variables.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=711) [Don't rely on auto-link for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=714) [target dependencies in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=716) [project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=717) [The client compiler has a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=718) [feature called auto-link which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=719) [feature called auto-link which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=719) [can be enabled using the link](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=721) [frameworks automatically build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=722) [setting.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=723) [This setting allows the compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=724) [to automatically link to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=725) [frameworks corresponding to any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=726) [modules you import without](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=728) [having to explicitly link them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=729) [in your link library's build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=731) [phase.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=732) [However, it's important to note](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=733) [that auto-link does not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=734) [establish dependency on that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=735) [framework at the build system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=737) [level.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=738) [So it won't guarantee that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=738) [target you depend on is actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=740) [built before you try to link](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=741) [against it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=743) [So you should rely on this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=745) [feature only for frameworks from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=746) [the platform STK.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=748) [Like Foundation and UIKit since](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=749) [we know those will already exist](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=751) [before the build even starts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=752) [For targets in your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=754) [projects, make sure to add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=755) [explicit library dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=756) [You might also need to create](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=760) [project references by dragging](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=761) [and dropping another Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=762) [project into your project's file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=764) [navigator in order to reveal the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=765) [targets of other projects you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=767) [depend on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=768) [In conclusion, with accurate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=769) [dependency information, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=773) [build system can better](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=774) [parallelize your builds, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=775) [help ensure that you get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=777) [consistent results every time so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=778) [consistent results every time so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=778) [that you can spend less time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=780) [building and more time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=781) [developing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=782) [For more information on how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=784) [speed up your builds and make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=785) [the most of all those cores in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=786) [your shiny new iMac Pro, we'd](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=787) [recommend that you check out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=789) [Building Faster in Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=790) [Session.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=791) [And with that, I'm going to hand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=792) [it over to Jurgen, who's going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=793) [to take you into the realm of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=794) [the compiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=796) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=797) [&gt;&gt; Thank you, Jake.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=803) [And now we're going to talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=804) [about what happens behind the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=807) [scenes when Xcode build system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=808) [invokes the Clang compiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=811) [Hello, everyone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=813) [My name is Jurgen, and I'm a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=815) [Compiler Engineer on a Clang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=816) [Frontend Team.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=818) [Today I'm going to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=820) [two features you might not know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=821) [about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=823) [The first feature is called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=824) [header maps and how we use them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=826) [to communicate information from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=828) [the Xcode build system to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=830) [Clang compiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=832) [The second feature is called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=834) [Clang modules and how we use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=835) [them to speed up your builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=837) [them to speed up your builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=837) [Some of you might only use Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=841) [by now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=843) [But I want to tell you, Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=844) [uses Clang behind the scenes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=846) [So there might be something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=848) [interesting for you here, too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=849) [So what is Clang?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=854) [Clang is Apple's official C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=857) [compiler and all the other C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=858) [language family such as C, C++,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=862) [and of course Objective-C which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=865) [is used for the majority of all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=868) [frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=869) [As Jake mentioned in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=871) [beginning, the compilers invoked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=873) [[inaudible] for every input file](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=876) [and it creates exactly one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=878) [output file which is then later](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=879) [consumed by the linker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=881) [If you want to access APIs from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=883) [the iOS, or you want to access](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=886) [implementations from your own](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=889) [code, you usually have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=892) [include something what is called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=894) [a header file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=895) [A header file is a promise.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=896) [You promise somewhere else this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=900) [implementation exists.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=903) [And they usually match.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=904) [Of course if you update only the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=906) [header file-- only the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=908) [implementation file and forget](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=909) [the header file, you broke your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=911) [promise.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=913) [Very often this doesn't break](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=914) [the compile time because the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=916) [compiler trusts your promise.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=918) [Usually this breaks during link](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=920) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=922) [The compiler usually does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=923) [include more than one header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=926) [file, and this is done for all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=927) [compiler invocation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=930) [So let's have a look at our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=932) [example application and see how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=934) [we deal with header files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=937) [This is PetWall, it's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=939) [mixed-language application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=942) [The application itself is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=944) [written in Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=946) [And it uses a framework that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=948) [written in Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=951) [And it has a support library](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=952) [aesthetic archive that use--](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=954) [that's written in C++.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=956) [that's written in C++.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=956) [Over time, our application grew.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=960) [And we start to reorganize it so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=963) [we can find things easier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=966) [For example, we moved all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=968) [cat-related files into a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=970) [subfolder.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=972) [We didn't have to change any of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=973) [our implementation files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=978) [And it still works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=980) [So it makes you wonder how does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=983) [Clang find your header files?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=986) [Let's look at a simple example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=989) [This is one of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=994) [implementation files we use in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=995) [our code and we include our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=998) [header file called cat.h. How](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1000) [can we figure out what Clang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1003) [does?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1005) [Once thing you could do is you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1006) [can go into the build logs, look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1008) [what the Xcode build system did](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1011) [to compile this particular file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1014) [And copy and paste that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1015) [invocation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1017) [You drop it into a terminal and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1019) [You drop it into a terminal and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1019) [add the -v option.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1021) [Dash-v is symbol for verbose.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1023) [And then Clang will tell you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1025) [lots of information.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1027) [But let's just concentrate on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1029) [the one that matter which is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1031) [search paths.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1034) [I say search paths and many of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1035) [you might expect to see now here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1037) [search paths that point back to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1040) [your source code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1042) [But it's not how this works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1044) [Instead you will see something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1047) [called headermaps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1049) [Headermaps are used [inaudible]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1052) [by the Xcode build system to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1054) [communicate where those header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1056) [files are.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1058) [So let's have a look at those.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1060) [Let's have a look the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1061) [important two file-- headermap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1062) [files we care about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1064) [The first two entries simply](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1067) [append the framework name to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1071) [your header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1075) [Those two headers in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1076) [beginning are public headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1077) [I say you shouldn't rely on this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1082) [feature.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1084) [The reason is we keep this there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1085) [to keep existing projects](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1088) [working but there might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1090) [issues down the road with Clang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1093) [modules so we suggest that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1094) [always specify the framework](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1097) [name when you include a public](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1100) [or private header file from your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1102) [own framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1104) [Third entry is a project header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1107) [In this case, this is not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1110) [required.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1111) [And the whole purpose of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1112) [headermap is to point back to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1115) [your source code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1117) [As you can see, we do the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1118) [thing for the public and private](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1121) [headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1122) [We always point back to your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1124) [source code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1125) [We do this so that Clang can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1127) [produce useful error and warning](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1129) [messages for the files in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1132) [source directory and not a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1134) [potential copy that might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1136) [somewhere else in the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1137) [somewhere else in the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1137) [directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1142) [Since many people were not aware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1143) [that we use headermaps, you run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1145) [into certain issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1146) [A very common one is that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1148) [forgot to add the header to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1151) [project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1153) [It is in the source directory,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1154) [but it is not in the project](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1156) [itself.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1158) [So always add your headers to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1159) [the project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1161) [Another issue is that if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1163) [have headers with the same name,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1166) [they might shadow each other.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1168) [So always try to use unique](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1171) [names for your headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1172) [This also applies to system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1174) [headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1176) [If you have a local header in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1177) [your project that has the name](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1179) [as a system header, it will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1180) [shadow the system header so you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1182) [should try to avoid this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1184) [Talking about system headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1187) [How do we find those?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1188) [Another example from our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1193) [PetWall.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1194) [Here in this case we include](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1195) [Foundation.h header file which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1197) [is in our SDK.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1199) [is in our SDK.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1199) [We can do the same thing we did](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1200) [before when you were looking for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1203) [our own header files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1205) [But now we're looking for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1206) [system header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1207) [It's just that headermaps are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1208) [only for your own headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1211) [So we can ignore them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1213) [Let's focus on the include path](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1216) [[inaudible] matter.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1218) [So at default, we always look in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1218) [two directories in the SDK.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1221) [the first one is user include,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1223) [the second one is system library](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1226) [frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1228) [Let's have a look at the first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1229) [one.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1231) [It's a regular include](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1231) [directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1234) [So the only thing we have to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1235) [is we have to append the search](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1236) [term.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1238) [In this case,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1238) [Foundation/Foundation.h. And we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1239) [won't find the header because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1243) [it's not there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1244) [But it's okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1245) [Let's try the next entry.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1246) [Let's look into system library](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1248) [frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1250) [This one is a frameworks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1252) [directory that means Clang has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1253) [to behave a little bit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1255) [different.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1256) [First of all, it has to identify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1257) [First of all, it has to identify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1257) [what is the framework and check](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1260) [if the framework exists.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1262) [After that, it has to look in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1264) [the headers directory for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1267) [header file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1269) [This case, it finds it so it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1270) [fine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1272) [But what happens if we don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1273) [find the header?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1276) [For example, we have a bogus](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1277) [header that doesn't exist.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1278) [It obviously fails to find it in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1281) [the headers directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1283) [But the next, it will also look](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1284) [in the private headers](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1287) [directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1288) [Apple doesn't ship any private](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1290) [headers in its SDK.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1292) [but your project, your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1295) [frameworks might have public and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1296) [private headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1298) [So we always will look there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1299) [too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1301) [Since it's a bogus header, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1302) [not there either.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1305) [Interesting now, we actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1306) [will abort the search now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1308) [We will not keep searching in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1310) [other search directories.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1311) [The reason is we already found](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1313) [the head-- we already found the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1316) [framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1317) [Once you find the framework, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1319) [Once you find the framework, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1319) [expect to find the header in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1320) [this framework directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1321) [If you don't find it, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1323) [complete abort the search.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1324) [If you're curious how your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1326) [implementation file looks like,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1329) [after all those headers got](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1331) [imported and preprocessed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1333) [You can ask Xcode to create a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1335) [preprocessed file for you, for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1338) [your implementation file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1341) [This will create a very large](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1342) [output file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1347) [So how big is that file?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1348) [Let's use a very simple example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1352) [Foundation.h is a very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1355) [fundamental header, fundamental](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1359) [header to our system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1360) [It is-- you are very likely to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1362) [import this header either](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1364) [directly or indirectly for some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1366) [other header file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1368) [That means every compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1369) [invocation you're most likely](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1371) [going to have to find this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1372) [header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1374) [At the end of the day, Clang has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1375) [to find and process over 800](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1378) [to find and process over 800](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1378) [header files for the single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1381) [include statement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1383) [That's over 9 megabyte of source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1385) [code that has to be parsed and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1387) [verified.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1390) [And that happens for every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1391) [compiler invocation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1393) [That's a lot of work, and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1395) [redundant.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1397) [So can we do better?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1399) [One of the features you might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1404) [aware of is called precompiled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1405) [header files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1406) [That's one way to improve this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1408) [But we have something better.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1410) [A few years back, we introduced](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1411) [Clang modules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1414) [Clang modules allow us to only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1416) [find and parse the headers once](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1419) [per framework and then store](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1421) [that information on disk so it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1423) [cached and can be reused.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1425) [This should have improved your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1428) [build times.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1430) [In order to do that, Clang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1433) [modules must have certain](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1435) [properties.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1437) [One of them, one of the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1438) [One of them, one of the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1438) [important one is context-free.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1440) [What do I mean by context-free?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1443) [You can see here two code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1445) [snippets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1448) [In both cases we import the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1449) [PetKit module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1451) [But we have two different macro](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1453) [definitions beforehand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1456) [If you would use a traditional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1459) [model of importing those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1460) [headers, that means they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1462) [[inaudible] included.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1464) [The preprocessor would honor](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1465) [this definition and apply it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1467) [the header file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1469) [But if you would do that, that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1471) [means the modules would be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1472) [different for each header case,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1473) [and we couldn't reuse it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1475) [So if you want to use modules,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1477) [you cannot do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1480) [Instead, the module will ignore](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1481) [all those context-related](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1484) [information that allows us to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1485) [be, that allows it to be reused](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1488) [across all implementation files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1490) [Another requirement is modules](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1493) [have to be self-contained.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1497) [That means they have to specify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1499) [That means they have to specify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1499) [all the dependencies.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1501) [Which also has a nice advantage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1503) [for you because it means once](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1505) [you import a module, it will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1508) [just work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1510) [You don't have to worry about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1511) [adding any additional header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1512) [files to make that import work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1514) [So how do we know or how does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1518) [Clang know it should build a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1522) [module?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1523) [Let's look at a simple example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1526) [here NSString.h. First Clang has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1527) [to find this particular header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1531) [in the framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1533) [And we already know how to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1535) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1537) [And it's the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1538) [Foundation.framework directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1539) [Next the Clang compiler will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1542) [look for a modules directory and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1543) [a Module Map relative to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1546) [header's directory and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1547) [there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1549) [So what is a Module Map?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1551) [A Module Map describes how a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1553) [certain set of header files](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1555) [translate onto your module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1557) [So let's have a look.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1561) [The Module Map is actually very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1563) [simple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1565) [This is the whole Module Map for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1566) [foundation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1567) [That's it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1568) [It obviously describes what is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1569) [the name of the module which is,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1572) [Foundation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1573) [And then it also specifies what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1574) [headers are part of this module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1577) [You'll notice there's only one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1580) [header file here, only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1582) [Foundation.h. But this is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1584) [special header file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1586) [This is the umbrella header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1587) [which is also marked by the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1589) [special keyword umbrella.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1590) [That means Clang has also to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1592) [look into this particular header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1594) [file to figure out if NSString.h](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1596) [is part of the module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1599) [And yeah, it's there, okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1602) [So now we have found out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1605) [NSString.h is part of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1607) [foundation module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1608) [Now Clang, now Clang can upgrade](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1610) [this textual import to a module](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1612) [import and we know we have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1615) [build the foundation module to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1617) [do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1619) [do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1619) [So how do we build the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1621) [foundation module?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1622) [First of all, we create a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1623) [separate Clang location for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1625) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1627) [And that Clang location contains](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1628) [all the header files from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1630) [foundation module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1632) [We don't transfer any of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1633) [existing context from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1637) [original compiler invocation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1639) [Hence, it's context-free.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1641) [The thing we actually transfer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1644) [are the command line arguments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1645) [you passed to Clang.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1647) [Those are passed on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1648) [While we build the foundation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1652) [module, we mod-- the module](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1653) [itself or the framework, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1656) [framework itself will include](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1657) [additional frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1660) [That means we have to build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1662) [those modules too.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1663) [And we have to keep going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1665) [because those might also include](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1668) [additional frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1670) [But we already can see there is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1672) [a benefit here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1673) [Some of those imports might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1675) [the same.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1676) [So we can always start reusing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1677) [that module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1679) [that module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1679) [All those modules are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1680) [[inaudible] to disk into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1684) [something called a module cache.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1685) [As I mentioned, the command line](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1687) [arguments are passed on when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1692) [create that module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1694) [That means, that means those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1695) [arguments can affect the content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1698) [of your module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1701) [As a result, we have to hash all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1702) [those arguments and store the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1705) [modules we created for this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1707) [particular compiler invocation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1709) [in a directory matching that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1710) [hash.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1714) [If you change the compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1714) [arguments for different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1716) [limitation file, for example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1717) [you'd say enable cat, that is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1720) [different hash and that requires](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1723) [Clang to rebuild all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1725) [module's inputs into that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1728) [directory matching that hash.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1730) [So in order to get the maximum](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1733) [reuse out of the module cache,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1735) [you should try to keep the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1737) [you should try to keep the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1737) [arguments the same, if possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1740) [So this is how we find and build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1742) [modules for system frameworks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1747) [but what about your frameworks?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1750) [How do we build modules for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1752) [those?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1754) [Let's go back to our original](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1755) [cat example, and this time we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1758) [turn on modules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1760) [If we would use a headermap](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1761) [again, the headermap will point](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1764) [us back to the source directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1767) [But if you look at that source](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1770) [directory, we have a problem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1772) [now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1774) [Theirs is no modules directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1774) [It doesn't look like a framework](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1778) [at all and Clang doesn't know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1779) [how to do this in this case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1782) [So we introduced a new concept](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1785) [to solve this, and it's called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1787) [Clang's Virtual File System.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1790) [It basically creates a virtual](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1792) [abstraction of a framework that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1794) [allows Clang to build the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1797) [module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1798) [But the abstraction basically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1800) [only points to the files back in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1802) [your directory.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1804) [So again, Clang will be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1805) [produce [inaudible] and errors](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1807) [for your source code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1809) [And that's how we build modules](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1810) [for, when you have frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1813) [As you remember, in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1816) [beginning I mentioned there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1819) [might be issues if you don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1820) [specify the framework name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1823) [So let me give you an example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1825) [where this can go wrong.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1827) [This is a very simple-- very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1828) [simple code example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1831) [We only have two imports.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1831) [The first import imports the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1834) [pet, PetKit module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1836) [The second import, you and I](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1838) [know this is also part of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1841) [PetKit module, but Clang might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1843) [now be able to figure that out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1846) [because you didn't specify the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1848) [framework name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1849) [In this case, it might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1850) [possible you get duplicate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1853) [definition errors.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1856) [That's basically, that basically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1856) [happens when you import the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1858) [happens when you import the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1858) [header twice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1860) [Clang works very hard behind the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1863) [scenes to fix the most common](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1865) [issues that happen like this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1867) [But it cannot fix all of them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1870) [And this is just a simple](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1873) [example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1874) [Let's just make a little tweak.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1875) [Let's change the context.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1878) [Now the module import won't be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1881) [affected by this at all because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1884) [as I said, we ignore the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1886) [context.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1887) [The cat import is still a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1888) [textual inclusion of the header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1892) [which will observe this change.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1893) [So now you might not even have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1896) [duplicate definitions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1898) [You might even have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1900) [contradictory definitions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1900) [Which can mean we cannot fix,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1902) [Clang cannot fix this for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1904) [So as I recommended in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1907) [beginning, always specify the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1908) [framework name when you import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1911) [your public or private headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1913) [And now I'm handing it over to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1916) [Devin who's going to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1917) [Swift and how Swift uses Clang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1919) [Swift and how Swift uses Clang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1919) [modules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1921) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1922) [&gt;&gt; Thanks, Jurgen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1929) [We're now going to dive into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1930) [details of how Swift and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1932) [build system work together to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1934) [find declarations across your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1937) [project.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1938) [To recap some of what Jurgen](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1941) [told you, Clang compiles each](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1942) [Objective-C file separately.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1944) [This means if you want to refer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1947) [to a class to find in another](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1949) [file, you have to import a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1951) [header that declares that class.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1953) [But Swift was designed to not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1957) [require you to write headers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1959) [This makes it easier for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1961) [beginners to get started with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1962) [the language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1963) [And avoids you having to repeat](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1964) [a declaration in a separate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1966) [file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1968) [However this does mean that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1970) [compiler has to perform some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1971) [additional bookkeeping.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1973) [I'm going to tell you how that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1975) [bookkeeping works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1976) [Let's return to our example,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1977) [Let's return to our example,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1977) [PetWall app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1981) [The app has a view in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1982) [ViewCcontroller, written in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1984) [Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1985) [An Objective-C app delegate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1986) [And Swift unit tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1989) [In order to compile even just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1991) [this top PetViewController part](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1993) [of the file, the compiler has to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1995) [perform four different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1997) [operations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=1998) [First, it has to find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2000) [declarations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2001) [Both within the Swift target and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2003) [also coming from Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2005) [Further, it has to generate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2009) [interfaces describing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2010) [contents of the file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2011) [So that its declarations can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2013) [found and used in Objective-C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2015) [and in other Swift targets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2017) [In the rest of this section of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2020) [the talk, I'm going to walk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2021) [through this example to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2023) [illustrate each of these four](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2024) [tasks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2026) [Let's start with finding](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2027) [declarations within a Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2028) [target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2030) [When compiling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2035) [PetViewController.swift, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2036) [compiler will look up the type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2038) [compiler will look up the type](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2038) [of PetView's initializer so that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2040) [it can check the call.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2043) [But before it can do that, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2045) [needs to parse PetView.swift and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2047) [validate it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2050) [To make sure that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2051) [declaration of the initializer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2052) [is well formed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2053) [Now, the compiler's smart enough](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2055) [to know that it doesn't need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2057) [check the body of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2059) [initializer here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2060) [But it does still need to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2062) [some work just to process the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2063) [interface parts of the file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2064) [What this means is that unlike](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2070) [Clang, when compiling one Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2072) [file, the compiler will parse](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2074) [all the other Swift files in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2076) [target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2078) [To examine the parts of them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2079) [that are relevant to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2080) [interfaces.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2081) [IN Xcode 9, this resulted in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2088) [some repeated work in repeated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2090) [build-- in incremental debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2092) [builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2093) [Because the compiler compiled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2094) [each file separately.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2096) [This enabled the files to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2098) [compiled in parallel, but it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2099) [compiled in parallel, but it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2099) [forced the compiler to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2101) [repeatedly parse each file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2102) [Once as an implementation to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2105) [produce a .o, and multiple times](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2107) [as an interface to find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2109) [declarations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2111) [Xcode 10 reduces this overhead.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2113) [It does so by combining the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2117) [files into groups that share as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2119) [much work as possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2121) [While still allowing maximum](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2123) [parallelism.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2126) [This reuses parsing within a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2127) [group and only repeats work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2129) [across groups.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2132) [Since the number of groups is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2134) [typically relatively low, this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2136) [can significantly speed up your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2138) [incremental debug builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2141) [Now, Swift code doesn't only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2145) [call other Swift code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2148) [It can also call Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2150) [Returning to our PetWall example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2153) [app, we can see that, that this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2155) [is crucial since the system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2157) [frameworks such as UIKit are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2159) [frameworks such as UIKit are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2159) [written in Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2161) [Swift takes a different approach](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2166) [than many other languages.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2168) [And it doesn't require you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2170) [provide a foreign function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2172) [interface.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2173) [This is where you would have to,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2175) [for example, write a Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2177) [declaration for each Objective-C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2178) [API you want to use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2180) [Instead, the compiler embeds a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2183) [large part of Clang inside of it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2185) [and uses it as a library.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2188) [This makes it possible to import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2190) [Objective-C frameworks directly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2192) [So where do Objective-C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2196) [declarations come from?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2198) [The compile-- the importer will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2200) [look in headers depending on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2201) [type of the target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2203) [In any target, when you import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2205) [an Objective-C framework, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2207) [importer finds declarations in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2210) [the headers exposing Clang's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2211) [module map for that framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2213) [Within a framework that mixes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2216) [Swift and Objective-C code, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2218) [Swift and Objective-C code, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2218) [importer finds declarations in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2220) [the umbrella header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2222) [This is the header that defines](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2224) [the public interface.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2225) [In this way, Swift code inside](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2228) [the framework can call public](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2230) [Objective-C code in the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2231) [framework.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2234) [Finally, within your app and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2236) [unit tests, you can add imports](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2238) [to the target's bridging header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2240) [To allow declarations from them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2242) [to be called from Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2244) [Now when the importer brings in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2245) [declarations, it often changes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2250) [them to make them more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2252) [idiomatic.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2254) [For example, it will import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2255) [Objective-C methods that use the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2256) [NSError idiom as throwing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2258) [methods using Swift's built-in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2261) [error handling language feature.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2263) [In particular, it will drop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2265) [parameter type names following](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2269) [verbs and prepositions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2271) [For example, the drawPet atPoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2273) [method has the word pet.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2276) [For a parameter of type pet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2278) [For a parameter of type pet](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2278) [following the verb draw.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2280) [And similarly the word point for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2283) [a parameter of type CGPoint](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2286) [following the preposition at.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2288) [These words are omitted in Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2291) [when the method is imported as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2294) [simply draw at.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2295) [So how does this work?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2299) [Well, you might be surprised to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2301) [know that the compiler contains](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2302) [a list of common English verbs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2304) [and prepositions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2306) [Because it is just a hard-coded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2309) [list and human language is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2311) [messy, sometimes it's missing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2312) [words.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2314) [Furthermore, in order to match](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2315) [Swift's naming conventions, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2317) [importer will also rename](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2319) [methods to remove words based on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2320) [the part of speech.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2323) [For example the verb feed is not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2325) [in the list, and so feedPet is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2327) [not imported as feed as we might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2329) [expect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2331) [When this happens, you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2333) [the NS Swift Name annotation to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2335) [have the compiler import the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2337) [method exactly as you want.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2339) [method exactly as you want.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2339) [Now if you want to check to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2346) [how your Objective-C header will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2347) [be imported into Swift, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2348) [always go to Xcode's related](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2350) [items popup.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2352) [This is in the upper left-hand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2353) [corner of the source editor.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2354) [If you select generated](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2356) [interfaces, it will show you how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2357) [the interface will look in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2359) [different versions of Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2361) [So that's how Swift imports](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2365) [Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2366) [But what about the other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2368) [direction?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2369) [How does Objective-C import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2370) [Swift?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2372) [The answer is that Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2375) [generates a header that you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2376) [pound import.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2378) [This allows you to write classes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2379) [in Swift and call them from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2381) [Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2383) [Let's see how this works.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2385) [The compiler will generate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2387) [Objective-C declarations for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2389) [Swift classes extending NSObject](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2391) [and methods marked at obc.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2394) [For apps in unit tests, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2397) [header will include both public](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2399) [header will include both public](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2399) [and internal declarations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2400) [This allows you to use internal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2403) [Swift from the Objective-C parts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2404) [of your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2406) [For frameworks, however, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2408) [generated header provides only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2410) [public declarations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2411) [Since it's included in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2413) [build products and it's part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2414) [the framework's public](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2416) [interface.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2417) [On the right, you can see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2418) [the compiler ties the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2422) [Objective-C class to the mangled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2423) [name of the Swift class which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2425) [includes the name of the module,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2427) [PetWall.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2429) [Now I'm going to tell you about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2430) [modules in a bit, and Louis will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2433) [tell you about mangling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2435) [But for now, the thing to know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2436) [is that this prevents a conflict](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2438) [in the runtime when the two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2440) [modules define a class with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2441) [same name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2443) [You can tell Swift to use a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2444) [different name for the class in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2447) [Objective-C by passing an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2449) [identifier to the obc attribute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2451) [But if you do this, you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2454) [responsible for making sure the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2455) [names don't conflict.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2457) [Here I've used the PWL prefix so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2459) [Here I've used the PWL prefix so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2459) [to reduce the likelihood of a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2462) [conflict.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2464) [With this change, I can refer to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2465) [the class as PWLPetCollar in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2467) [Objective-C.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2470) [The compiler takes a similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2473) [approach to generating](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2475) [interfaces to other Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2476) [targets.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2478) [To do this, Swift builds on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2479) [Clang's concept of a module,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2483) [which Jurgen told you about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2485) [And more deeply integrates it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2487) [into the language.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2488) [In Swift, a module is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2490) [distributable unit of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2492) [declarations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2493) [And to be able to use those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2494) [declarations you have to import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2496) [the module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2498) [You can import Objective-C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2500) [modules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2502) [XEtest, for example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2503) [And in Xcode each Swift target](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2505) [produces a separate module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2507) [Including your app target.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2510) [This is why you have to import](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2512) [your app's main module in order](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2513) [to test it from your unit tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2515) [to test it from your unit tests.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2515) [When importing a module, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2520) [compiler deserializes a special](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2522) [Swift module file to check the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2524) [types when you use them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2526) [For example, in this unit test,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2529) [the compiler will load the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2530) [PetViewController parts of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2532) [PetWall Swift module to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2534) [sure that you're creating the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2536) [controller correctly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2537) [This is similar to how the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2539) [compiler finds declarations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2540) [within a target as I showed you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2542) [earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2544) [Except that here, the compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2546) [loads a file summarizing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2547) [module rather than parsing Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2549) [files directly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2551) [The compiler produces this Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2556) [module file a lot like a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2558) [generated Objective-C header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2560) [But instead of text, it's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2562) [binary representation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2563) [It includes the bodies of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2566) [inlineable functions much like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2567) [static inline functions in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2568) [Objective-C or header](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2570) [implementations in C++.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2571) [However, one thing to be aware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2574) [of is that it does include the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2576) [names and types of private](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2578) [names and types of private](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2578) [declarations.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2580) [This allows you to refer to them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2582) [in the debugger which is really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2583) [handy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2585) [But it does mean that for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2586) [example, you shouldn't name a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2587) [private variable after your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2589) [deepest, darkest secret.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2590) [For incremental builds, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2595) [compiler produces partial Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2597) [module files and then merges](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2599) [them into a single file that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2601) [represents the contents of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2603) [entire module.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2605) [This merging process also makes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2607) [it possible to produce a single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2608) [Objective-C header.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2611) [In many ways, this is similar to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2614) [what the linker does when it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2616) [smooshes together your object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2617) [files into a single executable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2619) [And to tell you more about that,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2622) [I'll hand it off to Louis and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2623) [the linker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2625) [Louis?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2626) [&gt;&gt; Thank you, Devin.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2628) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2629) [Hi, I'm Louis Gerbarg.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2634) [I work on the linker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2636) [Which is one of the final steps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2637) [in the Xcode build process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2639) [in the Xcode build process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2639) [So let's get to it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2640) [So first off I want to go over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2643) [what we're going to talk about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2644) [We're going to talk about what a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2646) [linker is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2647) [We're going to talk about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2649) [input that it takes which are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2650) [dylibs and object files and what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2651) [they are.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2653) [And we're also going to talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2653) [about symbols which are what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2655) [those contain.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2657) [So at the end of this, I'm going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2658) [to tie this together with an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2660) [act-- with an example because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2661) [this is pretty dense stuff.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2662) [So if it seems a little](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2665) [confusing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2666) [Hold on, and hopefully we'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2667) [make it clearer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2668) [So what is the linker?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2671) [It's like I said, it's one of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2673) [the final processes in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2674) [build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2676) [And what we do is we combine all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2677) [of these .o files that have been](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2679) [built by the two compilers into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2682) [an executable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2684) [All it does is move and patch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2687) [code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2689) [It cannot create code, and this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2689) [is important and I will show](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2690) [that in the example.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2692) [But we take these two kinds of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2695) [input files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2696) [The first one being dylibs or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2698) [The first one being dylibs or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2698) [being libraries.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2700) [There are multiple-- the first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2701) [one being object files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2703) [Which are what come out of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2704) [build process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2706) [And the second one being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2706) [libraries which consist of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2707) [several types including dylibs,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2709) [tbd's, and .a files or static](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2711) [archives.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2713) [So what are symbols?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2716) [A symbol is just a name to refer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2718) [to a fragment of code or data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2720) [These fragments may refer to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2724) [other symbols which you would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2726) [see if you write a function that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2728) [calls another function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2730) [Symbols can have attributes on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2733) [them that affect how the linker](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2735) [behaves.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2736) [And there are a lot of these.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2737) [I'm just going to give you one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2738) [example which is a weak symbol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2739) [So a weak symbol is an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2742) [annotation on a symbol that says](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2743) [it might not be there when we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2744) [run the syst-- when we build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2748) [the, when we run the executable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2749) [on the system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2751) [This is what all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2753) [availability markup that says](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2754) [this API is available on iOS 12.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2756) [And this API's available on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2759) [And this API's available on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2759) [iOS 11.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2760) [This, that's what it all boils](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2761) [down to by the time it gets to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2763) [the linker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2764) [So the linker can determine what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2765) [symbols are definitely going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2766) [be there versus what symbols it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2767) [may have to, it may have to deal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2768) [with at runtime.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2771) [Languages can also encode data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2774) [into the symbol by mangling it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2776) [as Devin mentioned earlier.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2778) [And you'll see that in both C++](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2779) [and Swift.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2785) [So we have symbols which are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2787) [these names referring to code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2789) [and data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2792) [So the compilers generate object](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2793) [files.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2795) [And those object files are just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2796) [collections of those code and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2797) [data.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2800) [They are not executable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2801) [While they are compiled code,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2803) [they aren't finished.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2806) [There are bits missing which is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2807) [what the linker's going to glue](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2809) [together and fix up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2810) [Each fragment in one of those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2814) [files is represented by a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2815) [symbol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2816) [So for the printf function,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2817) [So for the printf function,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2817) [there's code represented by a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2821) [symbol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2822) [For any of the functions in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2823) [PetKit which we're going to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2824) [in a second, the same thing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2826) [And fragments may reference](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2829) [undefined symbols.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2831) [So if your .o file refers to a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2832) [function in another .o file,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2836) [that .o file's undefined.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2838) [And the linker will go and find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2840) [those undefined symbols and link](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2842) [them up.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2844) [So I said that object files are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2846) [the output of your compiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2848) [actions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2850) [So what are libraries?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2850) [Libraries are files that define](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2852) [symbols that are not part of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2854) [target you are building.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2856) [So we have dynamic libraries,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2858) [and those are Mach-O files that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2861) [expose code and data fragments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2864) [for executables to use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2866) [Those are distributed as part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2869) [the system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2872) [That's what our frameworks are.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2872) [And a number of you also use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2873) [your own frameworks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2874) [There are also TBD files, or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2875) [There are also TBD files, or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2875) [text-based dylib stubs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2880) [So what are those?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2882) [Well, when we made the SDKs for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2884) [iOS and macOS, we had all these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2888) [dylibs with all these great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2890) [functions like MapKit and WebKit](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2891) [that you may want to use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2893) [But we don't want to ship the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2894) [entire copy of those with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2895) [SDK because it would be large.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2897) [Ant the compiler and linker](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2898) [don't need.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2901) [It's only needed to run the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2901) [program.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2902) [So instead we create what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2903) [called a stub dylib where we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2904) [delete the bodies of all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2905) [symbols and we just have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2907) [names.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2907) [And then once we did that, we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2909) [made a textual representation of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2911) [them that are easier for us to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2912) [use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2913) [Currently, they are only used](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2913) [for distributing the SDKs to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2915) [reduce size.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2918) [So you may see them in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2920) [project, but you don't have to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2921) [worry about them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2922) [And they only contain symbols.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2923) [Finally, we have static](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2926) [archives.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2927) [So static archives are just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2928) [collections of .o files that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2933) [have been built with the AR tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2934) [or in some cases the lib the lib](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2936) [tool which is a wrapper for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2939) [tool which is a wrapper for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2939) [that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2940) [And according to the AR](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2940) [[inaudible] page, the AR utility](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2942) [creates and maintains groups of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2944) [files combined into an archive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2946) [Now that may sound a lot like a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2949) [TAR file or a ZIP file, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2950) [that's exactly what it is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2953) [In fact, the .a format was the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2954) [original archive format used by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2956) [UNIX before more powerful tools](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2957) [came around.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2959) [But the compilers of the time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2960) [and the linkers of the time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2963) [natively understood them, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2964) [they've just kept using them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2965) [So it really is just an archive](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2967) [file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2968) [One thing worth noting is they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2972) [also prenate dynamic linking so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2973) [back in those days, all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2975) [code would be consid-- would be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2976) [distributed as archives.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2978) [Because of that, you might not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2979) [want to include all of the C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2981) [library if you're using one](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2983) [function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2985) [So the behavior is if there's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2986) [symbol in a .o file, we would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2989) [pull that whole .o file out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2990) [the archive.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2992) [But the other .o files would not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2992) [be brought in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2994) [If you're referencing symbols](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2995) [between them, everything you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2997) [need will be brought in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2998) [If you're using some sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2999) [If you're using some sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=2999) [non-symbol behavior like a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3000) [static initializer, or you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3002) [re-exporting them as part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3004) [your own dylib, you may need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3005) [explicitly use something like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3006) [force load or all load to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3009) [linker to tell it bring in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3011) [everything.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3012) [Or these files, even though](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3013) [there's no linkage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3014) [So let's go through an example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3015) [to try to tie this altogether.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3019) [So up on stage we have an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3023) [example of a playSound function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3025) [because what fun would be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3028) [looking at pets without](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3029) [listening to them?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3029) [And you know it calls playSound.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3032) [You know, there's a function on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3035) [cat that calls playSound.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3036) [That seems pretty simple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3037) [So let's look at the assembly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3038) [that generates.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3040) [So here's cat.o that comes out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3041) [of it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3045) [Now if we look, we can see we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3046) [have the string purr.aac which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3049) [would be our AAC sound file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3053) [And that gets copied into cat.o.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3054) [You'll note that the name purr](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3057) [file does not appear in there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3058) [file does not appear in there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3058) [anywhere.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3060) [The reason is, that's a static.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3061) [And those of you who are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3062) [familiar with C, that means it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3063) [a nonexported name.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3064) [Nobody else can refer to it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3066) [Since nobody else can refer to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3067) [it, we don't need it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3068) [It's not included.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3070) [And then we see Cat purr becomes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3074) [an actual symbol: dash, open](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3077) [bracket, Cat purr, close](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3079) [bracket.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3080) [Pretty much what you'd expect.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3083) [And then we see we actually have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3084) [to get this variable we're going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3087) [to pass into playSound.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3089) [And you'll note there are two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3090) [instructions referring to that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3092) [And that's because we don't know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3093) [where this string is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3096) [end up in the final executable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3098) [We don't have a concrete address](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3099) [for it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3100) [But we know that on RM64 which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3101) [is what this assembly is, it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3103) [could take at most two](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3105) [instructions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3106) [So the compiler leaves us with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3106) [two instructions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3108) [And it leaves the symbolic](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3109) [offset, the symbolic values page](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3110) [and page off that the linker](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3112) [will come in and fix up later.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3113) [Finally, now that we've loaded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3116) [that string into x0, we can call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3119) [that string into x0, we can call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3119) [playSound except for we're not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3123) [calling playSound.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3124) [We're calling underbar underbar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3125) [z9playSound PKc.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3127) [Now what is that?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3131) [That's a mangled symbol because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3132) [if you note, it says cat.mm.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3134) [This is Objective-C++.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3136) [And playSound is actually a C++](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3138) [function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3140) [So if you're not familiar with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3142) [those, you can go to terminal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3143) [and you can actually use tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3147) [So if you run Swift-demangle and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3148) [pass in a symbol, it will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3151) [attempt to demangle it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3152) [It didn't work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3153) [It's not a Swift symbol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3154) [But C++ filts, which is the C++](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3155) [demangler shows us that this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3158) [in fact a symbol for playSound.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3160) [But not only is it playSound, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3162) [know it takes one argument.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3164) [And that one argument is a const](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3165) [char star because C++ encoded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3166) [that extra data into the mangled](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3169) [symbol.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3171) [Okay, so now we have a .o. In](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3172) [fact, we're building a project,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3175) [we'll have a lot of them.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3176) [So what are we going to do with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3178) [So what are we going to do with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3178) [that?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3180) [Well, first off, the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3180) [system is going to pass all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3183) [the .o's in as inputs to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3185) [linker.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3186) [And the linker's going to start](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3186) [by creating a file to put them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3187) [in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3188) [In this case we're building](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3189) [PetKit which is an embedded](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3190) [framework inside of PetWall.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3191) [And so we'll just start by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3193) [copying.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3195) [We'll create what's called a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3196) [text segment.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3197) [Which is where we keep all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3199) [the code for an application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3200) [And we'll take the cat.o and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3201) [we'll copy it in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3204) [But we're going to split it into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3205) [two sections.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3205) [One for that string, and one for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3206) [the executable code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3208) [But we now know the absolute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3209) [addresses of these things so the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3212) [linker can go and rewrite cat.o](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3213) [to load from a specific offset.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3217) [You'll notice that the second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3220) [instruction just went away.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3222) [We replaced it with what, with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3223) [null instruction that does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3225) [nothing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3226) [But we cannot remove the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3227) [instruction because we can't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3229) [create or remove code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3231) [It would mess up all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3232) [sizing that we've already done.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3235) [So instead it just is removed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3236) [It, it's just replaced with a no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3239) [It, it's just replaced with a no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3239) [operation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3241) [Finally we branch.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3242) [Okay, but we branch and what are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3244) [we going to do?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3250) [Because we have this undefined](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3251) [symbol?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3252) [Well, we're going to go and keep](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3252) [looking through, and all of our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3254) [.o's have been included at this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3255) [point.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3256) [So we'll start looking at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3258) [static archives [inaudible] and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3259) [PetSupport.a is there.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3260) [And inside of PetSupport.a, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3262) [have a couple of files including](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3264) [PetSounds.o. And if we look, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3267) [see that matching file-- that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3270) [matching symbol for playSound.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3271) [So we pull it in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3274) [We'll note that we do not pull](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3278) [in PetCare.o. Because that .o](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3279) [file did not have any symbols](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3282) [that were referred to by any of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3284) [the other portions of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3285) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3286) [Okay, so we pulled that in, but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3287) [now that needs, open which we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3289) [didn't define.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3292) [You'll see in the, in the, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3293) [conversion we copied in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3296) [We actually replaced it with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3297) [something called open$stub.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3297) [Now why did we do that?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3299) [Now why did we do that?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3299) [Well we kept looking, and we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3301) [found a copy of open.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3303) [And that copy of open is in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3304) [lib system TBD file.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3307) [And so we said I know this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3311) [part of the system library.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3313) [I'm not going to copy this into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3314) [my application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3315) [But I need to put enough](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3316) [information in the information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3318) [to make it so that it can call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3319) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3320) [So we create a fake function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3321) [that's just a template where we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3323) [replaced a function with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3325) [whatever we're pulling out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3326) [lib system which is open in this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3327) [case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3328) [And if you look in that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3329) [function, it actually loads from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3330) [a pointer, open$ pointer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3332) [And jumps to it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3336) [So we just need a function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3337) [pointer, just like any normal C](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3338) [function pointer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3339) [And we'll create that down in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3341) [the data segment which is where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3344) [global variables would be if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3346) [had any globals.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3347) [But it's just set to zero.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3349) [So if we dereference null and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3351) [jump to it we're going to crash.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3353) [So we then add what's called a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3356) [link edit segment.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3357) [And the link edit is metadata](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3358) [And the link edit is metadata](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3358) [that the linker tool uses to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3361) [leave information for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3363) [operating system and what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3365) [called the dynamic linker to fix](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3366) [this up at runtime.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3368) [And for more information on that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3369) [you should look at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3372) [Optimizing App Startup Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3373) [session from 2016.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3374) [So I just want to go back over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3379) [what we went through today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3382) [So Jake talked about the build](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3383) [system and how you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3385) [dependencies to optimize your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3386) [built process for multi-core.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3389) [Jurgen walked through Clang and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3393) [how it finds headers for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3395) [And what you can do to optimize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3396) [your build-through modules.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3397) [Devin walked through how Swift](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3400) [expand modules and all of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3402) [things that we've implemented](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3405) [this year like [inaudible]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3407) [processing to speed up your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3407) [builds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3408) [And then finally the linker](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3409) [takes the outputs of both](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3411) [compilers and builds them into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3412) [your application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3413) [At which point Xcode will go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3414) [and, and code [inaudible] and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3416) [package it up with other parts](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3417) [of your application for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3420) [distribution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3422) [So most of this is open source,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3424) [available if you're really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3428) [curious.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3428) [You can look at Swift or Clang](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3429) [or the llbuild execution engine](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3430) [at these URLs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3434) [And I just want to thank you all](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3436) [for coming.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3438) [And I hope you've had a great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3439) [WWDC.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3441) [And we'll be in the labs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3441) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3443) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/415/?time=3444)