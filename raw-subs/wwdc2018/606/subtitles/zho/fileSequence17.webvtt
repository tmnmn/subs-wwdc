WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:17:00.888 --> 00:17:03.557 align:middle line:-2
为此 可以添加
更多的阴影光线

00:17:03.690 --> 00:17:06.026 align:middle line:-1
从交叉点投射到光源

00:17:07.594 --> 00:17:10.130 align:middle line:-1
如果阴影光线不能到达光源

00:17:10.196 --> 00:17:12.532 align:middle line:-1
那么初始阴影点就不是阴影

00:17:12.633 --> 00:17:14.667 align:middle line:-1
因此不应该添加其颜色到图像

00:17:17.704 --> 00:17:19.339 align:middle line:-1
我们将修改阴影内核

00:17:19.806 --> 00:17:22.910 align:middle line:-2
将附加阴影光线
写入另一个Metal缓冲区

00:17:24.444 --> 00:17:27.114 align:middle line:-2
然后 我们再次寻找
场景交叉区

00:17:28.115 --> 00:17:30.017 align:middle line:-1
然后启动最后一个内核

00:17:30.083 --> 00:17:33.220 align:middle line:-2
此内核根据阴影光线
是否与任何物体交叉

00:17:33.287 --> 00:17:35.889 align:middle line:-2
有条件地
将阴影颜色写入图像

00:17:36.990 --> 00:17:39.092 align:middle line:-1
因此 让我们开始修改阴影内核

00:17:40.894 --> 00:17:43.597 align:middle line:-2
现在 阴影光线略微
不同于一次光线

00:17:44.198 --> 00:17:45.032 align:middle line:-1
首先…

00:17:45.098 --> 00:17:47.768 align:middle line:-2
我们需要提供
一个最大交叉距离

00:17:47.901 --> 00:17:50.571 align:middle line:-2
这样 阴影光线
不会偏离光线

00:17:52.539 --> 00:17:54.908 align:middle line:-2
我们不需要知道
将会遇到哪个三角形

00:17:54.975 --> 00:17:56.910 align:middle line:-1
或质心坐标是多少

00:17:56.977 --> 00:17:58.912 align:middle line:-1
因此我们可以进行一些优化

