# Accessible Drag and Drop

## Summary
Drag and Drop is a powerful API that allows apps to share and communicate data. No matter how you decide to implement Drag and Drop, there's a way to make it work for people with accessibility needs. Learn the details as we dive into accessible Drag and Drop for iOS.

## Info
* App Store and Distribution
* WWDC 2018 - Session 241 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/

## Text
 [嗨 我是Conor Hughes
来自iOS辅助功能团队](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=18) [今天我们来谈谈如何使iOS中
的拖放适用于辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=20) [我们开始吧](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=24) [我们简要地提一下
下面要讨论的内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=27) [首先简单复习一下
拖动和放置的基本要点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=30) [然后 我们会讲讲
辅助功能拖放API背后的概念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=35) [最后 我们将举两个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=40) [第一个
从辅助功能元素揭示出其祖先的拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=42) [第二 从一个辅助功能元素中
揭示多个放置操作](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=46) [简单来说](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=50) [拖放技术始于iOS 11](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=53) [它为我们的app的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=56) [提供了强大的数据传输功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=59) [提供了强大的数据传输功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=59) [适于app内部及app之间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=62) [拖放引入了互动的概念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=64) [它们由app中的视图主管](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=67) [如果要从视图开始拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=70) [你为它添加一个
UIDrag互动对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=72) [要接受放置
则添加UIDrop互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=75) [如果你不熟悉这些类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=79) [j建议你先看看2017年
WWDC的专题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=81) [“拖放会话简介”来了解一下](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=83) [然后再回到这个视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=87) [现在我们开始讨论辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=91) [很自然地
我们想通过辅助功能技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=93) [如旁白
向你的app的用户显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=95) [拖放互动的强大功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=98) [辅助功能拖放API的设计中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=101) [重点解决几个特定的问题](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=105) [首先 你的辅助功能元素
未必直接管互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=107) [例如 辅助功能元素可能是一个视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=111) [它的子视图主管互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=114) [或者你的元素可能继承了一个视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=117) [或者你的元素可能继承了一个视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=117) [而这个视图主管与其逻辑相关的互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=120) [解决这些问题的办法
是辅助功能拖放API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=123) [允许指定系统中的逻辑拖放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=127) [使其可与辅助技术一起使用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=130) [我们具体看看这些API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=134) [UIAccessibilityDragging
非正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=137) [定义了两个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=139) [来向辅助功能表达拖放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=141) [它引入了“拖动源”
和“放置点”的概念](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=143) [拖动源描述从哪里开始](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=148) [与元素关联的拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=151) [放置点则描述与元素相关联的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=153) [可以放置的地方](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=156) [要使用这些属性
可以给它们赋值](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=157) [或重写getter来临时提供数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=159) [这些拖放呈现给辅助技术用户的方式](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=164) [与辅助自定义操作非常相似](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=167) [这即辅助功能拖放API](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=171) [通常 拖动和放置会由系统](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=175) [自动呈现给辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=178) [自动呈现给辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=178) [如果它们被自动找到
它们将被分配一个默认名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=181) [但请注意
只有元素子树中的互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=185) [会自动呈现](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=189) [UIAccessibilityDragging协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=192) [允许你准确揭示你需要的互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=193) [无论它们是否存在于视图的结构中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=197) [允许为每个互动指定一个好名字](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=200) [所以 你应该考虑实现它](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=204) [通过辅助技术
为你的app的用户](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=207) [提供最佳体验](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=210) [现在我们来看一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=213) [看看如何用UIAccessibilityDragging协议
呈现拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=216) [假设我们要建一个条形图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=221) [我们决定通过设置
CALayer对象来绘制条形图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=223) [我们将尝试启用对条形的拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=228) [以拖动它的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=232) [这个例子说明了一个实现过程](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=235) [重复一下
每个条形都是CALayer对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=237) [重复一下
每个条形都是CALayer对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=237) [我们将如何去实现这个拖动？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=242) [像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=247) [注意 因为图层不是视图
无法主管互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=250) [所以条形图本身设置了互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=254) [在这个itemsForBeginning
会话中回调时](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=257) [取决于被命中的条形图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=262) [我们在拖动项目中返回不同的数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=264) [注意 虽然我只有一个拖动互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=269) [我用它来支持多个逻辑拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=271) [这是一个完全支持的方法](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=275) [也体现了基本拖放API的强大功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=278) [那怎么加上辅助功能？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=283) [一个办法是
让每个栏作为辅助功能元素公开](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=285) [从而使图表有辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=289) [就像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=293) [请注意 我在这里做的是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=295) [把我的app内容的逻辑结构数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=298) [把我的app内容的逻辑结构数据](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=298) [提供给辅助功能运行时间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=300) [促成辅助技术以不同的方式呈现内容](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=302) [我们需要做同样的事情
来使拖动具辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=307) [为此 我们需要对
UIAccessibilityDragging非正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=310) [了解一些更具体的细节](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=313) [首先我们来看看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=318) [UIAccessibility
LocationDescriptor类](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=319) [这个类描述一个互动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=323) [通过指定一个点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=326) [在视图中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=330) [并有特定的名称](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=332) [因此对于我们的条形图中的一个例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=334) [拖动条形的位置描述符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=338) [可能看起来像这样](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=342) [可以给它命名为
“Drag Bar Data”](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=343) [视图就是条形图视图本身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=346) [这个点则是位于条形内的一个点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=348) [那么 我们如何处理](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=354) [UIAccessibility
LocationDescriptor对象？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=354) [我们将它们赋给前面提到的两个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=358) [我们将它们赋给前面提到的两个属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=358) [协议中的两个属性是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=362) [accessibilityDrag
SourceDescriptors](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=363) [和accessibilityDrop
PointDescriptors](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=365) [DragSourceDescriptors用于显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=369) [在逻辑上与元素相关联的拖动源](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=372) [DropPointDescriptors则显示](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=375) [逻辑上与元素相关联的放置位置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=378) [这些属性告诉辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=381) [一个给定的元素
什么可以拖 什么可以放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=384) [要注意的一点是描述符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=389) [必须引用实际有互动的视图](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=391) [所以 你不应该引用窗口中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=394) [在主管互动的视图中的一个点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=397) [而是指定该视图本身](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=400) [总之
从某个元素中呈现单个拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=405) [根本不需要几行代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=408) [你通过在主管互动的视图中
指定一个点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=410) [建一个指定该拖动的描述符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=412) [并给它一个名字即可](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=414) [然后设置元素的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=416) [accessibilityDrag
SourceDescriptors属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=417) [accessibilityDrag
SourceDescriptors属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=417) [加到包含该描述符的数组中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=420) [我们回到我们的条形图例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=424) [设置视图辅助功能元素的代码](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=426) [如何来呈现每个元素的拖动？](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=428) [我们在视图的坐标空间中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=434) [计算该元素所表示的条内的点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=437) [用视图中的点建适当的描述符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=440) [并设置该元素的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=443) [accessibilityDrag
SourceDescriptors 属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=445) [完成了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=446) [现在 我们看一个稍微不同的例子](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=450) [让我们尝试从单个元素呈现多个放置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=452) [这可能对像名片这样的情况有用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=456) [它的特点是名片足够小](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=460) [我们将把它作为一个元素
呈现给辅助功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=463) [但名片内有多个井点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=467) [我们可以将内容投入其中](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=469) [例如 它可能有一个地方放肖像](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=474) [和一个可以投入
该联系人的任意附件的空间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=476) [和一个可以投入
该联系人的任意附件的空间](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=476) [现在我们了解了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=482) [UIAccessibilityDragging非正式协议](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=483) [呈现这些就很简单了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=486) [我们可以重写视图的](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=490) [accessibilityDrop
PointDescriptors getter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=491) [计算两个井点的中点](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=496) [然后返回以每个放置点为名的
两个位置描述符](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=498) [总之 因为你希望人人都能够用所有](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=504) [你建到你的app中的酷炫的功能](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=508) [你想确保](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=512) [与你的app中
辅助功能元素相关联的拖放](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=513) [能呈现给辅助功能技术](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=516) [为此 用](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=518) [accessibilityDrag
SourceDescriptors属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=519) [来指定应该呈现哪些拖动](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=522) [用accessibilityDrop
PointDescriptors属性](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=525) [来指定应该呈现哪些放置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=528) [最后 这些属性只是一些数组](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=530) [组成数组的成员是](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=532) [UIAccessibility
LocationDescriptor对象](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=533) [这些对象为辅助功能描述了](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=535) [你的app中有哪些拖动和放置](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=537) [以及如何激活它们](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=540) [要了解更多信息
你可以在线查看这个视频](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=542) [感谢你的收看](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/241/?time=546)