# Whatâ€™s New in Energy Debugging

## Summary
People expect long battery life on their mobile devices, and apps play a vital role in achieving that experience. Understand how app behavior affects battery consumption, and learn strategies to conserve energy while providing the best experience for your app. Find out how Xcode Energy Reports can help you tune your app to use the least amount of power possible.

## Info
* Developer Tools
* WWDC 2018 - Session 228 - iOS
* https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/

## Text
 [[ Music ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=0) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=20) [&gt;&gt; Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=22) [Thank you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=24) [Good afternoon, everyone.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=26) [My name is Phil Azar, and I'm a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=27) [software engineer on the Power](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=29) [Team at Apple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=30) [Today, along with my colleague,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=31) [David, I'm excited to share with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=33) [you what's new in energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=35) [debugging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=36) [Battery life is hugely important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=40) [to our customers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=42) [The Power Team strives to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=43) [sure that everyone can get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=45) [through the day on a single](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=46) [charge without having to plug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=47) [their device in.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=48) [We work with our developers here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=50) [at Apple to try and optimize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=52) [battery life by guiding them and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=54) [helping them make design choices](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=56) [that are energy efficient.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=57) [Apps are also hugely important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=60) [to our customers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=62) [In fact, we find that most usage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=63) [on device is directly attributed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=65) [to third-party apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=68) [This is incredible, and it makes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=69) [it more important now than ever](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=71) [before to focus on energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=73) [efficiency in the design of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=75) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=77) [To that end, we're going to talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=78) [about three things today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=80) [First, we're going to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=81) [some battery life concepts that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=84) [you can employ in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=85) [application to make sure that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=87) [you are being as energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=88) [efficient as possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=89) [Then, we're going to talk about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=91) [some tools that we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=93) [available for you to understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=94) [and quantify where energy is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=96) [going in your application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=98) [And finally, I'll pass it on to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=100) [my colleague, David, who is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=101) [going to talk about a new tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=102) [that we have available to take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=104) [your energy debugging one step](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=105) [further.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=107) [So, let's go ahead and get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=108) [started and talk about some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=109) [general concepts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=111) [To make a battery life great for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=113) [our users, we have to start with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=114) [first principles and understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=116) [what makes battery life battery](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=118) [what makes battery life battery](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=118) [life.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=120) [So, let's start.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=121) [What is energy?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=124) [Fundamentally, if you think back](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=126) [to physics, energy is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=127) [product of power and time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=129) [As your app is running on any of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=131) [our platforms, it'll be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=133) [consuming energy at various](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=134) [rates.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=136) [This is because the different](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=137) [things that your app does](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=138) [consume different amounts of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=139) [power.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=140) [Additionally, the more time it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=142) [spends consuming that power the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=143) [more energy consumption you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=145) [face.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=146) [We can plot this graphically.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=147) [Here, you can see as your app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=150) [running there are various peaks](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=151) [and troughs of power](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=153) [consumption.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=154) [It will follow that the area](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=155) [under that curve is energy, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=157) [this relates directly back to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=159) [your application in its various](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=161) [modes of running.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=162) [When your app is active and when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=164) [your app is idle, it's going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=166) [consume different amounts of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=168) [power.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=169) [When your app is active, we say](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=170) [that the power being consumed is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=172) [at its highest point.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=173) [This is because the user is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=175) [directly using your application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=176) [for whatever it was or intended](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=177) [for.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=179) [Then, when your app is idle but](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=180) [still running, the power](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=181) [consumption drops.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=183) [Finally, when your app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=185) [suspended, there's still a basal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=187) [level of power consumption, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=189) [that's interesting to note.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=191) [When your app is doing any of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=193) [the work that it's been designed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=194) [to do, it's going to be asking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=196) [the system to bring up hardware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=197) [that it needs to do that work,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=199) [and the energy associated with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=201) [that hardware being brought up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=203) [and used is called overhead.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=205) [Your app doesn't have direct](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=208) [control over overhead, but it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=209) [really does influence through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=211) [anything that it does.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=213) [Then, when your apps first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=215) [utilize those hardware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=217) [resources, this is called active](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=218) [energy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=220) [So, now, your app has access to,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=221) [let's say, the radio or has](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=222) [access to, let's say, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=224) [camera, and it's using that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=225) [subsystem, this energy being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=227) [consumed is going to be called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=230) [active energy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=231) [So, then, it stands to reason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=233) [that the battery life problem is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=235) [actually a two-part optimization](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=236) [problem.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=237) [We have to think about being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=238) [efficient about the active](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=239) [efficient about the active](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=239) [energy that we are consuming,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=241) [and we also need to be thinking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=242) [about the overhead that we'll be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=243) [incurring by asking for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=245) [different hardware resources on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=246) [the system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=248) [So, I've mentioned hardware and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=251) [these subsystems that supposedly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=253) [consume energy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=254) [So, what exactly consumes energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=256) [on the system?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=257) [As an app developer, you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=258) [going to run into a number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=260) [different hardware subsystems in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=261) [your app development process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=263) [But there are four subsystems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=265) [that we think on the Power Team](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=266) [will contribute most highly to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=268) [your energy consumption.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=269) [These are as listed here;](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=271) [processing, networking,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=274) [location, and graphics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=276) [Let's run through these and try](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=278) [to understand what they mean.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=280) [Processing is what you might](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=283) [imagine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=284) [It's going to be the energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=286) [consumed when your app utilizes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=287) [system resources on, let's say,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=289) [the SOC.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=290) [Such as DRAM, CPU, etcetera.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=291) [It's really the workhorse](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=295) [component.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=296) [Energy consumed here is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=297) [be highly dependent on the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=299) [be highly dependent on the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=299) [that your app is executing and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=301) [the workload that you've asked](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=302) [your app to perform.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=303) [So, in a nutshell, the more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=306) [operations and code your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=307) [executes, the more energy it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=309) [will consume in the form of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=310) [processing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=312) [Networking is the next major](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=314) [subsystem that we think about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=316) [when we talk about what consumes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=317) [energy on our devices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=318) [Networking energy is what you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=322) [might imagine.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=323) [Whenever your app asks to do any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=324) [form of networking over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=326) [cellular, Wi-Fi, and Bluetooth,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=327) [it's going to consumer energy in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=330) [the form of networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=331) [This energy is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=334) [traffic-dependent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=335) [The more traffic that your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=336) [asks to be sent over any of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=337) [these technologies, the more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=339) [energy it will consume.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=340) [So, put it bluntly, the more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=341) [network requests that your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=344) [asks for, the more energy you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=346) [consume in networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=347) [Location follows suit but it's a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=350) [little different.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=352) [In a location subsystem, when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=354) [your app asks to fix location](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=356) [using GPS, Wi-Fi, and cellular,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=358) [using GPS, Wi-Fi, and cellular,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=358) [it's going to consume energy in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=361) [the location system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=363) [The location energy is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=365) [be accuracy and frequency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=367) [dependent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=368) [If you're asking to fix a user's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=370) [location with a high degree of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=371) [accuracy and at a very high](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=372) [cadence, you're going to get a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=374) [lot of energy consumed in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=376) [form of location.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=377) [So, putting it all together, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=378) [more time spent tracking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=381) [location in your application,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=383) [the more energy you'll consume](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=384) [as location energy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=386) [Finally, we have graphics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=390) [In the graphics subsystem, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=392) [would imagine that process](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=395) [components such as he GPU and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=396) [the CPU contribute to the energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=398) [consumed by graphics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=400) [This is going to be animations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=402) [and UI dependent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=404) [So, when your app is asking for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=405) [any animations to be displayed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=407) [or any UI to be rendered, it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=408) [going to consume energy in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=410) [form of graphics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=411) [This is highly complexity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=413) [dependent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=415) [The more complex your animations](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=416) [and UI are the more energy that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=418) [and UI are the more energy that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=418) [you'll consume in the form of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=420) [graphics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=421) [Finally, a good rule of thumb is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=423) [to say that the more rendering](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=426) [that your app does, doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=427) [animations or UI, the more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=428) [energy you're going to consume](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=430) [in the form of graphics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=431) [So, we talked about these four](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=433) [subsystems, and what's the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=436) [take-away message?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=438) [There's a common thread ties](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=439) [them all together in our app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=441) [development, and so that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=442) [more work you do, the more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=444) [energy you're going to consume.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=445) [We can't necessarily say do less](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=446) [work because that means our app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=449) [might do less.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=451) [So, then, the point here is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=452) [we need to optimize the work we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=454) [do and make it as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=455) [energy-efficient as possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=456) [But it's not so simple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=458) [Thinking about energy efficiency](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=462) [is a process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=464) [It's not just so that we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=465) [make an optimization and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=466) [suddenly our energy is going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=468) [be more efficient or our app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=469) [going to be better for battery](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=472) [life.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=473) [We have to get into this mode of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=473) [thinking that our app has a set](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=476) [of resources that it's using,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=477) [and we need to use those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=478) [resources efficiently.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=479) [resources efficiently.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=479) [So, with that being said, let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=481) [take a look at some examples of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=484) [real-world situations where we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=485) [can think about energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=487) [efficiency and really start this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=488) [process off.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=490) [Let's talk about when our app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=492) [in the foreground.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=493) [When our app is in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=495) [foreground, it will likely be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=496) [providing the main user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=497) [experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=498) [For many of us, this is the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=499) [important and critical part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=501) [our application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=502) [With that being said, energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=503) [efficiency in the foreground is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=505) [about focusing on providing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=507) [value to your user, ensuring](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=508) [that whatever you're doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=510) [provides some immediate impact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=511) [for the user experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=513) [One tenet we can follow is to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=515) [only do work when required.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=517) [Sounds pretty straightforward.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=520) [Well, let's take a look at an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=522) [example and illustrate why this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=523) [is so important.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=525) [Let's say you're building a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=526) [media application, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=528) [primary goal of the media](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=529) [application is to present](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=530) [content to the user at a regular](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=532) [cadence.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=534) [Well, a really robust solution](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=535) [would be to implement a sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=537) [timer-based approach to refresh](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=539) [timer-based approach to refresh](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=539) [the content feed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=540) [This will ensure that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=541) [content of the user is seeing is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=543) [as fresh as possible without any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=545) [sort of interaction.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=546) [This isn't a very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=549) [energy-efficient approach, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=549) [let's sort of understand why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=552) [If we plot the power over time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=553) [curve for a solution like that,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=556) [we see that every time our timer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=559) [fires, we have a little bit of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=560) [active energy that's consumed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=562) [But the really important part](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=565) [here is that we have a ton of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=566) [overhead, and this is because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=568) [every time we ask to display new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=570) [content, we likely have to bring](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=572) [up subsystems such as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=574) [networking, graphics, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=575) [processing to do all that work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=577) [and display that content, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=578) [the user might not actually want](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=580) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=581) [So, we'll end up burning a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=582) [of energy consistently while](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=583) [that application is running.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=585) [We can do better.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=586) [If we think about what the user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=588) [actually wants, the fresh](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=590) [content, we can implement a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=592) [solution that is on demand.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=593) [Now, in this new solution, user](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=597) [interaction or some kind of a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=599) [interaction or some kind of a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=599) [notification from our server](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=600) [will provide us the new content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=602) [and display it to the user.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=604) [This solution isn't that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=607) [different, but it's an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=608) [energy-efficient approach and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=609) [makes a dramatic impact on our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=611) [power over time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=612) [Let's take a look at why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=614) [Now, if we imaging that our app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=616) [is running in the foreground,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=617) [and a user interaction occurs,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=618) [we would refresh our content](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=620) [feed and display it to the user.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=622) [Then, our app will go idle as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=624) [our user is using it, let's say,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=626) [to scroll or just to read the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=628) [content that's been displayed.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=629) [You'll notice that the overhead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=631) [here is still a little bit high,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=633) [but it's been significantly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=634) [reduced.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=635) [The trick here is that we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=637) [allowed the subsystems we no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=638) [longer need to go to sleep and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=639) [idle off.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=641) [Another tenet that we can follow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=645) [to reduce our energy consumption](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=647) [in the foreground is to minimize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=649) [complex UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=651) [So, I mentioned before that in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=653) [graphics our energy consumption](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=654) [is highly complexity-dependent,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=656) [and we always want to make our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=659) [and we always want to make our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=659) [apps look as good as possible.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=660) [So, we're going to spend a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=661) [of time building this UI that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=663) [looks great and animations that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=664) [are pleasing to view.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=666) [However, this can have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=668) [unintended side effects, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=669) [let's look at an example to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=671) [illustrate why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=672) [If I'm a video player, my goal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=674) [is to let a user watch a video.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=677) [Simple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=680) [But I could be tempted to add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=681) [new controls and UI above that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=682) [video, let's say, in the form of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=684) [related videos or a scrubber or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=686) [maybe volume controls.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=688) [This allows a greater degree of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=690) [control to the user to use this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=692) [application and enjoy the video](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=694) [they're watching.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=695) [This is actually insidiously](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=697) [energy inefficient, and let's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=699) [understand why.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=701) [On many of our devices, there's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=703) [a display optimization in place](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=705) [that allows for video playback](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=707) [to be very energy efficient when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=708) [there is no UI on screen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=710) [This is something that is not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=712) [immediately clear when you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=713) [building an application like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=714) [this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=715) [However, it makes all the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=716) [difference.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=717) [So, a good approach to take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=718) [So, a good approach to take](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=718) [advantage of this optimization](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=721) [and counteract this sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=722) [energy inefficiency we see is to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=723) [have a simple auto dismissal of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=726) [our UI controls.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=729) [And this could mean that any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=731) [related content that we put on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=733) [the video or in the UI layer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=735) [simply goes away if the user is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=737) [not interacting with it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=738) [This makes a big difference on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=740) [our energy consumption during](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=742) [video playback, as this display](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=743) [optimization is critical for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=745) [maintaining quiescent](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=747) [energy-efficient playback.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=748) [So, we've talked a lot about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=750) [foreground, but what about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=754) [background?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=756) [Many of us who are building](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=757) [applications such as music](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=758) [players, or maybe even alarm](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=759) [clocks, are focused on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=760) [background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=762) [Our main experience comes from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=763) [our app running effectively in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=764) [the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=766) [Well, when we're in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=768) [background, we have some things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=769) [that we need to be aware of.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=771) [Likely, our app is going to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=773) [running in conjunction and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=774) [concurrently with other systems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=775) [on device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=777) [Let's say I'll be using iMessage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=778) [Let's say I'll be using iMessage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=778) [or maybe even Facetime.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=780) [To that end, we should focus on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=782) [minimizing our workload to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=784) [ensure energy efficiency when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=786) [we're in the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=787) [Well, this is a pretty broad](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=789) [statement.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=791) [So, let's kind of try to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=791) [understand it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=792) [When you're in the background,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=794) [you may be able to utilize](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=796) [subsystems that are already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=797) [being used by other apps on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=798) [system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=799) [However, it's important to note](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=800) [that the majority of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=802) [priority for the energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=803) [consumption is going to go to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=804) [those applications that are in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=805) [the foreground.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=806) [So, then, we should focus on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=808) [minimizing our workload to make](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=810) [sure we don't interrupt those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=811) [experiences.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=812) [One way we can start thinking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=814) [about this is to coalesce all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=815) [our tasks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=817) [If there's a lot of maintenance](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=818) [work, let's say, that we need to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=820) [do in the background, or we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=821) [a lot of networking activity](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=822) [that needs to be performed,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=823) [let's say, then it would be best](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=825) [for us to group those together](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=826) [and do them all at the same](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=827) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=829) [That way, we have the minimal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=830) [impact on anything else](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=831) [happening on the system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=832) [A really common example that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=833) [many of you may face is to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=836) [upload analytics and working](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=837) [with application analytics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=839) [with application analytics.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=839) [It's likely that when you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=841) [collecting these analytics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=842) [you'll be sending them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=844) [immediately because this is a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=844) [very robust solution, and it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=846) [allows you to build a dataset](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=847) [that is protected against](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=849) [crashes in your application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=850) [Well, doing that may not be very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=852) [energy efficient.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=854) [If we were to send our analytics](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=855) [every time we went into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=857) [background, we would risk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=858) [overusing our networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=859) [hardware.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=860) [And here's how that looks like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=861) [when we take a look at the power](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=863) [over time curve.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=864) [Every time we enter the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=866) [background, we would spin up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=867) [networking resources to send](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=868) [these analytics, and then we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=870) [would come down and go idle](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=871) [again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=872) [This may not look like a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=874) [with just three on this graph,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=875) [but you can imagine if your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=877) [application is experiencing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=878) [heavy usage, this adds up over](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=879) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=881) [The right way to do this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=883) [super straightforward, and it's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=885) [simply to send these in deferred](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=888) [batches.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=889) [We have a lot of APIs that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=890) [support this coalescing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=892) [principle, and one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=894) [biggest ones is NSURLSession.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=895) [Using NSURLSession with a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=897) [discretionary property and a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=899) [discretionary property and a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=899) [background session will enable](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=900) [you to take advantage of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=902) [sort of an optimization very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=903) [quickly,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=905) [and this is the right way to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=906) [it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=910) [Let's take a look at what the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=910) [energy over time looks like now,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=912) [if we've done this.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=914) [We can see here that while it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=915) [might take a little longer for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=918) [our app to do any sort of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=920) [uploading for analytics, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=921) [energy that we're going to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=923) [consume is going to be far less,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=924) [and it's going to be condensed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=926) [to one single burst.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=927) [This is effectively the result](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=929) [of coalescing any tasks when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=931) [you're running in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=933) [background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=933) [You get a high energy for a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=935) [short period of time completing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=936) [those tasks, but then once](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=938) [you're finished you no longer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=939) [have to worry about doing those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=940) [tasks and potentially](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=941) [interrupting an experience of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=942) [another application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=944) [Another example that seems sort](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=947) [of straightforward is to end](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=949) [your tasks quickly.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=950) [With many APIs on the system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=952) [that allow you to take advantage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=954) [of background running, things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=955) [like UI background task and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=957) [UIKit, or VOIP and PushKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=958) [UIKit, or VOIP and PushKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=958) [And these APIs have ways for you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=960) [as an app developer to indicate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=964) [that you no longer need to run](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=966) [in the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=967) [So, it stands to reason that as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=971) [an app developer, if you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=972) [using any of these background](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=973) [modes, you would call these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=974) [completion handlers, let's say,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=976) [to let the system know you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=978) [done.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=978) [Well, that doesn't always](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=979) [happen, and in a lot of cases,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=981) [we might actually forget or not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=983) [want to end our task.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=985) [So, we let our tasks expire.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=987) [There's a great energy impact to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=990) [this, and it's really something](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=992) [that people don't necessarily](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=995) [see when they're developing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=997) [their application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=998) [Let me demonstrate why this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1000) [energy inefficient with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1001) [power over time curve.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1002) [You could imagine if you enter](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1004) [the background for any reason](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1005) [and your task starts, you finish](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1007) [some time afterwards.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1008) [Then, if we let our task expire,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1010) [as we've said, we enter this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1012) [sort of idle phase where you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1014) [consuming energy and our app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1015) [running in the background for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1017) [whatever reason we've asked our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1018) [whatever reason we've asked our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1018) [API for, but there's not really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1020) [much else happening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1021) [And then, we have a long tail of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1023) [overhead because we've kept the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1024) [system awake and subsystems we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1026) [thought they needed to be using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1028) [their own resources are now](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1030) [waiting for us to finish.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1032) [The quick solution to this is to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1033) [simply call your completion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1037) [handlers whenever they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1038) [available.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1040) [And as I mentioned, UI](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1041) [background task is one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1043) [biggest ones.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1045) [When we enter the background](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1045) [from the foreground, we can call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1047) [this API and UIKit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1048) [If we don't let our system know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1050) [that we don't need, if we let](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1051) [our system know that we don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1053) [need to do any work anymore, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1054) [save a lot of energy and allow](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1055) [hardware systems to go idle when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1057) [they need to go idle.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1059) [Here's what that looks like if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1061) [we call these completion](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1062) [handlers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1063) [You could see here that the tail](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1065) [of active energy that we saw](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1066) [before is gone, and now we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1067) [greatly reduced our tail of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1069) [overhead as well.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1070) [A simple solution, but it has a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1072) [big impact on your overall](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1074) [energy consumption.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1076) [So, we've talked about some ways](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1081) [that we can start thinking about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1083) [energy efficiency as a process.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1084) [If we focus on optimizing the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1086) [work we do in all of our use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1088) [cases, we can really work on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1089) [optimizing the energy that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1092) [application consumes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1093) [For a deeper dive into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1094) [things we talked about and to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1097) [maybe get a little bit more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1098) [hands-on with the code behind](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1099) [some of these optimizations we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1101) [discussed, I really recommend](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1102) [that you check out our video](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1104) [from last year, How to write](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1105) [energy-efficient apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1106) [In that session, you'll find](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1108) [that there are a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1109) [interesting resources and more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1110) [examples on how you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1112) [energy-efficient designs in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1114) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1115) [So, now that we've talked about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1120) [some ways that we can improve](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1122) [energy efficiency in the design](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1123) [of our application, and we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1124) [spent a lot of time talking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1126) [about ways that we can improve](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1128) [our energy efficiency through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1130) [thinking about the hardware](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1131) [systems behind our application,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1133) [what are the ways that we can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1135) [quantify this?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1136) [Let's say we've made a change,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1137) [and we want to understand the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1139) [and we want to understand the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1139) [real impact in our application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1140) [Well, right now, let's talk](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1143) [about some tools that we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1144) [available for you today to do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1145) [that sort of work.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1146) [Today, we have two tools](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1150) [available that you can use to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1151) [quantify your energy impact.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1152) [The first tool is the energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1155) [gauges, which are accessible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1156) [directly through the Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1158) [debugger.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1159) [The energy gauges are a great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1160) [way for you to rapidly iterate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1161) [on your codes energy consumption](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1163) [and to help you understand at a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1164) [very high level where your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1166) [energy consumption is going by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1168) [subsystem.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1169) [And then, if the gauges aren't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1170) [good enough, you can jump right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1172) [into the instruments from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1174) [Developer Toolkit.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1175) [The instruments will allow you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1177) [to do a deeper dive into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1178) [various subsystems on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1179) [device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1180) [And understand at a lower level](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1181) [how these actual subsystems are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1183) [performing and what they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1185) [doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1186) [Let's take a look at the energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1187) [gauges first.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1189) [As I said, these are accessible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1191) [directly through the Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1193) [Debugger UI, so they're pretty](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1194) [easy to use.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1196) [Let's jump into the UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1198) [As you can see, we've selected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1200) [the row that says energy impact,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1201) [and now we have this main area](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1202) [in the UI that's composed of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1204) [three major sections.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1205) [On the top left, we have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1207) [canonical gauges themselves.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1208) [These gauges range from low,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1211) [high, and very high, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1214) [represent the average energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1215) [impact of your app at an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1217) [instantaneous moment.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1218) [It's important to know that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1220) [where the gauge actually falls](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1222) [doesn't necessarily mean good or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1223) [bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1225) [It means that whatever your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1226) [is doing, it's consuming this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1227) [much relative amount of energy.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1229) [It's important because it's up](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1231) [to you as an app developer to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1233) [think about your use case and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1235) [whether or not you would expect](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1236) [it to do that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1237) [To the right of that, we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1239) [the average component](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1241) [utilization, and this is going](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1242) [to be a pie chart that shows you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1244) [all of the different components](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1246) [relative to the total amount of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1247) [energy that you're consuming,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1249) [what percentage those components](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1251) [are consuming.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1252) [This is really useful because](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1254) [it's representative of those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1255) [subsystems we talked about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1256) [earlier, and it helps to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1257) [identify if you have an excess](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1258) [identify if you have an excess](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1258) [amount of overhead or maybe if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1260) [one component is taking too much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1262) [energy, and you don't expect it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1263) [And then, immediately below](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1265) [that, building off of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1268) [average component utilization](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1269) [chart, we have a time series](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1270) [that represents the average](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1273) [utilization of each component as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1275) [your app is running in real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1277) [time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1277) [We could also see here that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1278) [have the state that your app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1280) [actually running in, foreground](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1282) [and background, and also it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1283) [would list suspended.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1285) [This is a really awesome tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1287) [for understanding how your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1288) [is behaving in real time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1289) [So, as I said, the energy gauges](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1291) [are really great for doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1294) [high-level characterization work](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1297) [and rapid profiling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1299) [That's the key.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1301) [When you're iterating on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1302) [code, you're trying to get](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1303) [something to work as an app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1304) [developer, and you're trying to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1305) [put something together, it may](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1306) [not seem immediately clear how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1308) [you could really think about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1309) [energy, but the gauges are a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1310) [great way to start.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1312) [But let's say that you've done](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1315) [that and the gauges aren't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1316) [really enough for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1317) [That's where the instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1318) [That's where the instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1318) [come in, and directly through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1320) [the energy gauge's UI, we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1322) [access to three instruments that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1324) [we think best correlate to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1326) [subsystems we talked about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1327) [before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1328) [These include the time profile,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1330) [the network profiler, and the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1333) [location profiler, and if you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1335) [were to click through into any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1337) [of these from the energy gauge's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1338) [UI, you would be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1340) [transfer your current debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1341) [session into any of those](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1342) [instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1344) [Let's take a look at one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1345) [instruments here, the Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1347) [Profiler, and try to understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1349) [the UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1351) [Now, the instruments have a very](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1353) [standard UI, but what's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1354) [interesting about it is that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1357) [it's very useable.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1358) [And let's take a look.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1360) [Here, we can see the Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1362) [Profiler UI, and on the top, you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1363) [see a bar that's representative](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1366) [of the different controls that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1368) [you have of the actual](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1368) [instruments.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1370) [On the top left, ou can see you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1371) [have a Play and Pause button as](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1372) [well as your target that you're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1373) [using to profile.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1375) [And then, on the right, you see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1376) [a plus button that allows you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1378) [very quickly drag and drop other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1379) [very quickly drag and drop other](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1379) [instruments into you profiling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1381) [pane, which can be found here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1383) [And now, this profiling pane](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1386) [actually allows you to see what](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1387) [instruments are running and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1388) [currently profiling your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1389) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1390) [Here, since we're using a Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1392) [Profiler, we see the CPU usage](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1393) [and a graphical representation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1395) [of how much CPU usage is being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1397) [consumed over time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1398) [Directly below that, we have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1401) [weighted call graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1402) [Since we're using the Time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1404) [Profiler, we're trying to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1405) [understand how our CPU is being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1405) [used by the application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1408) [To that end, there's a weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1410) [call graph that allows you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1411) [see exactly what is being called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1412) [in your application and how much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1414) [weight it has on CPU time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1415) [And then, directly to the right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1418) [of that, you have a summation of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1420) [the heaviest stacked race in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1422) [your application that basically](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1423) [says what is the heaviest stack](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1425) [during this profiling run?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1427) [There are a lot of other great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1430) [instruments that you can use,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1432) [and here are some of them now.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1434) [This means that the instruments](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1438) [are really great for a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1439) [are really great for a couple of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1439) [things.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1441) [The first thing is that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1442) [instruments are really great for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1443) [root cause analysis.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1444) [Let's say you have a problem in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1446) [a specific subsystem, so just](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1447) [processing or networking.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1448) [You would be able to identify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1450) [pretty rapidly what that problem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1452) [might be using the Time Profiler](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1454) [or the Network Profiler.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1456) [The instruments are also really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1458) [great for doing in-depth](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1459) [profiling of your application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1461) [If you implement a CPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1463) [efficiency improvement of some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1465) [kind; let's say you cut down the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1467) [time that it takes for an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1468) [algorithm to execute, the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1469) [instruments are a really good](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1471) [way to understand if that's the,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1472) [if the intended effect of your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1474) [optimization is going through on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1476) [that subsystem.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1478) [But there's also one more thing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1479) [that the instruments are really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1481) [awesome for that I haven't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1482) [talked about today, and that's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1484) [untethered profiling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1486) [There's a single instrument that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1488) [you can use called the Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1489) [Log, which allows you to do an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1491) [untethered profiling run on a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1492) [provision device while using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1495) [your application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1497) [It's accessible directly to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1498) [developer settings, and when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1499) [developer settings, and when you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1499) [start running it, you can use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1502) [your phone as you normally would](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1503) [and use your application as you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1504) [might expect for any number of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1505) [use cases.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1506) [And then, afterwards, when](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1508) [you're finished, you can stop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1509) [the recording directly from the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1510) [developer tools and jump into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1511) [Instruments and upload that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1512) [trace.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1514) [This is really useful for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1515) [understanding if there are any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1516) [environmental problems that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1517) [you're having that might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1518) [impacting your energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1519) [consumption.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1520) [Now, we've talked about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1520) [tools; we've talked about the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1523) [concepts; now, I want to do a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1525) [demo and work through an example](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1527) [about how we can actually use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1529) [these in tandem and solve energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1531) [problems and make our app more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1532) [energy efficient.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1533) [So, today, we've prepared a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1539) [simple game called Energy Game,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1540) [which draws sprites onscreen and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1542) [allows the application to inject](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1544) [a number of bugs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1546) [It's a very simple application](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1547) [that we've built, and it only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1549) [has an app delegate in a View](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1550) [Controller, but the primary](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1551) [purpose is to show you how to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1552) [use our tools rapidly to iterate](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1553) [through your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1556) [So, I'm going to go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1557) [build Energy Game here through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1559) [build Energy Game here through](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1559) [the Xcode UI and let it run.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1561) [Then, you'll see on the right](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1564) [side that all it really does is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1565) [draw a little little battery](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1567) [sprite at a random time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1568) [There it is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1570) [Very simple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1571) [If I jump straight into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1573) [Xcode debugger and jump to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1575) [energy impact, now, I can see my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1576) [gauges.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1578) [And so this is the UI that we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1579) [just talked about.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1582) [It's the same three areas that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1583) [we discussed, and you could see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1585) [right now that all my app is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1586) [doing that we've designed it to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1588) [do is just placed some sprites](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1590) [onscreen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1592) [But you notice that I'm doing](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1593) [networking, and my overhead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1595) [seems to be high for simply no](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1596) [reason.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1598) [Well, this is because we're also](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1599) [doing a little bit of networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1600) [and uploading the spike count](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1602) [every time a new spike is drawn](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1604) [onscreen.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1605) [And so, through the Xcode energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1606) [gauges, you can actually see the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1608) [impact of doing that.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1609) [So, I'm going to go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1611) [stop this now and jump into my](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1613) [code to understand where this is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1615) [coming from.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1617) [So, if I go to my View](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1618) [So, if I go to my View](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1618) [controller, where I actually add](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1620) [a new sprite, I've had a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1622) [function here to upload the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1623) [sprite count, which creates a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1624) [simple connection object and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1625) [uploads the sprite count every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1627) [time a new sprite is added.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1629) [I'm going to go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1630) [comment the cell and then jump](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1631) [into my app delegate and move it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1633) [to the only upload the sprite](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1636) [account when I'm in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1637) [background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1638) [And for the sake of this demo,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1639) [I've named that my networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1641) [optimization.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1642) [I'm going to go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1644) [rebuild Energy Game and show you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1644) [the effect this has on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1647) [energy gauges.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1648) [Now, Energy Game is running](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1651) [again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1653) [I'm going to jump back to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1653) [Xcode Debugger UI, jump back to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1655) [Energy Impact, and now we don't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1657) [see any networking energy, and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1661) [we don't see any overhead, which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1662) [is good.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1664) [So, that's simple optimization,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1665) [simply moving a networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1667) [request from one area to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1668) [other and preventing it from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1670) [happening often allowed us to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1671) [greatly reduce our energy impact](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1674) [in our quiescent use case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1676) [So, now, I'm going to go ahead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1678) [So, now, I'm going to go ahead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1678) [and inject a bug and try to see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1681) [how we can see a bug when we use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1682) [Xcode energy gauges.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1684) [Bug1 is a simple bug that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1686) [can see on the bottom left here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1688) [that will essentially cause a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1690) [CPU spin in the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1691) [This is a case that many of us](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1693) [might face in regular and real](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1694) [world development.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1695) [I'm going to go ahead and inject](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1697) [this bug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1698) [And now that I've injected it,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1699) [I'm going to background Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1701) [Game, and as you can see in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1703) [Energy Gauge's UI, we transfer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1705) [to the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1706) [We do a little bit of networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1708) [because I moved that networking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1709) [call to the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1710) [But now, we also see that our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1712) [CPU is going wild.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1713) [So, this is the power of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1715) [gauges.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1718) [We've now, we know that we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1719) [injecting a bug, but we can see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1720) [that bug directly in the gauges.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1721) [So, now, to find the root cause,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1724) [I'm going to go ahead and jump](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1725) [into the Time Profiler and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1726) [transfer my debug session, as we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1727) [discussed before.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1728) [So, now, I transferred my debug](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1733) [session, and it will begin](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1735) [running automatically.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1736) [And as you see, the weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1737) [And as you see, the weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1737) [cobra apples start populating in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1740) [a moment; here, we can see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1743) [the dispatched thread here is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1748) [consuming the most CPU time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1749) [Let's go ahead and dig into it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1751) [And we can see that we have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1752) [closure at something called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1756) [appdelegate.compute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1757) [Well, let's jump back to our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1760) [application and try to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1761) [understand what that is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1762) [So, for the purpose of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1769) [demo, when we entered the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1770) [background in Energy Game, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1772) [called something called](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1774) [computation.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1774) [Computation is a really terrible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1776) [function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1780) [It basically starts spinning](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1781) [wildly with a while true loop](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1784) [when we inject Big1.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1786) [So, it's very simple for the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1788) [purpose of this demo, but using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1789) [both the gauges and the time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1791) [profiler, we were able to dig](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1792) [back directly to where this was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1793) [happening, and we can see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1795) [this while true loop is not](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1797) [good.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1799) [So, I'll go ahead and comment](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1800) [this out because I love](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1801) [commenting out code instead of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1804) [deleting it, and I'll go ahead](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1805) [and rebuild Energy Game.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1808) [We'll just jump back into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1813) [gauges to see that everything is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1814) [okay, and now we'll go ahead and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1815) [inject Bug1 again, and I'll go](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1822) [to the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1824) [And we see our expected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1829) [networking activity but no CPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1830) [spin.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1832) [Voila! We've solved it, using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1833) [two tools in about 30 seconds or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1835) [a minute.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1838) [That's the power of these tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1839) [They're able to let you rapidly](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1841) [iterate and root cause problems](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1842) [that you might face on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1843) [day-to-day development.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1845) [So, let's go back to the slides.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1846) [So, there's some takeaways from](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1854) [this demo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1856) [The first takeaway is that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1858) [gauges, as we said, are great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1859) [gauges, as we said, are great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1859) [for rapid iteration.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1861) [They allow you to quickly see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1862) [where your problem might be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1864) [happening, and they allow you to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1865) [take the next step in figuring](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1867) [out how to solve it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1868) [The second takeaway is that the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1871) [instruments are great for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1873) [in-depth profiling.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1875) [And finally, the third takeaway](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1876) [is that we want you to think](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1880) [about energy efficiency as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1881) [primary objective in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1883) [application development.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1884) [We have powerful tools available](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1886) [for you to quickly understand](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1887) [where your energy is going and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1889) [to root cause problems that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1890) [might be energy related.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1891) [So, let's say you've done all of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1893) [that, and you've shipped your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1895) [application.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1896) [From the App Store it's getting](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1897) [used; all your customers are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1899) [greatly thankful that you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1900) [shipped it on time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1902) [What's next?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1903) [Let's say you still see](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1905) [customers saying that your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1906) [is bad for battery life.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1907) [What sort of recourse do you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1908) [have?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1910) [Well, now, I'm going to pass it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1911) [on to my colleague, David, who's](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1913) [going to talk to you about how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1914) [you can face those challenges](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1916) [and solve them using our new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1917) [tools.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1918) [David.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1919) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1920) [&gt;&gt; Good afternoon.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1925) [Hi, I'm David, and I'm here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1926) [today to talk about some new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1928) [great tools for energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1930) [debugging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1932) [If you're an iOS developer with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1933) [an app in the App Store, or in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1938) [TestFlight, then this part of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1939) [the talk is for you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1941) [I'd like to start with the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1943) [following question, now that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1944) [you've shipped your app, how do](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1946) [you know how our app is doing in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1948) [the wild?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1949) [In other words, how do you know](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1951) [if your customers are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1954) [experiencing energy issues that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1955) [are leading to bad battery life?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1957) [Now, a customer may leave a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1958) [review on the App Store, saying,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1961) ["My battery went down a lot](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1963) [while using this app."](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1965) [But they might not be able to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1968) [tell you what happened.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1969) [Or even worse, they may delete](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1971) [your app and not leave any](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1973) [feedback at all.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1974) [So, it can be challenging to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1976) [find out if you have energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1978) [find out if you have energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1978) [issues in the wild.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1980) [And even if you know that there](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1981) [are energy issues, how do you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1983) [debug an issue that occurred on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1986) [your customer device?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1988) [You can make use of tools like](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1989) [instruments and gauges that Phil](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1993) [talked about, but unless you](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1994) [know what to test for, it can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1996) [challenging to reproduce.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=1998) [There can be environmental](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2001) [factors such as poor Wi-Fi](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2002) [conditions that occurred for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2004) [your customer whereas on your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2006) [desk, you have great Wi-Fi](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2008) [conditions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2010) [So, these are some really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2011) [challenging questions.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2013) [So, to help answer these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2015) [questions, I'm excited today to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2018) [talk about a new way of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2020) [debugging energy issues using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2022) [Xcode Energy Logs and Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2026) [Energy Organizer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2028) [First, I'll talk about Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2030) [Energy Logs, which is a new way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2032) [of reporting energy issues on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2034) [device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2036) [Later, I'll cover Xcode Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2037) [Organizer, which is a new tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2039) [Organizer, which is a new tool](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2039) [for viewing Energy Logs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2041) [With these tools, for the first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2043) [time ever, you'll have the data](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2046) [that you need to find and to fix](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2047) [energy issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2052) [So, let's get started.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2053) [Xcode Energy Logs are a new way](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2055) [of reporting issues from device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2058) [We start with high CPU energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2060) [events, which is when your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2063) [is using lots of CPU.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2065) [Each Energy Log will have a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2068) [weighted call graph, which will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2069) [point out the energy hotspots](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2071) [within your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2073) [These logs will be made](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2075) [available from TestFlight and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2076) [the App Store, so you'll have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2078) [real world data, what's actually](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2079) [happening with your customers.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2081) [And with these logs, you'll be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2084) [able to begin improving the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2085) [battery life experience.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2086) [Let's talk about when an Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2088) [Energy Log is generated.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2091) [Let's say your customer is using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2094) [your app, which starts to put a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2096) [really heavy load on the CPU.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2097) [This can be natural, depending](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2100) [on what your app is doing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2102) [Well, let's say it's putting a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2104) [really heavy load on the CPU for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2105) [a long time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2107) [This causes a high CPU energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2109) [event to be detected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2114) [Now, there are two key](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2115) [thresholds that are checked for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2118) [for a high CPU energy event.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2121) [The first threshold is when your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2123) [app is spinning 80% CPU for more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2124) [than three minutes while in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2127) [foreground, and the second](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2129) [threshold is more than 80% CPU](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2130) [for more than one minute while](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2134) [in the background.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2135) [In this latter case, your app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2137) [may actually get killed to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2138) [prevent runaway background](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2140) [usage.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2141) [Each instance of a CPU Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2144) [Log indicates that your app uses](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2147) [so much CPU that it was worth](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2149) [flagging.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2151) [What this means in practical](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2152) [terms is that it was responsible](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2153) [for up to a 1% battery drop in a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2156) [typical case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2159) [typical case.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2159) [Now, you may be saying to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2161) [yourself, 1% battery doesn't](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2163) [sound too bad.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2164) [But to put this in context, on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2167) [an iPhone 6S with an additional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2169) [1% battery, your user could have](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2172) [had eight minutes of additional](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2174) [talk time or six minutes of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2176) [additional browsing or 30](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2179) [minutes of additional music.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2181) [And if your app continues to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2184) [burn at this rate, the battery](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2185) [would have dropped even more.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2188) [So, writing CPU-efficient apps](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2190) [is really important, and your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2192) [users will notice.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2194) [An Energy Log has three things](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2196) [that can help you figure out](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2199) [what has happened.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2201) [First is the context by which](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2202) [what happened that triggered the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2204) [report.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2206) [For example, it will say that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2207) [your app spent for 8% over three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2209) [minutes.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2212) [The second piece of information](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2213) [is the metadata about where the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2215) [Energy Log was created; for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2217) [example, on an iPhone versus an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2219) [example, on an iPhone versus an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2219) [iPad and on, say, Build 30 of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2220) [you app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2223) [The third and most important](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2225) [piece of information is the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2226) [weighted call graph that will](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2228) [show you the energy hotspots in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2229) [your code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2231) [So, let's talk a little bit more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2232) [about the weighted call graph,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2234) [how it was generated, and how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2236) [you can use it to debug energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2237) [issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2239) [Let's say your program is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2243) [comprised of a main function and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2244) [a number of methods, Method 1,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2246) [Method 2, Method 3, and Method](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2248) [4.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2250) [Your code begins to execute](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2251) [until a high CPU energy event is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2255) [detected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2257) [Up to this point, backtraces are](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2258) [continuously sampled at a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2262) [periodic interval of once per](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2264) [second, where each backtrace is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2266) [a sample of an active frames in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2269) [execution.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2273) [The first backtrace, for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2275) [example, shows that main Method](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2277) [1 and Method 2 were active.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2279) [1 and Method 2 were active.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2279) [The second backtrace shows that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2283) [main Method 3 and Method 4 were](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2285) [active and so on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2290) [Now, we can try to combine these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2297) [backtraces together to form an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2299) [overall picture.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2301) [What we see here is a weight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2303) [call graph, and this weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2304) [call graph is really useful.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2307) [Here, we can see that main was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2309) [present in six out of the six](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2311) [samples that we collected,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2312) [meaning that main was running](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2315) [100% of the time.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2316) [Of that, we see that Method 1](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2319) [had five samples whereas Method](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2321) [3 had only one sample.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2323) [And within Method 1, we see that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2325) [Method 2 and Method 3 had three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2328) [samples and one sample](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2331) [respectively.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2332) [So, this gives us an overall](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2334) [picture of where the code was](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2336) [being executed and how much time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2338) [being executed and how much time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2338) [was being spent.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2340) [So, when an Energy Log is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2344) [created, there's a collection of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2346) [periodic backtraces sampled at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2348) [one per second.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2350) [For each backtrace contains a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2352) [list of the active frames being](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2355) [executed by the CPU, these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2357) [backtraces are aggregated by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2360) [sample count into a tree where](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2361) [the samples, where more samples](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2364) [mean more heavily executed code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2367) [And you can use these weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2370) [call graphs to identify](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2371) [unexpected workloads in your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2373) [app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2375) [So, now that we know what an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2377) [Energy Log is, how do we access](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2378) [them?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2380) [First, Energy Logs are created](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2382) [on device.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2384) [Then, your beta testers and your](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2386) [customers, who have opted in,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2388) [will upload these logs up to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2390) [Apple.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2393) [Now, there might be hundreds or](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2394) [even thousands of these logs, so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2395) [we will aggregate these logs for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2398) [we will aggregate these logs for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2398) [you, sort them, and present them](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2401) [in a list of top energy issues](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2403) [to you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2405) [And you can download and view](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2407) [these logs using the new Xcode](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2408) [Energy Organizer tool.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2411) [The Xcode Energy Organizer is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2412) [your command center for](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2416) [debugging energy issues in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2417) [wild.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2419) [Energy Organizer makes it really](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2421) [easy to view energy logs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2423) [The Energy Organizer is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2426) [connected to TestFlight in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2427) [App Store, so you'll see a list](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2429) [of all your iOS apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2431) [You'll be able to see some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2432) [statistics of how often these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2436) [energy issues occur in the wild.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2438) [You'll have a list of the top](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2440) [energy issues sorted by how many](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2443) [devices that was impacted.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2445) [You'll have a view of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2446) [weighted call graph for a number](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2449) [of different logs, which you'll](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2451) [be able to page through, using](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2452) [page through logs, and you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2454) [use Open in Project to jump](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2458) [directly into your code base so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2459) [directly into your code base so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2459) [you can begin debugging these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2461) [energy issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2462) [And now, I'd love to show you a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2463) [demo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2464) [Now, I've made sure that I've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2475) [signed into my developer account](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2476) [and that I've uploaded our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2479) [Energy Game app up to TestFlight](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2480) [in the App Store.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2483) [To bring up the Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2485) [Organizer, I could just go into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2485) [Window here, and click](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2487) [Organizer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2491) [And this is the Energy Organizer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2495) [UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2497) [I make sure that the Energy tab](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2497) [is selected at the top, and if](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2500) [you've used the Crashes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2503) [Organizer, you will already be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2504) [familiar with this UI.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2506) [On the left, we have a list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2507) [all of our apps.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2510) [Next to that, we have a list of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2512) [our top energy issues.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2513) [In the center is our Weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2516) [Call Graph, and on the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2517) [right-hand side are some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2519) [right-hand side are some](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2519) [statistics about the energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2521) [issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2523) [So, let's go ahead into the left](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2524) [here and select Energy Game,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2526) [which is the game that we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2529) [working on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2530) [And then, make sure that we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2531) [on the correct build.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2533) [We see here a list of our top](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2539) [energy issues, sorted by how](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2541) [many times it's affected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2543) [Let's jump into this first](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2545) [energy issue, which hit 64 of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2548) [our devices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2551) [On the right-hand pane here, we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2556) [have some more details about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2558) [what happened, as well as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2559) [breakdown of how often that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2562) [energy issue happened, and we](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2563) [can see that it happened across](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2565) [a mix of iPads, iPods, and iPod](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2567) [Touches, and we can see a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2569) [distribution of how often it](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2571) [happened in the past two weeks.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2573) [Let's take a look at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2575) [weighted call graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2577) [We see that a lot of time is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2578) [We see that a lot of time is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2578) [being spent in this dispatch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2583) [call block calling into this app](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2585) [delegate computation function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2587) [Now, I can use this button here](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2589) [to jump us directly into our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2593) [code base.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2596) [So, we are back directly into](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2601) [our code.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2603) [On the left here is one of the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2605) [sample backtraces from our](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2607) [weighted call graph.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2608) [We can see that we're spending a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2610) [lot of time in this computation](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2613) [function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2615) [Now, this is the very function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2616) [that Phil was talking about](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2620) [earlier on his demo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2621) [And we can see that he's already](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2629) [commented this part of the code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2632) [out, so he's already addressed](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2633) [this energy issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2634) [So, let's jump back to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2635) [organizer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2635) [I can go ahead and click this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2644) [button here and mark this issue](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2645) [as resolved.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2648) [And what this does is the next](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2650) [time we open the Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2651) [Organizer, we'll see that we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2652) [already taken care of this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2654) [issue.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2655) [All right, let's jump to the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2656) [second issue, which hit 42](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2658) [devices.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2660) [Now, before going into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2661) [weighted call graph, I'd like to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2663) [draw your attention to three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2664) [features at the bottom here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2666) [First is this page through logs](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2669) [where I can select one out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2673) [five sample energy logs out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2675) [the 42 that we've hit in the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2677) [wild.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2678) [As I page through these, you can](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2678) [see that the weighted call graph](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2684) [looks a little bit different,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2686) [which is okay because these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2688) [backtraces and these weighted](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2690) [call graphs are samples.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2691) [However, we've grouped these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2694) [together by similarity, so these](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2695) [logs should look fairly similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2698) [logs should look fairly similar](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2698) [to you.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2700) [This button here, when I click](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2702) [it, shows that all the system](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2705) [library frames that were hidden](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2708) [previously.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2710) [And this button here clicks all,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2711) [shows you all the frames that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2715) [had low sample counts.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2717) [Now, by default, we've hidden](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2719) [most of these frames for you so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2721) [that we only show you the most](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2724) [important frames.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2725) [Let's take a look at this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2734) [function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2735) [It looks like a lot of time is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2738) [being spent in this heavy timer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2739) [function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2741) [Actually, I heard Phil talking](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2743) [about this bug off stage, and he](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2744) [said that he was going to take a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2746) [look at it, so I'll let him deal](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2747) [with it.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2748) [I can go ahead and rename this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2750) [and move on to the next bug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2756) [Let's take a look at one more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2759) [Let's take a look at one more](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2759) [bug.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2760) [Here, I can see there's a lot of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2773) [time being spent in set next](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2775) [update timer and add new sprite.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2777) [What is this function?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2779) [Let's investigate.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2781) [I'll jump directly into the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2785) [code,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2786) [and I can see that a lot of time](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2796) [is being spent in this add new](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2798) [sprite function.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2800) [Okay.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2802) [Adding new sprites can be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2803) [expensive, but the question to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2804) [ask ourselves is, is this an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2806) [expected workload?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2809) [And the answer is, in this case,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2811) [not really because we only](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2813) [expect to be adding sprites once](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2815) [every few seconds.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2817) [So it doesn't quite make sense](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2819) [So it doesn't quite make sense](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2819) [why this is chewing up so much](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2821) [CPU.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2822) [Let's take a look at the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2823) [backtrace to see who is calling](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2824) [us.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2827) [We're being called by set next](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2827) [update timer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2830) [So, what is this function doing?](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2832) [We see that within set next](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2838) [update timer, we're calling in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2839) [to this add new sprite.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2841) [At the end of a function, we're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2842) [calling in to this update timer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2845) [to schedule the next time this](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2848) [function is called.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2850) [This timer is set to fire](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2853) [sometime between now and next](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2854) [update interval.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2857) [Now, next update interval is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2860) [decremented by 1 until it hits](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2862) [0, and then it's re-initialized](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2864) [according to this line of code](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2868) [here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2870) [Now, here's where the problem](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2872) [is.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2873) [Time interval since last update](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2875) [date can potentially be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2877) [negative, and we've seen cases](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2879) [negative, and we've seen cases](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2879) [of this happening, especially](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2882) [when users try to game the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2883) [system.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2885) [Maybe they're playing a game,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2887) [and they want to reset the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2889) [clock.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2890) [Maybe they want some extra lives](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2891) [or some extra chances, so they](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2893) [go into System Settings and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2894) [change the clock to 24 hours](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2896) [ago.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2898) [Well, in this case, this causes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2899) [next update interval to be](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2901) [negative, and when we schedule a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2903) [timer for a time that is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2905) [sometime in the past, that timer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2907) [will fire immediately and then](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2909) [call itself again and again.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2912) [So, we effectively have an](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2915) [infinite loop here.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2916) [Fortunately, this is really easy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2919) [to fix.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2921) [We just go into this function](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2922) [here and change this to less](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2924) [than or equal to 0 so that even](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2926) [if next update interval is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2929) [negative, we can break out of](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2930) [the loop.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2932) [Now, this is a really great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2933) [example of an energy issue that](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2935) [is really difficult to catch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2938) [is really difficult to catch](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2938) [during normal testing but is](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2942) [made obvious once you have the](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2944) [data from the field.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2946) [That's the power of Energy Logs,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2947) [and that's the power of Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2951) [Organizer.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2952) [Let's take a look at the three](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2954) [key takeaways from this demo.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2955) [You can use the Energy Organizer](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2957) [to discover top energy issues in](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2960) [the field.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2962) [Take a look at the top issues,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2964) [take a look at how often they're](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2966) [happening, and take a look at](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2967) [what kind of devices and builds](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2969) [are affected.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2971) [Second, you can view energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2972) [hotspots using the weighted call](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2975) [graphs.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2977) [So, look out for the frames with](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2978) [unusually high sample counts,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2980) [and watch out for the unexpected](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2982) [workloads.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2984) [Finally, use OpenEnd Project to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2985) [jump directly into your code so](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2989) [you can make and inspect fixes](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2991) [with what's going on.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2995) [Let's summarize what we've](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2997) [learned today.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=2999) [First, think about energy use](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3003) [and treat energy as a](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3005) [first-class citizen in every](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3006) [aspect of your design,](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3008) [development, and testing.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3010) [Second, make use of the great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3013) [tools like energy gauges and](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3014) [instruments to profile your app.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3017) [And third, take a moment to](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3021) [explore the new Xcode Energy](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3023) [Organizer to understand and fix](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3025) [energy issues in the field.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3027) [For more information, please](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3031) [come check out the following](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3032) [URLs, and feel free to come by](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3034) [the Power and Performance Lab on](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3037) [Friday from 9 to 11.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3039) [Thank you and have a great](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3041) [evening.](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3042) [[ Applause ]](https://developer.apple.com/videos/wwdc2018/videos/play/wwdc2018/228/?time=3043)