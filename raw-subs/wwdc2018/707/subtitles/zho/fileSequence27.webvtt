WEBVTT
X-TIMESTAMP-MAP=MPEGTS:181083,LOCAL:00:00:00.000

00:26:59.916 --> 00:27:00.556 A:middle
在主队列上调度

00:27:00.796 --> 00:27:02.606 A:middle
如果 session 正在运行

00:27:03.076 --> 00:27:04.256 A:middle
我会启动计时器

00:27:04.966 --> 00:27:06.116 A:middle
如果不在运行

00:27:06.116 --> 00:27:07.336 A:middle
我就停止计时器

00:27:08.696 --> 00:27:09.966 A:middle
这是你所需要做的

00:27:09.966 --> 00:27:12.176 A:middle
让计时器追踪已用时长的

00:27:12.176 --> 00:27:13.786 A:middle
全部事情

00:27:13.986 --> 00:27:15.826 A:middle
接下来 我们来确保

00:27:15.826 --> 00:27:17.566 A:middle
我们在 UI 上展示的所有指标

00:27:18.016 --> 00:27:19.036 A:middle
也是准确的

00:27:19.986 --> 00:27:22.246 A:middle
所以每次 builder 收集到

00:27:22.246 --> 00:27:24.976 A:middle
新的样本数据

00:27:25.016 --> 00:27:26.746 A:middle
这里的这个方法会被调用

00:27:27.506 --> 00:27:29.366 A:middle
那么这里 我也只需要

00:27:29.366 --> 00:27:31.016 A:middle
重复这里的

00:27:31.046 --> 00:27:31.946 A:middle
collectedTypes

00:27:36.396 --> 00:27:39.016 A:middle
而且 在我的例子中 所有我需要的

00:27:39.016 --> 00:27:41.006 A:middle
数据都是

00:27:41.236 --> 00:27:42.336 A:middle
数量型样本

00:27:42.416 --> 00:27:44.236 A:middle
所以我要确保我

00:27:44.236 --> 00:27:45.476 A:middle
只处理这些

00:27:46.006 --> 00:27:49.276 A:middle
从这里 我们可以利用

00:27:49.276 --> 00:27:53.226 A:middle
针对数量数据的 builder 的新方法

00:27:53.636 --> 00:27:55.886 A:middle
builder.statistics

00:27:55.886 --> 00:27:57.566 A:middle
它会返回给我一个

00:27:57.566 --> 00:27:59.856 A:middle
HKStatistics 对象

00:27:59.886 --> 00:28:01.336 A:middle
包含了每个数据类型的最小值

